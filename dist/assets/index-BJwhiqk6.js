import{i as Zs,g as fs,a as Xs,r as s,o as Qs,j as e,c as Ks,s as Qe,u as Le,b as ea,L as ne,N as sa,P as pe,d as V,e as Re,f as ae,q as we,w as De,h as Ee,k as Pe,l as Z,m as oe,n as qe,p as ge,t as Ve,v as Me,x as Ie,C as Ns,y as vs,z as ys,A as ws,B as aa,D as Cs,E as Ss,F as ta,G as _s,H as ks,I as Es,J as Ke,K as Fs,M as Ds,S as ia,O as Xe,Q as je,R as Ge,T as fe,U as Se,V as ra,W as la,X as de,Y as na}from"./vendor-vi_RhOx1.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();const oa={apiKey:"AIzaSyDtO6GisGJP6gtbtTz3Gmdz0cGyp-id46w",authDomain:"tics-cc-2024.firebaseapp.com",projectId:"tics-cc-2024",storageBucket:"tics-cc-2024.appspot.com",messagingSenderId:"345093255804",appId:"1:345093255804:web:9c763d8852934fef7a8ff9"},es=Zs(oa),We=fs(es),I=Xs(es),Ae=s.createContext(),ca=({children:a})=>{const[r,t]=s.useState(null),[c,i]=s.useState(!0);return s.useEffect(()=>{const l=localStorage.getItem("user");l&&(t(JSON.parse(l)),i(!1));const o=Qs(We,n=>{if(n){const m={email:n.email};localStorage.setItem("user",JSON.stringify(m)),t(m)}else localStorage.removeItem("user"),t(null);i(!1)});return()=>o()},[]),e.jsx(Ae.Provider,{value:{currentUser:r,loading:c},children:a})},Ps=()=>s.useContext(Ae),re=()=>e.jsxs("div",{className:"spinner-overlay",children:[" ",e.jsx("div",{className:"spinner"})," "]});function da({setIsLogin:a}){const r=fs(es),[t,c]=s.useState(""),[i,l]=s.useState(!1),[o,n]=s.useState(""),[m,x]=s.useState("");function h(u){const b=["gmail.com","hotmail.com","outlook.com","live.com","msn.com","santafe.gov.ar"],d=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,f=u.split("@")[1];return d.test(u)&&b.includes(f)}function N(u){return u.length>=6}async function g(u){if(u.preventDefault(),!h(o)){c("Por favor, utiliza un correo válido de Gmail o Microsoft (Outlook, Hotmail, Live, Santa fe ).");return}if(!N(m)){c("La contraseña debe tener al menos 6 caracteres.");return}l(!0);try{const d=(await Ks(r,o,m)).user;console.log("Registro exitoso:",d),alert("Registro exitoso"),n(""),x(""),c(""),await Qe(r),console.log("Sesión cerrada después del registro."),a(!0)}catch(b){v(b)}finally{l(!1)}}function v(u){switch(u.code){case"auth/email-already-in-use":c("La dirección de correo electrónico ya está en uso.");break;case"auth/invalid-email":c("Tu dirección de correo electrónico no es válida.");break;case"auth/weak-password":c("Tu contraseña es muy débil - debe tener al menos 6 caracteres.");break;default:c("Oooops, algo salió mal :(")}}return e.jsxs(e.Fragment,{children:[i&&e.jsx(re,{}),e.jsxs("form",{action:"#!",id:"registerForm",className:"form-container",onSubmit:g,children:[e.jsxs("div",{className:"row gy-3 gy-md-4 overflow-hidden",children:[e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"registerEmail",className:"form-label text-capitalize",children:["Ingresa tu correo electrónico ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",id:"registerEmail",name:"email",className:"form-control",value:o,onChange:u=>n(u.target.value),placeholder:"",autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"registerPassword",className:"form-label text-capitalize",children:["Ingresa tu Contraseña ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"password",id:"registerPassword",name:"password",className:"form-control text-capitalize",value:m,onChange:u=>x(u.target.value),autoComplete:"off",required:!0})]}),t&&e.jsx("span",{className:"error text-danger",role:"alert","aria-live":"assertive",children:t}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"d-grid",children:e.jsx("button",{className:"btn btn-purpleUi fw-semibold fs-6 rounded-3 shadow",type:"submit",id:"submitBtnRegistrar",disabled:i,children:"Registrar usuario"})})})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("hr",{className:"mt-5 mb-4 border-secondary-subtle"}),e.jsxs("div",{className:"d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-end",children:[e.jsxs("span",{className:"dropdown-item opacity-75 btn text-capitalize",type:"button","data-bs-toggle":"modal","data-bs-target":"#usuarioCsvModal",children:["Crear Usuarios CSV ",e.jsx("i",{className:"bi bi-filetype-svg"})]}),e.jsx("button",{type:"button",className:"btn text-pink fs-6 rounded-3 text-capitalize",onClick:()=>a(!0),children:"Regresar"})]})]})})]})]})}function ma({setIsLogin:a}){const{currentUser:r,loading:t}=s.useContext(Ae),c=Le(),[i,l]=s.useState(""),[o,n]=s.useState(""),[m,x]=s.useState(""),[h,N]=s.useState(!1);s.useEffect(()=>{r&&setTimeout(()=>{c("/dashboard")},1e3)},[r,c]);const g=async b=>{if(b.preventDefault(),!i||!o){x("Por favor, complete todos los campos.");return}if(!v(i)){x("Por favor, ingrese un correo electrónico válido.");return}if(o.length<6){x("La contraseña debe tener al menos 6 caracteres.");return}N(!0);try{const f=(await ea(We,i,o)).user;alert(`Inicio de sesión exitoso. Bienvenido ${f.email}`)}catch(d){u(d)}finally{N(!1)}};function v(b){const d=["gmail.com","hotmail.com","outlook.com","live.com","msn.com","santafe.gov.ar"],f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,S=b.split("@")[1];return f.test(b)&&d.includes(S)}const u=b=>{switch(b.code){case"auth/wrong-password":x("La contraseña es incorrecta.");break;case"auth/user-not-found":x("No hay usuario registrado con este correo.");break;case"auth/invalid-email":x("El correo electrónico no es válido.");break;default:x("Oooops, algo salió mal :(")}};return e.jsxs("form",{onSubmit:g,className:"form-container",children:[h&&e.jsx(re,{}),e.jsxs("div",{className:"row gy-3 gy-md-4 overflow-hidden",children:[e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"username",className:"form-label",children:["Usuario ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",id:"username",className:"form-control",name:"username",value:i,onChange:b=>l(b.target.value),placeholder:"",autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"password",className:"form-label",children:["Contraseña ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"password",id:"password",className:"form-control",name:"password",value:o,onChange:b=>n(b.target.value),autoComplete:"off",required:!0})]}),e.jsx("div",{className:"col-12",children:m&&e.jsx("span",{className:"error text-danger",children:m})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"d-grid",children:e.jsx("button",{className:"btn btn-purpleUi fw-semibold fs-6 rounded-3 shadow",type:"submit",disabled:h,children:h?"Cargando...":"Iniciar sesión"})})})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("hr",{className:"mt-5 mb-4 border-secondary-subtle"}),e.jsxs("div",{className:"d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-end",children:[e.jsx("button",{type:"button",className:"btn fs-6 rounded-3",onClick:()=>a(!1),children:"Crear Cuenta"}),e.jsx("button",{type:"button",className:"btn fs-6 rounded-3 disabled",children:"Iniciar sesión con Google"}),e.jsx("button",{type:"button",className:"link-secondary text-decoration-none d-none",children:"¿Olvidaste la clave?"})]})]})})]})}const ua=()=>{const[a,r]=s.useState(!0);return e.jsxs("section",{className:"d-flex justify-content-center align-items-center vh-100",children:[" ",e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card border-light-subtle shadow-sm",children:[" ",e.jsxs("div",{className:"row g-0 ",children:[" ",e.jsxs("div",{className:"col-12 col-md-6 text-bg-login shadow linear-gradient-login rounded-start ",children:[" ",e.jsxs("div",{className:"row d-flex align-items-center justify-content-center h-100",children:[e.jsxs("div",{className:"col-sm-3 text-center animate__animated animate__fadeIn",children:[" ",e.jsx("img",{className:"pt-5",loading:"lazy",src:"/img/marca-fondo-blanco-2024.png",width:"120",height:"90",alt:""})]}),e.jsxs("div",{className:"col-9 col-xl-8 py-5 text-center animate__animated animate__fadeInDown",children:[" ",e.jsx("h1",{className:"fs-2 p-3"}),e.jsx("hr",{className:"border-light-subtle mb-4 border-2"}),e.jsx("span",{className:"fs-1",children:"Sistema "}),e.jsx("h1",{children:"Cx2 -  2025"}),e.jsx("hr",{className:"border-light-subtle mb-4 border-2"})]}),e.jsx("p",{className:"text-center fs-5 animate__animated animate__fadeIn",children:"Policía de la Provincia de Santa Fe"})," "]})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[" ",e.jsxs("div",{className:"card-body p-3 p-md-4 p-xl-5",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-5 text-center",children:[e.jsx("span",{className:"fs-2 animate__animated animate__flip",id:"formTitle",children:a?"Iniciar Sesión":"Crear Cuenta"})," "]})})}),a?e.jsx(ma,{setIsLogin:r}):e.jsx(da,{setIsLogin:r})]})]})]})]})})]})};function ha(){return e.jsx("div",{id:"loginShowDivId",className:"d-flex justify-content-center align-items-center h-100",style:{minHeight:"100vh"},children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"login-rectangulo w-100",children:e.jsxs("div",{className:"login-texto-p p-5",children:[e.jsx("p",{className:"login-texto-p-parrafo1 lh-1 pt-5 text-white m-0",children:"Santa Fe"}),e.jsx("p",{className:"login-texto-p-parrafo2 lh-1 text-white m-0",children:"Provincia"})]})})})})}const xa=()=>{const[a,r]=s.useState(!0);return s.useEffect(()=>{const t=setTimeout(()=>{r(!1)},3e3);return()=>clearTimeout(t)},[]),e.jsx(e.Fragment,{children:a?e.jsx(ha,{}):e.jsx("div",{className:"container-lg",id:"homeContainer",children:e.jsx(ua,{})})})},ba=()=>e.jsx("div",{className:"bg-primary Gradiante25 min-vh-100 d-flex justify-content-center align-items-center text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("h1",{className:"display-4 fw-bold",children:"Bienvenido a Santa Fe"}),e.jsx("p",{className:"lead",children:"Descubrí todo lo que nuestra provincia tiene para ofrecer, ¡explorá nuestras funcionalidades y novedades!"}),e.jsx(ne,{to:"/about",className:"btn btn-outline-light mt-3",children:"Saber más"})]})}),me=({children:a})=>{const{currentUser:r,loading:t}=Ps();return t?e.jsx(re,{}):r?a:e.jsx(sa,{to:"/"})},pa=()=>e.jsx("div",{className:"container-fluid d-flex align-items-center justify-content-center text-center py-5 bg-white",style:{height:"100vh"},children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-capitalize text-secondary fs-1 fw-semibold",children:"Error 404"}),e.jsx("h5",{className:"text-capitalize text-secondary",children:"La página solicitada no funciona"}),e.jsx("img",{src:"/gif/dribbble_1.gif",alt:"error",className:"img-fluid my-3",style:{maxHeight:"700px"}})]})}),Ne=({element:a,element2:r,element3:t})=>e.jsxs("div",{className:"container-lg titulo-espaciado text-end  mb-4 text-capitalize text-secondary fs-3 fw-semibold ",children:[e.jsxs("h5",{children:[e.jsxs("span",{children:["  ",a," "]}),"   | ",e.jsx("span",{className:"textG fs-4 animate__animated animate__flash",children:r})," ",e.jsx("i",{className:`${t} px-2`})," "]}),e.jsx("hr",{className:"color-gradient opacity-50 p-0"})," "]});Ne.propTypes={element:pe.string.isRequired,element2:pe.string.isRequired,element3:pe.string.isRequired};const As=()=>{const{currentUser:a}=s.useContext(Ae);return e.jsx("div",{children:a?e.jsxs("span",{children:[a.email,"  "]}):e.jsx("span",{children:"No hay usuario activo"})})},ss=()=>{const{currentUser:a}=s.useContext(Ae),r=Le(),[t,c]=s.useState(!1),i=async()=>{try{await Qe(We),r("/")}catch(n){console.error("Error al cerrar sesión:",n)}};s.useEffect(()=>{},[a]);const l=()=>{c(!0)},o=()=>{c(!1)};return a&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:l,className:"btn text-secondaryMuiRed fw-semibold",children:"Cerrar Sesión"}),e.jsx("div",{className:`modal bg-dark fade ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:"-1","aria-labelledby":"logoutModalLabel","aria-hidden":!t,children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content   border border-white",children:[e.jsxs("div",{className:"modal-header bg-danger ",children:[e.jsx("h5",{className:"modal-title text-white  ",id:"logoutModalLabel",children:"Confirmar Cierre de Sesión"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:o,"aria-label":"Close"})]}),e.jsx("hr",{className:"border border-secondaryMuiRed border-2 opacity-50 m-0 mb-4"}),e.jsx("div",{className:"modal-body text-center  fw-semibold text-uppercase lh-lg",children:"¿Está seguro de que desea cerrar sesión?"}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:o,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-redUi1 text-white",onClick:()=>{i(),o()},children:"Cerrar Sesión"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})};function Fe(){const[a,r]=s.useState(0),[t,c]=s.useState(()=>{const i=localStorage.getItem("leidas");return i?JSON.parse(i):{}});return s.useEffect(()=>{const i=V(I,"db_notificaciones"),l=Re(i,o=>{const m=o.docs.map(x=>({id:x.id,...x.data()})).filter(x=>!t[x.id]);r(m.length)});return()=>l()},[t]),a===0?null:e.jsx(e.Fragment,{children:a>99?"99+":a})}const ja=({toggleRendimiento:a})=>{const[r,t]=s.useState({personalEntrega:[],salidasArtUsuarioMap:[]});s.useEffect(()=>{(async()=>{const o=(await ae(V(I,"db_art_diez_bis_desactivados"))).docs.map(n=>n.data());c(o)})()},[]);const c=i=>{const l={},o={};i.forEach(x=>{x.personal_entrega.forEach(h=>{const N=h.nombre.split(" ")[0],g=`${h.ni} - ${N}`;l[g]=(l[g]||0)+1}),x.salida_art_usuario&&(o[x.salida_art_usuario]=(o[x.salida_art_usuario]||0)+1)});const n=Object.entries(l).map(([x,h])=>({key:x,value:h})).sort((x,h)=>h.value-x.value),m=Object.entries(o).map(([x,h])=>({usuario:x,cantidad:h})).sort((x,h)=>h.cantidad-x.cantidad);t({personalEntrega:n,salidasArtUsuarioMap:m})};return e.jsxs("div",{className:"container ",children:[e.jsx("div",{className:"modal-header border border-0 p-1 m-1 text-white",children:e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:a})}),e.jsx("div",{className:"card ",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center  bg-primary text-white rounded p-2",children:["Rendimiento en Personal Entrega ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Posición"}),e.jsx("th",{scope:"col",children:"Personal"}),e.jsx("th",{scope:"col",children:"Distinción"})]})}),e.jsx("tbody",{children:r.personalEntrega.length>0?r.personalEntrega.map(({key:i,value:l},o)=>e.jsxs("tr",{className:o===0?"table-warning":"",children:[e.jsx("td",{children:o===0?"👑 1":o===1?"🥈 2":o===2?"🥉 3":o+1}),e.jsx("td",{children:i}),e.jsx("td",{children:o===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):o===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):o===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},i)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay datos disponibles"})})})]})]})})]})},ga=({notif:a})=>e.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center my-2 py-3 shadow",children:[e.jsxs("div",{children:[e.jsx("i",{className:"bi bi-person-arms-up me-3 text-primary"}),e.jsx("strong",{children:a.nombre_apellido||"Nombre desconocido"}),e.jsxs("span",{children:[" - ",a.dni||"DNI no disponible"]})]}),e.jsx("span",{className:"badge bg-primary",children:a.comisaria||"Sin fecha"})]}),fa=({toggleBusqueda:a})=>{const[r,t]=s.useState([]),[c,i]=s.useState([]),[l,o]=s.useState(""),[n,m]=s.useState(!1),x=async()=>{try{m(!0);const N=we(V(I,"db_art_diez_bis"),De("visualidad","==",!0)),v=(await ae(N)).docs.map(u=>({id:u.id,...u.data()}));t(v),i(v)}catch(N){console.error("Error al obtener las notificaciones: ",N)}finally{m(!1)}};s.useEffect(()=>{x()},[]),s.useEffect(()=>{const N=r.filter(g=>g.nombre_apellido&&g.nombre_apellido.toLowerCase().includes(l.toLowerCase())||g.dni&&g.dni.toString().includes(l));i(N)},[l,r]);const h=()=>{o("")};return e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"modal-header border border-0  text-white m-0 p-0",children:e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:a})}),e.jsxs("h5",{className:"text-center  bg-primary text-white rounded p-1 mt-3 ",children:["Buscar Persona ",e.jsx("i",{className:"ms-2 bi bi-search"})]}),e.jsxs("div",{className:"input-group mb-4",children:[e.jsx("span",{className:"input-group-text bg-blueW",children:e.jsx("i",{className:"bi bi-search text-primary "})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar por DNI o nombre...",value:l,onChange:N=>o(N.target.value)}),l&&e.jsx("button",{className:"btn btn-outline-pink bg-secondaryMuiRed",onClick:h,"aria-label":"Limpiar búsqueda",children:e.jsx("i",{className:"bi bi-trash3-fill text-white"})})]}),n?e.jsx("div",{className:"text-center my-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsx("ul",{className:"list-group",children:c.length>0?c.map(N=>e.jsx(ga,{notif:N},N.id)):e.jsx("li",{className:"list-group-item text-center text-danger",children:l?`No se encontraron resultados para "${l}"`:"No hay notificaciones disponibles"})})]})},Na=({togglePlazas:a})=>{const[r,t]=s.useState([]),[c,i]=s.useState([]),[l,o]=s.useState([]),[n,m]=s.useState("nombre"),x=async()=>{try{const d=(await ae(V(I,"db_comisarias"))).docs.map(f=>({id:f.id,...f.data()})).filter(f=>f.disponibilidad===!0);t(d)}catch(b){console.error("Error al obtener las comisarías: ",b)}},h=async()=>{try{const d=(await ae(V(I,"db_art_diez_bis"))).docs.map(w=>({id:w.id,...w.data()})),f=d.filter(w=>w.visualidad===!0&&w.comisaria_recibe===!0),S=d.filter(w=>w.visualidad===!1&&w.comisaria_recibe===!1);i(f),o(S)}catch(b){console.error("Error al obtener las notificaciones: ",b)}};s.useEffect(()=>{x(),h()},[]);const N=c.reduce((b,d)=>{const f=d.comisaria;return f&&(b[f]=(b[f]||0)+1),b},{}),g=l.reduce((b,d)=>{const f=d.comisaria;return f&&(b[f]=(b[f]||0)+1),b},{}),v=b=>{const d=r.find(f=>f.comisaria===b);if(d){const f=d.plazas_art_10_bis||0;return(N[b]||0)>=f?{estado:"Llena",clase:"badge bg-danger"}:{estado:"Disponible",clase:"badge bg-info"}}return{estado:"Desconocido",clase:"badge bg-secondary"}},u=()=>n==="nombre"?[...r].sort((b,d)=>b.comisaria.localeCompare(d.comisaria)):n==="plaza"?[...r].sort((b,d)=>(d.plazas_art_10_bis||0)-(b.plazas_art_10_bis||0)):r;return e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"modal-header border border-0 p-0 m-0 text-white",children:e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:a})}),e.jsxs("h5",{className:"text-center mb-4 bg-primary text-white rounded p-1 mt-3",children:["Plazas Art 10 Bis ",e.jsx("i",{className:"ms-2 bi bi-shield-lock"})]}),e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select",id:"filtroOrden",value:n,onChange:b=>m(b.target.value),"aria-label":"Ordenar por",children:[e.jsx("option",{value:"nombre",children:"Nombre (A-Z)"}),e.jsx("option",{value:"plaza",children:"Plazas Disponibles"})]}),e.jsx("label",{htmlFor:"filtroOrden",children:"Ordenar por"})]}),e.jsx("div",{className:"list-group",children:u().map(b=>{const{estado:d,clase:f}=v(b.comisaria),S=N[b.comisaria]||0,w=g[b.comisaria]||0;return e.jsx("div",{className:"list-group-item mb-3 shadow",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary",style:{fontSize:"1.5rem"}}),e.jsxs("div",{children:[e.jsx("strong",{children:b.comisaria}),e.jsxs("div",{children:[e.jsx("small",{className:f,children:`${S} / ${b.plazas_art_10_bis||0} Plazas - ${d}`}),e.jsx("div",{children:e.jsx("small",{className:"badge bg-primary",children:`${w} Pendientes ( Por Validar )`})})]})]})]})},b.comisaria)})})]})},va=({showModal:a,closeModal:r})=>{const t={Rosario:["Comisaria 1ra. - Sección Centro","Comisaria 2da. - Sección Puerto Norte","Comisaria 3ra. - Sección Tucuman","Comisaria 4ta. - Sección Echesortu","Comisaria 5ta. - Sección Pichincha","Comisaria 6ta. - Sección Zona Sur","Comisaria 7ma. - Sección La Florida","Comisaria 8va. - Sección Zona Oeste"]},c=["CRE Rosario","CRE Baigorria","BOU","BOP","AUOP","MOTORIZADA","CGI","PAT","CYP","VIAL","PUMAS","OTROS"],[i,l]=s.useState("Rosario"),[o,n]=s.useState(""),[m,x]=s.useState(""),[h,N]=s.useState(""),[g,v]=s.useState(""),[u,b]=s.useState(""),[d,f]=s.useState(""),[S,w]=s.useState(""),[y,_]=s.useState(!1),p=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,[j,C]=s.useState([]),[F,E]=s.useState(""),[k,M]=s.useState(""),[L,B]=s.useState([]),K=new Date().toLocaleString(),H=A=>p.test(A),J=()=>{if(!H(h)){f("El nombre y apellido solo deben contener letras y espacios.");return}if(g.length!==8||isNaN(g)){w("El DNI debe ser un número de 8 caracteres.");return}B([...L,{nombreApellido:h,dni:g}]),N(""),v(""),f("")},ie=()=>{if(k.length!==6||isNaN(k)){w("El NI debe ser un número de 6 caracteres.");return}if(!H(F)){w("El nombre no debe contener números.");return}C([...j,{nombre:F,ni:k}]),E(""),M(""),w("")},ce=async A=>{if(A.preventDefault(),!o){b("Por favor, selecciona una comisaría.");return}if(!m){b("Por favor, selecciona una unidad.");return}if(L.length===0){b("Debes agregar al menos una persona.");return}if(j.length===0){b("Debes agregar al menos una persona para la entrega.");return}if(!window.confirm("¿Estás seguro de que deseas agregar Art. 10 Bis?")){alert("La operación fue cancelada.");return}b(""),_(!0);try{const se=JSON.parse(localStorage.getItem("user"));for(let te=0;te<L.length;te++){const le=L[te];await Ee(V(I,"db_art_diez_bis"),{nombre_apellido:le.nombreApellido,dni:le.dni,selectedLocalidad:i,comisaria:o.split(".")[0].trim(),unidad:m,timestamp:K,usuario:(se==null?void 0:se.email)||"Usuario desconocido",visualidad:!1,comisaria_recibe:!1,personal_entrega:j})}alert("Se agregaron las personas con Art. 10 Bis."),N(""),v(""),n(""),x(""),l("Rosario"),C([]),r()}catch(se){console.error("Error al enviar notificación: ",se),b("Error al enviar la notificación. Inténtalo de nuevo.")}finally{_(!1)}},U=A=>{const T=L.filter((se,te)=>te!==A);B(T)},ee=A=>{const T=j.filter((se,te)=>te!==A);C(T)};return a?e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{className:"modal-title text-center fw-semibold text-white",children:"Agregar Persona - Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:r})]}),e.jsx("div",{className:"modal-body",children:e.jsx("form",{onSubmit:ce,children:e.jsxs("div",{className:"container ",children:[e.jsxs("div",{className:"mb-3 text-center",children:[u&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),u]}),d&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),d]}),S&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar"}),S]})]}),e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-primary fw-semibold shadow-sm text-white py-2 rounded",children:"Agregar personas 10 Bis"}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${d&&!p.test(h)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:h,onChange:A=>N(A.target.value)}),e.jsx("label",{htmlFor:"nombreApellido",children:"Nombre y Apellido"}),d&&!p.test(h)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${d&&(g.length!==8||isNaN(Number(g)))?"is-invalid":""}`,maxLength:"8",placeholder:"DNI",value:g,onChange:A=>v(A.target.value.replace(/[^\d]/g,""))}),e.jsx("label",{htmlFor:"dni",children:"DNI"}),d&&(g.length!==8||isNaN(Number(g)))&&e.jsx("div",{className:"invalid-feedback",children:"El DNI debe ser un número de hasta 8 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-primary shadow-sm rounded-circle",onClick:()=>J(),children:"+"})})]}),L.map((A,T)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 "}),A.nombreApellido," - ",A.dni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>U(T),children:e.jsx("i",{className:"bi bi-trash"})})]},T)),e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-pink fw-semibold shadow-sm text-white py-2 rounded",children:"Dependencia Destino"}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("select",{className:`form-select ${u&&!i?"is-invalid":""}`,value:i,onChange:A=>l(A.target.value),children:e.jsx("option",{value:"Rosario",children:"Rosario"})}),e.jsx("label",{htmlFor:"localidad",children:"Localidad"}),u&&!i&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una localidad."})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:`form-select ${u&&!o?"is-invalid":""}`,value:o,onChange:A=>n(A.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar Comisaría"}),(t[i]||[]).map(A=>e.jsx("option",{value:A,children:A},A))]}),e.jsx("label",{htmlFor:"comisaria",children:"Comisaría"}),u&&!o&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una comisaría."})]})})]}),e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-blue fw-semibold shadow-sm text-white py-2 rounded",children:"Unidad Procede a la Entrega"}),e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{id:"unidad",className:`form-select ${u&&!m?"is-invalid":""}`,value:m,onChange:A=>x(A.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar Unidad"}),c.map(A=>e.jsx("option",{value:A,children:A},A))]}),e.jsx("label",{htmlFor:"unidad",children:"Unidad Procede a la Entrega"}),u&&!m&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una unidad."})]})]}),e.jsxs("div",{className:"mb-3 text-center mt-4",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-secondaryM fw-semibold shadow-sm text-white py-2 rounded",children:"Mi Unidad de Trabajo"}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${S&&!p.test(F)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:F,onChange:A=>E(A.target.value)}),e.jsx("label",{htmlFor:"nombreEntrega",children:"Nombre y Apellido"}),S&&!p.test(F)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${S&&(k.length!==6||isNaN(k))?"is-invalid":""}`,placeholder:"N.I",maxLength:"6",value:k,onChange:A=>M(A.target.value)}),e.jsx("label",{htmlFor:"niEntrega",children:"N.I"}),S&&(k.length!==6||isNaN(k))&&e.jsx("div",{className:"invalid-feedback",children:"El N.I debe ser un número de 6 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-primary shadow-sm rounded-circle",onClick:()=>ie(),children:"+"})})]}),j.map((A,T)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light mt-3",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 "}),A.nombre," - ",A.ni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>ee(T),children:e.jsx("i",{className:"bi bi-trash"})})]},T))]}),e.jsx("div",{className:"text-center mb-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary shadow",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-arrow-repeat me-2"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"Confirmar"]})})})," "]})})})]})})}):null},ya=({notif:a})=>e.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center my-2 py-3 shadow",children:[e.jsxs("div",{children:[e.jsx("i",{className:"bi bi-person-arms-up me-3 text-primary"}),e.jsx("strong",{children:a.nombre_apellido||"Nombre desconocido"}),e.jsxs("span",{children:[" - ",a.dni||"DNI no disponible"]})]}),e.jsx("span",{className:"badge bg-primary",children:a.comisaria||"Sin fecha"})]}),wa=({toggleBusqueda:a})=>{const[r,t]=s.useState([]),[c,i]=s.useState([]),[l,o]=s.useState(""),[n,m]=s.useState(!1),x=async()=>{try{m(!0);const N=we(V(I,"db_art_diez_bis"),De("visualidad","==",!0)),v=(await ae(N)).docs.map(u=>({id:u.id,...u.data()}));t(v),i(v)}catch(N){console.error("Error al obtener las notificaciones: ",N)}finally{m(!1)}};s.useEffect(()=>{x()},[]),s.useEffect(()=>{const N=r.filter(g=>g.nombre_apellido&&g.nombre_apellido.toLowerCase().includes(l.toLowerCase())||g.dni&&g.dni.toString().includes(l));i(N)},[l,r]);const h=()=>{o("")};return e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"modal-header border border-0 m-0",children:e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:a})}),e.jsxs("h5",{className:"text-center  bg-primary text-white rounded p-2",children:["Ingreso Articulo 10 Bis ",e.jsx("i",{className:"ms-2 bi bi-search"})]}),e.jsxs("div",{className:"input-group mb-4",children:[e.jsx("span",{className:"input-group-text bg-blueW",children:e.jsx("i",{className:"bi bi-search text-primary "})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar por DNI o nombre...",value:l,onChange:N=>o(N.target.value)}),l&&e.jsx("button",{className:"btn btn-outline-pink bg-secondaryMuiRed",onClick:h,"aria-label":"Limpiar búsqueda",children:e.jsx("i",{className:"bi bi-trash3-fill text-white"})})]}),n?e.jsx("div",{className:"text-center my-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsx("ul",{className:"list-group",children:c.length>0?c.map(N=>e.jsx(ya,{notif:N},N.id)):e.jsx("li",{className:"list-group-item text-center text-danger",children:l?`No se encontraron resultados para "${l}"`:"No hay notificaciones disponibles"})})]})},Ca=({comisariaSeleccionada:a,cantidadDemorados:r})=>{const[t,c]=s.useState(!1),i=()=>c(!0),l=()=>c(!1);return!a||!r?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-3 ",children:e.jsxs("button",{className:"btn btn-primary w-100",onClick:i,children:[e.jsx("i",{className:"bi bi-file-earmark-plus-fill me-2"})," Crear Formulario"]})}),t&&e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Formulario de Creación"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Comisaría:"})," ",a]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cantidad de demorados:"})," ",r]}),e.jsx("div",{className:"alert alert-warning",children:"Aquí irá el formulario personalizado."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cerrar"}),e.jsx("button",{className:"btn btn-primary",children:"Guardar Formulario"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Sa=({comisariaSeleccionada:a,cantidadDemorados:r})=>{const t=a&&r>0;return e.jsxs("div",{className:"alert alert-info mt-3",children:[e.jsx("strong",{children:"Resumen de Selección"}),e.jsxs("p",{className:"mb-1",children:["Comisaría Seleccionada:"," ",e.jsx("strong",{children:a?e.jsxs(e.Fragment,{children:[a," ",e.jsx("i",{className:"bi bi-building-fill-check text-primary"})]}):e.jsx("span",{className:"text-pink",children:"Ninguna"})})]}),e.jsxs("p",{className:"mb-0",children:["Cantidad de Demorados:"," ",e.jsx("strong",{children:r?e.jsxs(e.Fragment,{children:[r," ",e.jsx("i",{className:"bi bi-person-add text-primary"})]}):0})]}),t&&e.jsx(Ca,{comisariaSeleccionada:a,cantidadDemorados:r})]})},_a=({togglePlazas:a,cantidadDemorados:r})=>{const[t,c]=s.useState([]),[i,l]=s.useState([]),[o,n]=s.useState([]),[m,x]=s.useState(""),[h,N]=s.useState("nombre"),[g,v]=s.useState(!0);s.useEffect(()=>{u(),b()},[]);const u=async()=>{try{const p=(await ae(V(I,"db_comisarias"))).docs.map(j=>({id:j.id,...j.data()})).filter(j=>j.disponibilidad===!0);c(p),v(!1)}catch(_){console.error("Error al obtener comisarías:",_),v(!1)}},b=async()=>{try{const p=(await ae(V(I,"db_art_diez_bis"))).docs.map(j=>({id:j.id,...j.data()}));l(p.filter(j=>j.visualidad===!0&&j.comisaria_recibe===!0)),n(p.filter(j=>j.visualidad===!1&&j.comisaria_recibe===!1))}catch(_){console.error("Error al obtener notificaciones:",_)}},d=i.reduce((_,p)=>{const j=p.comisaria;return j&&(_[j]=(_[j]||0)+1),_},{}),f=o.reduce((_,p)=>{const j=p.comisaria;return j&&(_[j]=(_[j]||0)+1),_},{}),S=_=>{const p=t.find(j=>j.comisaria===_);if(p){const j=p.plazas_art_10_bis||0,C=d[_]||0,F=j-C;return C>=j?{estado:"Llena",clase:"badge bg-danger"}:{estado:`Disponible (${F} libres)`,clase:"badge bg-secondaryM"}}return{estado:"Desconocido",clase:"badge bg-secondary"}},w=()=>h==="nombre"?[...t].sort((_,p)=>_.comisaria.localeCompare(p.comisaria)):h==="plaza"?[...t].sort((_,p)=>(p.plazas_art_10_bis||0)-(_.plazas_art_10_bis||0)):t,y=_=>r?_.filter(p=>{const j=d[p.comisaria]||0;return(p.plazas_art_10_bis||0)-j>=r}):_;return e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("strong",{children:"Comisarías con plazas disponibles"}),e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:a,children:e.jsx("i",{className:"bi bi-trash3-fill"})})]}),g?e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsxs("div",{className:"list-group",children:[y(w()).map(_=>{const{estado:p,clase:j}=S(_.comisaria),C=d[_.comisaria]||0,F=f[_.comisaria]||0;return e.jsx("div",{className:"list-group-item mb-3 shadow",onClick:()=>{x(_.comisaria)},style:{cursor:"pointer"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary",style:{fontSize:"1.5rem"}}),e.jsxs("div",{children:[e.jsx("strong",{children:_.comisaria}),e.jsxs("div",{children:[e.jsx("small",{className:j,children:`${C} / ${_.plazas_art_10_bis||0} Plazas `}),e.jsx("div",{children:e.jsx("small",{className:"badge bg-primary mt-1",children:`${F} Pendientes (por validar)`})})]})]})]})},_.comisaria)}),e.jsx("div",{className:"container mt-1",children:e.jsx(Sa,{cantidadDemorados:r,comisariaSeleccionada:m})})]})]})},ka=({show:a,onClose:r,onConfirm:t})=>{const[c,i]=s.useState(1),[l,o]=s.useState(!1),[n,m]=s.useState(null);if(!a)return null;const x=()=>{const h=parseInt(c,10);m(h),o(!0)};return e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content ",children:[e.jsxs("div",{className:"modal-header border border-0 bg-primary text-white",children:[e.jsx("h5",{className:"modal-title text-capitalize ",children:"Cantidad de demorados"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:r})]}),"   ",e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text  fw-semibold ",children:"Plaza/s"}),e.jsx("input",{type:"number",className:"form-control text-center",value:c,onChange:h=>i(h.target.value),min:"1",max:"10","aria-describedby":"cantidadAddon","aria-label":"Cantidad"}),e.jsx("button",{className:"btn btn-outline-secondary",type:"button",id:"cantidadAddon",onClick:x,children:"Aceptar"})]}),l&&e.jsx(_a,{togglePlazas:()=>o(!1),cantidadDemorados:n})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancelar"})})]})})})},Ea=({showModal:a,closeModal:r})=>{const[t,c]=s.useState(!1),[i,l]=s.useState(!1),[o,n]=s.useState(!1),[m,x]=s.useState(!1),[h,N]=s.useState(!1),[g,v]=s.useState(!1),[u,b]=s.useState([]),d=Pe(),f=E=>{console.log(`Se demorarán ${E} personas`),c(!1)},S=()=>{l(!1),n(!1),v(!1),N(!1),x(!1),r()},w=()=>N(E=>!E),y=()=>x(E=>!E),_=()=>v(E=>!E),p=()=>n(E=>!E);s.useEffect(()=>{b([{id:"preformulario",component:e.jsx(wa,{togglePreFormulario:p}),visible:o},{id:"busqueda",component:e.jsx(fa,{toggleBusqueda:w}),visible:h},{id:"plazas",component:e.jsx(Na,{togglePlazas:y}),visible:m},{id:"rendimiento",component:e.jsx(ja,{toggleRendimiento:_}),visible:g}])},[h,m,g,o]);const j=(E,k)=>{E.dataTransfer.setData("index",k)},C=(E,k)=>{E.preventDefault();const M=E.dataTransfer.getData("index");if(M!==null){const L=[...u],[B]=L.splice(M,1);L.splice(k,0,B),b(L)}},F=E=>E.preventDefault();return s.useEffect(()=>{if(d.pathname==="/dashboard"){const E=()=>S();return window.history.pushState(null,document.title),window.addEventListener("popstate",E),()=>window.removeEventListener("popstate",E)}},[]),a?e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",role:"dialog",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content bg-blueW2",children:[e.jsxs("div",{className:"modal-header border-0",children:[e.jsxs("h5",{className:"modal-title",id:"modalTitle",children:["Menú Artículo 10 Bis",e.jsx("hr",{className:"color-gradient opacity-50 p-0 m-1"})]}),e.jsx("button",{type:"button",className:"btn-close bg-prima",onClick:S})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"d-grid gap-2 col-8 mx-auto",children:[e.jsxs("button",{className:"btn btn-blue my-2",onClick:()=>{N(!1),v(!1),x(!1),l(!1),c(!0)},children:["Personas 10 Bis ",e.jsx("i",{className:"bi bi-person-lines-fill"})]}),e.jsxs("button",{className:"btn btn-primary my-2",onClick:w,children:[h?"Ocultar Búsqueda":"Búsqueda"," ",e.jsx("i",{className:"bi bi-search mx-1"})]}),e.jsxs("button",{className:"btn btn-primaryMuiBlue text-white my-2",onClick:_,children:[g?"Ocultar Rendimiento":"Rendimiento"," ",e.jsx("i",{className:"bi bi-bar-chart mx-1"})]}),e.jsxs("button",{className:"btn btn-cyan text-white my-2",onClick:y,children:[m?"Ocultar Plazas":"Plazas"," ",e.jsx("i",{className:"bi bi-shield-lock mx-1"})]})]}),e.jsx("div",{className:"mt-3",children:u.map((E,k)=>E.visible?e.jsx("div",{draggable:!0,onDragStart:M=>j(M,k),onDragOver:F,onDrop:M=>C(M,k),className:"mt-3 border p-2 bg-light border-2",style:{cursor:"grab"},children:E.component},E.id):null)}),i&&e.jsx("div",{className:"container my-4",children:e.jsx(va,{showModal:a,closeModal:S})}),e.jsx("div",{className:"container my-4",children:e.jsx(ka,{show:t,onClose:()=>c(!1),onConfirm:f})})]})]})})}):null},Ce=({notificationCount:a=0})=>{const[r,t]=s.useState(!1),c=()=>t(!1);return e.jsxs("nav",{className:"navbar navbar-expand-lg style-navbar-infoUser ",children:[e.jsx("div",{className:"container-lg ",children:e.jsxs("div",{className:"collapse navbar-collapse ",id:"navbarNav",children:[e.jsxs("ul",{className:"navbar-nav me-auto",children:[e.jsx("li",{className:"nav-item d-none d-md-flex",children:e.jsxs(ne,{to:"/dashboard",className:"nav-link d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-house text-white p-1 px-2 rounded shadow me-2 bg-indigoMui "}),e.jsx("span",{className:"mx-2",children:"Inicio"})]})}),e.jsx("li",{className:"nav-item d-flex ",onClick:()=>t(!0),children:e.jsxs(ne,{className:"nav-link d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-file-person text-white p-1 px-2 rounded shadow me-2 bg-blueMui "}),e.jsx("span",{className:"mx-2",children:"Art 10 Bis"})]})}),e.jsx("li",{className:"nav-item d-none d-md-flex position-relative",children:e.jsxs(ne,{to:"/notificaciones",className:"nav-link d-flex align-items-center",children:[e.jsx("i",{className:" btn btn-primary bi bi-bell text-white p-1 px-2 rounded shadow me-2 "}),e.jsx("span",{className:"mx-2",children:"Notificaciones"}),e.jsxs("span",{className:"position-absolute top-1 start-100 translate-middle badge rounded-pill bg-danger",children:[e.jsx(Fe,{notificationCount:a}),e.jsx("span",{className:"visually-hidden",children:"notificaciones"})]})]})})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"pe-3 d-flex align-items-center",children:[e.jsx("img",{src:"img/Perfiles/3.png",alt:"Asistente",style:{width:"50px",height:"40px",objectFit:"contain"},className:"rounded-circle p-0 shadow-sm d-none d-sm-table-cell"}),e.jsx(As,{})]}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsx(ss,{}),e.jsx("i",{className:"bi bi-door-closed text-secondaryMuiRed "})]})]})}),e.jsx(Ea,{showModal:r,closeModal:c})]})},ve=({data1:a,data2:r,data3:t})=>{const c=a||"© 2025 Tics, Inc",i=r||"Cx2",l=t||"Policía de Santa Fe";return e.jsx("div",{className:"container-lg text-center mt-5",children:e.jsxs("footer",{className:"d-flex flex-wrap justify-content-between align-items-center pt-4 my-4 border-top",children:[e.jsx("p",{className:"col-md-4 mb-0 text-body-secondary",children:c}),e.jsx("a",{href:"/",className:"col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none d-none d-md-block","aria-label":"Inicio",children:e.jsx("img",{className:"opacity-50",src:"/img/Escudo Pol SF Color Original_BN.png",width:"35",height:"32",alt:"Escudo Policía Santa Fe"})}),e.jsx("ul",{className:"nav col-md-4 justify-content-center",children:e.jsxs("li",{className:"nav-item",children:[e.jsx("strong",{children:i})," / ",e.jsx("strong",{children:l})," "]})})]})})};ve.propTypes={data1:pe.string,data2:pe.string,data3:pe.string};const Ms=()=>{const[a,r]=s.useState(null);s.useEffect(()=>{const c=i=>{i.preventDefault(),r(i),console.log("Evento beforeinstallprompt capturado.")};return window.addEventListener("beforeinstallprompt",c),()=>{window.removeEventListener("beforeinstallprompt",c)}},[]);const t=async()=>{alert("Recuerda que en dispositivos móviles puedes instalar la app desde el menú (...) -> 'Agregar a la pantalla de principal'."),a&&(a.prompt(),(await a.userChoice).outcome==="accepted"?console.log("El usuario aceptó la instalación."):console.log("El usuario rechazó la instalación."),r(null))};return e.jsx("div",{className:"container-lg text-center py-2 text-capitalize text-secondary fs-3 fw-semibold col-9 col-sm-12 px-4 col-md-12",children:e.jsxs("button",{className:"btn btn-teal text-white border border-white border-5 rounded-pill w-100 mb-4 shadow-sm d-flex align-items-center position-relative",type:"button",onClick:t,children:[e.jsx("span",{className:"bg-light text-teal d-flex justify-content-center align-items-center rounded-circle shadow-lg position-absolute top-50 translate-middle-y start-0 ms-3 border border-5",style:{width:"60px",height:"60px"},children:e.jsx("i",{className:"bi bi-android2 fs-3"})}),e.jsxs("span",{className:"flex-grow-1 text-center fw-semibold",children:[e.jsx("span",{className:"d-none d-md-inline",children:"Instalar App"}),e.jsx("span",{className:"d-inline d-md-none ms-5",children:"Instalar App"})]})]})})},_e=()=>{const a=Le();s.useEffect(()=>{const t=document.getElementById("offcanvasNavbar"),c=()=>{document.body.style.overflow="",document.body.style.paddingRight=""};return t.addEventListener("hide.bs.offcanvas",c),()=>{t.removeEventListener("hide.bs.offcanvas",c)}},[]);const r=t=>{const c=document.getElementById("offcanvasNavbar"),i=bootstrap.Offcanvas.getInstance(c);i&&i.hide(),a(t)};return e.jsx("div",{children:e.jsx("nav",{className:"navbar fixed-top p-1 pt-3",children:e.jsxs("div",{className:"container-lg d-flex align-items-center ",children:[e.jsx(ne,{className:"navbar-brand",to:"/dashboard",children:e.jsx("img",{src:"/img/logo-login-2024.png",height:"35",width:"110",alt:"Logo",className:"m-1"})}),e.jsxs("span",{className:"d-none d-md-block ms-2",children:["|",e.jsx("span",{className:"fw-semibold",children:" Cx2 "})," ",e.jsx("span",{className:"fw-semibold text-orange",children:" - "})," Modulo de Información"]}),e.jsxs("button",{className:"btn btn-pink ms-auto d-flex align-items-center justify-content-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar","aria-label":"Toggle navigation",children:[e.jsx("i",{className:"bi bi-list me-2"}),"Abrir Menú"]}),e.jsxs("div",{className:"offcanvas offcanvas-end ",tabIndex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel",children:[e.jsxs("div",{className:"offcanvas-header d-flex justify-content-center align-items-center",children:[e.jsx("a",{className:"navbar-brand",href:"#",children:e.jsx("img",{src:"/img/logo-login-2024.png",height:"35",width:"110",alt:"Logo"})}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),e.jsx("hr",{className:"color-gradient opacity-50 p-0"}),e.jsx("div",{className:"offcanvas-body",children:e.jsxs("ul",{className:"navbar-nav text-center flex-grow-1 pe-3",children:[e.jsx("li",{className:"nav-item my-2",children:e.jsxs(ne,{className:"nav-link",to:"/dashboard",onClick:()=>r("/dashboard"),children:[e.jsx("i",{className:"bi bi-house text-indigoMui p-1 px-2 rounded shadow me-3 bg-indigoMui2"}),"Inicio"]})}),e.jsx("li",{className:"nav-item my-2",children:e.jsxs(ne,{className:"nav-link position-relative me-2",to:"/notificaciones",onClick:()=>r("/notificaciones"),children:[e.jsx("i",{className:"i bi-bell text-primary p-1 px-2  me-3 rounded shadow me-2 bg-blueW"}),"Notificaciones",e.jsx("span",{className:"position-absolute top-1 start-75 translate-middle badge rounded-pill bg-danger ms-3",children:e.jsx(Fe,{})})]})}),e.jsx("li",{className:"nav-item my-2",children:e.jsxs(ne,{className:"nav-link",to:"/10bis",onClick:()=>r("/bis"),children:[e.jsx("i",{className:"bi bi-arrow-bar-right text-greenMui  p-1 px-2 rounded shadow me-3 bg-greenMui2"}),"Recepción 10 Bis"]})}),e.jsx("li",{className:"nav-item my-2",children:e.jsxs(ne,{className:"nav-link",to:"/10bisout",onClick:()=>r("/bis"),children:[e.jsx("i",{className:"bi bi-arrow-bar-left  text-redMui me-3 p-1 px-2 rounded shadow  bg-redMui2"}),"Salida 10 Bis"]})}),e.jsx("li",{className:"nav-item dropdown text-center mt-5",children:e.jsxs("div",{className:"card  shadow  position-relative text-dark d-flex align-items-start gap-3 p-4 mt-3",style:{overflow:"visible"},children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2","data-bs-dismiss":"offcanvas","aria-label":"Close"}),e.jsx("img",{src:"img/Perfiles/10.png",alt:"Asistente",className:" position-absolute",style:{width:"120px",height:"200px",objectFit:"contain",top:"-30px",left:"-20px"}}),e.jsxs("div",{className:"w-100 ",style:{paddingLeft:"70px"},children:[e.jsx("h5",{className:"mb-4",children:e.jsx("strong",{children:"Herramientas"})}),e.jsx("p",{className:"mb-3",children:e.jsxs(ne,{className:"dropdown-item text-center  text-secondary",to:"/panelcontrol10bis",onClick:()=>r("/panelcontrol10bis"),children:[e.jsx("i",{className:"bi bi-speedometer2 me-2 text-indigo me-3 p-1 px-2 rounded shadow  bg-indigoMui2"}),"  Art 10 Bis",e.jsx("span",{className:"badge bg-indigoMui2 text-indigoMui rounded-pill ms-3",children:"Panel "})]})}),e.jsx("p",{className:"mb-2",children:e.jsxs(ne,{className:"dropdown-item text-center  text-secondary",to:"/panelcontrol",onClick:()=>r("/panelcontrol"),children:[e.jsx("i",{className:"bi bi-speedometer2 me-2 text-indigo me-3 p-1 px-2 rounded shadow  bg-indigoMui2"})," Capturas",e.jsx("span",{className:"badge bg-indigoMui2 text-indigoMui rounded-pill ms-2",children:"Panel "})]})}),e.jsx("p",{className:"mb-3",children:e.jsxs(ne,{className:"nav-link",to:"/formularios",onClick:()=>r("/formularios"),children:[e.jsx("i",{className:"bi bi-pencil-square  me-2 text-green me-3 p-1 px-2 rounded shadow  bg-greenMui2 "}),"Formulario",e.jsx("span",{className:"badge bg-greenUi rounded-pill ms-3"})]})}),e.jsx("strong",{})]})]})})]})}),e.jsxs("div",{className:"d-flex align-items-center ms-3 my-3",children:[e.jsxs("div",{className:"pe-3 d-flex align-items-center",children:[e.jsx("img",{src:"img/Perfiles/3.png",alt:"Asistente",style:{width:"50px",height:"40px",objectFit:"contain"},className:"rounded-circle p-0 shadow-sm "}),e.jsx(As,{})]}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsx(ss,{}),e.jsx("i",{className:"bi bi-door-closed text-secondaryMuiRed "})]}),e.jsx(Ms,{})]})]})})})},he=()=>{const[a,r]=s.useState(!1),[t,c]=s.useState(()=>localStorage.getItem("theme")==="dark"),i=l=>{r(!0),c(l==="dark"),setTimeout(()=>r(!1),1e3)};return s.useEffect(()=>{const l=t?"dark":"light";document.body.setAttribute("data-bs-theme",l),localStorage.setItem("theme",l)},[t]),e.jsxs("div",{children:[a&&e.jsx(re,{})," ",e.jsxs("div",{className:"dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle",children:[e.jsxs("button",{className:"btn btn-greenUi py-2 dropdown-toggle d-flex align-items-center rounded-4",id:"bd-theme",type:"button","aria-expanded":"false","data-bs-toggle":"dropdown","aria-label":"Toggle theme (light)",children:[e.jsx("i",{className:t?"bi bi-moon-stars-fill":"bi bi-brightness-high-fill",width:"1em",height:"1em"}),e.jsx("span",{className:"visually-hidden",id:"bd-theme-text",children:"Toggle theme"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end shadow","aria-labelledby":"bd-theme-text",children:[e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${t?"":"active"}`,"data-bs-theme-value":"light","aria-pressed":!t,onClick:()=>i("light"),children:[e.jsx("i",{className:"bi bi-brightness-high-fill me-2 opacity-50",width:"1em",height:"1em"}),"Modo Luz"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${t?"active":""}`,"data-bs-theme-value":"dark","aria-pressed":t,onClick:()=>i("dark"),children:[e.jsx("i",{className:"bi bi-moon-stars-fill me-2 opacity-50",width:"1em",height:"1em"}),"Modo Nocturno"]})})]})]})]})},Fa=()=>e.jsx("div",{className:"container-lg my-3",children:e.jsxs("div",{className:"row align-items-center mb-5  shadow-sm p-2  mx-5 ",children:[e.jsx("div",{className:"col-md-8 text-end ",children:e.jsx("span",{className:"fs-1 card-title text-secondary text-capitalize",children:"Auditoria / Administar recursos"})}),e.jsx("div",{className:"col-md-4 text-center",children:e.jsx("img",{src:"/img/logo-login-2024.png",alt:"Animación de galería de imágenes",className:"img-fluid animate__animated animate__fadeIn",style:{maxWidth:"130px"}})})]})}),be="/CX2/svg/undraw_male_avatar_g98dG.svg",Da=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState(null),[o,n]=s.useState(!0),[m,x]=s.useState(""),[h,N]=s.useState(""),[g,v]=s.useState(""),[u,b]=s.useState(""),[d,f]=s.useState(""),[S,w]=s.useState(""),[y,_]=s.useState("1"),[p,j]=s.useState("masculino"),[C,F]=s.useState(""),[E,k]=s.useState(""),[M,L]=s.useState(""),[B,K]=s.useState(!1),H=V(I,"db_personas"),J=async()=>{n(!0);try{const ee=(await ae(H)).docs.map(A=>({...A.data(),id:A.id}));r(ee),c(ee)}catch(U){console.error("Error al obtener personas: ",U)}finally{n(!1)}};s.useEffect(()=>{J()},[]),s.useEffect(()=>{c(a.filter(U=>U.nombre_apellido&&U.nombre_apellido.toLowerCase().includes(M.toLowerCase())))},[M,a]);const ie=U=>{l(U.id),N(U.descripcion_fisica),v(U.documento),b(U.entidad),f(U.motivo_captura),w(U.nombre_apellido),_(U.prioridad),j(U.sexo),F(U.usuario),k(U.numero_contacto),x("")},ce=async()=>{const U=Z(I,"db_personas",i),ee=y==="3";try{await oe(U,{descripcion_fisica:h,documento:g,entidad:u,motivo_captura:d,nombre_apellido:S,prioridad:y,sexo:p,numero_contacto:E,alerta:ee}),r(a.map(A=>A.id===i?{...A,descripcion_fisica:h,documento:g,entidad:u,motivo_captura:d,nombre_apellido:S,prioridad:y,sexo:p,numero_contacto:E,alerta:ee}:A)),l(null),x("Los cambios se han guardado correctamente."),setTimeout(()=>x(""),3e3)}catch(A){console.error("Error al actualizar la persona: ",A),x("Error al guardar los cambios. Inténtalo de nuevo."),setTimeout(()=>x(""),3e3)}};return e.jsxs("div",{className:"container-lg mt-5 ",children:[e.jsxs("div",{className:"row justify-content-between align-items-center",children:[e.jsx("div",{className:"col-md-9 col-12 text-center",children:e.jsx("h1",{children:"Lista de Capturas - Personas"})}),e.jsx("div",{className:"col-md-3 col-12 text-center mb-3",children:e.jsxs("button",{className:"btn btn-outline-pink border-pink fw-semibold border border-3 shadow-sm",onClick:()=>K(!B),children:[B?"Ocultar Lista":"Mostrar Lista",e.jsx("i",{className:"ms-3 bi bi-back"})]})})]}),B&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row mt-5",children:[e.jsxs("div",{className:"col-md-6 col-12 text-end",children:[e.jsx("span",{className:"fs-5 text-capitalize",children:"Filtrar Capturas de Personas por nombre"}),e.jsx("span",{children:e.jsx("i",{className:"bi bi-search mx-3 text-pink"})})]}),e.jsx("div",{className:"col-md-6 col-12",children:e.jsx("input",{type:"text",className:"form-control text-center mb-5 border-primary border-2",placeholder:"Buscar por nombre",value:M,onChange:U=>L(U.target.value)})})]}),o?e.jsx(re,{}):e.jsx("div",{className:"row ",children:t.map(U=>{var ee,A;return e.jsx("div",{className:"col-md-4 col-12 my-3",children:e.jsx("div",{className:"card shadow-sm",children:e.jsx("div",{className:"card-body text-center",children:i===U.id?e.jsxs("div",{children:[e.jsx("h5",{className:"text-center",children:"Editando  "}),e.jsxs("h5",{className:"card-title text-center py-1 mb-4 mt-2 border-dark border text-capitalize fw-semibold rounded-pill shadow",children:[U.nombre_apellido,e.jsx("img",{src:((ee=U.base64)==null?void 0:ee.trim())||be,alt:U.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2 ms-3",style:{width:"40px",height:"40px",objectFit:"cover"}})]}),U.asociada_notificacion_id&&U.asociada_notificacion_id.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-secondaryMuiRed",children:"Esta persona está afectada a las siguientes notificaciones: "}),e.jsx("p",{className:"text-secondaryMuiRed fw-semibold",children:"Elimina la Asociación antes de editar"}),e.jsx("ul",{children:U.asociada_notificacion_id.map((T,se)=>e.jsxs("li",{children:["Notificación ID: ",T]},se))})]}),m&&e.jsx("div",{className:"alert alert-info",role:"alert",children:m}),e.jsxs("form",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold ",children:"Nombre y Apellido"}),e.jsx("input",{type:"text",className:"form-control shadow",value:S,onChange:T=>w(T.target.value),required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold ",children:"Documento"}),e.jsx("input",{type:"number",className:"form-control shadow",value:g,onChange:T=>v(T.target.value),required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold ",children:"Número de Contacto"}),e.jsx("input",{type:"text",className:"form-control shadow",value:E,onChange:T=>k(T.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold ",children:"Prioridad"}),e.jsxs("select",{className:"form-select shadow text-center",value:y,onChange:T=>_(T.target.value),children:[e.jsx("option",{value:"1",children:"Informativa"}),e.jsx("option",{value:"2",children:"Paradero"}),e.jsx("option",{value:"3",className:"text-red fw-semibold ",children:"Evasión"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold ",children:"Sexo"}),e.jsxs("select",{className:"form-select shadow text-center",value:p,onChange:T=>j(T.target.value),children:[e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"femenino",children:"Femenino"}),e.jsx("option",{value:"otros",children:"Otros"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold ",children:"Descripción Física"}),e.jsx("textarea",{className:"form-control shadow",rows:"3",value:h,onChange:T=>N(T.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold ",children:"Motivo Captura"}),e.jsx("textarea",{className:"form-control shadow",rows:"3",value:d,onChange:T=>f(T.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-semibold ",children:"Entidad"}),e.jsx("input",{type:"text",className:"form-control shadow",value:u,onChange:T=>b(T.target.value)})]}),e.jsxs("div",{className:"mb-3 mt-4",children:[e.jsx("label",{className:"form-label text-capitalize ",children:"Captura Creada por:"}),e.jsx("input",{type:"text",className:"form-control fw-semibold text-center text-blue bg-blueW",value:C,disabled:!0})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5",children:[e.jsxs("button",{type:"button",className:"btn text-primaryMuiBlue ",onClick:ce,children:["Guardar Cambios ",e.jsx("i",{className:"px-1 bi bi-check-square"})]}),e.jsxs("button",{type:"button",className:"btn text-secondaryMuiRed e",onClick:()=>l(null),children:["Cancelar ",e.jsx("i",{className:"px-1 bi bi-x-circle"})]})]})]})]}):e.jsxs("div",{children:[e.jsxs("h5",{className:"card-title text-center py-2 mb-4 mt-2 border-dark border text-capitalize fw-semibold rounded-pill shadow",children:[U.nombre_apellido,e.jsx("img",{src:((A=U.base64)==null?void 0:A.trim())||be,alt:U.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2 ms-3",style:{width:"40px",height:"40px",objectFit:"cover"}})]}),e.jsxs("p",{className:"card-text m-1 my-4",children:[e.jsx("strong",{children:"Documento:"})," ",U.documento," ",e.jsx("br",{})]}),e.jsxs("div",{className:"d-grid gap-1 col-6 mx-auto",children:[e.jsxs("button",{className:"btn text-primary border border-3 border-primary bg-blueW rounded-pill position-absolute top-100 start-50 shadow-sm translate-middle my-1",onClick:()=>ie(U),children:["Editar ",e.jsx("i",{className:"px-1 bi bi-pen"})]}),"                          "]})]})})})},U.id)})})]})]})};function Pa(){var y,_,p;const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState(!1),[o,n]=s.useState(null),[m,x]=s.useState(""),[h,N]=s.useState(!1),[g,v]=s.useState(!1);s.useEffect(()=>{Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(C=>{new bootstrap.Tooltip(C)})},[]),s.useEffect(()=>{const j=we(V(I,"db_notificaciones"),qe("timestamp","desc")),C=Re(j,F=>{const E=F.docs.map(k=>({id:k.id,...k.data()}));r(E)},F=>{console.error("Error al obtener notificaciones:",F)});return()=>C()},[]),s.useEffect(()=>{(async()=>{const C=we(V(I,"db_personas"),qe("nombre_apellido","asc")),E=(await ae(C)).docs.map(k=>({id:k.id,...k.data()}));c(E)})()},[]);const u=async j=>{const C=a.find(E=>E.id===j);if(C!=null&&C.asociada&&C.asociada.length>0){alert("No se puede eliminar la notificación porque tiene personas asociadas. Elimina las asociaciones primero.");return}if(window.confirm("¿Estás seguro de que deseas eliminar esta notificación?")){v(!0);try{await ge(Z(I,"db_notificaciones",j)),r(E=>E.filter(k=>k.id!==j)),alert("Se eliminó la notificación")}catch(E){console.error("Error al eliminar la notificación:",E),alert("Hubo un error al eliminar la notificación.")}finally{v(!1)}}else alert("La notificación no fue eliminada.")},b=j=>{n(j),l(!0)},d=()=>{l(!1),n(null),x("")},f=async(j,C,F)=>{if(window.confirm(`¿Estás seguro de que deseas eliminar la asociación de la persona ${F} con la notificación?`)){v(!0);try{const k=Z(I,"db_notificaciones",j);await oe(k,{asociada:Ve(F)});const M=Z(I,"db_personas",C);await oe(M,{asociada_notificacion_id:Ve(j)}),alert(`Se eliminó la asociación de la persona ${F} con la notificación.`)}catch(k){console.error("Error al eliminar la asociación:",k),alert("Hubo un error al eliminar la asociación.")}finally{v(!1)}}else alert(`La asociación de la persona ${F} no fue eliminada.`)},S=async()=>{if(o&&m)try{const j=we(V(I,"db_personas"),De("nombre_apellido","==",m)),C=await ae(j);if(C.empty)alert("No se encontró la persona seleccionada en la base de datos.");else{const F=C.docs[0];await Promise.all([oe(Z(I,"db_notificaciones",o),{asociada:Me(m)}),oe(Z(I,"db_personas",F.id),{asociada_notificacion_id:Me(o)})]),alert(`La persona ${m} se asoció a la notificación. Esto hará que al abrir la notificación se muestren sus datos / fotografía.`),d()}}catch(j){console.error("Error al asociar captura:",j)}else alert("Por favor, selecciona una persona para asociar.")},w=j=>{switch(j){case"1":return"Informativa";case"2":return"Búsqueda de Paradero";case"3":return"Evasión";case"4":return"Prioritaria";default:return"No definida"}};return e.jsxs("div",{className:"container-lg ",children:[e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-md-11",children:[e.jsxs("h3",{className:"text-center m-4 ",children:[e.jsxs("strong",{children:["Total de Notificaciones: ",a.length]}),e.jsxs("button",{className:"ms-5 btn text-pink  border-pink border border-2 fw-semibold  fs-6",onClick:()=>N(!h),children:[h?"Ocultar Notificaciones":"Administrar Notificaciones "," ",e.jsx("i",{className:"bi bi-bell ms-1"})]})]}),h&&e.jsx("ul",{className:"list-group list-group-flush ",children:a.map(j=>{var C;return e.jsx("li",{className:"list-group-item my-3 border border-secondary  rounded-4 shadow bg-greenW2 text-dark ",children:e.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start  text-dark ",children:[e.jsxs("p",{className:"text-dark ",children:[new Date(((C=j.timestamp)==null?void 0:C.seconds)*1e3).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"})," hs  ",e.jsxs("span",{className:"fw-semibold ms-5  text-dark",children:["   ",j.contenido]})]}),e.jsxs("div",{className:"me-3 w-100 w-sm-50",children:[e.jsxs("p",{children:["Tipo de Notificación:"," ",e.jsx("span",{className:`badge ${j.caratula==="1"?"bg-greenW text-green":j.caratula==="2"?"bg-yellowW text-secondary":(j.caratula==="3","bg-redW text-secondaryMuiRed")}`,children:w(j.caratula)})]}),j.asociada&&j.asociada.length>0?e.jsxs("div",{className:"my-4 text-capitalize  ",children:[e.jsx("strong",{className:"",children:"Personas Asociadas a la Notificación:"}),e.jsx("ul",{className:"text-center my-3  ",children:j.asociada.map((F,E)=>{var M;const k=t.find(L=>L.nombre_apellido===F);return k?e.jsxs("li",{className:"text-dark d-flex align-items-center my-3 ",children:[e.jsx("img",{src:((M=k.base64)==null?void 0:M.trim())||be,alt:k.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2 ",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("span",{children:[E+1," - ",F]}),k.prioridad&&e.jsx("span",{className:` ms-3 badge ${k.prioridad==="1"?"d-none":k.prioridad==="2"?"bg-yellowW text-secondary ":k.prioridad==="3"?"bg-secondaryMuiRed":""}`,children:w(k.prioridad)}),k.asociada_notificacion_id&&Array.isArray(k.asociada_notificacion_id)&&e.jsxs("span",{className:"ms-3 badge text-purpleUi bg-purpleW border border-purpleUi border-1","data-bs-toggle":"tooltip","data-bs-placement":"top",title:`Esta persona está asociada a ${k.asociada_notificacion_id.length} notificación${k.asociada_notificacion_id.length>1?"es":""}`,children:["Afectado ",k.asociada_notificacion_id.length," notificación",k.asociada_notificacion_id.length>1?"es":""]}),e.jsx("span",{className:"ms-3 badge btn bg-redW text-secondaryMuiRed border-1 border border-pink ms-3 ",onClick:()=>f(j.id,k.id,F),disabled:g,children:"Eliminar Asociación"})]},E):null})})]}):e.jsx("div",{className:"text-muted mt-2",children:"No hay personas asociadas"})]}),e.jsxs("div",{className:"d-flex justify-content-end align-items-center w-100",children:[e.jsxs("button",{className:"btn btn-sm btn-outline-pink me-2 bg-redW",onClick:()=>u(j.id),children:[e.jsx("i",{className:"bi bi-trash me-2 "})," Eliminar Notificacion"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-primary bg-blueW rounded-pill  ",onClick:()=>b(j.id),children:["Asociar Personas  ",e.jsx("i",{className:"bi bi-emoji-neutral ms-2 fw-semibold"})]})]})]})},j.id)})})]})}),e.jsx("div",{className:`modal bg-dark fade ${i?"show":""}`,style:{display:i?"block":"none"},tabIndex:"-1",role:"dialog","aria-labelledby":"modalLabel","aria-hidden":!i,children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Asociar Persona a la Notificación"}),e.jsx("button",{type:"button",className:"btn-close",onClick:d,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsx("label",{htmlFor:"persona",className:"form-label mt-3 fw-semibold",children:"Seleccione una persona para asociar a la Notificación:"}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100 shadow",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:m||"Seleccionar una persona"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"300px",overflowY:"auto"},children:((y=a.find(j=>j.id===o))==null?void 0:y.caratula)==="1"&&t.filter(j=>j.prioridad==="1").length>0?t.filter(j=>j.prioridad==="1").map(j=>{var C;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center",onClick:()=>x(j.nombre_apellido),children:[e.jsx("img",{src:((C=j.base64)==null?void 0:C.trim())||be,alt:j.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),j.nombre_apellido," - ",j.documento]})},j.id)}):((_=a.find(j=>j.id===o))==null?void 0:_.caratula)==="2"&&t.filter(j=>j.prioridad==="2").length>0?t.filter(j=>j.prioridad==="2").map(j=>{var C;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center ",onClick:()=>x(j.nombre_apellido),children:[e.jsx("img",{src:((C=j.base64)==null?void 0:C.trim())||be,alt:j.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2 ",style:{width:"40px",height:"40px",objectFit:"cover"}}),j.nombre_apellido," - ",j.documento]})},j.id)}):((p=a.find(j=>j.id===o))==null?void 0:p.caratula)==="3"&&t.filter(j=>j.prioridad==="3").length>0?t.filter(j=>j.prioridad==="3").map(j=>{var C;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center ",onClick:()=>x(j.nombre_apellido),children:[e.jsx("img",{src:((C=j.base64)==null?void 0:C.trim())||be,alt:j.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2 ",style:{width:"40px",height:"40px",objectFit:"cover"}}),j.nombre_apellido," - ",j.documento]})},j.id)}):e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",disabled:!0,children:"No hay personas disponibles para esta prioridad"})})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:S,children:"Asociar Captura"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:d,children:"Cerrar"})]})]})})})]})}function Aa(){const[a,r]=s.useState(""),[t,c]=s.useState(""),[i,l]=s.useState("1"),[o,n]=s.useState(!1),m=()=>{const h=new Date,N=String(h.getDate()).padStart(2,"0"),g=String(h.getMonth()+1).padStart(2,"0"),v=h.getFullYear().toString().slice(-2);return`${N}/${g}/${v}`},x=async h=>{if(h.preventDefault(),a.trim()===""){c("El mensaje no puede estar vacío.");return}if(a.length>200){c("El mensaje no puede exceder los 200 caracteres.");return}if(i===""){c("Por favor, selecciona una carátula.");return}c(""),n(!0);try{await Ee(V(I,"db_notificaciones"),{contenido:a,timestamp:Ie(),leido:!1,fecha:m(),caratula:i}),r(""),l("1"),alert("Se agregó la nueva notificación con título.")}catch(N){console.error("Error al enviar notificación: ",N),c("Error al enviar la notificación. Inténtalo de nuevo.")}finally{n(!1)}};return e.jsxs("div",{className:"container-lg my-5 pb-4",children:[o&&e.jsx(re,{}),"  ",e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"position-relative card shadow-sm pt-4 bg-transparent",children:[e.jsx("div",{className:"position-absolute top-0 start-50 bg-redW translate-middle rounded-pill border-pink border border-3  bg-white text-pink px-4 py-2 shadow",children:e.jsxs("h4",{className:"mb-0",children:["Notificación ",e.jsx("i",{className:"bi bi-bell ms-2  "})]})}),e.jsx("div",{className:"card-body pt-4 text-dark",children:e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("label",{htmlFor:"mensaje",className:"form-label fw-semibold my-2 ",children:"Mensaje de la notificación"}),e.jsx("input",{type:"text",id:"mensaje",className:"form-control shadow",value:a,onChange:h=>r(h.target.value),placeholder:"Escribe el mensaje aquí"})]}),e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("label",{htmlFor:"caratula",className:"form-label fw-semibold mt-3",children:"Selecciona una carátula de la Notificación ( Titulo / Contexto )"}),e.jsxs("select",{id:"caratula",className:"form-select shadow mb-4 text-center",value:i,onChange:h=>l(h.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:"Seleccionar"}),e.jsx("option",{value:"1",children:"Clasica - Informativa"}),e.jsx("option",{value:"2",children:"Búsqueda de Paradero"}),e.jsx("option",{value:"3",children:"Evasión"})]})]}),t&&e.jsx("div",{className:"alert alert-danger mt-5",children:t}),e.jsx("div",{className:"d-grid",children:e.jsx("button",{type:"submit",className:"btn btn-outline-primary border-primary border-3 bg-blueW rounded-pill position-absolute top-100 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Crear Notificación ",e.jsx("i",{className:"bi bi-send-check-fill ms-2 text-primary"})]})})})]})})]})})})]})}const Ma=()=>{const[a,r]=s.useState(!0),[t,c]=s.useState(!1);return s.useEffect(()=>{(async()=>{await new Promise(l=>setTimeout(l,2e3)),r(!1)})()},[]),e.jsxs("div",{className:"container-lg  my-5",children:[e.jsxs("div",{className:"row justify-content-between align-items-center",children:[e.jsx("div",{className:"col-md-9 col-12 text-center ",children:e.jsx("h1",{children:"Crear / Administrar - Notificaciones"})}),e.jsx("div",{className:"col-md-3 col-12 text-center mb-3",children:e.jsxs("button",{className:"btn btn-outline-purpleUi border-purpleUi   fw-semibold border border-3 shadow-sm",onClick:()=>c(!t),children:[t?"Ocultar Notificaciones":"Mostrar Notificaciones",e.jsx("i",{className:"ms-3 bi bi-bell"})]})})]}),t&&e.jsx(e.Fragment,{children:a?e.jsx(re,{}):e.jsxs("div",{className:"row mt-5",children:[e.jsx(Aa,{}),e.jsx(Pa,{})]})})]})},Ia=()=>{const[a,r]=s.useState([]),[t,c]=s.useState(!0),[i,l]=s.useState(null),[o,n]=s.useState(!1),[m,x]=s.useState(null),[h,N]=s.useState(""),[g,v]=s.useState(""),{currentUser:u}=Ps(),b=u.email;s.useEffect(()=>{d()},[]);const d=async()=>{try{c(!0);const p=await ae(V(I,"db_personas")),j=[];p.forEach(F=>{const E={id:F.id,...F.data()};j.push(E)});const C=F=>{const[E,k,M]=F.split("/"),L=`20${M}`;return new Date(`${L}-${k}-${E}`)};j.sort((F,E)=>{const k=C(F.date),M=C(E.date);return isNaN(k)||isNaN(M)?(console.error("Fecha inválida para algún documento:",F,E),0):M-k}),r(j)}catch(p){console.error("Error obteniendo documentos: ",p),l("No se pudieron cargar los documentos.")}finally{c(!1)}},f=a.filter(p=>p.alerta===!0),S=p=>{x(p),n(!0)},w=async(p,j)=>{const C=!j;if(window.confirm(C?"¿Estás seguro de activar la captura?":"¿Estás seguro de desactivar la captura? Esto eliminará los datos asociados a la captura."))try{const F=Z(I,"db_personas",p),E=C?{captura:!0}:{captura:!1,captura_evadido_autor:"",captura_evadido_date:"",captura_evadido_descripcion:"",captura_evadido_usuario:""};await oe(F,E),r(k=>k.map(M=>M.id===p?{...M,...E}:M)),alert(C?"Captura activada correctamente.":"Captura desactivada y datos reseteados correctamente.")}catch(F){console.error("Error al cambiar estado de captura: ",F),l("No se pudo actualizar el estado de captura.")}},y=async p=>{try{const j=Z(I,"db_personas",p);await oe(j,{alerta:!1,prioridad:"1"}),r(C=>C.map(F=>F.id===p?{...F,alerta:!1,prioridad:"1"}:F)),alert("Alerta desactivada correctamente.")}catch(j){console.error("Error al desactivar alerta: ",j),l("No se pudo desactivar la alerta.")}},_=async()=>{if(!m)return;const j=new Date().toLocaleDateString("es-ES");try{const C=Z(I,"db_personas",m);await oe(C,{captura:!0,captura_evadido_autor:h,captura_evadido_date:j,captura_evadido_descripcion:g,captura_evadido_usuario:b}),r(F=>F.map(E=>E.id===m?{...E,captura:!0,captura_evadido_autor:h,captura_evadido_date:j,captura_evadido_descripcion:g,captura_evadido_usuario:b}:E)),n(!1),alert(u.email+" / Confirmó la Captura / SE INFORMÓ CORRECTAMENTE"),x(null),N(""),v("")}catch(C){console.error("Error al marcar captura: ",C),l("No se pudo marcar la captura.")}};return e.jsxs("div",{className:"container-lg  p-2",children:[t&&e.jsx(re,{}),i&&e.jsx("div",{className:"alert alert-danger",children:i}),e.jsxs("div",{className:"table-responsive mt-1",children:[e.jsx("h2",{className:"text-center text-pink",children:"Administar de Evasiones"}),f.length>0?e.jsxs("table",{className:"table shadow-sm rounded text-center my-5 ",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Imagen"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Entidad"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{className:"table-group-divider  ",children:f.map(p=>{var j;return e.jsxs("tr",{className:"align-middle ",children:[e.jsx("td",{children:e.jsx("img",{src:((j=p.base64)==null?void 0:j.trim())||be,alt:p.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle ",style:{width:"80px",height:"80px",objectFit:"cover"}})}),e.jsx("td",{children:p.nombre_apellido||"NN"}),e.jsx("td",{children:p.entidad}),e.jsx("td",{children:p.date}),e.jsxs("td",{children:[e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`toggleCaptura-${p.id}`,checked:p.captura,onChange:()=>p.captura?w(p.id,p.captura):S(p.id)}),e.jsx("label",{className:"form-check-label",htmlFor:`toggleCaptura-${p.id}`,children:p.captura?"Captura Activa":"Captura Inactiva"})]})," ",e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`toggleAlerta-${p.id}`,checked:p.alerta,onChange:()=>y(p.id),"aria-label":`Desactivar alerta de ${p.nombre_apellido||"NN"}`}),e.jsx("label",{className:"form-check-label",htmlFor:`toggleAlerta-${p.id}`,children:p.alerta?"Alerta Activa":"Alerta Inactiva"})]})]})]},p.id)})})]}):e.jsx("div",{className:"alert alert-info",children:"No hay documentos con alerta."})]}),e.jsx("div",{className:`modal fade ${o?"show bg-dark":""}`,style:{display:o?"block":"none"},tabIndex:"-1",role:"dialog","aria-labelledby":"marcarCapturaModalLabel","aria-hidden":!o,children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"marcarCapturaModalLabel",children:"Información de Captura"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(!1),"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body text-capitalize text-center",children:[e.jsx("label",{className:"fw-semibold",children:"Autor de la captura / Entidad :"}),e.jsx("input",{type:"text",value:h,onChange:p=>N(p.target.value),className:"form-control mb-2 shadow-sm"}),e.jsx("label",{className:"fw-semibold",children:"Breve reseña de la captura:"}),e.jsx("textarea",{value:g,onChange:p=>v(p.target.value),className:"form-control mb-2 shadow-sm"}),e.jsx("label",{className:"fw-semibold",children:"Usuario que informa la captura:"}),e.jsx("input",{type:"text",value:b,readOnly:!0,className:"form-control mb-2  text-center  border-0 text-pink fw-semibold"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-pink",onClick:_,disabled:!h||!g,children:"Confirmar"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancelar"})]})]})})})]})},La=()=>{const[a,r]=s.useState(!0),[t,c]=s.useState(!1);return s.useEffect(()=>{(async()=>{await new Promise(l=>setTimeout(l,2e3)),r(!1)})()},[]),e.jsxs("div",{className:"container-lg  my-5",children:[e.jsxs("div",{className:"row justify-content-between align-items-center",children:[e.jsx("div",{className:"col-md-9 col-12 text-center ",children:e.jsx("h1",{children:"Administrar - Evasiones "})}),e.jsx("div",{className:"col-md-3 col-12 text-center mb-3",children:e.jsxs("button",{className:"btn btn-outline-primary fw-semibold border border-3 border-primary shadow-sm ",onClick:()=>c(!t),children:[t?"Ocultar Evasiones":"Mostrar Evasiones",e.jsx("i",{className:"ms-3 bi bi-card-checklist"})]})})]}),t&&e.jsx(e.Fragment,{children:a?e.jsx(re,{}):e.jsx("div",{className:"row mt-5",children:e.jsx(Ia,{})})})]})},Ra=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Auditoria",element2:"Capturas Calientes",element3:"bi bi-ui-checks"}),e.jsx(Fa,{}),e.jsxs("div",{className:"container-lg",id:"bodyGallery",children:[e.jsx(Da,{}),e.jsx(Ma,{}),e.jsx(La,{})]}),e.jsx(he,{}),e.jsx(ve,{})]});function $a(){const[a,r]=s.useState([]),[t,c]=s.useState("todas"),[i,l]=s.useState([]),[o,n]=s.useState(()=>{const y=localStorage.getItem("leidas");return y?JSON.parse(y):{}}),[m,x]=s.useState(!0),[h,N]=s.useState(!1),[g,v]=s.useState([]),u=a.sort((y,_)=>{var E,k;const p=o[y.id]?1:0,j=o[_.id]?1:0;if(p!==j)return p-j;const C=((E=y.timestamp)==null?void 0:E.seconds)*1e3||0;return(((k=_.timestamp)==null?void 0:k.seconds)*1e3||0)-C}).filter(y=>t==="leidas"?o[y.id]:t==="noLeidas"?!o[y.id]:!0);s.useEffect(()=>{const y=V(I,"db_notificaciones"),_=Re(y,p=>{const C=p.docs.map(F=>({id:F.id,...F.data()})).sort((F,E)=>{var L,B;const k=((L=F.timestamp)==null?void 0:L.seconds)*1e3||0;return(((B=E.timestamp)==null?void 0:B.seconds)*1e3||0)-k});r(C)});return()=>_()},[]),s.useEffect(()=>{(async()=>{const p=(await ae(V(I,"db_personas"))).docs.map(j=>({id:j.id,...j.data()}));l(p),x(!1)})()},[]);const b=y=>{n(_=>{const p={..._,[y]:!0};return localStorage.setItem("leidas",JSON.stringify(p)),p})},d=y=>{const _=a.find(p=>p.id===y);if(_!=null&&_.asociada){const p=i.filter(j=>_.asociada.includes(j.nombre_apellido));v(p),N(!0)}},f=()=>{N(!1),v([])},S=y=>{switch(y){case"1":return"Novedad";case"2":return"Paradero";case"3":return"Evasión";case"4":return"Prioritaria";default:return"No definida"}},w=y=>/^https?:\/\//.test(y)?y:`https://${y}`;return e.jsx("div",{className:"container-lg my-5 ",children:m?e.jsx(re,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h2",{className:"m-0",children:"📢 Notificacioness"}),e.jsxs("button",{type:"button",className:"btn btn-primary text-white position-relative",children:[e.jsx("i",{className:"bi bi-bell"}),e.jsxs("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:[e.jsx("span",{children:a.length}),e.jsx("span",{className:"visually-hidden",children:"unread messages"})]})]})]}),e.jsx("div",{className:"d-flex justify-content-center justify-content-md-end mt-4 px-2 ",children:e.jsxs("div",{className:"btn-group  rounded-pill overflow-hidden Gradiante25 shadow",role:"group",style:{backgroundColor:"#0d6efd"},children:[e.jsxs("button",{className:`btn ${t==="todas"?"btn-light text-indigoMui fw-semibold":"btn-outline-indigoMui text-white"}`,onClick:()=>c("todas"),children:[e.jsx("i",{className:"bi bi-list-ul me-2"}),"Todas"]}),e.jsxs("button",{className:`btn ${t==="leidas"?"btn-light text-indigoMui fw-semibold":"btn-outline-indigoMui text-white"}`,onClick:()=>c("leidas"),children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"Leídas"]}),e.jsxs("button",{className:`btn ${t==="noLeidas"?"btn-light text-indigoMui fw-semibold":"btn-outline-indigoMui text-white"}`,onClick:()=>c("noLeidas"),children:[e.jsx("i",{className:"bi bi-bell-fill me-2"}),"No Leídas"]})]})}),u.length===0?e.jsxs("div",{className:"text-center text-muted my-5 alert alert-primary",children:[t==="leidas"&&e.jsxs("p",{children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"No hay notificaciones leídas."]}),t==="noLeidas"&&e.jsxs("p",{children:[e.jsx("i",{className:"bi bi-bell-fill me-2"}),"No hay notificaciones sin leer."]}),t==="todas"&&e.jsxs("p",{children:[e.jsx("i",{className:"bi bi-inbox me-2"}),"No hay notificaciones disponibles."]})]}):u.map(y=>{var _,p;return e.jsxs("div",{className:"card shadow position-relative text-dark d-flex align-items-start gap-3 p-4 my-5 mx-3",style:{overflow:"visible"},children:[!o[y.id]&&e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2",onClick:()=>b(y.id),"aria-label":"Close"}),e.jsx("img",{src:o[y.id]?"img/Alertas/alertRead.png":"img/Alertas/alert1.gif",alt:"Alerta",className:"position-absolute rounded-circle",style:{width:o[y.id]?"60px":"80px",height:"80px",objectFit:"contain",top:"-20px",left:"-20px"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"40px"},children:[e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-2 mt-2 w-100",children:[e.jsx("h5",{className:"mb-1 text-center text-sm-start w-100 w-sm-auto",children:e.jsx("strong",{className:"d-block d-sm-inline",children:y.titulo||"Nueva Notificación"})}),y.timestamp&&e.jsx("p",{className:"mb-0 text-muted small d-none d-sm-block",children:new Date(y.timestamp.seconds*1e3).toLocaleString()})]}),e.jsxs("p",{children:[o[y.id]&&e.jsx("i",{className:"badge text-bg-indigoMui text-white bi bi-check-circle-fill",children:" Esta Notificación fue Leída"})," ",y.caratula&&e.jsxs(e.Fragment,{children:[parseInt(y.caratula)===1&&e.jsx("span",{className:"badge text-bg-teal text-white shadow-sm",children:S(y.caratula)}),parseInt(y.caratula)===2&&e.jsx("span",{className:"badge text-bg-primaryMuiBlue text-white shadow-sm",children:S(y.caratula)}),parseInt(y.caratula)===3&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-danger"}),e.jsx("span",{className:"badge text-bg-danger text-white shadow-sm",children:S(y.caratula)})]}),parseInt(y.caratula)===4&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-orange"}),e.jsx("span",{className:"badge text-bg-orange text-white shadow-sm",children:S(y.caratula)})]})]})]}),y.contenido&&e.jsx("p",{className:"mb-3",children:y.contenido}),((_=y.enlace)==null?void 0:_.length)>0&&e.jsx("p",{className:"text-center",children:y.enlace.map((j,C)=>e.jsxs("a",{href:w(j),target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none d-flex align-items-center gap-2 rounded-pill",style:{maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[e.jsx("i",{className:"bi bi-browser-chrome titilar",style:{fontSize:"20px"}}),j]},C))}),e.jsx("div",{className:"d-flex justify-content-center flex-wrap align-items-center gap-3 mt-3",children:(p=y.asociada)==null?void 0:p.map((j,C)=>{const F=i.find(E=>(E.nombre_apellido||"").toLowerCase()===(j||"").toLowerCase());return e.jsxs("div",{className:"d-flex align-items-center gap-2 border rounded shadow-sm p-2",style:{minWidth:"150px"},onClick:()=>d(y.id),children:[(F==null?void 0:F.base64)&&e.jsx("img",{src:F.base64,alt:F.nombre_apellido,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("span",{className:"text-capitalize",children:[C+1,". ",j]})]},C)})})]})]},y.id)}),h&&g&&e.jsx("div",{className:"modal fade bg-dark show d-block",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Personas Asociadas"}),e.jsx("button",{type:"button",className:"btn-close",onClick:f})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"row",children:g.map((y,_)=>e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"card",children:[e.jsx("img",{src:y.base64||"default-image-url.jpg",alt:y.nombre_apellido,className:"card-img-top",style:{height:"200px",objectFit:"cover"}}),e.jsxs("div",{className:"card-body text-center text-capitalize",children:[e.jsx("h5",{className:"card-title text-pink",children:y.nombre_apellido}),e.jsxs("p",{children:[e.jsx("strong",{children:"Documento:"})," ",y.documento]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Datos:"})," ",y.descripcion_fisica]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Motivo Captura:"})," ",y.motivo_captura]})]})]})},_))})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn btn-pink",onClick:f,children:"Cerrar"})})]})})})]})})}const za=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Notificaciones",element2:"Cx2",element3:"bi bi-ui-checks"}),e.jsx("div",{className:"container-lg",id:"bodyGallery",children:e.jsx($a,{})}),e.jsx(he,{}),e.jsx(ve,{})]}),Is=()=>{const[a,r]=s.useState(null),[t,c]=s.useState([]),[i,l]=s.useState([]),o=m=>{const x=m.target.files[0];if(r(null),l([]),x){if(!x.name.endsWith(".csv")){r("Solo se permiten archivos CSV.");return}const h=new FileReader;h.onload=N=>{const g=N.target.result,v=g.includes(";")?";":",",b=g.split(`
`).map(S=>S.trim()).map(S=>S.split(v)),d=[],f=[];b.forEach((S,w)=>{if(S.some(C=>C.trim()===""))return;const _=S[0],p=S[1],j=S[2];isNaN(_)||_.length!==8?f.push({rowIndex:w+1,error:"El primer valor debe ser numérico y tener 8 caracteres."}):typeof p!="string"||p.trim()===""?f.push({rowIndex:w+1,error:"La segunda columna debe ser texto."}):n(j)?d.push(S):f.push({rowIndex:w+1,error:"La tercera columna debe tener formato de correo electrónico."})}),f.length>0&&l(f),d.length===0&&f.length===0&&r("No se encontraron filas válidas."),c(d)},h.onerror=()=>{r("Ocurrió un error al leer el archivo.")},h.readAsText(x)}},n=m=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(m);return e.jsx("div",{className:"container-lg mt-5 mt-sm-5 mt-md-0 mt-lg-0 ",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-orangeW text-dark shadow-sm ",children:e.jsxs("h4",{className:"fw-semibold p-2",children:["Subir Archivo CSV ",e.jsx("i",{className:"bi bi-filetype-csv ms-2"})]})}),e.jsxs("div",{className:"card-body ",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"csvFile",className:"form-label ",children:"Selecciona un archivo CSV para subir:"}),e.jsx("input",{type:"file",className:"form-control ",id:"csvFile",accept:".csv",onChange:o})]}),a&&e.jsx("div",{className:"alert alert-danger ",children:a}),i.length>0&&e.jsxs("div",{className:"alert alert-danger bg-redW shadow my-5",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Errores en las siguientes filas:"]}),e.jsx("ul",{children:i.map((m,x)=>e.jsxs("li",{children:["Fila ",m.rowIndex,": ",m.error]},x))})]}),t.length>0&&e.jsxs("div",{className:"my-4",children:[e.jsxs("span",{className:" fw-semibold border border-2 rounded-pill p-2 px-5 border-teal bg-greenW2 text-dark",children:[" ",e.jsx("i",{className:"me-3 bi bi-person-lines-fill"}),"Contenido del archivo:"]}),e.jsx("div",{className:"table-responsive text-center bg-greenW2 mt-3",children:e.jsxs("table",{className:"table table-striped  ",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{children:"DNI"}),e.jsx("td",{children:"Nombre"}),e.jsx("td",{children:"Correo"}),e.jsx("td",{children:"Dependencia"})]})}),e.jsx("tbody",{children:t.map((m,x)=>e.jsx("tr",{children:m.map((h,N)=>e.jsx("td",{children:h},N))},x))})]})})]})]})]})})},Oa=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Usuarios Lista CSV",element2:"Capturas Calientes",element3:"bi bi-ui-checks"}),e.jsx("div",{className:"container-lg",id:"bodyGallery",children:e.jsx(Is,{})}),e.jsx(he,{}),e.jsx(ve,{})]}),Ta=({recepciones:a,loading:r})=>e.jsx("div",{className:" text-center mt-4",children:r?e.jsx("div",{className:"spinner-border text-primary",role:"status"}):Object.keys(a).length>0?e.jsxs("div",{className:"alert",children:[e.jsx("strong",{children:"Recepciones pendientes por comisaría:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(a).map(([t,c],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-primary",role:"status"}),e.jsx("span",{children:t}),e.jsxs("span",{className:"badge bg-primary",children:[c," pendientes"]})]},i))})]}):e.jsx("div",{className:"alert alert-primary",children:e.jsx("strong",{children:"No hay recepciones pendientes en este momento."})})}),Ls={"Comisaria 1ra":"1111","Comisaria 2da":"2222","Comisaria 3ra":"3333","Comisaria 4ta":"4444","Comisaria 5ta":"5555","Comisaria 6ta":"6666","Comisaria 7ma":"7777","Comisaria 8va":"8888"},Ba=({notificaciones:a,loading:r,aceptarRecepcion:t,rechazarRecepcion:c})=>{const[i,l]=s.useState(""),[o,n]=s.useState(!1),[m,x]=s.useState(null),[h,N]=s.useState(""),[g,v]=s.useState(!1),u=async()=>{if(!m)return;v(!0);const{id:d,comisaria:f}=m,S=Ls[f];setTimeout(()=>{h&&h===S?(t(d),l(""),n(!1),N("")):l(`El código ingresado "${h}" es incorrecto.`),v(!1)},1e3)},b=d=>{x(d),n(!0),l(""),N("")};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("p",{className:"text-center  text-center mb-4 bg-primary text-white rounded p-2 mt-4 mb-3",children:["       ",e.jsx("span",{className:"text-capitalize fs-3  ",children:" validación Recepción Art. 10 Bis "}),"  ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-4",children:e.jsx("div",{className:"position-relative",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border ",role:"status","aria-label":"Cargando...",children:" "})]}):e.jsxs("div",{className:"list-group",children:[i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i}),a&&a.length>0?a.map(d=>e.jsxs("div",{className:"list-group-item mb-3 shadow",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:d.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:d.dni})]}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-end row",children:[e.jsx("div",{className:"col mb-1",children:e.jsxs("button",{className:"btn btn-primary btn-sm me-2 mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>b(d),"aria-label":`Aceptar recepción para ${d.nombre_apellido} en la Comisaría ${d.comisaria}`,children:["Aceptar ",e.jsx("i",{className:"bi bi-check-all ms-2"})]})}),e.jsx("div",{className:"col",children:e.jsxs("button",{className:"btn btn-pink btn-sm mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>c(d.id),"aria-label":`Cancelar recepción para ${d.nombre_apellido}`,children:["Cancelar ",e.jsx("i",{className:"bi bi-trash ms-2"})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{children:e.jsxs("small",{children:[d.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:d.comisaria})," -"," ",d.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:d.unidad})]})})})]},d.id)):e.jsx("div",{className:"alert alert-info shadow",role:"alert",children:"No se encontraron notificaciones para validar."})]})})})]}),o&&m&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Ingresar Código"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Ingresa el código para la Comisaría ",e.jsx("strong",{children:m.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:h,onChange:d=>N(d.target.value),placeholder:"Código"}),i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:u,disabled:!h||g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(!1),children:"Cancelar"})]})]})})})]})},Rs=()=>{const[a,r]=s.useState([]),[t,c]=s.useState(!1),[i,l]=s.useState(""),o=async()=>{try{c(!0);const N=we(V(I,"db_art_diez_bis"),De("comisaria_recibe","==",!1)),v=(await ae(N)).docs.map(u=>({id:u.id,...u.data()}));r(v)}catch(N){console.error("Error al obtener las recepciones pendientes: ",N)}finally{c(!1)}};s.useEffect(()=>{o()},[]);const n=async N=>{try{const g=JSON.parse(localStorage.getItem("user")),v=Z(I,"db_art_diez_bis",N);await oe(v,{comisaria_recibe:!0,visualidad:!0,fecha_ingreso_validado:Ie(),usuario_validado_ingreso:g.email}),r(u=>u.filter(b=>b.id!==N)),alert("Recepción aceptada correctamente.")}catch(g){console.error("Error al aceptar la recepción: ",g),alert("Hubo un error al aceptar la recepción.")}},m=async N=>{if(window.confirm("¿Estás seguro de que deseas rechazar esta recepción?"))try{const v=Z(I,"db_art_diez_bis",N);await ge(v),r(u=>u.filter(b=>b.id!==N)),alert("Recepción rechazada correctamente.")}catch(v){console.error("Error al rechazar la recepción: ",v),alert("Hubo un error al rechazar la recepción.")}},x=a.reduce((N,g)=>{const v=g.comisaria||"Comisaría desconocida";return N[v]=(N[v]||0)+1,N},{}),h=i?a.filter(N=>N.comisaria===i):a;return e.jsx("div",{className:"container-lg mt-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 mb-4",children:[e.jsx(Ta,{recepciones:x,loading:t}),e.jsxs("div",{className:"mt-4 card p-3 shadow-sm",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize fw-bold text-muted",children:"Filtrar por comisaría"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select",value:i,onChange:N=>l(N.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),Object.keys(x).map((N,g)=>e.jsx("option",{value:N,children:N},g))]})]})]}),e.jsx("div",{className:"col-12 col-md-8 mt-4 mt-md-0",children:e.jsx(Ba,{notificaciones:h,loading:t,aceptarRecepcion:n,rechazarRecepcion:m})})]})})},Ua=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Validar Ingreso 10 Bis ",element2:"Cx2",element3:"bi bi-ui-checks"}),e.jsx(Rs,{}),e.jsx("div",{className:"container-lg",id:"bodyGallery"}),e.jsx(he,{}),e.jsxs("div",{className:"pt-5",children:[" ",e.jsx(ve,{})]})]});Ns.register(vs,ys,ws,aa,Cs,Ss,ta,_s,ks);const qa=(a,r)=>{const t=parseInt(a.replace("#",""),16),c=Math.max((t>>16)-r,0),i=Math.max((t>>8&255)-r,0),l=Math.max((t&255)-r,0);return`#${(c<<16|i<<8|l).toString(16).padStart(6,"0")}`},Va=({totalCapturas:a,totalPrioridadNormal:r,totalParadero:t,totalEvasiones:c,totalPrioritaria:i,totalEvasionesCapturados:l})=>{const[o,n]=s.useState("bar"),x=["#20c997","#ffca28","#f44336","#2196f3","#2196f3"].slice(0,4),h={labels:["C. Normal","C. Prioritarias","C. Evasion","B. Paradero"],datasets:[{label:"Estadísticas",data:[r,i,c,t],backgroundColor:x,borderColor:x.map(u=>qa(u,40)),borderWidth:1}]},N={datasets:[{label:"Capturas y Evasiones",data:[{x:1,y:a},{x:2,y:t},{x:3,y:c},{x:4,y:i},{x:5,y:l}],backgroundColor:"#2196f3"}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Informe Gráfico de Capturas y Evasiones"}},scales:{y:{beginAtZero:!0},x:{beginAtZero:!0}}},v=u=>{n(u.target.value)};return e.jsxs("div",{className:"container-lg mt-5 mt-sm-5 mt-md-0 mt-lg-0",children:[e.jsx("h2",{className:"text-center mb-4 bg-teal text-white",children:"Estadísticas / Gráficos"}),e.jsx("div",{className:"row justify-content-center mb-3",children:e.jsx("div",{className:"col-12 col-md-5",children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("span",{className:"input-group-text bg-teal text-white",id:"inputGroup-sizing-sm",children:"Tipo de gráfico:"}),e.jsxs("select",{className:"form-select text-center border border-teal",onChange:v,value:o,children:[e.jsx("option",{value:"bar",children:"Barra"}),e.jsx("option",{value:"line",children:"Línea"}),e.jsx("option",{value:"pie",children:"Pastel"}),e.jsx("option",{value:"doughnut",children:"Doughnut"}),e.jsx("option",{value:"scatter",children:"Dispersión (Scatter)"})]})]})})}),e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-12 col-md-10",style:{height:"400px"},children:[o==="bar"&&e.jsx(Es,{data:h,options:g}),o==="line"&&e.jsx(Ke,{data:h,options:g}),o==="pie"&&e.jsx(Fs,{data:h,options:g}),o==="doughnut"&&e.jsx(Ds,{data:h,options:g}),o==="scatter"&&e.jsx(ia,{data:N,options:g})]})})]})},Ga=({showModalLink:a,setShowModalLink:r,selectedNotifId:t,setNewLink:c,newLink:i,setNotificaciones:l})=>{const[o,n]=s.useState(!0),[m,x]=s.useState(""),h=()=>{r(!1),c(""),n(!0),x("")},N=async()=>{if(!i){n(!1),x("Por favor, ingresa un enlace.");return}if(!t){n(!1),x("Por favor, selecciona una notificación.");return}try{await oe(Z(I,"db_notificaciones",t),{enlace:Me(i)}),c(""),n(!0),x(""),alert("Enlace agregado correctamente."),h()}catch(g){console.error("Error al agregar el enlace:",g),alert("Hubo un error al agregar el enlace.")}};return a&&e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!a,children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Agregar Enlace a la Notificación"}),e.jsx("button",{type:"button",className:"btn-close",onClick:h,"aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"url",id:"link",className:`form-control ${o?"":"is-invalid"}`,placeholder:"https://example.com",value:i,onChange:g=>c(g.target.value)}),e.jsx("label",{htmlFor:"link",children:"Ingrese el enlace"}),!o&&e.jsx("div",{className:"invalid-feedback",children:m})," "]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:h,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:N,children:"Guardar Enlace"})]})]})})})},Wa=({showModalNot:a,closeModalNot:r})=>{const t=Pe(),[c,i]=s.useState(""),[l,o]=s.useState(""),[n,m]=s.useState("1"),[x,h]=s.useState(""),[N,g]=s.useState(!1),v=()=>{const d=new Date,f=String(d.getDate()).padStart(2,"0"),S=String(d.getMonth()+1).padStart(2,"0"),w=d.getFullYear().toString().slice(-2);return`${f}/${S}/${w}`};s.useEffect(()=>{if(t.pathname==="/panelcontrol"){const d=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",d),()=>{window.removeEventListener("popstate",d)}}},[t,r]);const u=async d=>{if(d.preventDefault(),c.trim()===""){h("El mensaje no puede estar vacío.");return}if(c.length>280){h("El mensaje no puede exceder los 280 caracteres.");return}if(n===""){h("Por favor, selecciona una carátula.");return}h(""),g(!0);try{await Ee(V(I,"db_notificaciones"),{titulo:l,contenido:c,timestamp:Ie(),leido:!1,fecha:v(),caratula:n}),o(""),i(""),m("1"),r()}catch(f){console.error("Error al enviar notificación: ",f),h("Error al enviar la notificación. Inténtalo de nuevo.")}finally{g(!1)}},b=()=>{i(""),m("1"),h(""),r()};return e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title text-center",id:"modalTitle",children:["Crear Notificación ",e.jsx("i",{className:"bi bi-app-indicator text-danger border border-blue rounded-circle p-2 border-5 ms-5 titilar "})]}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("form",{onSubmit:u,children:[e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aquí",id:"titulo",value:l,onChange:d=>o(d.target.value)}),e.jsx("label",{className:"text-blue",children:"Titulo de la Notificación"})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aquí",id:"mensaje",value:c,onChange:d=>i(d.target.value),style:{minHeight:"150px"}}),e.jsx("label",{className:"text-blue",children:"Mensaje"})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsx("div",{className:"col-md",children:e.jsxs("div",{className:"form-floating shadow-sm",children:[e.jsxs("select",{className:"form-select text-center",id:"floatingSelectGrid",value:n,onChange:d=>m(d.target.value),children:[e.jsx("option",{value:"1",children:"Informativa "}),e.jsx("option",{value:"2",children:"Paradero 🔎"}),e.jsx("option",{value:"3",children:"Evadido 👮🏻"}),e.jsx("option",{value:"4",children:"Prioritaria ⭐"})]}),e.jsx("label",{className:"text-blue",children:"Selecciona Tipo de Notificación"})]})})}),x&&e.jsx("div",{className:"alert alert-danger mt-5",children:x}),N?e.jsx(re,{}):e.jsx("div",{className:"d-grid",children:e.jsx("button",{type:"submit",className:"btn bg-primary border-white border-3 text-white rounded-pill position-absolute top-100 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Crear Notificación ",e.jsx("i",{className:"bi bi-send-check-fill ms-2 text-white"})]})})})]})})})]})})})},Ha=({Date1:a,Date2:r,onCerrar:t,color:c})=>{const[i,l]=s.useState(!1),o=()=>{l(!0)};return e.jsxs("div",{className:`alert alert-${c} bg-blueW2 border-5 border-secondaryM my-4 position-relative d-flex align-items-start gap-3`,children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:t}),e.jsx("img",{src:"img/ayuda.gif",alt:"Ayuda",style:{width:"80px",height:"70px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-secondaryM border border-2 d-none d-sm-table-cell"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Hola, soy el asistente de ayuda. Voy a guiarte en el proceso de creación de una notificación."}),e.jsxs("p",{children:["Para comenzar, presiona el botón ",e.jsx("strong",{className:"titilar",children:"'Crear Notificación'"}),". Luego, ingresa el título y el contenido del mensaje, y selecciona el tipo de notificación:"]}),e.jsxs("ul",{children:[e.jsx("p",{children:"Informativa (Normal)"}),e.jsx("p",{children:"Búsqueda de Paradero 🔎 "}),e.jsx("p",{children:"Prioritaria (Importante) ⭐ "}),e.jsx("p",{children:"Evadido (En caso de evasiones) 🚨"})]}),e.jsx("button",{type:"button",className:"btn btn-secondaryM text-white btn-sm mx-2",onClick:o,children:"Continuar"}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:t,children:"Finalizar "}),i&&e.jsxs("div",{children:[e.jsxs("p",{className:"mt-3",children:[e.jsx("i",{className:"bi bi-person-fill-add rounded-circle bg-cyan text-white p-2 mx-2"}),'"Usa este ícono  para asociar personas a tu notificación. Esto permitirá que el usuario vea una tarjeta con la información de la persona asociada."']}),e.jsxs("p",{className:"mt-3",children:[e.jsx("i",{className:"bi bi-link rounded-circle bg-teal text-white p-2 mx-2"}),'"Usa este ícono  para agregar enlaces relacionados con la notificación. Esto permitirá que el usuario se dirija directamente al sitio web indicado."']}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:t,children:"Finalizar "})]})]})]})};function Ja(){const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState(!1),[o,n]=s.useState(!1),[m,x]=s.useState(null),[h,N]=s.useState(null),[g,v]=s.useState(null),[u,b]=s.useState(""),[d,f]=s.useState(!1),[S,w]=s.useState(""),[y,_]=s.useState(""),[p,j]=s.useState(""),[C,F]=s.useState("desc"),[E,k]=s.useState(!1),[M,L]=s.useState(""),B=()=>k(!0),K=()=>k(!1),[H,J]=s.useState(!1),ie=P=>{P!=null&&P.asociada_notificacion_id&&Array.isArray(P.asociada_notificacion_id)&&alert(`Esta persona está asociada a las siguientes notificaciones: ${P.asociada_notificacion_id.join(", ")}`)},ce=P=>{F(P.target.value),U(P.target.value)},U=(P,D)=>{let z=[...a];P==="asc"?z.sort((X,Q)=>{var ue,O;return((ue=X.timestamp)==null?void 0:ue.seconds)-((O=Q.timestamp)==null?void 0:O.seconds)}):z.sort((X,Q)=>{var ue,O;return((ue=Q.timestamp)==null?void 0:ue.seconds)-((O=X.timestamp)==null?void 0:O.seconds)}),r(z)};s.useEffect(()=>{f(!0);const P=we(V(I,"db_notificaciones"),qe("timestamp","desc")),D=Re(P,z=>{const X=z.docs.map(Q=>({id:Q.id,...Q.data()}));r(X)},z=>{console.error("Error al obtener notificaciones:",z)});return f(!1),()=>D()},[]),s.useEffect(()=>{(async()=>{const D=we(V(I,"db_personas"),qe("nombre_apellido","asc")),X=(await ae(D)).docs.map(Q=>({id:Q.id,...Q.data()}));c(X)})()},[]);const ee=async(P,D)=>{try{if(!window.confirm("¿Desea eliminar este enlace?"))return;const X=Z(I,"db_notificaciones",D),Q=await Xe(X);if(Q.exists()){const ue=Q.data();if(Array.isArray(ue.enlace)){const O=ue.enlace.filter((W,ye)=>ye!==P);await oe(X,{enlace:O}),alert("Enlace eliminado con exito ")}else alert("El campo 'enlace' no existe o no es un array.")}else alert("No se encontró el documento con el ID proporcionado.")}catch(z){alert.error("Error al eliminar el enlace:",z)}},A=async P=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta notificación?")){f(!0);try{await ge(Z(I,"db_notificaciones",P)),r(z=>z.filter(X=>X.id!==P)),alert("Se eliminó la notificación")}catch(z){console.error("Error al eliminar la notificación:",z),alert("Hubo un error al eliminar la notificación.")}finally{f(!1)}}},T=P=>{x(P),l(!0)},se=()=>{l(!1),x(null),b("")},te=P=>{x(P),n(!0)},le=async()=>{if(m&&u)try{const P=we(V(I,"db_personas"),De("nombre_apellido","==",u)),D=await ae(P);if(D.empty)alert("No se encontró la persona seleccionada.");else{const z=D.docs[0];await Promise.all([oe(Z(I,"db_notificaciones",m),{asociada:Me(u)}),oe(Z(I,"db_personas",z.id),{asociada_notificacion_id:Me(m)})]),alert(`La persona ${u} se asoció a la notificación.`),se()}}catch(P){console.error("Error al asociar captura:",P),alert("Hubo un error al asociar la captura.")}else alert("Por favor, selecciona una persona para asociar.")},xe=async(P,D,z)=>{if(window.confirm(`¿Estás seguro de que deseas eliminar la asociación de la persona ${z} con la notificación?`)){f(!0);try{const Q=Z(I,"db_notificaciones",P);await oe(Q,{asociada:Ve(z)});const ue=Z(I,"db_personas",D);await oe(ue,{asociada_notificacion_id:Ve(P)}),alert(`Se eliminó la asociación de la persona ${z} con la notificación.`)}catch(Q){console.error("Error al eliminar la asociación:",Q),alert("Hubo un error al eliminar la asociación.")}finally{f(!1)}}else alert(`La asociación de la persona ${z} no fue eliminada.`)},$=P=>{switch(P){case"1":return"Informativa";case"2":return"Paradero 🔎";case"3":return"Evasión 👮🏻";case"4":return"Prioritaria ⭐";default:return"No definida"}},R=P=>{switch(P){case 1:return"Normal";case 2:return"Paradero 🔎";case 3:return"Evasión 👮🏻";case 4:return"Prioritaria ⭐";default:return"No definida"}},Y=P=>/^https?:\/\//.test(P)?P:`https://${P}`,q=async P=>{if(y.trim()){f(!0);try{const D=Z(I,"db_notificaciones",P);await oe(D,{contenido:y}),alert("Contenido actualizado correctamente"),N(null)}catch(D){console.error("Error al actualizar contenido:",D),alert("Hubo un error al actualizar el contenido.")}finally{f(!1)}}else alert("El contenido no puede estar vacío")},G=async P=>{if(p.trim()){f(!0);try{const D=Z(I,"db_notificaciones",P);await oe(D,{titulo:p}),alert("titulo actualizado correctamente"),v(null)}catch(D){console.error("Error al actualizar titulo:",D),alert("Hubo un error al actualizar el titulo.")}finally{f(!1)}}else alert("El titulo no puede estar vacío")};return e.jsxs("div",{children:[e.jsxs("div",{className:"row g-3 justify-content-center align-items-center mt-1",children:[e.jsxs("div",{className:"container-lg",children:[H&&e.jsx(Ha,{Date1:"Ninguno",Date2:"Desactivar Busqueda",onCerrar:()=>J(!1),color:"info"}),!H&&e.jsx("div",{className:"d-flex justify-content-end mb-1",children:e.jsxs("button",{className:"btn  fw-semibold",onClick:()=>J(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 titilar"})," ",e.jsx("small",{children:"Ayuda"})]})})]}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 text-center pb-4",children:e.jsx("button",{"aria-label":"Crear Notificación",onClick:B,className:"btn bg-primary border-white border-3 text-white rounded-pill shadow-sm  w-100",children:e.jsxs("span",{children:["Crear Notificación",e.jsx("i",{className:"bi bi-app-indicator rounded-circle border border-2 bg-white text-pink p-1 ms-2"})]})})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 text-center mb-4",children:e.jsxs("div",{className:"form-floating shadow-sm",children:[e.jsxs("select",{className:"form-select",id:"floatingSelectOrder",value:C,onChange:ce,children:[e.jsx("option",{value:"desc",children:"Más recientes primero"}),e.jsx("option",{value:"asc",children:"Más antiguos primero"})]}),e.jsx("label",{htmlFor:"floatingSelectOrder",children:"Ordenar"})]})})]}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10 ",children:e.jsx("div",{className:"list-group",children:a.map(P=>{var D;return e.jsxs("div",{className:"list-group-item mb-4 shadow mt-5",children:[e.jsxs("div",{className:"d-flex align-items-center bg-primary text-white p-3 rounded",children:[e.jsx("button",{className:"btn bg-primaryMuiBlue px-3 border-white border-3 text-white rounded-pill position-absolute top-0 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Notificación",e.jsx("i",{className:"bi bi-send-check-fill ms-1 text-white"})]})}),e.jsx("span",{className:`badge rounded-pill me-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[P.caratula]||"bg-warning text-dark"}`,children:$(P.caratula)}),e.jsx("div",{className:"flex-grow-1"}),e.jsx("small",{className:"text-end",children:new Date(((D=P.timestamp)==null?void 0:D.seconds)*1e3).toLocaleString()})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Título"}),P.id===g?e.jsxs("div",{children:[e.jsx("input",{type:"text",value:p,onChange:z=>j(z.target.value),className:"form-control"}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:()=>G(P.id),disabled:d,children:d?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("small",{className:"mb-2 text-muted",children:P.titulo}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${P.id===g?"btn-danger":"btn-primary"}`,onClick:()=>{P.id===g?v(null):(j(P.titulo),v(P.id))},children:e.jsx("i",{className:`bi ${P.id===g?"bi-x-circle":"bi-pencil"}`})})}),e.jsx("h6",{className:"text-center bg-primary fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Contenido"}),P.id===h?e.jsxs("div",{children:[e.jsx("textarea",{value:y,onChange:z=>_(z.target.value),className:"form-control",rows:"5"}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:()=>q(P.id),disabled:d,children:d?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("small",{className:"mb-2 text-muted",children:P.contenido}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${P.id===h?"btn-danger":"btn-primary"}`,onClick:()=>{P.id===h?N(null):(_(P.contenido),N(P.id))},children:e.jsx("i",{className:`bi ${P.id===h?"bi-x-circle":"bi-pencil"}`})})}),P.enlace&&P.enlace.length>0?e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Enlaces Asociados"}),e.jsx("ul",{className:"list-unstyled",children:P.enlace.map((z,X)=>e.jsxs("li",{className:"d-flex align-items-center justify-content-center gap-3 p-2 rounded-pill bg-light shadow-sm",children:[e.jsx("i",{className:"bi bi-browser-chrome text-primary girar",style:{fontSize:"20px"}}),e.jsx("a",{href:Y(z),target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none text-primary text-center flex-grow-1",style:{maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:z}),e.jsx("button",{className:"btn btn-redUi1 btn-sm rounded-circle",onClick:()=>ee(X,P.id),children:e.jsx("i",{className:"bi bi-trash text-white"})})]},X))})]}):e.jsx("p",{className:"text-danger mt-3 text-center",children:"No posee enlaces asociados"}),P.asociada&&P.asociada.length>0?e.jsxs("div",{className:"mt-3",children:[e.jsx("h6",{className:"text-center bg-primary fw-semibold shadow-sm text-white py-1 rounded",children:"Personas Asociadas"}),P.asociada.map((z,X)=>{var ue,O;const Q=t.find(W=>W.nombre_apellido===z);return Q?e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light",children:[e.jsx("img",{src:((ue=Q.base64)==null?void 0:ue.trim())||be,alt:Q.nombre_apellido||"Imagen no disponible",className:"rounded-circle me-3",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[e.jsxs("span",{children:[X+1,". ",z]}),((O=Q.asociada_notificacion_id)==null?void 0:O.length)>0&&e.jsxs("span",{className:"badge bg-teal text-white ms-3",onClick:()=>ie(Q),children:["Asociado ",Q.asociada_notificacion_id.length]})]}),e.jsx("button",{className:"btn btn-sm btn-redUi1 text-white ms-3",onClick:()=>xe(P.id,Q.id,z),children:e.jsx("i",{className:"bi bi-trash"})})]},X):null})]}):e.jsx("span",{className:"text-danger text-center d-block",children:"No hay personas asociadas"})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 p-3",children:[e.jsx("button",{className:"btn btn-cyan text-white btn-sm rounded-circle ",onClick:()=>T(P.id),children:e.jsx("i",{className:"bi bi-person-fill-add"})}),e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle ",onClick:()=>te(P.id),children:e.jsx("i",{className:"bi bi-link-45deg"})}),e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle ",onClick:()=>A(P.id),disabled:d,children:e.jsx("i",{className:"bi bi-trash3-fill"})})]})]},P.id)})})})}),e.jsx("div",{className:`modal fade bg-dark ${i?"show":""}`,style:{display:i?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!i,children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Asociar Persona a la Notificación"}),e.jsx("button",{type:"button",className:"btn-close",onClick:se,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsx("label",{htmlFor:"persona",className:"form-label mt-3 fw-semibold",children:"Selecciona una persona:"}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar por nombre o DNI",value:M,onChange:P=>L(P.target.value)}),e.jsx("button",{className:"btn btn-outline-secondary ms-2",onClick:()=>L(""),disabled:!M,children:"Limpiar"})]}),M&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-start fw-bold",children:"Resultados:"}),e.jsx("ul",{className:"list-group",style:{maxHeight:"150px",overflowY:"auto"},children:t.filter(P=>`${P.nombre_apellido} ${P.documento}`.toLowerCase().includes(M.toLowerCase())).map(P=>{var D;return e.jsxs("li",{className:"list-group-item d-flex align-items-center",onClick:()=>{b(P.nombre_apellido),L("")},style:{cursor:"pointer"},children:[e.jsx("img",{src:((D=P.base64)==null?void 0:D.trim())||be,alt:P.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsxs("p",{className:"mb-0",children:[P.nombre_apellido," - ",P.documento]}),e.jsx("span",{className:`badge rounded-pill border border-white border-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[P.prioridad]||"bg-warning text-dark"}`,children:R(P.prioridad)})]})]},P.id)})})]}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:u||"Selecciona una persona"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"300px",overflowY:"auto"},children:t.filter(P=>`${P.nombre_apellido} ${P.documento}`.toLowerCase().includes(M.toLowerCase())).map(P=>{var D;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center",onClick:()=>b(P.nombre_apellido),children:[e.jsx("img",{src:((D=P.base64)==null?void 0:D.trim())||be,alt:P.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),P.nombre_apellido," - ",P.documento," -",e.jsx("span",{className:`badge rounded-pill border border-white border-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[P.prioridad]||"bg-warning text-dark"}`,children:R(P.prioridad)})]})},P.id)})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:le,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Asociando..."]}):"Asociar Captura"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:se,disabled:d,children:"Cerrar"})]})]})})}),e.jsx(Ga,{showModalLink:o,setShowModalLink:n,selectedNotifId:m,setNewLink:w,newLink:S,setNotificaciones:r}),e.jsx(Wa,{showModalNot:E,closeModalNot:K})]})}const Ya=({loading:a})=>e.jsxs("div",{className:"container text-center mt-5 mt-sm-5 mt-md-0 mt-lg-0",children:[e.jsx("h1",{className:"text-center  mb-3 animate__animated animate__bounce",children:"Administrador de Notificaciones"}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"position-relative",children:a?e.jsx(re,{}):e.jsx("div",{className:"list-group",children:e.jsx(Ja,{})})})})]}),Za="/CX2/gif/dash.gif",Xa=()=>e.jsxs("div",{children:[e.jsx("h5",{className:"text-secondary fs-1 text-center mb-5 text-purple mt-5 mt-sm-5 mt-md-0 mt-lg-0",children:"Bienvenido al Panel de Control"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 d-flex flex-column justify-content-center align-items-center",children:[e.jsxs("p",{className:"p-2 text-center",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-greenW text-purple"}),"Aquí podrás administrar los recursos del sistema de forma fácil y sencilla."]}),e.jsxs("p",{className:"p-2 text-center",children:[e.jsx("i",{className:"bi bi-lightbulb p-3 rounded-circle me-3 bg-greenW text-purple"}),"Recuerda que, ante cualquier problema, puedes solicitar asistencia técnica."]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:Za,alt:"Descripción de la imagen",className:"img-fluid p-2 rounded-circle shadow",style:{maxWidth:"300px",height:"auto"}})})]})]}),Qa=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),i=["alerta","captura","date","descripcion_fisica","documento","entidad","motivo_captura","nombre_apellido","numero_contacto","paradero","prioridad","sexo","usuario","asociada_notificacion_id"],l=async()=>{try{const N=(await ae(V(I,"db_personas"))).docs.map(g=>({id:g.id,...g.data()}));r(N)}catch(h){console.error("Error al obtener los datos:",h)}},o=h=>{c(N=>N.includes(h)?N.filter(g=>g!==h):[...N,h])},n=()=>{c(i)},m=()=>{c([])},x=()=>{if(a.length===0){console.error("No hay datos para descargar");return}if(t.length===0){console.error("Debe seleccionar al menos un campo");return}const h=a.map(v=>{const u={};return t.forEach(b=>{u[b]=v[b]}),u}),N=je.json_to_sheet(h),g=je.book_new();je.book_append_sheet(g,N,"Datos Seleccionados"),Ge(g,"Datos_Seleccionados.xlsx")};return s.useEffect(()=>{l()},[]),e.jsxs("div",{className:"container-lg mt-5 mt-sm-5 mt-md-0 mt-lg-0",children:[e.jsxs("h2",{className:"text-center mb-4",children:["Exportar Datos de Capturas ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"text-center mb-5",children:"Selecciona los campos que deseas incluir en la exportación. "}),e.jsxs("div",{className:"d-flex justify-content-center mb-4",children:[e.jsx("button",{className:"btn btn-outline-green me-2",onClick:n,children:"Seleccionar Todos"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:m,children:"Limpiar Selección"})]}),e.jsx("form",{className:"mb-4",children:e.jsx("div",{className:"row border border-3 border-dark p-4 shadow rounded-4",children:i.map(h=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",style:{display:"flex",alignItems:"center"},children:e.jsxs("div",{className:"form-check w-100",children:[e.jsx("input",{type:"checkbox",className:"form-check-input bg-green",id:h,value:h,onChange:()=>o(h),checked:t.includes(h)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:h,children:h})]})},h))})}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn btn-green text-white fw-semibold",onClick:x,children:["Descargar Datos Seleccionados ",e.jsx("i",{className:"bi bi-filetype-xml"})]})})]})},$s=({data1:a,data2:r})=>{var g;const[t,c]=s.useState(!1),i=()=>c(!0),l=()=>c(!1),[o,n]=s.useState(""),x=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),h=async v=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta persona?"))try{const u=Z(I,"db_personas_desactivados",v.id),b=new Date,d=`${b.getDate().toString().padStart(2,"0")}/${(b.getMonth()+1).toString().padStart(2,"0")}/${b.getFullYear().toString().slice(-2)}`;await fe(u,{...v,usuario_baja:x.email||"usuario_desconocido",usuario_baja_fecha:d});const f=Z(I,"db_personas",v.id);await ge(f),r(),n("Persona eliminada y copiada a la colección de desactivados."),setTimeout(()=>n(""),3e3)}catch(u){console.error("Error al eliminar persona: ",u),n("Error al eliminar la persona. Inténtalo de nuevo."),setTimeout(()=>n(""),3e3)}},N=v=>{h(v),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-trash3-fill"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("h5",{className:"modal-title ",children:"Eliminar Persona"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(g=a.base64)==null?void 0:g.trim(),alt:a.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(a==null?void 0:a.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(a==null?void 0:a.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-danger  bg-redW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas eliminar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:()=>{N(a)},children:"Confirmar Eliminación"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Ka=({data1:a,data2:r})=>{const[t,c]=s.useState(!1),i=()=>c(!0),l=()=>c(!1),[o,n]=s.useState(),[m,x]=s.useState(a.descripcion_fisica),[h,N]=s.useState(a.documento),[g,v]=s.useState(a.entidad),[u,b]=s.useState(a.motivo_captura),[d,f]=s.useState(a.nombre_apellido),[S,w]=s.useState(a.prioridad),[y,_]=s.useState(a.sexo),[p,j]=s.useState(a.numero_contacto),[C,F]=s.useState(a.base64),[E,k]=s.useState("edicion desde menu de capturas"),[M,L]=s.useState(a.paradero),[B,K]=s.useState(a.alerta),[H,J]=s.useState(!1),[ie,ce]=s.useState(!1),[U,ee]=s.useState(!1),A=()=>{const q={nombre_apellido:d,documento:h,sexo:y,descripcion_fisica:m,entidad:g,motivo_captura:u,numero_contacto:p,prioridad:S,alerta:B,paradero:M};return["nombre_apellido","documento","sexo","descripcion_fisica","entidad","motivo_captura","numero_contacto","prioridad","alerta","paradero"].filter(D=>q[D]!==a[D])},T=()=>{J(q=>!q)},se=()=>{ce(q=>!q)},te=()=>{ee(q=>!q)},le=q=>{const G=q.target.files[0];if(G){const P=new FileReader;P.onloadend=()=>{F(P.result)},P.readAsDataURL(G)}else alert("Por favor, selecciona un archivo de imagen válido.")},xe=async()=>{const q=/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/;if(!d.trim()){alert("El campo Nombre y Apellido no puede estar vacío.");return}if(!q.test(d)){alert("El campo Nombre y Apellido solo debe contener letras.");return}const G=/^[0-9]+$/;if(!h.trim()){alert("El campo Documento no puede estar vacío.");return}if(!G.test(h)){alert("El campo Documento solo debe contener números.");return}if(h.length<8){alert("El Documento debe tener al menos 8 dígitos.");return}if(!E.trim()){alert("La descripción de las ediciones es obligatoria.");return}const P=Z(I,"db_personas",a.id),D=A();try{n(!0);const z=new Date,X=`${z.getDate().toString().padStart(2,"0")}/${(z.getMonth()+1).toString().padStart(2,"0")}/${z.getFullYear().toString().slice(-2)}`;await oe(P,{descripcion_fisica:m,documento:h,entidad:g,motivo_captura:u,nombre_apellido:d,prioridad:S,sexo:y,numero_contacto:p,alerta:B,base64:C,paradero:M,ediciones:E.trim()?[...a.ediciones||[],{motivo:E,usuario:Y.email,fecha:X,campos:D}]:a.ediciones||[]}),r(),alert("Los cambios se han guardado correctamente.")}catch(z){console.error("Error al actualizar la persona: ",z),alert("Error al guardar los cambios. Inténtalo de nuevo.")}n(!1)},$=q=>{const G=parseInt(q.target.value,10);w(G),G===2&&(L(!0),K(!1)),G===1&&(L(!1),K(!1)),G===3&&(K(!0),L(!1)),G===4&&(L(!1),K(!1))},Y=(()=>{const q=localStorage.getItem("user");return q?JSON.parse(q):null})();return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-pen"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header ",children:[" ",e.jsx("img",{src:"img/asistente.gif",alt:"Asistente",style:{width:"60px",height:"60px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border "}),e.jsx("h5",{className:"modal-title mx-4",children:"Asistente de Edición "}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:`col-3 mt-3 d-flex align-items-center ${H?"titilar":""}`,children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:T,children:[e.jsx("img",{src:C||"https://via.placeholder.com/40",alt:(C==null?void 0:C.nombre_apellido)||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:H?"Editando":"Editar"})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:d,onChange:q=>f(q.target.value)}),e.jsx("label",{className:" badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"number",className:"form-control",value:h,onChange:q=>N(q.target.value)}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select text-center",value:y,onChange:q=>_(q.target.value),children:[e.jsx("option",{value:"",children:"Seleccione una Opción"}),e.jsx("option",{value:"masculino",children:"Masculino 👨"}),e.jsx("option",{value:"femenino",children:"Femenino 👩"}),e.jsx("option",{value:"otros",children:"Otros 👭🏻"})]}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Sexo"})]})})]})]}),e.jsxs("div",{className:"btn-group mt-3",role:"group","aria-label":"Basic example",children:[e.jsx("button",{type:"button",className:`btn btn-secondaryM text-white ${U?"titilar":""}`,onClick:te,children:U?e.jsx(e.Fragment,{children:"Editando Datos de Captura "}):"Datos de Captura"}),e.jsx("button",{type:"button",className:`btn btn-primary text-white ${ie?"titilar":""}`,onClick:se,children:ie?e.jsx(e.Fragment,{children:"Editando Descripciones"}):"Descripciones"})]}),H&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Editar Fotografía ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:T})}),e.jsxs("div",{className:"my-3 text-center text-purple",children:[e.jsx("input",{type:"file",className:"form-control",onChange:le}),C&&e.jsx("img",{src:C,alt:"Imagen previa",className:"img-fluid mt-5",style:{maxWidth:"300px"}})]})]})]}),U&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Datos de la Captura ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:te})}),e.jsx("span",{className:"badge text-bg-secondaryM text-white me-2 ",children:"Atención "}),e.jsxs("small",{children:["La prioridad ",e.jsx("strong",{children:"modifica el contexto"})," de la captura"]})]}),e.jsxs("div",{className:"form-floating ",children:[e.jsxs("select",{className:"form-select text-center shadow-sm border border-secondaryM mb-3  border-opacity-50 ",value:S,onChange:$,children:[e.jsx("option",{value:"",children:"Seleccione una Opción"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero 🔎"}),e.jsx("option",{value:"3",children:"Evadido 🚨"}),e.jsx("option",{value:"4",children:"Prioridad ⭐"})]}),e.jsx("label",{className:"fw-semibold opacity-75 ms-2",children:"Prioridad"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Entidad que solicita captura"})}),e.jsx("input",{className:"form-control bg-blueW2",value:g,onChange:q=>v(q.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Numero de Contacto Entidad "})}),e.jsx("input",{className:"form-control bg-blueW2",value:p,onChange:q=>j(q.target.value)})]})]}),ie&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Descripciones ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:se})}),e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Descripción Fisica "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:m,onChange:q=>x(q.target.value),style:{minHeight:"160px"}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Motivo Captura "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:u,onChange:q=>b(q.target.value),style:{minHeight:"150px"}})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:l,children:e.jsx("i",{className:"bi bi-x-circle"})}),e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle",onClick:xe,disabled:o,children:o?e.jsx("i",{className:"bi bi-floppy2 titilar"}):e.jsx("i",{className:"bi bi-floppy2"})})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},He=({data1:a,data2:r,dataRefresh:t,setSelectedDocs:c})=>{const[i,l]=s.useState(!1),[o,n]=s.useState(""),[m,x]=s.useState(!1),h=()=>l(!0),N=()=>l(!1),g=()=>{c([])},u=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),b=async()=>{if(!(!a||a.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas copiar estas personas a la colección de desactivados?"))){x(!0);try{const S=r.filter(w=>a.includes(w.id)).map(async w=>{const y=V(I,"db_personas_desactivados"),_=new Date,p=`${_.getDate().toString().padStart(2,"0")}/${(_.getMonth()+1).toString().padStart(2,"0")}/${_.getFullYear().toString().slice(-2)}`;await Ee(y,{...w,usuario_baja:(u==null?void 0:u.email)||"usuario_desconocido",usuario_baja_fecha:p});const j=Z(I,"db_personas",w.id);await ge(j)});await Promise.all(S),n("Personas copiadas a la colección de desactivados y eliminadas de la colección original."),t(),g()}catch(f){console.error("Error al eliminar personas:",f),n("Hubo un error al copiar o eliminar algunas personas.")}setTimeout(()=>n(""),3e3),x(!1),N()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:h,disabled:m,children:e.jsx("i",{className:"bi bi-trash3-fill"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Eliminar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:N})]}),e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-redW p-2 rounded-pill text-secondaryMuiRed fw-bold",children:["Se eliminarán ",a.length," persona",a.length!==1&&"s"," seleccionada",a.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>a.includes(d.id)).map(d=>{var f;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(f=d.base64)==null?void 0:f.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>c(S=>S.filter(w=>w!==d.id)),title:"Quitar de la selección"})]},d.id)})}),e.jsxs("p",{className:"text-danger text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas eliminar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:N,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:b,disabled:m,children:m?"Eliminando...":"Confirmar Eliminación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"}),o&&e.jsx("div",{className:"alert alert-success mt-2",children:o})]})},$e=({Date1:a,Date2:r,setSelectedDocs:t,onCerrar:c,color:i})=>e.jsxs("div",{className:`card bg-${i} shadow my-4 position-relative text-dark d-flex align-items-start gap-3 p-4`,style:{overflow:"visible"},children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:c}),e.jsx("img",{src:"img/Perfiles/9.png",alt:"Asistente",className:" position-absolute",style:{width:"120px",height:"200px",objectFit:"contain",top:"-30px",left:"-20px"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:e.jsx("strong",{children:"Asistente de Selección"})}),e.jsxs("p",{className:"mb-3",children:["Personas Seleccionadas: ",e.jsxs("strong",{children:[a.length," 🧑"]})]}),e.jsx("strong",{children:a.length>0?e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-start p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(l=>a.includes(l.id)).map(l=>{var o;return e.jsxs("div",{className:"badge text-dark shadow d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.75rem"},children:[e.jsx("img",{src:(o=l.base64)==null?void 0:o.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),l.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>t(n=>n.filter(m=>m!==l.id)),title:"Quitar de la selección"})]},l.id)})}):e.jsx("span",{className:"text-danger",children:"Ninguna"})})]})]}),ze=({searchTerm:a,setSearchTerm:r})=>e.jsxs("div",{className:"form-floating mb-3 position-relative",children:[e.jsx("input",{type:"text",className:"form-control shadow-sm pe-5",placeholder:"Buscar por nombre",value:a,onChange:t=>r(t.target.value)}),e.jsx("label",{children:"Buscar por Nombre"}),a&&e.jsx("button",{type:"button",className:"btn btn-link position-absolute top-50 end-0 translate-middle-y pe-3",onClick:()=>r(""),"aria-label":"Cancelar búsqueda",children:e.jsx("i",{className:"bi bi-x-circle"})})]}),zs=({prioridadFilter:a,setPrioridadFilter:r})=>e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Floating label select example",value:a,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todas las Prioridades"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero 🔎"}),e.jsx("option",{value:"3",children:"Evadido 🚨"}),e.jsx("option",{value:"4",children:"Prioritaria ⭐"})]}),e.jsx("label",{children:"Seleccione una Prioridad"})]}),Oe=({orden:a,setOrden:r})=>e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Ordenar alfabéticamente",value:a,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"asc",children:"Orden A-Z"}),e.jsx("option",{value:"desc",children:"Orden Z-A"})]}),e.jsxs("label",{children:["Ordenar ",e.jsx("i",{className:"bi bi-alphabet"})]})]}),et=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState([]),[o,n]=s.useState(!0);s.useState("");const[m,x]=s.useState(""),[h,N]=s.useState(""),[g,v]=s.useState(!0),[u,b]=s.useState("asc"),d=V(I,"db_personas"),f=async()=>{n(!0);try{const j=(await ae(d)).docs.map(C=>({...C.data(),id:C.id}));r(j),c(j)}catch(p){console.error("Error al obtener personas: ",p)}finally{n(!1)}},S=p=>p.sort((j,C)=>u==="asc"?j.nombre_apellido.localeCompare(C.nombre_apellido):C.nombre_apellido.localeCompare(j.nombre_apellido));s.useEffect(()=>{f()},[]),s.useEffect(()=>{const p=a.filter(C=>C.nombre_apellido&&C.nombre_apellido.toLowerCase().includes(m.toLowerCase())||C.documento&&C.documento.includes(m)).filter(C=>h?C.prioridad===parseInt(h,10):!0),j=S(p);c(j)},[m,a,h,u]),s.useMemo(()=>t.filter(p=>i.includes(p.id)),[i,t]);const w=p=>{l(j=>j.includes(p)?j.filter(C=>C!==p):[...j,p])},y=()=>{if(i.length===t.length)l([]);else{const p=t.map(j=>j.id);l(p)}},_=p=>{switch(Number(p)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero 🔎"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido 🚨"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ⭐"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg ",children:[e.jsxs("div",{className:"row",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5 ",children:"Listado de Capturas"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(ze,{searchTerm:m,setSearchTerm:x})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(zs,{prioridadFilter:h,setPrioridadFilter:N})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Oe,{orden:u,setOrden:b})})]}),o?e.jsx(re,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2  mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(He,{data1:i,data2:a,dataRefresh:f,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:()=>l([])})]}),g&&e.jsx($e,{Date1:i,Date2:a,setSelectedDocs:l,onCerrar:()=>v(!1),color:"blueW2"}),!g&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>v(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2"})," ",e.jsxs("small",{children:["Ver Resumen ( ",e.jsxs("span",{className:"text-primary",children:[i.length," 🧑"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:y})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(p=>{var j;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(p.id),onChange:()=>w(p.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((j=p.base64)==null?void 0:j.trim())||"https://via.placeholder.com/40",alt:p.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize",children:p.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:p.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:_(p.prioridad)}),e.jsxs("td",{children:[e.jsx(Ka,{data1:p,data2:f}),e.jsx($s,{data1:p,data2:f})]}),e.jsx("td",{})]},p.id)})})]})})]})})]})},Os=({data1:a,data2:r,dataRefresh:t,setSelectedDocs:c})=>{const[i,l]=s.useState(!1),[o,n]=s.useState(!1),m=()=>l(!0),x=()=>l(!1),h=()=>{c([])},g=(()=>{const u=localStorage.getItem("user");return u?JSON.parse(u):null})(),v=async()=>{if(!(!a||a.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas modificar estas personas a la colección?"))){n(!0);try{const d=r.filter(f=>a.includes(f.id)).map(async f=>{const S=Z(I,"db_personas",f.id),w=new Date,y=`${w.getDate().toString().padStart(2,"0")}/${(w.getMonth()+1).toString().padStart(2,"0")}/${w.getFullYear().toString().slice(-2)}`;await fe(S,{...f,prioridad:1,paradero:!1,alerta:!1,ediciones:[...f.ediciones||[],{motivo:"cambio de prioridad",usuario:g.email,fecha:y}]})});await Promise.all(d),alert("Personas modificadas con exito."),t(),h()}catch(b){console.error("Error al modificar personas:",b),alert("Hubo un error al modificar algunas personas.")}n(!1),x()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-orange text-white btn-sm rounded-circle ",onClick:m,disabled:o,children:e.jsx("i",{className:"bi bi-star-fill"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Eliminar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:x})]}),e.jsx("hr",{className:"border border-orange border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-orangeW p-2 rounded-pill text-orange fw-bold",children:["Se modificarán ",a.length," persona",a.length!==1&&"s"," seleccionada",a.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(u=>a.includes(u.id)).map(u=>{var b;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(b=u.base64)==null?void 0:b.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),u.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>c(d=>d.filter(f=>f!==u.id)),title:"Quitar de la selección"})]},u.id)})}),e.jsxs("p",{className:"text-orangeDb text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas modificar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Cancelar"}),e.jsx("button",{className:"btn btn-orangeDb text-white",onClick:v,disabled:o,children:o?"Cargando...":"Confirmar Modificación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},as=({prioridadFilter:a,setPrioridadFilter:r,personas:t})=>{const c=[...new Set(t.map(i=>i.entidad))];return e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Floating label select example",value:a,onChange:i=>r(i.target.value),children:[e.jsx("option",{value:"",children:"Todas las Entidades"}),c.map((i,l)=>e.jsx("option",{value:i,children:i},l))]}),e.jsx("label",{children:"Seleccione una Entidad"})]})},ts=(a,r,t)=>a.filter(c=>{var i,l;return((i=c.nombre_apellido)==null?void 0:i.toLowerCase().includes(r.toLowerCase()))||((l=c.documento)==null?void 0:l.includes(r))}).filter(c=>!t||c.entidad===t),is=(a,r)=>a.sort((t,c)=>r==="asc"?t.nombre_apellido.localeCompare(c.nombre_apellido):c.nombre_apellido.localeCompare(t.nombre_apellido)),st=(a,r)=>r?a.filter(t=>r==="capturado"?t.captura===!0:r==="evadido"?t.captura===!1:!0):a,rs=(a,r,t,c)=>{a(""),r(""),t("asc"),c&&c("")},at=({data1:a,data2:r})=>{var g;const[t,c]=s.useState(!1),i=()=>c(!0),l=()=>c(!1),[o,n]=s.useState(!1),x=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),h=async v=>{if(window.confirm("¿Estás seguro de que deseas modificar esta persona?")){n(!0);try{const u=Z(I,"db_personas",v.id),b=new Date,d=`${b.getDate().toString().padStart(2,"0")}/${(b.getMonth()+1).toString().padStart(2,"0")}/${b.getFullYear().toString().slice(-2)}`;await fe(u,{...v,prioridad:1,paradero:!1,alerta:!1,ediciones:[...v.ediciones||[],{motivo:"cambio de prioridad",usuario:x.email,fecha:d}]}),r(),n(!1),alert("Modificación exitosa.")}catch(u){console.error("Error al eliminar persona: ",u),alert("Error al modificar la persona. Inténtalo de nuevo.")}}},N=v=>{h(v),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-orange text-white btn-sm rounded-circle m-1",onClick:i,disabled:o,children:e.jsx("i",{className:"bi bi-star-fill"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("h5",{className:"modal-title ",children:"Modificar Prioridad Persona"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-orange border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(g=a.base64)==null?void 0:g.trim(),alt:a.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(a==null?void 0:a.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(a==null?void 0:a.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-orange  bg-orangeW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-orangeDb text-white",onClick:()=>{N(a)},children:"Confirmar Cambio"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},tt=({data1:a,data2:r})=>{var u;const[t,c]=s.useState("busqueda paradero"),[i,l]=s.useState(!1),o=()=>l(!0),n=()=>l(!1),[m,x]=s.useState(!1),N=(()=>{const b=localStorage.getItem("user");return b?JSON.parse(b):null})(),g=async b=>{if(window.confirm("¿Estás seguro de que deseas modificar esta persona?")){x(!0);try{const d=Z(I,"db_personas",b.id),f=new Date,S=`${f.getDate().toString().padStart(2,"0")}/${(f.getMonth()+1).toString().padStart(2,"0")}/${f.getFullYear().toString().slice(-2)}`;await fe(d,{...b,prioridad:1,paradero:!1,alerta:!1,ediciones:[...b.ediciones||[],{motivo:"desactivar busqueda paradero",usuario:N.email,fecha:S}]}),r(),x(!1),alert("Modificación exitosa.")}catch(d){console.error("Error al eliminar persona: ",d),alert("Error al modificar la persona. Inténtalo de nuevo.")}}},v=b=>{g(b),n()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primaryMuiBlue text-white btn-sm rounded-circle m-1",onClick:o,disabled:m,children:e.jsx("i",{className:"bi bi-search"})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsxs("h5",{className:"modal-title text-capitalize",children:["Modificar ",t]}),e.jsx("button",{type:"button",className:"btn-close ",onClick:n})]}),"  ",e.jsx("hr",{className:"border border-primary border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(u=a.base64)==null?void 0:u.trim(),alt:a.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(a==null?void 0:a.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(a==null?void 0:a.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-primary  bg-blueW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primaryMuiBlue text-white",onClick:()=>{v(a)},children:"Confirmar Cambio"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},it=({data1:a,data2:r})=>{const[t,c]=s.useState(!1),i=()=>c(!1),[l,o]=s.useState(!1),[n,m]=s.useState(""),[x,h]=s.useState(""),[N,g]=s.useState(""),u=(()=>{const w=localStorage.getItem("user");return w?JSON.parse(w):null})(),b=async()=>{if(window.confirm(`¿Estás seguro de que deseas ${N}?`)){o(!0);try{const w=Z(I,"db_personas",a.id),y=new Date,_=`${y.getDate().toString().padStart(2,"0")}/${(y.getMonth()+1).toString().padStart(2,"0")}/${y.getFullYear().toString().slice(-2)}`;await fe(w,{...a,captura:!0,capturas_informacion_estados:[...a.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:u.email,captura_fecha:_,captura_autor:x,captura_descripcion:n}]}),r(),o(!1),alert(`${N} realizado.`)}catch(w){console.error("Error al modificar persona: ",w),alert("Error al modificar la persona. Inténtalo de nuevo.")}}},d=async w=>{console.log(w),o(!0);try{const y=Z(I,"db_personas",w),_=new Date,p=`${_.getDate().toString().padStart(2,"0")}/${(_.getMonth()+1).toString().padStart(2,"0")}/${_.getFullYear().toString().slice(-2)}`;await oe(y,{...w,prioridad:1,capturas_informacion_estados:[...w.capturas_informacion_estados||[],{captura_motivo:"desactivar alerta",captura_informa_usuario:u.email,captura_fecha:p}]}),r(),o(!1),alert("Alerta desactivada correctamente.")}catch{alert("No se pudo desactivar la alerta.")}},f=()=>{c(!0),g("Informar Captura de Persona")},S=async()=>{if(window.confirm("¿Estás seguro de que deseas QUITAR EL ESTADO DE  CAPTURADO ?")){o(!0);try{const w=Z(I,"db_personas",a.id),y=new Date,_=`${y.getDate().toString().padStart(2,"0")}/${(y.getMonth()+1).toString().padStart(2,"0")}/${y.getFullYear().toString().slice(-2)}`;await oe(w,{...a,captura:!1,capturas_informacion_estados:[...a.capturas_informacion_estados||[],{captura_motivo:"quitar estado de captura",captura_quita_estado_usuario:u.email,captura_quita_fecha:_}]}),r(),alert("Captura quitada correctamente."),o(!1)}catch(w){console.error("Error al quitar la captura:",w),alert("No se pudo quitar la captura. Inténtalo de nuevo."),o(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:a.captura?"bg-redW ":"",children:e.jsxs("div",{className:"d-flex flex-column gap-1",children:[a.captura?e.jsx("button",{className:"btn btn-pink text-white btn-sm w-100",onClick:()=>{S()},children:"Quitar Captura"}):e.jsx("button",{className:"btn btn-primary btn-sm w-100",onClick:f,disabled:l,children:"Marcar Capturado"}),a.alerta?e.jsx("button",{className:"btn btn-secondaryMuiRed text-white btn-sm w-100",onClick:()=>{window.confirm("¿Seguro que deseas desactivar la alerta?")&&d(a.id)},children:"Desactivar Alerta"}):e.jsx("button",{className:"btn btn-secondaryM btn-sm w-100",disabled:!0,children:"Alerta Inactiva"})]})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"👮"}),e.jsxs("h5",{className:"modal-title mx-3",children:[N," "]}),e.jsx("button",{type:"button",className:"btn-close ",onClick:i})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3 mt-3 d-flex align-items-center",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},children:[e.jsx("img",{src:a.base64?a.base64.trim():"",alt:a.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:e.jsx("span",{children:"Capturado  👮 "})})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:a.nombre_apellido,disabled:!0}),e.jsx("label",{className:"badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2 ",children:[e.jsx("input",{className:"form-control border-0 border",value:a.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2 ",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:a.sexo,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Sexo"})]})})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM"}),N," ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Autor / Entidad que realizó la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:x,onChange:w=>h(w.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Breve relato de la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:n,onChange:w=>m(w.target.value)})]})]}),e.jsxs("p",{className:"text-primary bg-blueW rounded my-2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:b,disabled:!x||!n||l,children:N})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ls=({personas:a,selectedDocs:r,toggleSelectDoc:t,toggleSelectAll:c,getPrioridadLabel:i,fetchPersonas:l,isFiltered:o,color:n,prioridad:m})=>e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[!o&&e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:r.length===a.length,onChange:c})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Entidad"}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"DNI"}),m===3?e.jsx("th",{className:"d-none d-sm-table-cell",children:"Fecha"}):null,e.jsx("th",{className:"d-none d-sm-table-cell",children:"Prioridad"}),m===3?e.jsx("th",{}):null,e.jsx("th",{})]})}),e.jsx("tbody",{children:a.map(x=>{var h;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{className:x.captura?"bg-redW":"",children:e.jsx("input",{type:"checkbox",checked:r.includes(x.id),onChange:()=>t(x.id)})}),e.jsx("td",{className:x.captura?"bg-redW ":"",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((h=x.base64)==null?void 0:h.trim())||be,alt:x.nombre_apellido,className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize d-inline-block text-truncate",children:x.nombre_apellido})]})}),e.jsx("td",{className:`d-none d-sm-table-cell text-dark ${x.captura?"bg-redW":n}`,children:x.entidad}),e.jsx("td",{className:x.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:x.documento}),m===3?e.jsx("th",{className:x.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:x.date}):null,e.jsx("td",{className:x.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:x.captura?e.jsx("span",{className:"badge bg-dark",children:"Capturado 👮"}):i(x.prioridad)}),m===3?e.jsx(it,{data1:x,data2:l}):null,e.jsxs("td",{className:x.captura?"bg-redW":"",children:[m===4?e.jsx(at,{data1:x,data2:l}):null,m===2?e.jsx(tt,{data1:x,data2:l}):null,e.jsx($s,{data1:x,data2:l})]})]},x.id)})})]})}),ns=a=>{switch(Number(a)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero 🔎"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido 🚨"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ⭐"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}},os=a=>{const[r,t]=s.useState([]),[c,i]=s.useState(!0),l=V(I,"db_personas"),o=async()=>{i(!0);try{let m=(await ae(l)).docs.map(x=>({...x.data(),id:x.id}));m=m.filter(x=>x.prioridad===a),t(m)}catch(n){console.error("Error al obtener personas: ",n)}finally{i(!1)}};return s.useEffect(()=>{o()},[]),{personas:r,loading:c,fetchPersonas:o}},cs=a=>{const[r,t]=s.useState([]);return{selectedDocs:r,setSelectedDocs:t,toggleSelectDoc:l=>{t(o=>o.includes(l)?o.filter(n=>n!==l):[...o,l])},toggleSelectAll:()=>{if(a&&a.length>0)if(r.length===a.length)t([]);else{const l=a.map(o=>o.id);t(l)}}}},rt=()=>{const[a,r]=s.useState(4),{personas:t,loading:c,fetchPersonas:i}=os(a),[l,o]=s.useState([]),[n,m]=s.useState(""),[x,h]=s.useState(""),[N,g]=s.useState(!0),[v,u]=s.useState("asc"),{selectedDocs:b,setSelectedDocs:d,toggleSelectDoc:f,toggleSelectAll:S}=cs(l||[]),w=n||x;return s.useEffect(()=>{const y=ts(t,n,x),_=is(y,v);o(_)},[n,t,x,v]),e.jsxs("div",{className:"container-lg",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0  ",children:"Listado de Capturas Prioritarias"}),e.jsxs("div",{className:"card my-5",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(ze,{searchTerm:n,setSearchTerm:m})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(as,{prioridadFilter:x,setPrioridadFilter:h,personas:t})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Oe,{orden:v,setOrden:u})})]}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>rs(m,h,u),className:"btn btn-primary btn-sm",children:"Limpiar Filtros"})})]})]}),c?e.jsx(re,{}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[b.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Os,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d}),e.jsx(He,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d}),e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:()=>d([])})]}),N&&e.jsx($e,{Date1:b,Date2:t,setSelectedDocs:d,onCerrar:()=>g(!1),color:"blueW2"}),!N&&b.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>g(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2"})," ",e.jsxs("small",{children:["Ver Resumen ( ",e.jsxs("span",{className:"text-primary",children:[b.length," 🧑"]}),")"]})]})})]}),e.jsx(ls,{personas:l,selectedDocs:b,toggleSelectDoc:f,toggleSelectAll:S,getPrioridadLabel:ns,fetchPersonas:i,isFiltered:w,color:"bg-yellowW",prioridad:a})]})})]})},lt=({data1:a,data2:r,dataRefresh:t,setSelectedDocs:c})=>{const[i,l]=s.useState(!1),[o,n]=s.useState(!1),m=()=>l(!0),x=()=>l(!1),h=()=>{c([])},g=(()=>{const u=localStorage.getItem("user");return u?JSON.parse(u):null})(),v=async()=>{if(!(!a||a.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas recuperar estas personas?"))){n(!0);try{const d=r.filter(f=>a.includes(f.id)).map(async f=>{const S=Z(I,"db_personas",f.id),w=new Date,y=`${w.getDate().toString().padStart(2,"0")}/${(w.getMonth()+1).toString().padStart(2,"0")}/${w.getFullYear().toString().slice(-2)}`;await fe(S,{...f,recuperado:[...f.recuperado||[],{motivo:"recuperado manual",usuario:g.email,fecha:y,datos_resguardo_baja_previa:[{usuario_baja:f.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:f.usuario_baja_fecha||"fecha_no_disponible"}]}]});const _=Z(I,"db_personas_desactivados",f.id);await ge(_)});await Promise.all(d),alert("Personas recuperadas y eliminadas de la colección de desactivados."),t(),h()}catch(b){console.error("Error al recuperar personas:",b),alert("Hubo un error al recuperar o eliminar algunas personas.")}n(!1),x()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:m,disabled:o,children:e.jsx("i",{className:"bi bi-recycle"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Recuperar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:x})]}),e.jsx("hr",{className:"border border-teal border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-greenW p-2 rounded-pill text-primary fw-bold",children:["Se reactivan ",a.length," persona",a.length!==1&&"s"," seleccionada",a.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(u=>a.includes(u.id)).map(u=>{var b;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(b=u.base64)==null?void 0:b.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),u.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>c(d=>d.filter(f=>f!==u.id)),title:"Quitar de la selección"})]},u.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas reactivar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:v,disabled:o,children:o?"Recuperando...":"Confirmar Recuperación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},nt=({data1:a,data2:r})=>{var h;const[t,c]=s.useState(!1),i=()=>c(!0),l=()=>c(!1),n=(()=>{const N=localStorage.getItem("user");return N?JSON.parse(N):null})(),m=async N=>{if(window.confirm("¿Estás seguro de que deseas recuperar esta persona?"))try{const g=Z(I,"db_personas",N.id),v=new Date,u=`${v.getDate().toString().padStart(2,"0")}/${(v.getMonth()+1).toString().padStart(2,"0")}/${v.getFullYear().toString().slice(-2)}`,b="campos_modificados_aqui";await fe(g,{...N,recuperado:[...N.recuperado||[],{motivo:"recuperado manual",usuario:n.email,fecha:u,datos_resguardo_baja_previa:[{usuario_baja:N.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:N.usuario_baja_fecha||"fecha_no_disponible"}]}]});const d=Z(I,"db_personas_desactivados",N.id);await ge(d),r(),alert("Persona recuperada y copiada a la colección de capturas.")}catch(g){console.error("Error al eliminar persona: ",g)}},x=N=>{m(N),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-recycle"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Recuperar Persona"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("hr",{className:"border border-teal  border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(h=a.base64)==null?void 0:h.trim(),alt:a.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(a==null?void 0:a.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(a==null?void 0:a.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-primary bg-greenW2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas recuperar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:()=>x(a),children:"Confirmar Recuperación"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ot=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState([]),[o,n]=s.useState(!0),[m,x]=s.useState(""),[h,N]=s.useState(""),[g,v]=s.useState(!0),[u,b]=s.useState("asc"),d=V(I,"db_personas_desactivados"),f=async()=>{n(!0);try{const j=(await ae(d)).docs.map(C=>({...C.data(),id:C.id}));r(j),c(j)}catch(p){console.error("Error al obtener personas: ",p)}finally{n(!1)}},S=p=>p.sort((j,C)=>u==="asc"?j.nombre_apellido.localeCompare(C.nombre_apellido):C.nombre_apellido.localeCompare(j.nombre_apellido));s.useEffect(()=>{f()},[]),s.useEffect(()=>{const p=a.filter(C=>C.nombre_apellido&&C.nombre_apellido.toLowerCase().includes(m.toLowerCase())||C.documento&&C.documento.includes(m)).filter(C=>h?C.prioridad===parseInt(h,10):!0),j=S(p);c(j)},[m,a,h,u]);const w=p=>{l(j=>j.includes(p)?j.filter(C=>C!==p):[...j,p])},y=()=>{if(i.length===t.length)l([]);else{const p=t.map(j=>j.id);l(p)}},_=p=>{switch(Number(p)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero 🔎"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido 🚨"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ⭐"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg ",children:[e.jsxs("div",{className:"row",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5 ",children:"Listado de Capturas  Desactivadas"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(ze,{searchTerm:m,setSearchTerm:x})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(zs,{prioridadFilter:h,setPrioridadFilter:N})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Oe,{orden:u,setOrden:b})})]}),o?e.jsx(re,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2  mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(lt,{data1:i,data2:a,dataRefresh:f,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:()=>l([])})]}),g&&e.jsx($e,{Date1:i,Date2:a,setSelectedDocs:l,onCerrar:()=>v(!1),color:"blueW2"}),!g&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>v(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2"})," ",e.jsxs("small",{children:["Ver Resumen ( ",e.jsxs("span",{className:"text-primary",children:[i.length," 🧑"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:y})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(p=>{var j;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(p.id),onChange:()=>w(p.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((j=p.base64)==null?void 0:j.trim())||"https://via.placeholder.com/40",alt:p.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize",children:p.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:p.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:_(p.prioridad)}),e.jsx("td",{children:e.jsx(nt,{data1:p,data2:f})}),e.jsx("td",{})]},p.id)})})]})})]})})]})},ct=({alertaFilter:a,setAlertaFilter:r})=>e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Floating label select example",value:a,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todos los Estados"}),e.jsx("option",{value:"capturado",children:"Capturado"}),e.jsx("option",{value:"evadido",children:"Evadido"})]}),e.jsx("label",{children:"Seleccione un Estado"})]}),dt=({data1:a,data2:r,dataRefresh:t,setSelectedDocs:c})=>{const[i,l]=s.useState(!1);s.useState("");const[o,n]=s.useState(!1),[m,x]=s.useState(""),[h,N]=s.useState(""),g=()=>l(!0),v=()=>l(!1),u=()=>{c([])},d=(()=>{const S=localStorage.getItem("user");return S?JSON.parse(S):null})(),f=async()=>{if(!(!a||a.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas dar por CAPTURADOS 👮 a este grupo personas ?"))){n(!0);try{const y=r.filter(_=>a.includes(_.id)).map(async _=>{const p=Z(I,"db_personas",_.id),j=new Date,C=`${j.getDate().toString().padStart(2,"0")}/${(j.getMonth()+1).toString().padStart(2,"0")}/${j.getFullYear().toString().slice(-2)}`;await oe(p,{..._,captura:!0,capturas_informacion_estados:[..._.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:d.email,captura_fecha:C,captura_autor:h,captura_descripcion:m}]})});await Promise.all(y),alert("Capturas Exitosas"),t(),u()}catch(w){console.error("Error al modificar personas:",w),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}n(!1),v()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-primary btn-sm w-100",onClick:g,disabled:o,children:["Marcar Capturas (",a.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"👮"}),e.jsx("h5",{className:"modal-title ms-3",children:"Marcar Grupo como Capturado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:v})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de ",a.length," persona",a.length!==1&&"s"," seleccionada",a.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(S=>a.includes(S.id)).map(S=>{var w;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(w=S.base64)==null?void 0:w.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),S.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>c(y=>y.filter(_=>_!==S.id)),title:"Quitar de la selección"})]},S.id)})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Autor / Entidad que realizó la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:h,onChange:S=>N(S.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Breve relato de la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:m,onChange:S=>x(S.target.value)})]}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas marcar como capturados estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:v,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:f,disabled:!h||!m||o,children:o?"Trabajando...":"Confirmar Captura"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},mt=({data1:a,data2:r,dataRefresh:t,setSelectedDocs:c})=>{const[i,l]=s.useState(!1);s.useState("");const[o,n]=s.useState(!1);s.useState(""),s.useState("");const m=()=>l(!0),x=()=>l(!1),h=()=>{c([])},g=(()=>{const u=localStorage.getItem("user");return u?JSON.parse(u):null})(),v=async()=>{if(!(!a||a.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas QUITAR LOS ESTADOS DE CAPTURA 👮 a estas personas ?"))){n(!0);try{const d=r.filter(f=>a.includes(f.id)).map(async f=>{const S=Z(I,"db_personas",f.id),w=new Date,y=`${w.getDate().toString().padStart(2,"0")}/${(w.getMonth()+1).toString().padStart(2,"0")}/${w.getFullYear().toString().slice(-2)}`;await oe(S,{...f,captura:!1,capturas_informacion_estados:[...f.capturas_informacion_estados||[],{captura_motivo:"quitar captura",captura_informa_usuario:g.email,captura_fecha:y}]})});await Promise.all(d),alert("Se quito las capturas de forma Exitosa"),t(),h()}catch(b){console.error("Error al modificar personas:",b),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}n(!1),x()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-pink btn-sm w-100",onClick:m,disabled:o,children:["Quitar Capturas (",a.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"👮"}),e.jsx("h5",{className:"modal-title ms-3",children:"Quitar Estado de Capturados a Grupo "}),e.jsx("button",{type:"button",className:"btn-close",onClick:x})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de  ",a.length," persona",a.length!==1&&"s"," seleccionada",a.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(u=>a.includes(u.id)).map(u=>{var b;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(b=u.base64)==null?void 0:b.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),u.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>c(d=>d.filter(f=>f!==u.id)),title:"Quitar de la selección"})]},u.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas quitar estado de captura ?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:v,disabled:o,children:o?"Trabajando...":"Quitar Captura"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ut=({data1:a,data2:r,dataRefresh:t,setSelectedDocs:c})=>{const[i,l]=s.useState(!1);s.useState("");const[o,n]=s.useState(!1);s.useState(""),s.useState("");const m=()=>l(!0),x=()=>l(!1),h=()=>{c([])},g=(()=>{const u=localStorage.getItem("user");return u?JSON.parse(u):null})(),v=async()=>{if(!(!a||a.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas DESACTIVAR SU ESTADO DE ALERTA EVADIDO 🚨 a este grupo de  personas ?"))){n(!0);try{const d=r.filter(f=>a.includes(f.id)).map(async f=>{const S=Z(I,"db_personas",f.id),w=new Date,y=`${w.getDate().toString().padStart(2,"0")}/${(w.getMonth()+1).toString().padStart(2,"0")}/${w.getFullYear().toString().slice(-2)}`;await oe(S,{...f,prioridad:1,capturas_informacion_estados:[...f.capturas_informacion_estados||[],{captura_motivo:"desactivar alerta",captura_informa_usuario:g.email,captura_fecha:y}]})});await Promise.all(d),alert("Alrta Modificada Exitosas"),t(),h()}catch(b){console.error("Error al modificar personas:",b),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}n(!1),x()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-secondaryMuiRed btn-sm w-100 text-white",onClick:m,disabled:o,children:["Desactivar Alerta (",a.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border titilar",children:"🚨"}),e.jsx("h5",{className:"modal-title ms-3",children:"Desactivar Alerta Evadido"}),e.jsx("button",{type:"button",className:"btn-close",onClick:x})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de ",a.length," persona",a.length!==1&&"s"," seleccionada",a.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(u=>a.includes(u.id)).map(u=>{var b;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(b=u.base64)==null?void 0:b.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),u.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>c(d=>d.filter(f=>f!==u.id)),title:"Quitar de la selección"})]},u.id)})}),e.jsxs("p",{className:"text-primary text-center  titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas desactivar el estado evadido ?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:v,disabled:o,children:o?"Trabajando...":"Desactivar Evadido"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ht=({data1:a,data2:r,dataRefresh:t,setSelectedDocs:c})=>{const[i,l]=s.useState(!1),[o,n]=s.useState(!1),m=()=>l(!0),x=()=>l(!1),h=()=>{c([])},g=(()=>{const u=localStorage.getItem("user");return u?JSON.parse(u):null})(),v=async()=>{if(!(!a||a.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas modificar estas personas ?"))){n(!0);try{const d=r.filter(f=>a.includes(f.id)).map(async f=>{const S=Z(I,"db_personas",f.id),w=new Date,y=`${w.getDate().toString().padStart(2,"0")}/${(w.getMonth()+1).toString().padStart(2,"0")}/${w.getFullYear().toString().slice(-2)}`;await fe(S,{...f,prioridad:1,paradero:!1,alerta:!1,ediciones:[...f.ediciones||[],{motivo:"desactivar busqueda paradero grupal",usuario:g.email,fecha:y}]})});await Promise.all(d),alert("Personas modificadas con exito."),t(),h()}catch(b){console.error("Error al modificar personas:",b),alert("Hubo un error al modificar algunas personas.")}n(!1),x()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-primaryMuiBlue text-white btn-sm rounded-circle ",onClick:m,disabled:o,children:e.jsx("i",{className:"bi bi-search"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Modificar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:x})]}),e.jsx("hr",{className:"border border-primary border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-blueW p-2 rounded-pill text-primary fw-bold",children:["Se modificarán ",a.length," persona",a.length!==1&&"s"," seleccionada",a.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(u=>a.includes(u.id)).map(u=>{var b;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(b=u.base64)==null?void 0:b.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),u.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>c(d=>d.filter(f=>f!==u.id)),title:"Quitar de la selección"})]},u.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas modificar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primaryMuiBlue text-white",onClick:v,disabled:o,children:o?"Cargando...":"Confirmar Modificación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},xt=()=>{const[a,r]=s.useState(2),{personas:t,loading:c,fetchPersonas:i}=os(a),[l,o]=s.useState([]),[n,m]=s.useState(""),[x,h]=s.useState(""),[N,g]=s.useState(!0),[v,u]=s.useState("asc"),{selectedDocs:b,setSelectedDocs:d,toggleSelectDoc:f,toggleSelectAll:S}=cs(l||[]),w=n||x;return s.useEffect(()=>{const y=ts(t,n,x),_=is(y,v);o(_)},[n,t,x,v]),e.jsxs("div",{className:"container-lg",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0  ",children:"Listado Busqueda de Paradero"}),e.jsxs("div",{className:"card my-5",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(ze,{searchTerm:n,setSearchTerm:m})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(as,{prioridadFilter:x,setPrioridadFilter:h,personas:t})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Oe,{orden:v,setOrden:u})})]}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>rs(m,h,u),className:"btn btn-primary btn-sm",children:"Limpiar Filtros"})})]})]}),c?e.jsx(re,{}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[b.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[a===4?e.jsx(Os,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d}):null,a===2?e.jsx(ht,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d}):null,e.jsx(He,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d}),e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:()=>d([])})]}),N&&e.jsx($e,{Date1:b,Date2:t,setSelectedDocs:d,onCerrar:()=>g(!1),color:"blueW2"}),!N&&b.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>g(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2"})," ",e.jsxs("small",{children:["Ver Resumen ( ",e.jsxs("span",{className:"text-primary",children:[b.length," 🧑"]}),")"]})]})})]}),e.jsx(ls,{personas:l,selectedDocs:b,toggleSelectDoc:f,toggleSelectAll:S,getPrioridadLabel:ns,fetchPersonas:i,isFiltered:w,color:"bg-blueW",prioridad:a})]})})]})},bt=()=>{const[a,r]=s.useState(3),{personas:t,loading:c,fetchPersonas:i}=os(a),[l,o]=s.useState([]),[n,m]=s.useState(""),[x,h]=s.useState(""),[N,g]=s.useState(!0),[v,u]=s.useState("asc"),{selectedDocs:b,setSelectedDocs:d,toggleSelectDoc:f,toggleSelectAll:S}=cs(l||[]),w=n||x,[y,_]=s.useState(""),p=b.every(F=>{const E=t.find(k=>k.id===F);return(E==null?void 0:E.captura)===!0}),j=b.every(F=>{const E=t.find(k=>k.id===F);return(E==null?void 0:E.captura)===!1||(E==null?void 0:E.captura)===void 0}),C=!p&&!j;return s.useEffect(()=>{let F=ts(t,n,x);F=st(F,y);const E=is(F,v);o(E)},[n,t,x,v,y]),e.jsxs("div",{className:"container-lg",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0  ",children:"Listado de Evasiones"}),e.jsxs("div",{className:"card my-5",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-sm-4 col-md-6 col-lg-4",children:e.jsx(ze,{searchTerm:n,setSearchTerm:m})}),e.jsx("div",{className:"col-12 col-sm-3 col-md-6 col-lg-3",children:e.jsx(as,{prioridadFilter:x,setPrioridadFilter:h,personas:t})}),e.jsx("div",{className:"col-12 col-sm-3 col-md-6 col-lg-3",children:e.jsx(ct,{alertaFilter:y,setAlertaFilter:_})}),e.jsx("div",{className:"col-12 col-sm-2 col-md-6 col-lg-2",children:e.jsx(Oe,{orden:v,setOrden:u})})]}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>rs(m,h,u,_),className:"btn btn-primary btn-sm",children:"Limpiar Filtros"})})]})]}),c?e.jsx(re,{}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[b.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx("div",{className:"d-flex gap-2 mb-2 justify-content-end mb-2",children:!C&&e.jsxs(e.Fragment,{children:[p&&e.jsx(mt,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d}),j&&e.jsx(dt,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d})]})}),e.jsx(ut,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d}),e.jsx(He,{data1:b,data2:t,dataRefresh:i,setSelectedDocs:d}),e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:()=>d([])})]}),N&&e.jsx($e,{Date1:b,Date2:t,setSelectedDocs:d,onCerrar:()=>g(!1),color:"blueW2"}),!N&&b.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>g(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2"})," ",e.jsxs("small",{children:["Ver Resumen ( ",e.jsxs("span",{className:"text-primary",children:[b.length," 🧑"]}),")"]})]})})]}),e.jsx(ls,{personas:l,selectedDocs:b,toggleSelectDoc:f,toggleSelectAll:S,getPrioridadLabel:ns,fetchPersonas:i,isFiltered:w,color:"bg-redW",prioridad:a})]})})]})},pt=()=>{const[a,r]=s.useState("dashboard"),[t,c]=s.useState([]),[i,l]=s.useState(!1),o=localStorage.getItem("user");o&&JSON.parse(o);const n=async()=>{try{l(!0);const b=await ae(V(I,"db_personas")),d=[];b.forEach(f=>{d.push({id:f.id,...f.data()})}),c(d)}catch(b){console.error("Error al obtener los documentos: ",b)}finally{l(!1)}};s.useEffect(()=>{n()},[]);const m=t.filter(b=>b.prioridad===3).length,x=t.filter(b=>b.prioridad===1).length,h=t.filter(b=>b.prioridad===2).length,N=t.filter(b=>b.prioridad===4).length,g=t.filter(b=>b.captura===!0).length,v=t.length,u=()=>{switch(a){case"dashboard":return e.jsx(Xa,{});case"reportes":return e.jsx(Qa,{});case"Desactivados":return e.jsx(ot,{});case"capturas":return e.jsx(et,{});case"evasiones":return e.jsx(bt,{});case"csv":return e.jsx(Is,{});case"paradero":return e.jsx(xt,{});case"prioritaria":return e.jsx(rt,{});case"notificaciones":return e.jsx(Ya,{loading:i});case"graficos":return e.jsx(Va,{totalCapturas:v,totalPrioridadNormal:x,totalParadero:h,totalEvasiones:m,totalPrioritaria:N,totalEvasionesCapturados:g});default:return e.jsx("p",{children:"Selecciona una opción del menú."})}};return e.jsxs("div",{className:"container-lg mt-5 mb-sm-5 mb-md-5",children:[e.jsx("div",{className:"titulo-espaciado text-start mb-4",children:e.jsx("h3",{className:"text-secondary fw-semibold",children:"Panel de Control"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"list-group shadow",children:[e.jsx("button",{className:`list-group-item list-group-item-action ${a==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenido"}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="reportes"?"active":""}`,onClick:()=>r("reportes"),children:"Exportación"}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="graficos"?"active":""}`,onClick:()=>r("graficos"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Graficos",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-teal rounded-pill",children:"Nuevo"})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="notificaciones"?"active":""}`,onClick:()=>r("notificaciones"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Notificaciones",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-primaryMuiBlue rounded-pill",children:"Administrar"})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="capturas"?"active":""}`,onClick:()=>r("capturas"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Capturas",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",v]})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="evasiones"?"active":""}`,onClick:()=>r("evasiones"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Evasiones",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",m]})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="paradero"?"active":""}`,onClick:()=>r("paradero"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Busqueda Paradero",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",h]})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="prioritaria"?"active":""}`,onClick:()=>r("prioritaria"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Prioritarias",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",N]})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="csv"?"active":""}`,onClick:()=>r("csv"),children:"Usuarios Csv"}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="Desactivados"?"active":""}`,onClick:()=>r("Desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Desactivados",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-cyan rounded-pill",children:"Reactivar"})]})})]})}),e.jsx("div",{className:"col-md-9",children:u()})]})]})},jt=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Panel de Control ",element2:"Cx2",element3:"bi bi-ui-checks"}),e.jsx("div",{className:"container-lg",id:"bodyGallery",children:e.jsx(pt,{})}),e.jsx(he,{}),e.jsx(ve,{})]}),gt=({show:a,handleClose:r,elementos:t,setElementos:c})=>{if(!a)return null;const[i,l]=s.useState({nombre:"",descripcion:"",categoria:"general",cantidad:1}),o=()=>{if(!i.nombre.trim()){alert("Por favor, completa todos los campos obligatorios.");return}const n={nombre:i.nombre||"Sin nombre",descripcion:i.descripcion||"Sin descripción",categoria:i.categoria||"general",cantidad:i.cantidad||1};c([...t,n]),console.log("Nuevo elemento agregado:",n),l({nombre:"",descripcion:"",categoria:"general",cantidad:1}),r()};return e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Agregar Elemento"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:r})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"nombre",className:"form-label",children:"Nombre del Elemento:"}),e.jsx("input",{id:"nombre",type:"text",className:"form-control",value:i.nombre,onChange:n=>l({...i,nombre:n.target.value})})]}),e.jsxs("div",{className:"col-4 ",children:[e.jsx("label",{htmlFor:"categoria ",className:"form-label",children:"Categoría:"}),e.jsxs("select",{id:"categoria",className:"form-control",value:i.categoria,onChange:n=>l({...i,categoria:n.target.value}),children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"electronico",children:"Electrónico"}),e.jsx("option",{value:"mueble",children:"Mueble"}),e.jsx("option",{value:"herramienta",children:"Herramienta"})]})]}),e.jsxs("div",{className:"col-2",children:[e.jsx("label",{htmlFor:"cantidad",className:"form-label",children:"Cantidad:"}),e.jsx("input",{id:"cantidad",type:"number",className:"form-control",value:i.cantidad,onChange:n=>l({...i,cantidad:parseInt(n.target.value,10)})})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:o,children:"Agregar"})]})]})})})},ft=({show:a,handleClose:r,people:t,setPeople:c})=>{if(!a)return null;const[i,l]=s.useState({sexo:"otros",nombreApellido:"",dni:"",caridad:"denunciante"}),o=()=>{if(i){const n={sexo:i.sexo||"otros",nombreApellido:i.nombreApellido||"NN",dni:i.dni||"",caridad:i.caridad||"denunciante"};c([...t,n]),console.log("Nueva persona agregada:",n),l({sexo:"otros",nombreApellido:"",dni:"",caridad:"denunciante"}),r()}};return e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Agregar Persona"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:r})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-8",children:[e.jsx("label",{htmlFor:"nombreApellido",className:"form-label",children:"Nombre y Apellido:"}),e.jsx("input",{id:"nombreApellido",type:"text",className:"form-control",value:i.nombreApellido,onChange:n=>l({...i,nombreApellido:n.target.value})})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("label",{htmlFor:"sexo",children:"Sexo:"}),e.jsxs("select",{id:"sexo",className:"form-control",value:i.sexo,onChange:n=>l({...i,sexo:n.target.value}),children:[e.jsx("option",{disabled:!0,children:"Seleccione"}),e.jsx("option",{value:"masculino",children:"👨 Masculino"}),e.jsx("option",{value:"femenino",children:"👩 Femenino"}),e.jsx("option",{value:"otros",children:"🧑‍🤝‍🧑 Otros"})]})]})]}),e.jsxs("div",{className:"row mt-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"dni",children:"DNI:"}),e.jsx("input",{id:"dni",type:"text",className:"form-control",value:i.dni,onChange:n=>l({...i,dni:n.target.value})})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"caridad",children:"Caridad:"}),e.jsxs("select",{id:"caridad",className:"form-control",value:i.caridad,onChange:n=>l({...i,caridad:n.target.value}),children:[e.jsx("option",{value:"denunciante",children:"Denunciante"}),e.jsx("option",{value:"imputado",children:"Imputado"})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:o,children:"Agregar"})]})]})})})},Nt=({show:a,handleClose:r,armas:t,setArmas:c})=>{if(!a)return null;const[i,l]=s.useState({tipo:"fuego",cantidad:1,descripcion:""}),o=()=>{const n={tipo:i.tipo||"otra",cantidad:i.cantidad||1,descripcion:i.descripcion||""};c([...t,n]),console.log("Nueva arma agregada:",n),l({tipo:"fuego",cantidad:1,descripcion:""}),r()};return e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Agregar Arma"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:r})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"tipo",className:"form-label",children:"Tipo de Arma:"}),e.jsxs("select",{id:"tipo",className:"form-control",value:i.tipo,onChange:n=>l({...i,tipo:n.target.value}),children:[e.jsx("option",{value:"",children:"Seleccione"}),e.jsx("option",{value:"fuego",children:"Fuego"}),e.jsx("option",{value:"blanca",children:"Blanca"}),e.jsx("option",{value:"explosiva",children:"Explosiva"}),e.jsx("option",{value:"otra",children:"Otra"})]})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"cantidad",className:"form-label",children:"Cantidad:"}),e.jsx("input",{id:"cantidad",type:"number",className:"form-control",value:i.cantidad,onChange:n=>l({...i,cantidad:parseInt(n.target.value,10)||1})})]})]}),e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"descripcion",children:"Descripción:"}),e.jsx("textarea",{id:"descripcion",className:"form-control",value:i.descripcion,onChange:n=>l({...i,descripcion:n.target.value})})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:o,children:"Agregar"})]})]})})})},vt=({show:a,handleClose:r,vehiculos:t,setVehiculos:c})=>{if(!a)return null;const[i,l]=s.useState({tipo:"",patente:"",modelo:"",descripcion:""}),o=()=>{const m={tipo:i.tipo.trim()!==""?i.tipo:"Desconocido",patente:i.patente||"Sin patente",modelo:i.modelo||"Sin modelo",descripcion:i.descripcion||""};c([...t,m]),console.log("Nuevo vehículo agregado:",m),l({tipo:"",patente:"",modelo:"",descripcion:""}),r()};return e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Agregar Vehículo"}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:r})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"tipo",className:"form-label",children:"Tipo:"}),e.jsxs("select",{id:"tipo",className:"form-control",value:i.tipo,onChange:n=>l({...i,tipo:n.target.value}),children:[e.jsx("option",{value:"",children:"Seleccione"}),e.jsx("option",{value:"bicicleta",children:"🚴 Bicicleta"}),e.jsx("option",{value:"moto",children:"🏍️ Moto"}),e.jsx("option",{value:"auto",children:"🚗 Auto"}),e.jsx("option",{value:"camion",children:"🚚 Camión"}),e.jsx("option",{value:"bus",children:"🚌 Autobús"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"patente",className:"form-label",children:"Patente:"}),e.jsx("input",{id:"patente",type:"text",className:"form-control",value:i.patente,onChange:n=>l({...i,patente:n.target.value})})]})]}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"modelo",className:"form-label",children:"Modelo:"}),e.jsx("input",{id:"modelo",type:"text",className:"form-control",value:i.modelo,onChange:n=>l({...i,modelo:n.target.value})})]})}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"descripcion",className:"form-label",children:"Descripción:"}),e.jsx("textarea",{id:"descripcion",className:"form-control",rows:"3",value:i.descripcion,onChange:n=>l({...i,descripcion:n.target.value})})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:o,children:"Agregar"})]})]})})})};function yt(){const[a,r]=s.useState(!1),[t,c]=s.useState(!1),[i,l]=s.useState(!1),[o,n]=s.useState(!1),[m,x]=s.useState([]),[h,N]=s.useState([]),[g,v]=s.useState([]),[u,b]=s.useState([]),[d,f]=s.useState(""),[S,w]=s.useState(""),[y,_]=s.useState(null),[p,j]=s.useState(""),[C,F]=s.useState(""),[E,k]=s.useState(""),[M,L]=s.useState(null),[B,K]=s.useState([]),H=[{ciudad:"Santa Fe",unidad:"UR I"},{ciudad:"Rosario",unidad:"UR II"},{ciudad:"Rafaela",unidad:"UR V"},{ciudad:"Venado Tuerto",unidad:"UR VIII"},{ciudad:"Reconquista",unidad:"UR IX"},{ciudad:"Villa Gobernador Gálvez",unidad:"UR II"},{ciudad:"San Lorenzo",unidad:"UR XVII"},{ciudad:"Esperanza",unidad:"UR XI"},{ciudad:"Casilda",unidad:"UR IV"},{ciudad:"Cañada de Gómez",unidad:"UR X"},{ciudad:"Sunchales",unidad:"UR V"},{ciudad:"Firmat",unidad:"UR VIII"},{ciudad:"Arroyo Seco",unidad:"UR II"},{ciudad:"Tostado",unidad:"UR XII"},{ciudad:"San Jorge",unidad:"UR XVIII"},{ciudad:"Gálvez",unidad:"UR XV"},{ciudad:"Coronda",unidad:"UR XV"},{ciudad:"Avellaneda",unidad:"UR IX"},{ciudad:"El Trébol",unidad:"UR XVIII"},{ciudad:"Las Parejas",unidad:"UR X"},{ciudad:"Funes",unidad:"UR II"},{ciudad:"Puerto General San Martín",unidad:"UR XVII"},{ciudad:"Ceres",unidad:"UR XIII"},{ciudad:"San Justo",unidad:"UR XVI"},{ciudad:"Laguna Paiva",unidad:"UR I"},{ciudad:"Granadero Baigorria",unidad:"UR II"},{ciudad:"Villa Ocampo",unidad:"UR IX"},{ciudad:"Helvecia",unidad:"UR I"},{ciudad:"San Cristóbal",unidad:"UR XIII"},{ciudad:"Carcarañá",unidad:"UR IV"},{ciudad:"Teodelina",unidad:"UR VIII"},{ciudad:"Humboldt",unidad:"UR XI"}],J={"Santa Fe":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barranquitas","Comisaría 3ra. - Sección Rivadavia","Comisaría 4ta. - Sección Las Flores","Comisaría 5ta. - Sección El Pozo","Comisaría 6ta. - Sección Fomento 9 de Julio"],Rosario:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Puerto Norte","Comisaría 3ra. - Sección Tucumán","Comisaría 4ta. - Sección Echesortu","Comisaría 5ta. - Sección Pichincha","Comisaría 6ta. - Sección Zona Sur","Comisaría 7ma. - Sección La Florida","Comisaría 8va. - Sección Zona Oeste"],Rafaela:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Belgrano","Comisaría 3ra. - Sección 9 de Julio","Comisaría 4ta. - Sección Barrio 2 de Abril","Comisaría 5ta. - Sección Barrio La Cañada"],"Venado Tuerto":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio Santa Fe","Comisaría 3ra. - Sección Malabrigo"],"San Lorenzo":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Zona Norte","Comisaría 3ra. - Sección Villa Felisa"],Firmat:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio Las Delicias"],Casilda:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio San Pedro","Comisaría 3ra. - Sección Barrio Granaderos"],"Cañada de Gómez":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio Sarmiento"],Reconquista:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio La Cortada","Comisaría 3ra. - Sección Barrio El Ombú"],Ceres:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio San José"],"San Justo":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio El Paraíso","Comisaría 3ra. - Sección Barrio San Carlos"],Alcorta:["Comisaría 1ra. - Sección Centro"],Totoras:["Comisaría 1ra. - Sección Centro"],"Las Parejas":["Comisaría 1ra. - Sección Centro"]},ie=()=>{l(!0)},ce=()=>{c(!0)},U=()=>{r(!0)},ee=()=>{l(!1)},A=()=>{c(!1)},T=()=>{n(!0)},se=()=>{n(!1)},te=()=>{r(!1)},le=O=>{const W=m.filter(ye=>ye.dni!==O.dni);x(W)},xe=O=>{const W=u.filter((ye,ke)=>ke!==O);b(W)},$=O=>{const W=g.filter((ye,ke)=>ke!==O);v(W)},R=O=>{const W=h.filter((ye,ke)=>ke!==O);N(W)};s.useEffect(()=>{const O=JSON.parse(localStorage.getItem("denuncia"));O&&(f(O.selectedLocalidad),w(O.denunciaIniciada),_(O.fechaHora),j(O.numero),F(O.dependenciaPolicial),k(O.relatoDenuncia),L(O.pdfFile),K(O.dependenciasDisponibles))},[]);const Y=()=>{f(""),w(""),_(null),j(""),F(""),k(""),L(null),K([]),x([]),N([]),v([]),b([]),localStorage.removeItem("denuncia")},q=()=>{const O={selectedLocalidad:d,denunciaIniciada:S,fechaHora:y,numero:p,dependenciaPolicial:C,relatoDenuncia:E,pdfFile:M,dependenciasDisponibles:B};localStorage.setItem("denuncia",JSON.stringify(O))},G=O=>{const W=O.target.value;if(f(W),W){const ke=new Date().getTime();_(ke),w(` ${W}`);const Ys=J[W]||[];K(Ys)}else w(""),_(null),j(""),F(""),k(""),K([]);q()},P=O=>{const W=H.find(ye=>ye.ciudad===O);return W?W.unidad:null},D=O=>{if(!O)return"";const W=new Date(O),ye=W.getHours().toString().padStart(2,"0"),ke=W.getMinutes().toString().padStart(2,"0");return`${W.getDate()}/${W.getMonth()+1}/${W.getFullYear()} ${ye}:${ke}`},z=O=>{const W=O.target.value;/^\d*$/.test(W)&&(j(W),q())},X=O=>{const W=O.target.value;F(W),q()},Q=O=>{const W=O.target.value;k(W),q()},ue=O=>{const W=O.target.files[0];W&&W.type==="application/pdf"?L(W):(L(null),alert("Por favor, sube un archivo PDF."))};return e.jsx("div",{className:"container-lg text-center",children:e.jsxs("div",{className:"row mt-5",children:[e.jsxs("div",{className:"col-sm-5 mt-5",children:[S&&e.jsxs("div",{className:"rounded-pill border border-pink border-5 shadow text-center",children:[e.jsxs("p",{className:"mt-3",children:[e.jsxs("span",{className:"text-pink me-2",children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2"}),"Iniciando Denuncia -"]}),e.jsxs("span",{className:"text-muted fw-semibold",children:[S," - "]}),e.jsxs("span",{children:[D(y)," hs"]})]}),e.jsxs("p",{children:[C&&e.jsxs("span",{className:"badge bg-pink me-3",children:[C.split("-")[0].trim()," ",e.jsxs("span",{className:"text-danger border border-red border-2 bg-white rounded-pill px-2 py-1 ms-2",children:[P(d)," "]})]}),p&&e.jsxs("span",{className:"badge text-bg-secondary me-3",children:["Sumario: ",p,M&&e.jsx("i",{className:"bi bi-file-earmark-pdf text-danger border border-red border-2 bg-white rounded-circle p-2 ms-2"})]}),E&&e.jsxs("span",{className:"badge text-bg-purple",children:["Relato :",e.jsx("i",{className:"bi bi-check-circle text-pink border border-pink border-2 bg-white rounded-circle p-2  ms-2"})]})]})]}),m.length>0&&e.jsxs("div",{className:"mt-0",children:[e.jsxs("div",{className:"text-purple",children:[" ",e.jsx("i",{className:"bi bi-arrow-down fs-3"})]}),e.jsx("div",{className:"border border-purple border-5 shadow-sm rounded-pill p-2",children:m.map((O,W)=>e.jsxs("div",{children:[e.jsx("span",{children:"🧑🏻"}),e.jsx("small",{className:"me-2",children:O.dni}),"  ",e.jsx("small",{className:"me-2",children:O.nombreApellido}),e.jsxs("small",{className:"ms-2",children:[O.sexo==="femenino"&&e.jsx("i",{className:"bi bi-gender-female  text-pink"}),O.sexo==="masculino"&&e.jsx("i",{className:"bi bi-gender-male  text-blue"}),O.sexo==="otros"&&e.jsx("i",{className:"bi bi-gender-ambiguous  text-teal"})]})," ",e.jsx("small",{className:`badge ms-2 text-capitalize ${O.caridad==="denunciante"?"text-bg-teal text-white ":O.caridad==="imputado"?"text-bg-pink":""}`,children:O.caridad}),e.jsx("button",{type:"button",className:"btn text-danger btn-sm ms-3",onClick:()=>le(O),children:e.jsx("i",{className:"bi bi-trash3"})})]},W))})]}),h.length>0&&e.jsxs("div",{className:"mt-0",children:[e.jsxs("div",{className:"text-greenUi",children:[" ",e.jsx("i",{className:"bi bi-arrow-down fs-3"})]}),e.jsx("div",{className:"border border-greenUi border-5 shadow-sm rounded-pill py-2",children:h.map((O,W)=>e.jsxs("div",{children:[e.jsxs("small",{className:"me-2 badge bg-purple text-white text-capitalize my-2",children:["Elemento ",O.categoria]}),e.jsxs("small",{className:" position-relative me-2  text-capitalize my-2",children:[O.nombre,"         ",e.jsx("span",{className:"ms-2 position-absolute top-0 start-100 translate-middle badge rounded-pill bg-pink ",children:O.cantidad})]}),e.jsx("button",{type:"button",className:"btn text-danger btn-sm ms-3 ",onClick:()=>R(W),children:e.jsx("i",{className:"bi bi-trash3"})})]},W))})]}),g.length>0&&e.jsxs("div",{className:"mt-0",children:[e.jsxs("div",{className:"text-primary",children:[" ",e.jsx("i",{className:"bi bi-arrow-down fs-3"})]}),e.jsx("div",{className:"border border-primary border-5 shadow-sm rounded-pill py-2",children:g.map((O,W)=>e.jsxs("div",{children:[e.jsxs("small",{className:" badge bg-blue position-relative me-2 text-white text-capitalize my-2",children:["Arma de Tipo  ",O.tipo,e.jsx("span",{className:"position-absolute top-0 start-100 translate-middle rounded-pill bg-pink  py-1 px-2",children:O.cantidad})]}),e.jsx("button",{type:"button",className:"btn text-danger btn-sm ms-3 ",onClick:()=>$(W),children:e.jsx("i",{className:"bi bi-trash3"})})]},W))})]}),u.length>0&&e.jsxs("div",{className:"mt-0",children:[e.jsxs("div",{className:"text-orange",children:[" ",e.jsx("i",{className:"bi bi-arrow-down fs-3"})]}),e.jsx("div",{className:"border border-orange border-5 shadow-sm rounded-pill py-2",children:u.map((O,W)=>e.jsxs("div",{children:[e.jsx("i",{className:`bi ${O.tipo==="auto"?"bi-car-front":O.tipo==="moto"?"bi-bicycle":O.tipo==="bus"?"bi-bus-front":O.tipo==="camion"?"bi-truck":O.tipo==="bicicleta"?"bi-bicycle":"bi-question-circle"} me-2 fs-4 text-orange `}),e.jsx("small",{className:"me-2 badge bg-orange text-white text-capitalize my-2",children:O.tipo}),e.jsx("small",{className:"me-2  text-capitalize my-2",children:O.patente}),e.jsx("small",{className:"me-2  text-capitalize my-2",children:O.modelo}),e.jsx("button",{type:"button",className:"btn text-danger btn-sm ms-3 ",onClick:()=>xe(W),children:e.jsx("i",{className:"bi bi-trash3"})})]},W))})]})]}),e.jsxs("div",{className:"col-sm-7 border border-2 p-4 shadow-sm position-relative",children:[e.jsx("div",{className:"position-absolute top-0 start-50 bg-redW translate-middle rounded-pill border-pink border border-3 bg-white text-pink px-4 py-2 shadow-sm",children:e.jsxs("h4",{className:"mb-0",children:[" Denuncia ",e.jsx("i",{className:"bi bi-flag ms-2 "})]})}),e.jsxs("form",{children:[e.jsxs("div",{className:"row mt-4",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"localidad",className:"form-label",children:"¿Cuál es la Localidad?"}),e.jsxs("select",{id:"localidad",className:"form-select text-center",value:d,onChange:G,children:[e.jsx("option",{value:"",children:"Seleccione una Ciudad"}),H.map((O,W)=>e.jsx("option",{value:`${O.ciudad}`,children:O.ciudad},W))]})]})}),e.jsx("div",{className:"col-6",children:d&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"dependenciaPolicial",className:"form-label",children:"Dependencia Policial"}),e.jsxs("select",{id:"dependenciaPolicial",className:"form-control text-center",value:C,onChange:X,children:[e.jsx("option",{disabled:!0,value:"",children:"Seleccione una Dependencia"}),B.map((O,W)=>e.jsx("option",{value:O,children:O},W))]})]})}),"     ",e.jsx("div",{className:"col-4",children:C&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"numero",className:"form-label",children:"N° de Sumario"}),e.jsx("input",{id:"numero",type:"number",className:"form-control text-center",value:p,onChange:z,placeholder:"Ingresa un número"})]})}),e.jsx("div",{className:"col-8",children:p&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"pdfFile",className:"form-label",children:"¿Posee archivo PDF asociado?"}),e.jsx("input",{type:"file",id:"pdfFile",className:"form-control",accept:"application/pdf",onChange:ue}),M&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-pink",children:["Archivo PDF cargado: ",M.name]})})]})}),"    ",p&&e.jsxs("div",{className:"col-12",children:[" ",e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control",placeholder:"Completa",type:"text",value:E,id:"relatoDenuncia",onChange:Q}),e.jsx("label",{children:"Relato de la denuncia "})]})," "]})]}),p&&e.jsxs("div",{className:"d-flex flex-row-reverse mt-5",children:[e.jsxs("div",{className:" btn rounded-5  bg-white border-teal border-2 text-teal me-2",onClick:T,children:[e.jsx("i",{className:"bi bi-boxes text-teal me-1"})," Elementos "]}),e.jsxs("div",{className:" btn rounded-5  bg-white border-primary border-2 text-primary me-2 ",onClick:U,children:[e.jsx("i",{className:"bi bi-shield text-primary me-1"}),"  Armas"]}),e.jsxs("div",{className:" btn rounded-5  bg-white border-indigo border-2 text-indigo me-2",onClick:ie,children:[e.jsx("i",{className:"bi bi-person-fill-add text-indigo me-1"}),"  Persona"]}),e.jsxs("div",{className:" btn rounded-5  bg-white border-orange border-2 text-orange me-2",onClick:ce,children:[e.jsx("i",{className:"bi bi-bicycle text-orange me-1"})," Vehiculos"]})]}),e.jsx("div",{className:"form-footer d-flex flex-row-reverse mt-5 ",children:e.jsxs("button",{type:"button",className:"text-danger btn rounded-pill border-red border border-2 ",onClick:Y,children:[e.jsx("i",{className:"bi bi-trash"})," Restablecer Campos"]})})]})]}),e.jsx(Nt,{show:a,armas:g,handleClose:te,setArmas:v}),e.jsx(gt,{show:o,handleClose:se,elementos:h,setElementos:N}),e.jsx(ft,{show:i,handleClose:ee,people:m,setPeople:x}),e.jsx(vt,{show:t,handleClose:A,vehiculos:u,setVehiculos:b})]})})}const wt=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Nodo de Denuncias ",element2:"Capturas Calientes",element3:"bi bi-ui-checks"}),e.jsx(yt,{}),e.jsx("div",{className:"container-lg",id:"bodyGallery"}),e.jsx(he,{}),e.jsx(ve,{})]}),Ct=({recepciones:a,loading:r})=>e.jsx("div",{className:"text-center mt-4",children:r?e.jsx("div",{className:"spinner-border text-primary",role:"status","aria-label":"Cargando..."}):Object.keys(a).length>0?e.jsxs("div",{className:"alert",children:[e.jsx("strong",{children:"Personas visibles por comisaría:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(a).map(([t,c],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-teal",role:"status","aria-label":"Comisaría con personas visibles"}),e.jsx("span",{className:"text-truncate",children:t}),e.jsxs("span",{className:"badge bg-teal",children:[c," personas"]})]},i))})]}):e.jsx("div",{className:"alert alert-primary shadow",children:e.jsx("strong",{children:"No hay personas visibles en este momento."})})}),St=Ls,_t=({dataInfo:a,loading:r,actualizarListado:t})=>{const[c,i]=s.useState("");console.log(r);const[l,o]=s.useState(null),[n,m]=s.useState(""),[x,h]=s.useState(!1),[N,g]=s.useState(null),[v,u]=s.useState({}),[b,d]=s.useState(!1),f=p=>St[p]||"",S=(p,j)=>{const C=new Date(j.seconds*1e3).getTime()+216e5,F=setInterval(()=>{const E=Date.now(),k=C-E;if(k<=0){clearInterval(F),u(H=>({...H,[p]:"00:00:00"}));return}const M=Math.floor(k/36e5),L=Math.floor(k%36e5/6e4),B=Math.floor(k%6e4/1e3),K=`${M.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`;u(H=>({...H,[p]:K}))},1e3);return F},w=async p=>{for(const j of p){const C=j.fecha_ingreso_validado;if(C&&C.seconds){const F=new Date(C.seconds*1e3);if(new Date().getTime()-F.getTime()>36e5){console.log(`Han pasado más de 1 hora desde la salida de ${j.nombre_apellido}`),alert(`Han pasado más de 1 hora el sistema da como salida a  ${j.nombre_apellido} del Articulo 10 bis`);const M=Z(I,"db_art_diez_bis",j.id),L=await Xe(M);if(L.exists()){const B=Z(I,"db_art_diez_bis_desactivados",j.id);await fe(B,L.data()),await ge(M),await oe(B,{visualidad:!1,salida_art:Ie(),salida_art_usuario:"sistema"}),t(),console.log(`Documento copiado, actualizado y eliminado para ${j.nombre_apellido}`)}}}}};s.useEffect(()=>{a&&a.length>0&&(w(a),a.forEach(p=>{p.fecha_ingreso_validado&&p.fecha_ingreso_validado.seconds&&S(p.id,p.fecha_ingreso_validado)}))},[a]);const y=async()=>{if(!N)return;d(!0);const{id:p,comisaria:j}=N,C=f(j);setTimeout(async()=>{if(n&&n===C)try{const F=JSON.parse(localStorage.getItem("user")),E=Z(I,"db_art_diez_bis",p),k=await Xe(E);if(k.exists()){const M=k.data();await fe(Z(I,"db_art_diez_bis_desactivados",p),{...M,visualidad:!1,salida_art:Ie(),salida_art_usuario:(F==null?void 0:F.email)||"sistema"}),await ge(E),i(""),alert("Recepción aceptada correctamente."),h(!1),m(""),t()}else alert("El documento no existe.")}catch(F){console.error("Error al aceptar la recepción: ",F),alert("Hubo un error al aceptar la recepción.")}finally{d(!1)}else i(`El código ingresado (${n}) es incorrecto.`),d(!1)},1e3)},_=p=>{g(p),h(!0)};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("p",{className:"text-center  text-center mb-4 bg-secondaryM text-white rounded p-2 mt-4 mb-3",children:["       ",e.jsx("span",{className:"text-capitalize fs-3  ",children:" Salida Art. 10 Bis "}),"  ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-4",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border ",role:"status","aria-label":"Cargando...",children:" "}),"  "]}):e.jsxs("div",{className:"list-group",children:[c&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:c}),a&&a.length>0?a.map(p=>e.jsxs("div",{className:"list-group-item mb-3 shadow",children:[e.jsx("div",{className:"text-end me-2",children:e.jsxs("span",{className:"badge bg-primary",children:[e.jsx("i",{className:"bi bi-clock titilar me-1"})," ",v[p.id]||"Cargando..."]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:p.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:p.dni})]}),e.jsx("button",{className:"btn btn-teal text-white btn-sm w-25",onClick:()=>_(p),disabled:l===p.id,children:l===p.id?"Procesando...":"Finalizar"})]}),e.jsxs("small",{className:"mt-2",children:[p.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:p.comisaria})," - ",p.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:p.unidad})]})]},p.id)):e.jsxs("div",{className:"alert alert-info text-capitalize shadow",role:"alert",children:["No se encontraron Personas en dependencias.",e.jsx("i",{className:"bi bi-hand-thumbs-up ms-2"})]})]})})]}),x&&N&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Ingresar Código"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Ingresa el código para la Comisaría ",e.jsx("strong",{children:N.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:n,onChange:p=>m(p.target.value),placeholder:"Código"}),c&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:c})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:y,disabled:!n||b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancelar"})]})]})})})]})},Ts=()=>{const[a,r]=s.useState(!1),[t,c]=s.useState(""),[i,l]=s.useState({}),[o,n]=s.useState([]),m=async()=>{try{r(!0);const h=we(V(I,"db_art_diez_bis"),De("visualidad","==",!0)),g=(await ae(h)).docs.map(u=>({id:u.id,...u.data()}));n(g);const v=g.reduce((u,b)=>{const d=b.comisaria||"Comisaría desconocida";return u[d]=(u[d]||0)+1,u},{});l(v)}catch(h){console.error("Error al obtener datos: ",h)}finally{r(!1)}};s.useEffect(()=>{m()},[]);const x=t?o.filter(h=>(h.comisaria||"").toLowerCase()===t.toLowerCase()):o;return e.jsxs("div",{className:"container-lg mt-5",children:[e.jsx("div",{className:"row"}),e.jsxs("div",{className:"row gy-4",children:[e.jsxs("div",{className:"col-12 col-lg-4",children:[e.jsx(Ct,{recepciones:i,loading:a}),e.jsxs("div",{className:"mt-4 card p-3 shadow-sm",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize fw-bold text-muted",children:"Filtrar por comisaría"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select",value:t,onChange:h=>c(h.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),Object.keys(i).map((h,N)=>e.jsx("option",{value:h,children:h},N))]})]})]}),e.jsx("div",{className:"col-12 col-lg-8",children:e.jsx(_t,{dataInfo:x,loading:a,actualizarListado:m})})]})]})},kt=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Salida 10 Bis ",element2:"Cx2",element3:"bi bi-ui-checks"}),e.jsx(Ts,{}),e.jsx("div",{className:"container-lg",id:"bodyGallery"}),e.jsx(he,{}),e.jsxs("div",{className:"pt-5",children:[" ",e.jsx(ve,{})]})]}),ds=({message:a,duration:r=1e4,onClose:t})=>(s.useEffect(()=>{const c=setTimeout(()=>{t()},r);return()=>clearTimeout(c)},[r,t]),e.jsxs("div",{className:"toast show position-fixed bottom-0 end-0 m-3 mb-5 shadow",role:"alert","aria-live":"assertive","aria-atomic":"true",children:[e.jsxs("div",{className:"toast-header",children:[e.jsx("strong",{className:"me-auto",children:"Notificación"}),e.jsx("button",{type:"button",className:"btn-close",onClick:t,"aria-label":"Close"})]}),e.jsxs("div",{className:"toast-body",children:[e.jsx("i",{className:"bi bi-circle-fill px-3 text-indigo"})," ",a]})]}));ds.propTypes={message:pe.string.isRequired,duration:pe.number,onClose:pe.func.isRequired};const Et=({onSubmit:a,savedImage:r,resetImage:t})=>{const[c,i]=s.useState(()=>{const f=localStorage.getItem("formData");return f?JSON.parse(f):{nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,captura:!1,prioridad:1,alertaParaderoCaptura:""}}),[l,o]=s.useState({}),[n,m]=s.useState(!1),[x,h]=s.useState(!1),[N,g]=s.useState("");s.useEffect(()=>{console.log(localStorage),localStorage.setItem("formData",JSON.stringify(c))},[c]);const v=({target:{id:f,value:S,type:w,checked:y}})=>{i(_=>{let p={..._,[f]:w==="checkbox"?y:S};if(f==="alertaParaderoCaptura")switch(S){case"paradero":p={...p,prioridad:2,paradero:!0,alerta:!1};break;case"evadido":p={...p,prioridad:3,captura:!0,alerta:!0};break;case"prioritaria":p={...p,prioridad:4,alerta:!1};break;default:p={...p,prioridad:1,paradero:!1,alerta:!1};break}return p}),o(_=>({..._,[f]:""}))},u=()=>{const f={};return r?(c.nombreApellido.match(/[A-Za-zÑñÁáÉéÍíÓóÚú\s]+/)||(f.nombreApellido="Ingrese solo letras y espacios."),c.documento.length<5&&(f.documento="El número de documento debe tener al menos 5 caracteres."),o(f),Object.keys(f).length===0):(alert("Debes cargar una imagen antes de enviar el formulario."),g("Debes cargar una imagen antes de enviar el formulario."),h(!0),!1)},b=async f=>{if(f.preventDefault(),!u())return;if(!window.confirm("¿Estás seguro de que deseas enviar este formulario?")){alert("El envío ha sido cancelado.");return}m(!0);try{const w={...c,imagen:r};if(typeof a=="function")await a(w),alert("Formulario enviado correctamente."),g("Formulario enviado correctamente."),h(!0);else throw new Error("onSubmit no es una función válida")}catch(w){console.error(w),alert("Hubo un error al enviar el formulario."),g("Hubo un error al enviar el formulario."),h(!0)}finally{m(!1),d()}},d=()=>{i({nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,prioridad:1,alertaParaderoCaptura:""}),o({}),t()};return e.jsxs("div",{className:"col-md-6 mt-3",children:[n&&e.jsx(re,{})," ",x&&e.jsx(ds,{message:N,onClose:()=>h(!1)}),e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"row mt-sm-5 mt-md-1 text-center",children:e.jsx(Be,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-person-fill text-greenUi me-3 p-1"})," Nombre y Apellido"]}),id:"nombreApellido",type:"text",value:c.nombreApellido,error:l.nombreApellido,onChange:v,required:!0,className:"text-center"})}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Be,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-file-earmark-person text-greenUi me-3 p-1"})," Número de Documento"]}),id:"documento",type:"number",value:c.documento,error:l.documento,onChange:v,className:"col"}),e.jsx(ms,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-gender-ambiguous text-greenUi me-3 p-1"})," Sexo"]}),id:"sexo",value:c.sexo,options:[{label:"Seleccione",value:""},{label:"Masculino 👨",value:"masculino"},{label:"Femenino 👩",value:"femenino"},{label:"Otros 👭🏻 ",value:"otro"}],onChange:v,className:"col"})]}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Be,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-building text-greenUi me-3 p-1"})," Entidad Solicita Captura"]}),id:"entidad",type:"text",value:c.entidad,onChange:v,className:"col"}),e.jsx(Be,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-telephone text-greenUi me-3 p-1"})," Número de Contacto"]}),id:"numeroContacto",type:"tel",value:c.numeroContacto,error:l.numeroContacto,onChange:v,className:"col"})]}),e.jsx(us,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil text-greenUi me-3 p-1"})," Datos de la Persona"]}),id:"descripcionFisica",value:c.descripcionFisica,onChange:v,className:"text-center"}),e.jsx(us,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil-square text-greenUi me-3 p-1"})," Motivo  Captura / Info Interés"]}),id:"motivoCaptura",value:c.motivoCaptura,onChange:v,className:"text-center"}),e.jsx(ms,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill p-1 text-white me-3 "})," Selecciona una Tipo de Alerta"]}),id:"alertaParaderoCaptura",value:c.alertaParaderoCaptura,options:[{label:"Normal",value:"normal"},{label:"Búsqueda Paradero 🔍 ",value:"paradero"},{label:"Alerta Evadido 🚨",value:"evadido"},{label:"Captura Prioritaria ⚠️",value:"prioritaria"}],onChange:v}),e.jsxs("div",{className:"d-flex justify-content-end pt-4  mt-3",children:[e.jsxs("button",{type:"submit",className:"btn btn-outline-blue shadow me-2",disabled:n,children:[e.jsx("i",{className:"bi bi-send"})," Enviar"]}),e.jsxs("button",{type:"button",onClick:d,className:"btn btn-outline-pink shadow",children:[e.jsx("i",{className:"bi bi-x-circle"})," Borrar"]})]})]})]})},Be=({label:a,id:r,type:t="text",value:c,error:i,onChange:l,className:o="",required:n=!1})=>e.jsxs("div",{className:`mb-5  ${o}`,children:[e.jsx("span",{htmlFor:r,className:"input-group-text text-center d-flex justify-content-center mb-0",children:a}),e.jsx("input",{type:t,className:`shadow text-center form-control ${i?"is-invalid":""}`,id:r,value:c,onChange:l,required:n}),e.jsx("div",{className:"invalid-feedback",children:i})]}),ms=({label:a,id:r,value:t,options:c,onChange:i,className:l=""})=>e.jsxs("div",{className:`mb-5 ${l} text-center`,children:[e.jsx("span",{htmlFor:r,className:`input-group-text text-center d-flex justify-content-center shadow ${r==="alertaParaderoCaptura"?"bg-danger text-white":""}`,children:a}),e.jsx("select",{className:"form-select shadow text-center",id:r,value:t,onChange:i,children:c.map(({label:o,value:n})=>e.jsx("option",{value:n,children:o},n))})]}),us=({label:a,id:r,value:t,onChange:c,className:i=""})=>e.jsxs("div",{className:`form-floating mb-5 ${i}`,children:[e.jsx("textarea",{className:"form-control",id:r,value:t,onChange:c,style:{height:"100px"},placeholder:" "}),e.jsx("label",{htmlFor:r,children:a})]}),Ft=({onImageSave:a})=>{const[r,t]=s.useState(!1),[c,i]=s.useState(null),[l,o]=s.useState(""),n=s.useRef(null),[m,x]=s.useState(!1),[h,N]=s.useState({x:0,y:0}),[g,v]=s.useState({x:0,y:0}),[u,b]=s.useState(1),d=s.useRef(null),f=C=>{x(!0);const{offsetX:F,offsetY:E}=C.nativeEvent;v({x:F,y:E})},S=C=>{if(!m||!c)return;const{offsetX:F,offsetY:E}=C.nativeEvent;N(k=>({x:k.x+(F-g.x),y:k.y+(E-g.y)})),v({x:F,y:E})},w=()=>{x(!1)},y=()=>{t(!1),o(""),i(null),N({x:0,y:0}),b(1);const C=document.getElementById("file-input");C&&(C.value=""),d.current&&(URL.revokeObjectURL(d.current),d.current=null)},_=()=>t(!0),p=C=>{const F=C.target.files[0];if(F){if(!F.type.startsWith("image/")){o("Por favor, selecciona un archivo de imagen.");return}if(F.size>5*1024*1024){o("La imagen debe ser menor de 5 MB.");return}const E=URL.createObjectURL(F);d.current=E,i(E),o("")}},j=()=>{if(!c||!n.current){o("Por favor, selecciona una imagen antes de guardar.");return}const C=n.current,F=C.width,E=C.height,k=document.createElement("canvas");k.width=F,k.height=E;const M=k.getContext("2d"),L=new Image;L.src=c,L.onload=()=>{M.clearRect(0,0,F,E),M.drawImage(L,h.x,h.y,L.width*u,L.height*u);const B=k.toDataURL("image/jpeg",.92);a(B),y()}};return s.useEffect(()=>{if(c&&n.current){const C=n.current,F=C.getContext("2d"),E=new Image;E.src=c,E.onload=()=>{F.clearRect(0,0,C.width,C.height),F.drawImage(E,h.x,h.y,E.width*u,E.height*u)}}},[c,h,u]),s.useEffect(()=>{const C=n.current,F=E=>{if(E.preventDefault(),!c)return;const k=1.1,M=E.deltaY<0?u*k:u/k;b(Math.max(M,.1))};if(C)return C.addEventListener("wheel",F,{passive:!1}),()=>{C.removeEventListener("wheel",F)}},[c,u]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"container-lg text-center py-2 text-capitalize text-secondary fs-3 fw-semibold col-10 col-sm-12 px-4 col-md-10",children:e.jsxs("button",{className:"btn btn-secondaryMuiRed text-white border border-white border-5 rounded-pill w-100 mb-4 shadow-sm d-flex align-items-center position-relative",type:"button",onClick:_,children:[e.jsx("span",{className:"bg-light text-secondaryMuiRed d-flex justify-content-center align-items-center rounded-circle shadow-lg position-absolute top-50 translate-middle-y start-0 ms-3 border border-5",style:{width:"60px",height:"60px"},children:e.jsx("i",{className:"bi bi-images fs-3"})}),e.jsx("span",{className:"flex-grow-1 text-center fw-semibold",children:e.jsx("span",{children:"Subir Imagen"})})]})}),e.jsx("div",{className:`modal fade ${r?"show":""}`,style:{display:r?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!r,children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Subir Imagen "}),e.jsx("button",{type:"button",className:"btn-close",onClick:y,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{id:"file-input",type:"file",className:"form-control",accept:"image/*",onChange:p}),c&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("h6",{className:"p-2 text-purple fw-semibold ",children:["Vista Previa / Edición ",e.jsx("i",{className:"bi bi-image ms-3 fs-3 text-purple"})]}),e.jsx("div",{className:"d-flex justify-content-center mt-3",children:e.jsx("canvas",{ref:n,className:"shadow",onMouseDown:f,onMouseMove:S,onMouseUp:w,onMouseLeave:w,width:500,height:500,style:{border:"1px solid black",cursor:m?"grabbing":"grab"}})}),e.jsx("p",{className:"text-redUi1 fs-6 text-center mt-4",children:" 🤔 Para hacer zoom en la imagen, simplemente usa el scroll (la rueda) de tu mouse. 🖲️  "}),e.jsx("p",{className:"text-purple  fs-6 text-center mt-1",children:" 🤔 Mantén presionado el botón del mouse para arrastrar la imagen. 🖱️  "})]}),l&&e.jsx("div",{className:"mt-2 text-danger",children:l})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:y,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-pink",onClick:j,children:"Guardar Imagen"})]})]})})}),e.jsx("div",{className:`modal-backdrop fade ${r?"show":""}`,style:{display:r?"block":"none"}})]})},Dt=()=>{const[a,r]=s.useState(null),[t,c]=s.useState(!1);s.useEffect(()=>{const m=()=>{c(window.innerWidth<576)};return window.addEventListener("resize",m),m(),()=>{window.removeEventListener("resize",m)}},[]);const i=m=>{r(m)},l=async m=>{console.log(m);const x=()=>{const v=new Date,u=String(v.getDate()).padStart(2,"0"),b=String(v.getMonth()+1).padStart(2,"0"),d=String(v.getFullYear()).slice(-2);return`${u}/${b}/${d}`},N=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),g={documento:m.documento,nombre_apellido:m.nombreApellido.toLowerCase(),sexo:m.sexo,entidad:m.entidad,numero_contacto:m.numeroContacto,descripcion_fisica:m.descripcionFisica,motivo_captura:m.motivoCaptura,base64:a,date:x(),usuario:N?N.email:"Desconocido",prioridad:m.prioridad,alerta:m.alerta||!1,paradero:m.paradero||!1};try{await Ee(V(I,"db_personas"),g),console.log("Datos guardados en Firebase:",g),o()}catch(v){console.error("Error al guardar los datos en Firebase:",v)}},o=()=>{r(null)},n=m=>{const x=m.target.files[0];if(x){const h=new FileReader;h.onloadend=()=>{const N=new Image;N.onload=()=>{const g=document.createElement("canvas"),v=g.getContext("2d"),u=500,b=500;let d=N.width,f=N.height;d>f?d>u&&(f*=u/d,d=u):f>b&&(d*=b/f,f=b),g.width=d,g.height=f,v.drawImage(N,0,0,d,f);const S=g.toDataURL("image/jpeg");r(S)},N.src=h.result},h.readAsDataURL(x)}};return e.jsx("div",{className:"container mt-3",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-5 d-flex flex-column justify-content-center align-items-center text-center m-1",children:[a?e.jsx("img",{src:a,alt:"Imagen guardada",width:"350",style:{height:"auto"},className:"border border-1 shadow mb-5"}):e.jsx("img",{src:"svg/undraw_male_avatar_g98dG.svg",alt:"Avatar",width:"350",style:{height:"auto"},className:"mb-5"}),t?e.jsxs("div",{className:"mb-3 text-teal",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Subir Imagen"}),e.jsx("input",{type:"file",className:"form-control text-green",onChange:n})]}):e.jsx(Ft,{onImageSave:i})]}),e.jsx(Et,{onSubmit:l,savedImage:a,resetImage:o})]})})},Pt=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Formularios de ingreso",element2:"Cx2",element3:"bi bi-input-cursor"}),e.jsx("div",{className:"container-lg",id:"bodyGallery",children:e.jsx(Dt,{})}),e.jsx(he,{}),e.jsx(ve,{})]}),At="/CX2/gif/dash3.gif",Mt=()=>e.jsxs("div",{children:[e.jsx("h5",{className:"text-secondary fs-1 text-center mb-5 text-cyan mt-5 mt-md-0",children:"Bienvenido al Panel de Control 10 Bis"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6 text-center d-flex justify-content-center",children:e.jsxs("div",{className:"row",children:[e.jsxs("p",{className:"p-2",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-blueW text-cyan"}),"Aquí podrás administrar los recursos del sistema de forma fácil y sencilla."]}),e.jsxs("p",{className:"p-2",children:[e.jsx("i",{className:"bi bi-lightbulb p-3 rounded-circle me-3 bg-blueW text-cyan"}),"Recuerda que, ante cualquier problema, puedes solicitar asistencia técnica."]})]})}),e.jsx("div",{className:"col-12 col-md-6 text-center",children:e.jsx("div",{children:e.jsx("img",{src:At,alt:"Descripción de la imagen",className:"img-thumbnail p-2 rounded-circle shadow",style:{width:"300px",height:"210px"}})})})]})]}),Bs=({showModal:a,closeModal:r})=>{const t={Rosario:["Comisaria 1ra. - Sección Centro","Comisaria 2da. - Sección Puerto Norte","Comisaria 3ra. - Sección Tucuman","Comisaria 4ta. - Sección Echesortu","Comisaria 5ta. - Sección Pichincha","Comisaria 6ta. - Sección Zona Sur","Comisaria 7ma. - Sección La Florida","Comisaria 8va. - Sección Zona Oeste"]},c=["CRE Rosario","CRE Baigorria","BOU","BOP","AUOP","MOTORIZADA","CGI","PAT","CYP","VIAL","PUMAS","OTROS"],[i,l]=s.useState("Rosario"),[o,n]=s.useState(""),[m,x]=s.useState(""),[h,N]=s.useState(""),[g,v]=s.useState(""),[u,b]=s.useState(""),[d,f]=s.useState(""),[S,w]=s.useState(""),[y,_]=s.useState(!1),p=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,[j,C]=s.useState([]),[F,E]=s.useState(""),[k,M]=s.useState(""),[L,B]=s.useState([]),K=new Date().toLocaleString(),H=A=>p.test(A),J=()=>{if(!H(h)){f("El nombre y apellido solo deben contener letras y espacios.");return}if(g.length!==8||isNaN(g)){w("El DNI debe ser un número de 8 caracteres.");return}B([...L,{nombreApellido:h,dni:g}]),N(""),v(""),f("")},ie=()=>{if(k.length!==6||isNaN(k)){w("El NI debe ser un número de 6 caracteres.");return}if(!H(F)){w("El nombre no debe contener números.");return}C([...j,{nombre:F,ni:k}]),E(""),M(""),w("")},ce=async A=>{if(A.preventDefault(),!o){b("Por favor, selecciona una comisaría.");return}if(!m){b("Por favor, selecciona una unidad.");return}if(L.length===0){b("Debes agregar al menos una persona.");return}if(j.length===0){b("Debes agregar al menos una persona para la entrega.");return}if(!window.confirm("¿Estás seguro de que deseas agregar Art. 10 Bis?")){alert("La operación fue cancelada.");return}b(""),_(!0);try{const se=JSON.parse(localStorage.getItem("user"));for(let te=0;te<L.length;te++){const le=L[te];await Ee(V(I,"db_art_diez_bis"),{nombre_apellido:le.nombreApellido,dni:le.dni,selectedLocalidad:i,comisaria:o.split(".")[0].trim(),unidad:m,timestamp:K,usuario:(se==null?void 0:se.email)||"Usuario desconocido",visualidad:!1,comisaria_recibe:!1,personal_entrega:j})}alert("Se agregaron las personas con Art. 10 Bis."),N(""),v(""),n(""),x(""),l("Rosario"),C([]),r()}catch(se){console.error("Error al enviar notificación: ",se),b("Error al enviar la notificación. Inténtalo de nuevo.")}finally{_(!1)}},U=A=>{const T=L.filter((se,te)=>te!==A);B(T)},ee=A=>{const T=j.filter((se,te)=>te!==A);C(T)};return a?e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{className:"modal-title text-center fw-semibold text-white",children:"Agregar Persona - Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:r})]}),e.jsx("div",{className:"modal-body",children:e.jsx("form",{onSubmit:ce,children:e.jsxs("div",{className:"container ",children:[e.jsxs("div",{className:"mb-3 text-center",children:[u&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),u]}),d&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),d]}),S&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar"}),S]})]}),e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-primary fw-semibold shadow-sm text-white py-2 rounded",children:"Agregar personas 10 Bis"}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${d&&!p.test(h)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:h,onChange:A=>N(A.target.value)}),e.jsx("label",{htmlFor:"nombreApellido",children:"Nombre y Apellido"}),d&&!p.test(h)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${d&&(g.length!==8||isNaN(Number(g)))?"is-invalid":""}`,maxLength:"8",placeholder:"DNI",value:g,onChange:A=>v(A.target.value.replace(/[^\d]/g,""))}),e.jsx("label",{htmlFor:"dni",children:"DNI"}),d&&(g.length!==8||isNaN(Number(g)))&&e.jsx("div",{className:"invalid-feedback",children:"El DNI debe ser un número de hasta 8 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-primary shadow-sm rounded-circle",onClick:()=>J(),children:"+"})})]}),L.map((A,T)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 "}),A.nombreApellido," - ",A.dni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>U(T),children:e.jsx("i",{className:"bi bi-trash"})})]},T)),e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-pink fw-semibold shadow-sm text-white py-2 rounded",children:"Dependencia Destino"}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("select",{className:`form-select ${u&&!i?"is-invalid":""}`,value:i,onChange:A=>l(A.target.value),children:e.jsx("option",{value:"Rosario",children:"Rosario"})}),e.jsx("label",{htmlFor:"localidad",children:"Localidad"}),u&&!i&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una localidad."})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:`form-select ${u&&!o?"is-invalid":""}`,value:o,onChange:A=>n(A.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar Comisaría"}),(t[i]||[]).map(A=>e.jsx("option",{value:A,children:A},A))]}),e.jsx("label",{htmlFor:"comisaria",children:"Comisaría"}),u&&!o&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una comisaría."})]})})]}),e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-blue fw-semibold shadow-sm text-white py-2 rounded",children:"Unidad Procede a la Entrega"}),e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{id:"unidad",className:`form-select ${u&&!m?"is-invalid":""}`,value:m,onChange:A=>x(A.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar Unidad"}),c.map(A=>e.jsx("option",{value:A,children:A},A))]}),e.jsx("label",{htmlFor:"unidad",children:"Unidad Procede a la Entrega"}),u&&!m&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una unidad."})]})]}),e.jsxs("div",{className:"mb-3 text-center mt-4",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-secondaryM fw-semibold shadow-sm text-white py-2 rounded",children:"Mi Unidad de Trabajo"}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${S&&!p.test(F)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:F,onChange:A=>E(A.target.value)}),e.jsx("label",{htmlFor:"nombreEntrega",children:"Nombre y Apellido"}),S&&!p.test(F)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${S&&(k.length!==6||isNaN(k))?"is-invalid":""}`,placeholder:"N.I",maxLength:"6",value:k,onChange:A=>M(A.target.value)}),e.jsx("label",{htmlFor:"niEntrega",children:"N.I"}),S&&(k.length!==6||isNaN(k))&&e.jsx("div",{className:"invalid-feedback",children:"El N.I debe ser un número de 6 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-primary shadow-sm rounded-circle",onClick:()=>ie(),children:"+"})})]}),j.map((A,T)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light mt-3",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 "}),A.nombre," - ",A.ni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>ee(T),children:e.jsx("i",{className:"bi bi-trash"})})]},T))]}),e.jsx("div",{className:"text-center mb-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary shadow",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-arrow-repeat me-2"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"Confirmar"]})})})," "]})})})]})})}):null},It=({showModal:a,closeModal:r})=>{const[t,c]=s.useState(!1),i=Pe(),l=()=>{c(!1),r()},o=()=>{c(!t)};return s.useEffect(()=>{if(i.pathname==="/dashboard"){const n=m=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}}},[]),a?e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Herramientas Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("button",{className:`btn btn-${t?"secondary":"purple"}`,onClick:o,children:[t?"Ocultar Formulario":"Ingresar Nuevo Art. 10 Bis",e.jsx("i",{className:`ms-2 bi ${t?"bi-x-circle":"bi-person-add"}`})]})}),t&&e.jsx("div",{className:"container my-4",children:e.jsx(Bs,{showModal:a,closeModal:l})})]})]})})}):null},Lt=({showModal:a,closeModal:r})=>{const[t,c]=s.useState(!1),i=Pe(),l=()=>{c(!1),r()};return s.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const o=n=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}}},[]),a?e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Recepción Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(Rs,{})})})]})})}):null},Rt=({showModal:a,closeModal:r})=>{const[t,c]=s.useState(!1),i=Pe(),l=()=>{c(!1),r()};return s.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const o=n=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}}},[]),a?e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Salida / Egreso Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(Ts,{})})})]})})}):null},Us=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState([]),[o,n]=s.useState("nombre"),m=async()=>{try{const b=(await ae(V(I,"db_comisarias"))).docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.disponibilidad===!0);r(b)}catch(u){console.error("Error al obtener las comisarías: ",u)}},x=async()=>{try{const b=(await ae(V(I,"db_art_diez_bis"))).docs.map(S=>({id:S.id,...S.data()})),d=b.filter(S=>S.visualidad===!0&&S.comisaria_recibe===!0),f=b.filter(S=>S.visualidad===!1&&S.comisaria_recibe===!1);c(d),l(f)}catch(u){console.error("Error al obtener las notificaciones: ",u)}};s.useEffect(()=>{m(),x()},[]);const h=t.reduce((u,b)=>{const d=b.comisaria;return d&&(u[d]=(u[d]||0)+1),u},{}),N=i.reduce((u,b)=>{const d=b.comisaria;return d&&(u[d]=(u[d]||0)+1),u},{}),g=u=>{const b=a.find(d=>d.comisaria===u);if(b){const d=b.plazas_art_10_bis||0;return(h[u]||0)>=d?{estado:"Llena",clase:"badge bg-danger"}:{estado:"Disponible",clase:"badge bg-info"}}return{estado:"Desconocido",clase:"badge bg-secondary"}},v=()=>o==="nombre"?[...a].sort((u,b)=>u.comisaria.localeCompare(b.comisaria)):o==="plaza"?[...a].sort((u,b)=>(b.plazas_art_10_bis||0)-(u.plazas_art_10_bis||0)):a;return e.jsxs("div",{children:[e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select",id:"filtroOrden",value:o,onChange:u=>n(u.target.value),"aria-label":"Ordenar por",children:[e.jsx("option",{value:"nombre",children:"Nombre (A-Z)"}),e.jsx("option",{value:"plaza",children:"Plazas Disponibles"})]}),e.jsx("label",{htmlFor:"filtroOrden",children:"Ordenar por"})]}),e.jsx("div",{className:"list-group",children:v().map(u=>{const{estado:b,clase:d}=g(u.comisaria),f=h[u.comisaria]||0,S=N[u.comisaria]||0;return e.jsx("div",{className:"list-group-item mb-3 shadow",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary",style:{fontSize:"1.5rem"}}),e.jsxs("div",{children:[e.jsx("strong",{children:u.comisaria}),e.jsxs("div",{children:[e.jsx("small",{className:d,children:`${f} / ${u.plazas_art_10_bis||0} Plazas - ${b}`}),e.jsx("div",{children:e.jsx("small",{className:"badge bg-primary",children:`${S} Pendientes ( Por Validar )`})})]})]})]})},u.comisaria)})})]})},$t=({showModal:a,closeModal:r})=>{const[t,c]=s.useState(!1),i=Pe(),l=()=>{c(!1),r()};return s.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const o=n=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}}},[]),a?e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-md",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Plazas Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(Us,{})})})]})})}):null},zt=()=>{const[a,r]=s.useState(!1),[t,c]=s.useState([]),[i,l]=s.useState([]),[o,n]=s.useState({search:"",estado:"",comisaria:""}),[m,x]=s.useState(!1),[h,N]=s.useState(!1),[g,v]=s.useState(""),u=async()=>{r(!0);try{let w=V(I,"db_art_diez_bis");if(o.estado==="desactivado")w=V(I,"db_art_diez_bis_desactivados");else if(o.estado===""){const p=await ae(V(I,"db_art_diez_bis")),j=await ae(V(I,"db_art_diez_bis_desactivados")),C=p.docs.map(k=>({id:k.id,...k.data()})),F=j.docs.map(k=>({id:k.id,...k.data()})),E=[...C,...F];c(E),l(E),r(!1);return}const _=(await ae(w)).docs.map(p=>({id:p.id,...p.data()}));c(_),l(_)}catch(w){console.error("Error al obtener las notificaciones: ",w)}finally{r(!1)}};s.useEffect(()=>{u()},[o.estado]);const b=w=>{const{name:y,value:_}=w.target;n(p=>({...p,[y]:_}))};s.useEffect(()=>{const{search:w,estado:y,comisaria:_}=o,p=t.filter(j=>{var k,M,L;const C=w===""||((k=j.nombre_apellido)==null?void 0:k.toLowerCase().includes(w.toLowerCase()))||((M=j.dni)==null?void 0:M.toString().includes(w)),F=y===""||(y==="activado"?j.visualidad:!j.visualidad),E=_===""||((L=j.comisaria)==null?void 0:L.toLowerCase())===_.toLowerCase();return C&&F&&E});l(p),p.length===0?x(!0):x(!1)},[o,t]);const d=async(w,y,_)=>{try{if(y){const p=Z(I,"db_art_diez_bis",w);await oe(p,{visualidad:!1}),await fe(Z(I,"db_art_diez_bis_desactivados",w),_),await ge(p),u(),alert("Estado desactivado y documento movido a desactivados")}else{const p=Z(I,"db_art_diez_bis_desactivados",w),j=_;await fe(Z(I,"db_art_diez_bis",w),{...j,visualidad:!0}),await ge(p),u(),alert("Estado activado y documento movido a activados")}}catch(p){console.error("Error al actualizar la visualidad: ",p),alert("Hubo un error al cambiar la visualidad.")}},f=()=>N(!1),S=w=>{v(w),N(!0)};return e.jsxs("div",{className:"container-lg text-center mt-5  mt-sm-5 mt-md-0 ms-lg-0",children:[e.jsxs("div",{className:"alert alert-light text-danger text-center bg-white border border-2 shadow-sm",role:"alert",children:["Recuerda que las personas están dentro del contexto ",e.jsx("strong",{children:" 6 horas cumplidas como maximo ( Art. 10 Bis ) desde su Ingreso . "}),"Por lo tanto el sistema da salida automáticamente a esas personas cumplido el plazo."]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-4 mb-3  mb-sm-5 mb-md-0 mb-lg-0",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:"form-control shadow-sm",name:"search",value:o.search,onChange:b,placeholder:"Buscar por nombre o DNI"}),e.jsx("label",{htmlFor:"search",children:"Buscar por nombre o DNI"})]})}),e.jsx("div",{className:"col-md-4  mb-3 mb-sm-5 mb-md-0 mb-lg-0",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm",name:"estado",value:o.estado,onChange:b,children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"activado",children:"Activado"}),e.jsx("option",{value:"desactivado",children:"Desactivado"})]}),e.jsx("label",{htmlFor:"estado",children:"Filtrar por estado"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm",name:"comisaria",value:o.comisaria,onChange:b,children:[e.jsx("option",{value:"",children:"Todas las comisarías"}),[...new Set(t.map(w=>w.comisaria).filter(Boolean))].map(w=>e.jsx("option",{value:w,children:w},w))]}),e.jsx("label",{htmlFor:"comisaria",children:"Filtrar por comisaría"})]})})]}),m&&e.jsx("div",{className:"alert alert-danger",children:"No se encontraron coincidencias"}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("div",{className:"col-6 col-md-3 mt-4",children:[e.jsxs("button",{className:"btn btn-primary text-white fw-semibold mt-3 w-100",onClick:()=>S("panel"),children:["Nuevo 10 Bis"," ",e.jsx("i",{className:"bi bi-person-add rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-teal text-white fw-semibold mt-3 w-100",onClick:()=>S("recepcion"),children:["Recepción 10 Bis"," ",e.jsx("i",{className:"bi bi-people-fill rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-secondaryMuiRed text-white fw-semibold mt-3 w-100",onClick:()=>S("estadio"),children:["Alojados 10 Bis"," ",e.jsx("i",{className:"bi bi-person-raised-hand rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-orange text-white fw-semibold mt-3 w-100",onClick:()=>S("plazas"),children:["Plazas 10 Bis"," ",e.jsx("i",{className:"bi bi-shield-lock rounded-circle border border-2 p-1 m-1"})]})]}),e.jsx("div",{className:"col-12 col-md-9 mt-4",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{children:"Actividad Art 10 Bis"})}),a?e.jsx(re,{}):e.jsx("div",{className:"list-group",children:i.map(w=>e.jsxs("div",{className:`list-group-item mb-3 shadow ${w.visualidad?"bg-greenW2":"bg-redW"}`,children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:w.nombre_apellido||"Sin nombre"})," -"," ",w.dni||"Sin DNI"]}),e.jsx("button",{className:`btn fw-semibold btn-sm ${w.visualidad?"btn-pink text-white rounded-pill":"btn-teal text-white rounded-pill"}`,onClick:()=>d(w.id,w.visualidad,w),children:w.visualidad?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-eye-slash me-1"})," Ocultar"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-eye me-2"})," Activar"]})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("small",{children:[w.selectedLocalidad||"Localidad desconocida"," -"," ",w.comisaria||"Comisaría desconocida"," -"," ",w.timestamp?w.timestamp.split(",")[0]+" "+w.timestamp.split(",")[1].trim().slice(0,5)+" hs":"Fecha no disponible"]})})]},w.id))})]})})]}),h&&g==="panel"&&e.jsx(It,{showModal:h,closeModal:f}),h&&g==="recepcion"&&e.jsx(Lt,{showModal:h,closeModal:f}),h&&g==="estadio"&&e.jsx(Rt,{showModal:h,closeModal:f}),h&&g==="plazas"&&e.jsx($t,{showModal:h,closeModal:f})]})},Ot=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState(!0),o=["comisaria","fecha_ingreso_validado","dni","nombre_apellido","selectedLocalidad","timestamp","unidad","usuario_validado_ingreso","salida_art","salida_art_usuario"],n=async()=>{try{const g=V(I,"db_art_diez_bis"),v=V(I,"db_art_diez_bis_desactivados"),[u,b]=await Promise.all([ae(g),ae(v)]),d=u.docs.map(w=>({id:w.id,...w.data()})),f=b.docs.map(w=>({id:w.id,...w.data()})),S=[...d,...f];r(S),l(!1)}catch(g){console.error("Error al obtener los datos:",g),l(!1)}},m=g=>{c(v=>v.includes(g)?v.filter(u=>u!==g):[...v,g])},x=()=>{c(o)},h=()=>{c([])},N=()=>{if(a.length===0){console.error("No hay datos para descargar");return}if(t.length===0){console.error("Debe seleccionar al menos un campo");return}const g=a.map(b=>{const d={};return t.forEach(f=>{d[f]=b[f]}),d}),v=je.json_to_sheet(g),u=je.book_new();je.book_append_sheet(u,v,"Datos Seleccionados"),Ge(u,"Datos_Seleccionados.xlsx")};return s.useEffect(()=>{n()},[]),e.jsxs("div",{className:"container-lg mt-5 mt-sm-5 mt-md-0 mt-lg-0",children:[e.jsxs("h2",{className:"text-center mb-4",children:["Exportar Datos de Art. 10 Bis ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"text-center mb-5",children:"Selecciona los campos que deseas incluir en la exportación. "}),i?e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm text-primary mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-primary mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-primary mx-2",role:"status"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-center mb-4",children:[e.jsx("button",{className:"btn btn-outline-green me-2",onClick:x,children:"Seleccionar Todos"}),e.jsx("button",{className:"btn btn-outline-secondary",onClick:h,children:"Limpiar Selección"})]}),e.jsx("form",{className:"mb-4",children:e.jsx("div",{className:"row border border-3 border-dark p-4 shadow rounded-4",children:o.map(g=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",style:{display:"flex",alignItems:"center"},children:e.jsxs("div",{className:"form-check w-100",children:[e.jsx("input",{type:"checkbox",className:"form-check-input bg-green",id:g,value:g,onChange:()=>m(g),checked:t.includes(g)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:g,children:g})]})},g))})}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn btn-green text-white fw-semibold",onClick:N,children:["Descargar Datos Seleccionados ",e.jsx("i",{className:"bi bi-filetype-xml"})]})})]})]})},Tt=(a,r)=>{const t=parseInt(a.replace("#",""),16),c=Math.max((t>>16)-r,0),i=Math.max((t>>8&255)-r,0),l=Math.max((t&255)-r,0);return`#${(c<<16|i<<8|l).toString(16).padStart(6,"0")}`},Bt=({chartType:a,onChange:r})=>e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("span",{className:"input-group-text bg-primary text-white",id:"inputGroup-sizing-sm",children:"Tipo de gráfico:"}),e.jsxs("select",{className:"form-select text-center border border-primary",onChange:r,value:a,children:[e.jsx("option",{value:"bar",children:"Barra"}),e.jsx("option",{value:"line",children:"Línea"}),e.jsx("option",{value:"pie",children:"Pastel"}),e.jsx("option",{value:"doughnut",children:"Doughnut"})]})]}),Ut=({agrupacion:a,onChange:r})=>e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("span",{className:"input-group-text bg-secondaryMuiRed text-white",children:[e.jsx("i",{className:"bi bi-diagram-3-fill me-1"})," Agrupar por"]}),e.jsxs("select",{className:"form-select text-center border border-secondaryMuiRed",value:a,onChange:r,children:[e.jsx("option",{value:"comisaria",children:"Comisaría"}),e.jsx("option",{value:"unidad",children:"Unidad"})]})]}),qt=({coleccionesSeleccionadas:a,onChange:r})=>{const t=["db_art_diez_bis","db_art_diez_bis_desactivados"],c=o=>{const n=a.includes(o);n&&a.length===1||r(n?a.filter(m=>m!==o):[...a,o])},i=o=>o==="db_art_diez_bis"?"Activos":"Históricos",l=o=>o==="db_art_diez_bis"?"bi-person-fill-check":"bi-person-fill-slash";return e.jsx("div",{className:"d-flex justify-content-center gap-3 flex-wrap my-3",children:t.map(o=>{const n=a.includes(o);return e.jsxs("button",{type:"button",className:`btn d-flex align-items-center gap-2 px-4 py-1 rounded-3 shadow-sm fw-semibold ${n?"btn-primary2 text-white":"btn-outline-primary2"}`,onClick:()=>c(o),children:[e.jsx("i",{className:`bi ${l(o)} fs-5`}),i(o)]},o)})})},Vt=({chartType:a,data:r,options:t})=>{switch(a){case"line":return e.jsx(Ke,{data:r,options:t});case"pie":return e.jsx(Fs,{data:r,options:t});case"doughnut":return e.jsx(Ds,{data:r,options:t});case"bar":default:return e.jsx(Es,{data:r,options:t})}},Gt=(a,r)=>{const[t,c]=s.useState({}),[i,l]=s.useState(!0),[o,n]=s.useState(null);return s.useEffect(()=>{const m=async()=>{try{const x={};for(const h of r)(await ae(V(I,h))).forEach(g=>{const v=g.data()[a];v&&(x[v]=(x[v]||0)+1)});c(x)}catch(x){n(x),console.error("Error fetching data:",x)}finally{l(!1)}};r.length>0?(l(!0),m()):(c({}),l(!1))},[a,r]),{data:t,loading:i,error:o}},Wt=()=>{const[a,r]=s.useState("bar"),[t,c]=s.useState("comisaria"),[i,l]=s.useState(["db_art_diez_bis","db_art_diez_bis_desactivados"]),{data:o,loading:n,error:m}=Gt(t,i);if(n)return e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm text-primary mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-primary mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-primary mx-2",role:"status"})]});if(m)return e.jsx("p",{className:"alert alert-danger text-center",children:"Error cargando datos."});if(!o)return null;const x=Object.values(o).reduce((d,f)=>d+f,0),N=[" #1de9b6"," #ffca28"," #f73378"," #16B1FF"," #7e57c2"," #e353d3"," #c7f7d4"," #ffef62"," #05F2D4"].slice(0,9),g=Object.keys(o),v=Object.values(o),u={labels:g,datasets:[{label:`Total por ${t[0].toUpperCase()+t.slice(1)} (${x})`,data:v,backgroundColor:N,borderColor:N.map(d=>Tt(d,40)),borderWidth:1}]},b={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:`Total de Casos por ${t[0].toUpperCase()+t.slice(1)}`}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}},x:{beginAtZero:!0}}};return e.jsxs("div",{className:"container-lg mt-5 mt-sm-5 mt-md-0 ms-lg-0",children:[e.jsx("h2",{className:"text-center mb-4 bg-primary2 p-1 text-white rounded-3",children:"Estadísticas / Gráficos"}),e.jsxs("div",{className:"row justify-content-center mb-3",children:[e.jsx("div",{className:"col-12 col-md-5 mb-2",children:e.jsx(Bt,{chartType:a,onChange:d=>r(d.target.value)})}),e.jsx("div",{className:"col-12 col-md-5 mb-2",children:e.jsx(Ut,{agrupacion:t,onChange:d=>c(d.target.value)})}),e.jsx("div",{className:"col-12 col-md-10",children:e.jsx(qt,{coleccionesSeleccionadas:i,onChange:l})})]}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10",style:{height:"400px"},children:e.jsx(Vt,{chartType:a,data:u,options:b})})})]})},Ht=()=>{const[a,r]=s.useState([]),[t,c]=s.useState({totalDocumentos:0,personalEntrega:{},promedioTiempo:null,documentosPorComisaria:{},unidades:[],comisarias:[],salidasArtUsuarioMap:[]});s.useEffect(()=>{(async()=>{const n=(await ae(V(I,"db_art_diez_bis_desactivados"))).docs.map(m=>m.data());r(n),i(n)})()},[]);const i=l=>{const o={},n={},m={},x={};let h=0,N=0;l.forEach(d=>{if(d.personal_entrega.forEach(f=>{const S=f.nombre.split(" ")[0],w=`${f.ni} - ${S}`;o[w]=(o[w]||0)+1}),n[d.comisaria]=(n[d.comisaria]||0)+1,d.unidad&&(m[d.unidad]=(m[d.unidad]||0)+1),d.salida_art_usuario&&(x[d.salida_art_usuario]=(x[d.salida_art_usuario]||0)+1),d.fecha_ingreso_validado&&d.salida_art){const f=d.fecha_ingreso_validado.toDate(),S=d.salida_art.toDate();!isNaN(f)&&!isNaN(S)?(h+=(S-f)/(1e3*60*60),N++):console.warn("Fecha inválida: ",d.fecha_ingreso_validado,d.salida_art)}});const g=Object.entries(m).map(([d,f])=>({unidad:d,cantidad:f})).sort((d,f)=>f.cantidad-d.cantidad),v=Object.entries(n).map(([d,f])=>({comisaria:d,cantidad:f})).sort((d,f)=>f.cantidad-d.cantidad),u=Object.entries(o).map(([d,f])=>({key:d,value:f})).sort((d,f)=>f.value-d.value),b=Object.entries(x).map(([d,f])=>({usuario:d,cantidad:f})).sort((d,f)=>f.cantidad-d.cantidad);c({totalDocumentos:l.length,personalEntrega:u,promedioTiempo:N>0?(h/N).toFixed(2):null,documentosPorComisaria:n,unidades:g,comisarias:v,salidasArtUsuarioMap:b})};return e.jsxs("div",{className:"container ",children:[e.jsxs("h3",{className:"text-center mb-4 bg-secondaryM text-white rounded p-2 ",children:["Estadísticas Art. 10 Bis ",e.jsx("i",{className:"ms-2 bi bi-bar-chart-fill"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2  ",children:"Total Art 10 Bis"}),e.jsxs("p",{className:"card-text fs-3",children:["    ",e.jsx("i",{className:"bi bi-clipboard-data mx-3",style:{fontSize:"1.5rem",color:"#007bff"}})," ",t.totalDocumentos," Total "]})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2 ",children:"Promedio Salida"}),e.jsx("i",{className:"bi bi-clock mx-3",style:{fontSize:"1.5rem",color:"#007bff"}}),e.jsxs("span",{className:"card-text fs-3",children:[t.promedioTiempo!==null?t.promedioTiempo:"N/A"," Horas"]})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:"Comisarías"}),e.jsx("ul",{className:"list-unstyled mb-0 text-center",children:Object.entries(t.documentosPorComisaria).map(([l,o])=>e.jsxs("li",{children:[l,": ",o]},l))}),e.jsx("hr",{}),e.jsxs("div",{className:"text-center",children:[e.jsx("strong",{children:"Total Art. por  Comisarías: "}),Object.values(t.documentosPorComisaria).reduce((l,o)=>l+o,0)]})]})})})]}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento en Personal Entrega ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Posición"}),e.jsx("th",{scope:"col",children:"Personal Entrega"}),e.jsx("th",{scope:"col",children:"Procedimientos"}),e.jsx("th",{scope:"col",children:"Distinción"})]})}),e.jsx("tbody",{children:t.personalEntrega.length>0?t.personalEntrega.map(({key:l,value:o},n)=>e.jsxs("tr",{className:n===0?"table-warning":"",children:[e.jsx("td",{children:n===0?"👑 1":n===1?"🥈 2":n===2?"🥉 3":n+1}),e.jsx("td",{children:l}),e.jsxs("td",{children:[o," Procedimientos"]}),e.jsx("td",{children:n===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):n===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):n===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Unidades ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Unidad"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinción"})]})}),e.jsx("tbody",{children:t.unidades.length>0?t.unidades.map(({unidad:l,cantidad:o},n)=>e.jsxs("tr",{className:n===0?"table-warning":"",children:[e.jsxs("td",{children:[n===0?"👑 1":n===1?"🥈 2":n===2?"🥉 3":n+1," ",l]}),e.jsx("td",{children:o}),e.jsx("td",{children:n===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):n===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):n===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Comisarías ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Comisaría"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinción"})]})}),e.jsx("tbody",{children:t.comisarias.length>0?t.comisarias.map(({comisaria:l,cantidad:o},n)=>e.jsxs("tr",{className:n===0?"table-warning":"",children:[e.jsxs("td",{children:[n===0?"👑 1":n===1?"🥈 2":n===2?"🥉 3":n+1," ",l]}),e.jsx("td",{children:o}),e.jsx("td",{children:n===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):n===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):n===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Salida Art Usuario ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Usuario"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinción"})]})}),e.jsx("tbody",{children:t.salidasArtUsuarioMap.length>0?t.salidasArtUsuarioMap.map(({usuario:l,cantidad:o},n)=>e.jsxs("tr",{className:n===0?"table-warning":"",children:[e.jsxs("td",{children:[n===0?"👑 1":n===1?"🥈 2":n===2?"🥉 3":n+1," ",l]}),e.jsx("td",{children:o}),e.jsx("td",{children:n===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):n===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):n===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})})]})};Ns.register(Cs,Ss,_s,ks,vs,ys,ws);const qs=({personas:a,visible:r,setVisible:t})=>{const c=s.useMemo(()=>{const l={};a.forEach(m=>{var h,N;const x=(N=(h=m.fecha_ingreso_validado)==null?void 0:h.toDate)==null?void 0:N.call(h);if(x){const g=x.getDate().toString().padStart(2,"0"),v=(x.getMonth()+1).toString().padStart(2,"0"),u=x.getFullYear(),b=`${g}-${v}-${u}`;l[b]=(l[b]||0)+1}});const o=Object.keys(l).sort(),n=o.map(m=>l[m]);return{labels:o,datasets:[{label:"Ingresos por día",data:n,fill:!1,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgb(75, 192, 192)",tension:.2}]}},[a]),i={responsive:!0,plugins:{legend:{position:"top"},title:{display:!1},datalabels:{anchor:"end",align:"top",color:"#000",font:{weight:"bold"},formatter:l=>l}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto m",onClick:()=>t(!r)})}),e.jsx("div",{className:"card shadow-sm  mt-1",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center",children:"📆 Ingresos en el tiempo"}),e.jsx(Ke,{data:c,options:i})]})})]})},Vs=({personas:a,seleccionadas:r=[],visible:t,setVisible:c})=>{const i=s.useMemo(()=>{const l=a.length,o=r.length,n={},m={};return a.forEach(x=>{const h=x.unidad||"Sin unidad",N=x.comisaria||"Sin comisaría";n[h]=(n[h]||0)+1,m[N]=(m[N]||0)+1}),{total:l,totalSeleccionadas:o,porUnidad:n,porComisaria:m}},[a,r]);return e.jsx("div",{className:"mb-4",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>c(!t)})}),e.jsxs("div",{className:"row row-cols-1 row-cols-md-4 g-3 ",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px",backgroundColor:"rgba(13, 110, 253, 0.1)"},children:e.jsx("i",{className:"bi bi-people fs-3 text-primary"})}),e.jsx("h6",{className:"card-title text-muted mb-1",children:"Total registros"}),e.jsx("span",{className:"badge bg-primary fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.total})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#0d6efd",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px",backgroundColor:"rgba(13, 110, 253, 0.1)"},children:e.jsx("i",{className:"bi bi-check-circle fs-3 text-secondaryM"})}),e.jsx("h6",{className:"card-title text-muted mb-1",children:"Seleccionados"}),e.jsx("span",{className:"badge bg-secondaryM fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.totalSeleccionadas})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#03dac6",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-car-front text-primary me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Unidades"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porUnidad).map(([l,o])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:l}),e.jsx("span",{className:"badge bg-primary mb-2",children:o})]},l))})]})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Comisarías"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porComisaria).map(([l,o])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:l}),e.jsx("span",{className:"badge bg-secondary mb-2",children:o})]},l))})]})})})]})]})})},Gs=({searchTerm:a,setSearchTerm:r,orden:t,setOrden:c,prioridadFilter:i,setPrioridadFilter:l,comisariaFilter:o,setComisariaFilter:n,fechaInicio:m,setFechaInicio:x,fechaFin:h,setFechaFin:N,personas:g=[],visible:v,setVisible:u})=>{const b=[...new Set(g.map(w=>w.unidad))],d=[...new Set(g.map(w=>w.comisaria))],f=a||t!=="asc"||i||o||m||h,S=()=>{r(""),c("asc"),l(""),n(""),x(""),N("")};return v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto",onClick:()=>u(!v)})}),e.jsxs("div",{className:"card shadow-sm border-0 mt-2",children:[e.jsx("div",{className:"card-header text-center bg-primary text-white p-1 rounded-2 mx-3",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"bi bi-funnel-fill me-2"}),"Filtros"]})}),e.jsxs("div",{className:"card-body px-4",children:[e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-secondary",children:"Buscar por Nombre"}),e.jsx("input",{type:"text",className:"form-control",value:a,onChange:w=>r(w.target.value),placeholder:"Ej: Juan Pérez"})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsx("label",{className:"form-label fw-semibold small text-secondary",children:"Orden"}),e.jsxs("select",{className:"form-select",value:t,onChange:w=>c(w.target.value),children:[e.jsx("option",{value:"asc",children:"Ascendente (A-Z)"}),e.jsx("option",{value:"desc",children:"Descendente (Z-A)"})]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-secondary",children:"Unidad"}),e.jsxs("select",{className:"form-select",value:i,onChange:w=>l(w.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),b.map(w=>e.jsx("option",{value:w,children:w},w))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-secondary",children:"Comisaría"}),e.jsxs("select",{className:"form-select",value:o,onChange:w=>n(w.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),d.map(w=>e.jsx("option",{value:w,children:w},w))]})]}),e.jsxs("div",{className:"col-md-6 mt-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-secondary",children:"Rango de fechas (Ingreso)"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"date",className:"form-control",value:m,onChange:w=>x(w.target.value)}),e.jsx("span",{className:"input-group-text",children:"a"}),e.jsx("input",{type:"date",className:"form-control",value:h,onChange:w=>N(w.target.value)})]})]})]}),f&&e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{className:"btn btn-danger text-white rounded-circle d-flex align-items-center justify-content-center",style:{width:"45px",height:"45px",boxShadow:"0 0.5rem 1rem rgba(0,0,0,0.15)"},onClick:S,title:"Restaurar filtros",children:e.jsx("i",{className:"bi bi-trash"})})})]})]})," "]})},Ws=({columnasVisibles:a,setColumnasVisibles:r,visible:t,setVisible:c})=>t&&e.jsxs("div",{className:"my-4",children:[e.jsx("div",{className:"d-flex justify-content-end mt-1 mb-2",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto",onClick:()=>c(!t)})}),e.jsx("div",{className:"card shadow-sm border-0 m",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-3 text-center bg-primary text-white p-1 rounded-2",children:[e.jsx("i",{className:"bi bi-sliders me-2"}),"Mostrar / Ocultar columnas"]}),e.jsx("div",{className:"row",children:Object.entries(a).map(([i,l])=>e.jsx("div",{className:"col-6 col-md-4 mb-2",children:e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`columna-${i}`,checked:l,onChange:()=>r(o=>({...o,[i]:!o[i]}))}),e.jsx("label",{className:"form-check-label",htmlFor:`columna-${i}`,children:i==="usuarioSalida"?"Usuario salida":i.charAt(0).toUpperCase()+i.slice(1)})]})},i))})]})})]}),Hs=({filteredPersonas:a,selectedDocs:r,toggleSelectAll:t,toggleSelectDoc:c,columnasVisibles:i})=>{const[l,o]=s.useState(!0);return e.jsx(e.Fragment,{children:a.length===0?e.jsx("div",{className:"alert alert-light text-danger shadow text-center titilar mt-3",children:"Sin registro encontrado."}):e.jsx("div",{className:"table-responsive-sm d-none d-sm-block my-4",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsxs("div",{className:"card-header bg-primary text-white px-3 p-1 d-flex justify-content-between align-items-center rounded-2 mx-2 mt-2",children:[e.jsx("div",{style:{width:"32px"}}),e.jsxs("h5",{className:"mb-0 text-center flex-grow-1",children:[e.jsx("i",{className:"bi bi-view-list me-2"}),"Tabla"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>o(!l),children:[e.jsx("i",{className:`bi ${l?"bi-arrows-collapse":"bi-arrows-expand"} me-1`}),l?"Contraer":"Expandir"]})]}),l&&e.jsx("div",{className:"px-3 pb-3",children:e.jsxs("table",{className:"table table-striped table-hover text-center small mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:r.length===a.length,onChange:t})}),e.jsx("th",{children:"Nombre"}),i.unidad&&e.jsx("th",{children:"Unidad"}),i.dni&&e.jsx("th",{children:"Documento"}),i.comisaria&&e.jsx("th",{children:"Comisaría"}),i.ingreso&&e.jsx("th",{children:"F Ingreso"}),i.salida&&e.jsx("th",{children:"F Salida"}),i.usuarioSalida&&e.jsx("th",{children:"Salida"})]})}),e.jsx("tbody",{children:a.map(n=>{var m,x,h;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:r.includes(n.id),onChange:()=>c(n.id)})}),e.jsx("td",{className:"text-center",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("div",{className:"rounded-circle bg-primary text-white d-flex justify-content-center align-items-center",style:{width:"30px",height:"30px",fontSize:"0.9rem"},children:((m=n.unidad)==null?void 0:m.charAt(0).toUpperCase())||"?"}),e.jsx("span",{role:"button",onClick:()=>{var f,S,w;const N=((f=n.personal_entrega)==null?void 0:f.map(y=>`${y.nombre} (NI: ${y.ni})
🏢 Unidad: ${n.unidad||"No informada"}`).join(`

`))||"Sin datos",g=((S=n.fecha_ingreso_validado)==null?void 0:S.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"}))||"Sin fecha",v=((w=n.salida_art)==null?void 0:w.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"}))||"Sin fecha",u=n.usuario_validado_ingreso||"Desconocido",b=n.comisaria||"No informada",d=n.salida_art_usuario||"No informada";alert(`👤 Personal que entregó:
${N}

🏢 Comisaría: ${b}
📅 Fecha validación: ${g}
👮 Usuario que validó: ${u}
📅 Fecha salida: ${v}
👮 Usuario que validó salida: ${d}`)},className:"text-decoration-none",children:n.nombre_apellido})]})}),i.unidad&&e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:n.unidad})}),i.dni&&e.jsx("td",{children:n.dni}),i.comisaria&&e.jsx("td",{children:e.jsxs("div",{className:"d-flex flex-column align-items-center gap-1",children:[e.jsx("span",{className:"badge bg-pink",children:n.comisaria}),n.comisaria_recibe===!1&&e.jsx("span",{className:"badge bg-secondaryM titilar",children:"Pendiente Validar"})]})}),i.ingreso&&e.jsx("td",{children:(x=n.fecha_ingreso_validado)==null?void 0:x.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"medium",timeZone:"America/Argentina/Buenos_Aires"})}),i.salida&&e.jsx("td",{children:(h=n.salida_art)==null?void 0:h.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"medium",timeZone:"America/Argentina/Buenos_Aires"})}),i.usuarioSalida&&e.jsx("td",{children:e.jsx("span",{className:"badge bg-teal",children:n.salida_art_usuario})})]},n.id)})})]})})]})})})},Jt=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState([]),[o,n]=s.useState(!0),[m,x]=s.useState(""),[h,N]=s.useState(""),[g,v]=s.useState("asc"),[u,b]=s.useState(""),[d,f]=s.useState(""),[S,w]=s.useState(""),[y,_]=s.useState(!1),[p,j]=s.useState(!1),[C,F]=s.useState(!1),[E,k]=s.useState(!1),M=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotales"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"tabla",componente:"TablaDatos"}],[L,B]=s.useState(M),[K,H]=s.useState(null),[J,ie]=s.useState({unidad:!0,dni:!0,comisaria:!0,ingreso:!1,salida:!1,usuarioSalida:!1}),ce=V(I,"db_art_diez_bis_desactivados"),U=async()=>{n(!0);try{const R=(await ae(ce)).docs.map(Y=>({...Y.data(),id:Y.id}));r(R),c(R)}catch($){console.error("Error al obtener personas: ",$)}finally{n(!1)}},ee=$=>$.sort((R,Y)=>g==="asc"?R.nombre_apellido.localeCompare(Y.nombre_apellido):Y.nombre_apellido.localeCompare(R.nombre_apellido)),A=$=>{H($)},T=$=>{$.preventDefault()},se=$=>{const R=[...L],Y=R.findIndex(P=>P.id===K),q=R.findIndex(P=>P.id===$),[G]=R.splice(Y,1);R.splice(q,0,G),B(R)};s.useEffect(()=>{U()},[]),s.useEffect(()=>{const $=a.filter(R=>R.nombre_apellido&&R.nombre_apellido.toLowerCase().includes(m.toLowerCase())).filter(R=>h?R.unidad===h:!0).filter(R=>u?R.comisaria===u:!0).filter(R=>{var P;if(!d&&!S)return!0;const Y=(P=R.fecha_ingreso_validado)==null?void 0:P.toDate();if(!Y)return!1;const q=d?new Date(d):null,G=S?new Date(S):null;return!(q&&Y<q||G&&Y>G)});c(ee($))},[m,h,u,d,S,g,a]);const te=$=>{l(R=>R.includes($)?R.filter(Y=>Y!==$):[...R,$])},le=()=>{if(i.length===t.length)l([]);else{const $=t.map(R=>R.id);l($)}},xe=()=>{const $=a.filter(G=>i.includes(G.id));if($.length===0){alert("No hay personas seleccionadas para exportar.");return}const R=$.map(G=>{var P,D;return{Nombre:G.nombre_apellido,Documento:G.dni,Unidad:G.unidad,Comisaría:G.comisaria,"Fecha Ingreso":(P=G.fecha_ingreso_validado)==null?void 0:P.toDate().toLocaleString("es-AR"),"Fecha Salida":(D=G.salida_art)==null?void 0:D.toDate().toLocaleString("es-AR"),"Usuario Salida":G.salida_art_usuario}}),Y=je.json_to_sheet(R),q=je.book_new();je.book_append_sheet(q,Y,"Seleccionados"),Ge(q,"personas_seleccionadas.xlsx")};return e.jsxs("div",{className:"container-lg mt-0 mt-5 mt-sm-5 mt-md-0 ms-lg-0 ",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado de Art. 10 Bis Historicos"})}),e.jsxs("div",{className:"container mb-4",children:[e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${p?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>j(!p),children:[e.jsx("i",{className:`bi ${p?"bi-eye-slash":"bi-eye"} me-1`}),p?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${C?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>F(!C),children:[e.jsx("i",{className:`bi ${C?"bi-eye-slash":"bi-eye"} me-1`}),C?"Ocultar filtro":"Ver filtro"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${E?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>k(!E),children:[e.jsx("i",{className:`bi ${E?"bi-eye-slash":"bi-eye"} me-1`}),E?"Ocultar columnas":"Ver columnas"]})})]}),e.jsxs("div",{className:"row my-3 row g-2 align-items-center justify-content-center",children:["  ",e.jsx("div",{className:"col-12 col-md-auto",children:e.jsxs("button",{className:"btn btn-green w-100",onClick:xe,disabled:i.length===0,children:[e.jsx("i",{className:"bi bi-file-earmark-excel me-2"}),"Exportar seleccionados a Excel"]})}),e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("button",{className:"btn btn-primary w-100",onClick:()=>_(!y),children:y?"Cerrar gráfico 📉":" Gráfico Fechas 📈"})})]})]}),o?e.jsx(re,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-sm-none",children:t.map($=>{var R,Y;return e.jsx("div",{className:"card mb-3 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:$.nombre_apellido}),e.jsx("input",{type:"checkbox",checked:i.includes($.id),onChange:()=>te($.id)})]}),J.unidad&&e.jsx("div",{children:e.jsx("span",{className:"badge bg-primary",children:$.unidad})}),J.dni&&e.jsxs("div",{children:["DNI: ",$.dni]}),J.comisaria&&e.jsxs("div",{children:["Comisaría: ",e.jsx("span",{className:"badge bg-pink",children:$.comisaria})]}),J.ingreso&&e.jsxs("div",{children:["Ingreso: ",(R=$.fecha_ingreso_validado)==null?void 0:R.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),J.salida&&e.jsxs("div",{children:["Salida: ",(Y=$.salida_art)==null?void 0:Y.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),J.usuarioSalida&&e.jsxs("div",{children:["Usuario salida: ",e.jsx("span",{className:"badge bg-teal",children:$.salida_art_usuario})]})]})},$.id)})}),L.map(({id:$,componente:R})=>e.jsxs("div",{draggable:!0,onDragStart:()=>A($),onDragOver:T,onDrop:()=>se($),className:"my-3 ",children:[R==="ColumnasVisiblesPanel"&&e.jsx(Ws,{columnasVisibles:J,setColumnasVisibles:ie,visible:E,setVisible:k}),R==="ResumenTotales"&&e.jsx(Vs,{personas:t,seleccionadas:i,visible:p,setVisible:j}),R==="FiltrosPanel"&&e.jsx(Gs,{searchTerm:m,setSearchTerm:x,orden:g,setOrden:v,prioridadFilter:h,setPrioridadFilter:N,comisariaFilter:u,setComisariaFilter:b,fechaInicio:d,setFechaInicio:f,fechaFin:S,setFechaFin:w,personas:a,visible:C,setVisible:F}),R==="GraficoPorFechaIngreso"&&y&&e.jsx(qs,{personas:t,visible:y,setVisible:_}),R==="TablaDatos"&&e.jsx(Hs,{filteredPersonas:t,selectedDocs:i,toggleSelectAll:le,toggleSelectDoc:te,columnasVisibles:J})]},$))]})]})},Yt=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState([]),[o,n]=s.useState(!0),[m,x]=s.useState(""),[h,N]=s.useState(""),[g,v]=s.useState("asc"),[u,b]=s.useState(""),[d,f]=s.useState(""),[S,w]=s.useState(""),[y,_]=s.useState(!1),[p,j]=s.useState(!1),[C,F]=s.useState(!1),[E,k]=s.useState(!1),M=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotales"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"tabla",componente:"TablaDatos"}],[L,B]=s.useState(M),[K,H]=s.useState(null),[J,ie]=s.useState({unidad:!0,dni:!0,comisaria:!0,ingreso:!1,salida:!1,usuarioSalida:!1}),ce=V(I,"db_art_diez_bis"),U=async()=>{n(!0);try{const R=(await ae(ce)).docs.map(Y=>({...Y.data(),id:Y.id}));r(R),c(R)}catch($){console.error("Error al obtener personas: ",$)}finally{n(!1)}},ee=$=>$.sort((R,Y)=>g==="asc"?R.nombre_apellido.localeCompare(Y.nombre_apellido):Y.nombre_apellido.localeCompare(R.nombre_apellido)),A=$=>{H($)},T=$=>{$.preventDefault()},se=$=>{const R=[...L],Y=R.findIndex(P=>P.id===K),q=R.findIndex(P=>P.id===$),[G]=R.splice(Y,1);R.splice(q,0,G),B(R)};s.useEffect(()=>{U()},[]),s.useEffect(()=>{const $=a.filter(R=>R.nombre_apellido&&R.nombre_apellido.toLowerCase().includes(m.toLowerCase())).filter(R=>h?R.unidad===h:!0).filter(R=>u?R.comisaria===u:!0).filter(R=>{var P;if(!d&&!S)return!0;const Y=(P=R.fecha_ingreso_validado)==null?void 0:P.toDate();if(!Y)return!1;const q=d?new Date(d):null,G=S?new Date(S):null;return!(q&&Y<q||G&&Y>G)});c(ee($))},[m,h,u,d,S,g,a]);const te=$=>{l(R=>R.includes($)?R.filter(Y=>Y!==$):[...R,$])},le=()=>{if(i.length===t.length)l([]);else{const $=t.map(R=>R.id);l($)}},xe=()=>{const $=a.filter(G=>i.includes(G.id));if($.length===0){alert("No hay personas seleccionadas para exportar.");return}const R=$.map(G=>{var P,D;return{Nombre:G.nombre_apellido,Documento:G.dni,Unidad:G.unidad,Comisaría:G.comisaria,"Fecha Ingreso":(P=G.fecha_ingreso_validado)==null?void 0:P.toDate().toLocaleString("es-AR"),"Fecha Salida":(D=G.salida_art)==null?void 0:D.toDate().toLocaleString("es-AR"),"Usuario Salida":G.salida_art_usuario}}),Y=je.json_to_sheet(R),q=je.book_new();je.book_append_sheet(q,Y,"Seleccionados"),Ge(q,"personas_seleccionadas.xlsx")};return e.jsxs("div",{className:"container-lg mt-5 mt-sm-5 mt-md-0 ms-lg-0 ",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado de Art. 10 Bis Activos"})}),e.jsxs("div",{className:"container mb-4",children:[e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${p?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>j(!p),children:[e.jsx("i",{className:`bi ${p?"bi-eye-slash":"bi-eye"} me-1`}),p?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${C?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>F(!C),children:[e.jsx("i",{className:`bi ${C?"bi-eye-slash":"bi-eye"} me-1`}),C?"Ocultar filtro":"Ver filtro"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${E?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>k(!E),children:[e.jsx("i",{className:`bi ${E?"bi-eye-slash":"bi-eye"} me-1`}),E?"Ocultar columnas":"Ver columnas"]})})]}),e.jsxs("div",{className:"row my-3 row g-2 align-items-center justify-content-center",children:["  ",e.jsx("div",{className:"col-12 col-md-auto",children:e.jsxs("button",{className:"btn btn-green w-100",onClick:xe,disabled:i.length===0,children:[e.jsx("i",{className:"bi bi-file-earmark-excel me-2"}),"Exportar seleccionados a Excel"]})}),e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("button",{className:"btn btn-primary w-100",onClick:()=>_(!y),children:y?"Cerrar gráfico 📉":" Gráfico Fechas 📈"})})]})]}),o?e.jsx(re,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-sm-none",children:t.map($=>{var R,Y;return e.jsx("div",{className:"card mb-3 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:$.nombre_apellido}),e.jsx("input",{type:"checkbox",checked:i.includes($.id),onChange:()=>te($.id)})]}),J.unidad&&e.jsx("div",{children:e.jsx("span",{className:"badge bg-primary",children:$.unidad})}),J.dni&&e.jsxs("div",{children:["DNI: ",$.dni]}),J.comisaria&&e.jsxs("div",{children:["Comisaría: ",e.jsx("span",{className:"badge bg-pink",children:$.comisaria})]}),J.ingreso&&e.jsxs("div",{children:["Ingreso: ",(R=$.fecha_ingreso_validado)==null?void 0:R.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),J.salida&&e.jsxs("div",{children:["Salida: ",(Y=$.salida_art)==null?void 0:Y.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),J.usuarioSalida&&e.jsxs("div",{children:["Usuario salida: ",e.jsx("span",{className:"badge bg-teal",children:$.salida_art_usuario})]})]})},$.id)})}),L.map(({id:$,componente:R})=>e.jsxs("div",{draggable:!0,onDragStart:()=>A($),onDragOver:T,onDrop:()=>se($),className:"my-3 ",children:[R==="ColumnasVisiblesPanel"&&e.jsx(Ws,{columnasVisibles:J,setColumnasVisibles:ie,visible:E,setVisible:k}),R==="ResumenTotales"&&e.jsx(Vs,{personas:t,seleccionadas:i,visible:p,setVisible:j}),R==="FiltrosPanel"&&e.jsx(Gs,{searchTerm:m,setSearchTerm:x,orden:g,setOrden:v,prioridadFilter:h,setPrioridadFilter:N,comisariaFilter:u,setComisariaFilter:b,fechaInicio:d,setFechaInicio:f,fechaFin:S,setFechaFin:w,personas:a,visible:C,setVisible:F}),R==="GraficoPorFechaIngreso"&&y&&e.jsx(qs,{personas:t,visible:y,setVisible:_}),R==="TablaDatos"&&e.jsx(Hs,{filteredPersonas:t,selectedDocs:i,toggleSelectAll:le,toggleSelectDoc:te,columnasVisibles:J})]},$))]})})]})},Zt=()=>{const[a,r]=s.useState([]),[t,c]=s.useState(""),[i,l]=s.useState("plazas"),[o,n]=s.useState(!0),[m,x]=s.useState(!1),[h,N]=s.useState({comisariaNombre:"",comisariaNumero:"",disponibilidad:!0,plazas_art_10_bis:""}),[g,v]=s.useState({}),[u,b]=s.useState({comisariaNombre:!1,plazas_art_10_bis:!1}),d="1234",f=async()=>{n(!0);try{const M=(await ae(V(I,"db_comisarias"))).docs.map(L=>({id:L.id,...L.data()}));r(M)}catch(k){console.error("Error al obtener las comisarías: ",k)}finally{n(!1)}};s.useEffect(()=>{f()},[]);const S=k=>{const{name:M,value:L,type:B,checked:K}=k.target;if(!(M==="comisariaNombre"&&(!/^[A-Za-zÁÉÍÓÚÑáéíóúñ\s]*$/.test(L)||L.startsWith(" ")))){if(M==="comisariaNumero"){if(L===""||/^\d+$/.test(L)&&Number(L)<=40&&Number(L)>=0){N({...h,[M]:L});return}return}if(M==="plazas_art_10_bis"){const H=parseInt(L,10);L!==""&&(isNaN(H)||H<0||H>99)?b({...u,plazas_art_10_bis:!0}):b({...u,plazas_art_10_bis:!1})}N({...h,[M]:B==="checkbox"?K:L})}},w=(k,M,L)=>{v({...g,[k]:{...g[k],[M]:M==="disponibilidad"?L==="true":L}})},y=async k=>{const{plazas_art_10_bis:M,disponibilidad:L}=g[k]||{};if(window.confirm("¿Estás seguro de que quieres guardar los cambios?"))try{const K=Z(I,"db_comisarias",k),H={};if(M!==void 0){const J=parseInt(M,10);if(isNaN(J)||J<0||J>30){alert("Por favor, ingresa un número válido de plazas entre 0 y 30.");return}H.plazas_art_10_bis=J}L!==void 0&&(H.disponibilidad=L),await oe(K,H),v(J=>{const ie={...J};return delete ie[k],ie}),f()}catch(K){console.error("Error al actualizar comisaría: ",K)}},p=(()=>{const k=localStorage.getItem("user");return k?JSON.parse(k):null})(),j=async k=>{k.preventDefault();const M=h.comisariaNombre.trim(),L=h.comisariaNumero.trim(),B=parseInt(h.plazas_art_10_bis,10),K={comisariaNombre:!M,plazas_art_10_bis:isNaN(B)||B<0||B>99};if(b(K),Object.values(K).some(U=>U)||!window.confirm("¿Estás seguro de agregar esta comisaría?"))return;const J=L?`${M} ${parseInt(L,10)}`.toLowerCase():M.toLowerCase(),ie=new Date,ce=`${ie.getDate().toString().padStart(2,"0")}/${(ie.getMonth()+1).toString().padStart(2,"0")}/${ie.getFullYear().toString().slice(-2)}`;try{await Ee(V(I,"db_comisarias"),{comisaria:J,plazas_art_10_bis:B,disponibilidad:h.disponibilidad,usuario:p.email,fecha:ce}),N({comisariaNombre:"",comisariaNumero:"",disponibilidad:!0,plazas_art_10_bis:""}),f(),alert("Comisaría agregada con éxito.")}catch(U){console.error("Error al agregar comisaría: ",U)}},C=async k=>{if(!window.confirm("¿Estás seguro de que quieres eliminar esta comisaría?"))return;if(prompt("⚠️ Para continuar, ingresá el código llave:")!==d){alert("❌ Código incorrecto. No se eliminará la comisaría.");return}try{const B=Z(I,"db_comisarias",k);await ge(B),f(),alert("✅ Comisaría eliminada correctamente.")}catch(B){console.error("Error al eliminar comisaría: ",B)}},E=[...a.filter(k=>k.comisaria.toLowerCase().includes(t.toLowerCase()))].sort((k,M)=>i==="plazas"?M.plazas_art_10_bis-k.plazas_art_10_bis:i==="nombre"?k.comisaria.localeCompare(M.comisaria):i==="estado"?k.disponibilidad===M.disponibilidad?0:k.disponibilidad?-1:1:0);return e.jsxs("div",{className:"container-lg mt-0 mt-5 mt-sm-5 mt-md-0 ms-lg-0 ",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Comisarias / Plazas"}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"card shadow position-relative text-dark d-flex align-items-start gap-3  p-4 mt-3 border-0",style:{overflow:"visible"},children:[e.jsx("div",{className:"bg-red",children:e.jsx("img",{src:"img/tupel.gif",alt:"Asistente",className:"position-absolute rounded-circle shadow p-2",style:{width:"130px",height:"auto",objectFit:"contain",top:"-15px",left:"-10px"}})}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:"Bienvenido 👮‍♂️ "}),e.jsx("p",{className:"mb-3 text-capitalize m-0",children:"Puedes crear una nueva comisaría, administrando sus plazas disponibles y estado"}),e.jsx("div",{className:"d-flex justify-content-end align-items-center",children:e.jsxs("button",{className:`btn fw-semibold text-white ${m?"btn-secondaryMuiRed":"btn-primary"}`,onClick:()=>x(!m),children:[e.jsx("i",{className:"bi bi-shield-plus me-2"}),m?"Cancelar":"Nueva Comisaría"]})})]})]})}),m&&e.jsx("form",{onSubmit:j,className:"my-5",children:e.jsxs("div",{className:"row g-3 align-items-center d-flex justify-content-center",children:[e.jsx("div",{className:"col-md-5",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control ${u.comisariaNombre?"is-invalid":""}`,id:"comisariaNombre",name:"comisariaNombre",value:h.comisariaNombre,onChange:S}),e.jsx("label",{htmlFor:"comisariaNombre",children:"Nombre Comisaría"}),u.comisariaNombre&&e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras y espacios (no al inicio)."})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"number",className:"form-control",id:"comisariaNumero",name:"comisariaNumero",value:h.comisariaNumero,onChange:S}),e.jsx("label",{htmlFor:"comisariaNumero",children:"Número Comisaría "})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"number",className:`form-control ${u.plazas_art_10_bis?"is-invalid":""}`,id:"plazas_art_10_bis",name:"plazas_art_10_bis",value:h.plazas_art_10_bis,onChange:S}),e.jsx("label",{htmlFor:"plazas_art_10_bis",children:"Plazas Art. 10 Bis"}),u.plazas_art_10_bis&&e.jsx("div",{className:"invalid-feedback",children:"Debe ingresar un número válido de plazas."})]})}),e.jsx("div",{className:"col-md-1 text-center",children:e.jsx("button",{type:"submit",className:"btn btn-primary fw-semibold rounded-circle shadow-sm",children:"+"})})]})}),e.jsxs("h3",{className:"text-center my-4 bg-primary2 text-white rounded p-2",children:["Administrar Comisarías ",e.jsx("i",{className:"ms-2 bi bi-list"})]}),e.jsx("div",{className:"container my-4",children:e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 col-md-5 mb-4 mb-md-0",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-secondaryM text-white",children:e.jsx("i",{className:"bi bi-search"})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar por nombre de comisaría...",value:t,onChange:k=>c(k.target.value)})]})}),e.jsx("div",{className:"col-12 col-md-5",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{id:"sortOrder",className:"form-select shadow-sm",value:i,onChange:k=>l(k.target.value),children:[e.jsx("option",{value:"plazas",children:"Plazas"}),e.jsx("option",{value:"nombre",children:"Nombre"}),e.jsx("option",{value:"estado",children:"Estado"})]}),e.jsx("label",{htmlFor:"sortOrder",children:"Ordenar por:"})]})})]})}),o?e.jsx(re,{}):e.jsx("ul",{className:"list-group",children:E.length===0?e.jsxs("li",{className:"list-group-item text-center text-muted ",children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-danger"}),e.jsx("span",{className:"text-danger",children:" No hay comisarías registradas."})]}):E.map(({id:k,comisaria:M,plazas_art_10_bis:L,disponibilidad:B})=>{var K,H;return e.jsxs("li",{className:"list-group-item mb-3",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-3 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("div",{className:"spinner-grow spinner-grow-sm me-2 text-purple",role:"status"}),e.jsxs("span",{className:"badge Gradiante25 me-2 text-capitalize",children:[M,"°"]})]}),e.jsxs("div",{className:"col-12 col-md-3 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("span",{className:"badge bg-primaryMuiBlue me-2",children:"Plazas"}),e.jsx("input",{type:"number",value:((K=g[k])==null?void 0:K.plazas_art_10_bis)??L,onChange:J=>w(k,"plazas_art_10_bis",J.target.value),className:"form-control d-inline-block w-100",style:{maxWidth:"120px"}})]}),e.jsxs("div",{className:"col-12 col-md-4 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("span",{className:`badge ${B?"bg-teal":"bg-danger"} me-2`,children:"Estado"}),e.jsxs("select",{value:((H=g[k])==null?void 0:H.disponibilidad)??B,onChange:J=>w(k,"disponibilidad",J.target.value),className:"form-select d-inline-block w-100",children:[e.jsx("option",{value:!0,children:"Disponible 👍"}),e.jsx("option",{value:!1,children:"Llena ✋ "})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-start justify-content-md-end w-100 mt-2 mt-md-0",children:[g[k]&&e.jsx("button",{className:"btn btn-sm btn-primary me-2 rounded-circle",onClick:()=>y(k),children:e.jsx("i",{className:"bi bi-floppy2"})}),e.jsx("button",{className:"btn btn-sm btn-danger rounded-circle text-white",onClick:()=>C(k),children:e.jsx("i",{className:"bi bi-trash"})})]})]},k)})})]})},Xt=({personas:a,seleccionadas:r=[],visible:t,setVisible:c})=>{s.useEffect(()=>{console.log("Selected IDs recibidos:",a,r)},[a,r]);const i=s.useMemo(()=>{var g,v;const l=a.length,o=r.length,n={},m={},x={};a.forEach(u=>{const b=u.unidad||"Sin unidad",d=u.comisaria||"Sin comisaría",f=u.salida_art_usuario||"Sin usuario";n[b]=(n[b]||0)+1,m[d]=(m[d]||0)+1,x[f]=(x[f]||0)+1});const h=((g=Object.entries(n).sort((u,b)=>b[1]-u[1])[0])==null?void 0:g[0])||null,N=((v=Object.entries(m).sort((u,b)=>b[1]-u[1])[0])==null?void 0:v[0])||null;return{total:l,totalSeleccionadas:o,porUnidad:n,porComisaria:m,topUnidad:h,topComisaria:N,salidaUsuarios:x}},[a,r]);return e.jsx("div",{className:"mb-4",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>c(!t)})}),e.jsxs("div",{className:"row row-cols-1 row-cols-md-4 g-3",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px",backgroundColor:"rgba(13, 110, 253, 0.1)"},children:e.jsx("i",{className:"bi bi-people fs-3 text-primary"})}),e.jsx("h6",{className:"card-title text-muted mb-1",children:"Total registros"}),e.jsx("span",{className:"badge bg-primary fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.total})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#0d6efd",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:e.jsx("img",{src:"img/trophy.png",alt:"Trofeo",className:"rounded-circle shadow p-4",style:{width:"150px",height:"150px",objectFit:"contain"}})}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#03dac6",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-car-front text-primary me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Unidades"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porUnidad).map(([l,o])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:[l," ",l===i.topUnidad&&"🏆"]}),e.jsx("span",{className:"badge bg-primary mb-2",children:o})]},l))})]})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Comisarías"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porComisaria).map(([l,o])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:[l," ",l===i.topComisaria&&"🏆"]}),e.jsx("span",{className:"badge bg-secondary mb-2",children:o})]},l))})]})})})]})]})})},Qt=({personas:a,visible:r,setVisible:t})=>{const c=s.useMemo(()=>{const l={},o={};return a.forEach(n=>{const m=n.salida_art_usuario;if(m){l[m]=(l[m]||0)+1;const x=n.comisaria||"Sin comisaría";o[m]||(o[m]={}),o[m][x]=(o[m][x]||0)+1}}),{conteo:l,comisariasPorUsuario:o}},[a]),i=s.useMemo(()=>{const l=Object.entries(c.conteo);return l.length===0?null:l.sort((o,n)=>n[1]-o[1])[0][0]},[c]);return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>t(!1)})}),e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-3",children:[e.jsx("i",{className:"bi bi-person-check-fill text-primary2 me-2"}),"Personal Comisaría Salida"]}),Object.keys(c.conteo).length===0?e.jsx("p",{className:"text-muted",children:"No hay registros de salida."}):e.jsx("ul",{className:"list-group list-group-flush",children:Object.entries(c.conteo).sort((l,o)=>o[1]-l[1]).map(([l,o])=>{let n="";if(l==="sistema")n="Automático DG OJO ⚠️";else{const m=c.comisariasPorUsuario[l];n=Object.entries(m).sort((x,h)=>h[1]-x[1]).map(([x,h])=>`${x} (${h})`).join(", ")}return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"fw-semibold",children:[l===i&&"🏆","  ",l]}),e.jsxs("div",{className:"text-muted small",children:["🏢 ",n]})]}),e.jsx("span",{className:"badge bg-primary2 rounded-pill",children:o})]},l)})})]})})]}):null},Kt=({visible:a,setVisible:r})=>{const[t,c]=s.useState([]);s.useEffect(()=>{(async()=>{const m=(await ae(V(I,"db_art_diez_bis_desactivados"))).docs.map(x=>x.data());c(m)})()},[]);const i=s.useMemo(()=>{const o={};return t.forEach(n=>{Array.isArray(n.personal_entrega)&&n.personal_entrega.forEach(m=>{var g;const x=m.ni,h=((g=m.nombre)==null?void 0:g.split(" ")[0])||m.nombre,N=n.comisaria;o[x]||(o[x]={nombre:h,count:0,comisarias:{}}),o[x].count+=1,N&&(o[x].comisarias[N]=(o[x].comisarias[N]||0)+1)})}),o},[t]);if(!a)return null;const l=Object.entries(i).sort((o,n)=>n[1].count-o[1].count);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>r(!1)})}),e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-3",children:[e.jsx("i",{className:"bi bi-award-fill text-primaryMuiBlue me-2"}),"Personal Entregas Destacadas"]}),l.length===0?e.jsx("p",{className:"text-muted",children:"No hay registros de entrega."}):e.jsx("ul",{className:"list-group list-group-flush",children:l.map(([o,n],m)=>{const{nombre:x,count:h,comisarias:N}=n,g=t.find(d=>(d.personal_entrega||[]).some(f=>`${f.ni}`===o)),v=(g==null?void 0:g.unidad)||"OTROS";let u="",b="bg-primaryMuiBlue";return m===0?(u="👑",b="bg-yellowMui"):m===1?(u="🥈",b="bg-yellowMui"):m===2&&(u="🥉",b="bg-yellowMui"),e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"fw-semibold",children:[u," ",x," - ",o]}),e.jsxs("div",{className:"text-muted small",children:[v.toUpperCase().includes("MOTORIZADA")?"🏍️":"🚓"," ",v]})]}),e.jsxs("div",{className:"text-end",children:[e.jsx("span",{className:`badge ${b} rounded-pill`,children:h}),e.jsxs("div",{className:"mt-2 text-muted small text-start",children:[e.jsx("strong",{children:"📍 Comisarías:"}),e.jsx("ul",{className:"mb-0 ps-3",children:Object.entries(N).map(([d,f])=>e.jsxs("li",{children:[d,": ",f," ",f===1?"vez":"veces"]},d))})]})]})]},`${o}-${m}`)})})]})})]})},ei=({personas:a})=>{const[r,t]=s.useState(null);return s.useEffect(()=>{let c=0,i=0;if(a.forEach(l=>{var m,x;const o=(m=l.fecha_ingreso_validado)==null?void 0:m.toDate(),n=(x=l.salida_art)==null?void 0:x.toDate();if(o&&n&&!isNaN(o)&&!isNaN(n)){const h=n-o;h>=0&&(c+=h,i++)}}),i>0){const l=c/i,o=Math.floor(l/(1e3*60*60)),n=Math.floor(l%(1e3*60*60)/(1e3*60)),m=Math.floor(l%(1e3*60)/1e3);t({horas:o,minutos:n,segundos:m})}else t(null)},[a]),e.jsx("div",{className:"card shadow my-5 border-0",children:e.jsxs("div",{className:"card-body ",children:[e.jsx("h5",{className:"card-title bg-primary 2 p-2 text-white rounded-3",children:"⏱️ Tiempo Promedio entre Ingreso y Salida"}),r?e.jsx("div",{className:" d-flex justify-content-end align-items-end",children:e.jsxs("p",{className:"mb-0 fs-5 me-3 ",children:[e.jsxs("strong",{children:[r.horas,"h ",r.minutos,"m ",r.segundos,"s"]})," ",e.jsx("span",{className:"titilar",children:" ⏳ "})]})}):e.jsx("p",{className:"text-muted mb-0 ",children:"No hay datos válidos para calcular."})]})})},si=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState([]),[o,n]=s.useState(!0),[m,x]=s.useState(""),[h,N]=s.useState(""),[g,v]=s.useState("asc"),[u,b]=s.useState(""),[d,f]=s.useState(""),[S,w]=s.useState(""),[y,_]=s.useState(!0),[p,j]=s.useState(!0),[C,F]=s.useState(!0),E=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotalesRendimiento"},{id:"personalEntregaCard",componente:"PersonalEntregaCard"},{id:"personalSalidaCard",componente:"PersonalSalidaCard"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"card",componente:"CardInfo"},{id:"cardComisaria",componente:"ComisariaCardInfo"},{id:"tablaRendimiento",componente:"TablaDatosRendimiento"}],[k,M]=s.useState(E),[L,B]=s.useState(null);console.log(k);const K=V(I,"db_art_diez_bis_desactivados"),H=async()=>{n(!0);try{const A=(await ae(K)).docs.map(T=>({...T.data(),id:T.id}));r(A),c(A)}catch(ee){console.error("Error al obtener personas: ",ee)}finally{n(!1)}},J=ee=>ee.sort((A,T)=>g==="asc"?A.nombre_apellido.localeCompare(T.nombre_apellido):T.nombre_apellido.localeCompare(A.nombre_apellido)),ie=ee=>{B(ee)},ce=ee=>{ee.preventDefault()},U=ee=>{const A=[...k],T=A.findIndex(le=>le.id===L),se=A.findIndex(le=>le.id===ee),[te]=A.splice(T,1);A.splice(se,0,te),M(A)};return s.useEffect(()=>{H()},[]),s.useEffect(()=>{const ee=a.filter(A=>A.nombre_apellido&&A.nombre_apellido.toLowerCase().includes(m.toLowerCase())).filter(A=>h?A.unidad===h:!0).filter(A=>u?A.comisaria===u:!0).filter(A=>{var le;if(!d&&!S)return!0;const T=(le=A.fecha_ingreso_validado)==null?void 0:le.toDate();if(!T)return!1;const se=d?new Date(d):null,te=S?new Date(S):null;return!(se&&T<se||te&&T>te)});c(J(ee))},[m,h,u,d,S,g,a]),e.jsxs("div",{className:"container-lg mt-0 mt-5 mt-sm-5 mt-md-0 ms-lg-0 ",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Rendimiento Art. 10 Bis"})}),e.jsx("div",{className:"container mb-4",children:e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${y?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>_(!y),children:[e.jsx("i",{className:`bi ${y?"bi-eye-slash":"bi-eye"} me-1`}),y?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${p?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>j(!p),children:[e.jsx("i",{className:`bi ${p?"bi-eye-slash":"bi-eye"} me-1`}),p?"Ocultar Persdonal Salida":"Ver Personal Salida"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${C?"btn-outline-pink":"btn-outline-green"}`,onClick:()=>F(!C),children:[e.jsx("i",{className:`bi ${C?"bi-eye-slash":"bi-eye"} me-1`}),C?"Ocultar Personal Entrada":"Ver Personal Entrada"]})})]})}),e.jsx(ei,{personas:a,visible:C,setVisible:F}),o?e.jsx(re,{}):e.jsx(e.Fragment,{children:k.map(({id:ee,componente:A})=>e.jsxs("div",{draggable:!0,onDragStart:()=>ie(ee),onDragOver:ce,onDrop:()=>U(ee),className:"my-3 ",children:[A==="ResumenTotalesRendimiento"&&e.jsx(Xt,{personas:t,seleccionadas:i,visible:y,setVisible:_}),A==="PersonalEntregaCard"&&e.jsx(Kt,{personas:a,visible:C,setVisible:F}),A==="PersonalSalidaCard"&&e.jsx(Qt,{personas:a,visible:p,setVisible:j})]},ee))})]})},ai=()=>{const[a,r]=s.useState("dashboard"),[t,c]=s.useState(!1),i=()=>{switch(a){case"dashboard":return e.jsx(Mt,{});case"administar":return e.jsx(zt,{});case"exportacion":return e.jsx(Ot,{});case"graficos":return e.jsx(Wt,{});case"comisarias2":return e.jsx(Zt,{});case"rendimiento":return e.jsx(Ht,{});case"rendimientoApp":return e.jsx(si,{});case"desactivados":return e.jsx(Jt,{});case"activados":return e.jsx(Yt,{});default:return e.jsx("p",{children:"Selecciona una opción del menú."})}};return e.jsxs("div",{className:"container-lg py-4 mb-sm-5 mb-md-5 mt-0",children:[e.jsx("div",{className:"titulo-espaciado text-start mb-4",children:e.jsx("h3",{className:"text-secondary fw-semibold",children:"Panel de Control"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"list-group shadow",children:[e.jsx("button",{className:`list-group-item list-group-item-action ${a==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenidos"}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="exportacion"?"active":""}`,onClick:()=>r("exportacion"),children:"Exportación"}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="graficos"?"active":""}`,onClick:()=>r("graficos"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Graficos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-teal rounded-pill",children:"Nuevo"})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="rendimientoApp"?"active":""}`,onClick:()=>r("rendimientoApp"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Rendimiento Art.10 Bis",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"",children:" 🏆 "})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="comisarias2"?"active":""}`,onClick:()=>r("comisarias2"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Comisarias",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-primaryMuiBlue rounded-pill",children:"Administar"})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="activados"?"active":""}`,onClick:()=>r("activados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Art 10 Bis Activos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-secondaryM rounded-pill",children:"Panel"})]})}),e.jsx("button",{className:`list-group-item list-group-item-action ${a==="desactivados"?"active":""}`,onClick:()=>r("desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Art 10 Bis Historicos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-secondaryM rounded-pill",children:"Panel"})]})})]})}),e.jsx("div",{className:"col-md-9",children:i()})]})]})},ti=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Panel de Control Art 10 Bis ",element2:"Cx2",element3:"bi bi-ui-checks"}),e.jsx("div",{className:"container-lg",id:"bodyGallery",children:e.jsx(ai,{})}),e.jsx(he,{}),e.jsx(ve,{})]}),ii=()=>e.jsx("div",{className:"container-lg titulo-espaciado text-end py-2 mb-2 text-capitalize text-secondary fs-3 fw-semibold",children:e.jsx("h5",{children:"Hola"})}),ri=()=>{const a=Le();s.useEffect(()=>{const t=document.getElementById("offcanvasNavbar"),c=()=>{document.body.style.overflow="",document.body.style.paddingRight=""};return t.addEventListener("hide.bs.offcanvas",c),()=>{t.removeEventListener("hide.bs.offcanvas",c)}},[]);const r=t=>{const c=document.getElementById("offcanvasNavbar"),i=bootstrap.Offcanvas.getInstance(c);i&&i.hide(),a(t)};return e.jsx("div",{children:e.jsx("nav",{className:"navbar fixed-top p-1 pt-3 ",children:e.jsxs("div",{className:"container-lg d-flex align-items-center",children:[e.jsx(ne,{className:"navbar-brand",to:"/dashboard",children:e.jsx("img",{src:"/img/logo-login-2024.png",height:"35",width:"110",alt:"Logo",className:"m-1"})}),e.jsxs("span",{className:"d-none d-md-block ms-2",children:["|",e.jsx("span",{className:"fw-semibold",children:" Cx2 "})," ",e.jsx("span",{className:"fw-semibold text-orange",children:" - "})," Modulo de Información"]}),e.jsxs("button",{className:"btn btn-pink ms-auto d-flex align-items-center justify-content-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar","aria-label":"Toggle navigation",children:[e.jsx("i",{className:"bi bi-list me-2"}),"Abrir Menú"]}),e.jsxs("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel",children:[e.jsxs("div",{className:"offcanvas-header d-flex justify-content-center align-items-center",children:[e.jsx("a",{className:"navbar-brand",href:"#",children:e.jsx("img",{src:"/img/logo-login-2024.png",height:"35",width:"110",alt:"Logo"})}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),e.jsx("hr",{className:"color-gradient opacity-50 p-0"}),e.jsx("div",{className:"offcanvas-body",children:e.jsxs("ul",{className:"navbar-nav text-center flex-grow-1 pe-3",children:[e.jsx("li",{className:"nav-item",children:e.jsxs(ne,{className:"nav-link",to:"/dashboard",onClick:()=>r("/dashboard"),children:[e.jsx("i",{className:"bi bi-house me-2"}),"Inicio"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ne,{className:"nav-link position-relative me-2",to:"/notificaciones",onClick:()=>r("/notificaciones"),children:[e.jsx("i",{className:"bi bi-bell me-2"}),"Notificaciones",e.jsx("span",{className:"position-absolute top-1 start-75 translate-middle badge rounded-pill bg-danger ms-3",children:e.jsx(Fe,{})})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ne,{className:"nav-link",to:"/10bis",onClick:()=>r("/bis"),children:[e.jsx("i",{className:"bi bi-arrow-bar-right me-2"}),"Recepción 10 Bis"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ne,{className:"nav-link",to:"/10bisout",onClick:()=>r("/bis"),children:[e.jsx("i",{className:"bi bi-arrow-bar-left me-2"}),"Salida 10 Bis"]})}),e.jsx("li",{className:"nav-item",children:e.jsx(ss,{})}),e.jsxs("li",{className:"nav-item dropdown text-center mt-5",children:[e.jsxs("a",{className:"nav-link dropdown-toggle rounded-pill p-2 mb-3 fw-semibold border border-3 border-white bg-pink text-white shadow-sm",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx("i",{className:"bi bi-tools me-2"}),"Herramientas / Auditoría"]}),e.jsxs("ul",{className:"dropdown-menu  shadow ",children:[e.jsx("li",{className:" d-flex justify-content-center  align-items-center",children:e.jsxs(ne,{className:"dropdown-item text-center fw-semibold text-secondary",to:"/panelcontrol",onClick:()=>r("/panelcontrol"),children:[e.jsx("i",{className:"bi bi-speedometer2 me-2"})," Sistema",e.jsx("span",{className:"badge bg-indigo rounded-pill ms-3",children:"Panel de Control"})]})}),e.jsx("li",{className:" d-flex justify-content-center  align-items-center",children:e.jsxs(ne,{className:"dropdown-item text-center fw-semibold text-secondary",to:"/panelcontrol10bis",onClick:()=>r("/panelcontrol10bis"),children:[e.jsx("i",{className:"bi bi-speedometer2 me-2"})," Sistema Art 10 Bis",e.jsx("span",{className:"badge bg-indigo rounded-pill ms-3",children:"Panel de Control"})]})}),e.jsx("li",{className:" d-flex justify-content-center  align-items-center",children:e.jsxs(ne,{className:"nav-link",to:"/formularios",onClick:()=>r("/formularios"),children:[e.jsx("i",{className:"bi bi-pencil-square me-2"}),"Formulario",e.jsx("span",{className:"badge bg-greenUi rounded-pill ms-3"})]})})]})]})]})}),e.jsx(Ms,{})]})]})})})},li=({show:a,onClose:r,datos:t})=>{const[c,i]=s.useState(!1),[l,o]=s.useState(!1);return s.useEffect(()=>{if(location.pathname==="/dashboard"){const n=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}}},[r]),a?e.jsxs("div",{className:"modal bg-dark fade show",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-blueMui",children:[e.jsx("h5",{className:"modal-title text-white fw-semibold",id:"captureDetailsModalLabel",children:"Detalles Persona Capturada 👮"}),e.jsx("button",{type:"button",className:"btn-close",onClick:r})]}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3 mt-3 d-flex align-items-center",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>o(!0),children:[e.jsx("img",{src:t.base64||"https://via.placeholder.com/40",alt:(t==null?void 0:t.nombre_apellido)||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm mt-4",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:a?"Capturado":"Editar"})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-blueMui border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center",value:t.nombre_apellido,disabled:!0}),e.jsx("label",{className:"badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"number",className:"form-control text-center",value:t.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})})})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end",children:["Datos de la Captura ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-blueMui border-1 opacity-75"})]}),t.capturas_informacion_estados&&t.capturas_informacion_estados.length>0?e.jsxs(e.Fragment,{children:[t.capturas_informacion_estados.slice().reverse().slice(0,c?t.capturas_informacion_estados.length:1).map((n,m)=>e.jsxs("div",{children:[n.captura_fecha?e.jsxs("p",{className:"bg-primary text-white rounded-pill",children:[e.jsx("span",{className:"fw-semibold mx-3",children:n.captura_autor}),n.captura_fecha]}):e.jsxs("p",{className:"bg-secondaryMuiRed text-white rounded-pill",children:[e.jsx("span",{className:"fw-semibold mx-3",children:"Captura Nuevamente Activa"}),n.captura_quita_fecha]}),n.captura_fecha&&e.jsxs("p",{children:["Relato: ",e.jsx("span",{className:"fw-semibold",children:n.captura_descripcion?n.captura_descripcion:"Sin relato"})]})]},m)),t.capturas_informacion_estados.length>1&&e.jsx("button",{className:"btn btn-link mt-2",onClick:()=>i(!c),children:c?"Ver menos":"Ver historico"})]}):e.jsx("p",{children:"No hay detalles de captura disponibles."})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),l&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark ",style:{display:"block"},onClick:()=>o(!1),children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-white position-absolute top-0 end-0 m-3",onClick:()=>o(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/40",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg"})]})})})]}):null},ni=({show:a,onClose:r,datos:t})=>{s.useState(!1);const[c,i]=s.useState(!1);return s.useEffect(()=>{if(location.pathname==="/dashboard"){const l=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",l),()=>{window.removeEventListener("popstate",l)}}},[r]),a?e.jsxs("div",{className:"modal bg-dark fade show",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-body",children:e.jsx("button",{type:"button",className:"btn-close",onClick:r})}),e.jsxs("div",{className:"modal-body text-center ",children:[e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>i(!0),children:[e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>i(!0),children:[e.jsx("div",{className:"fs-5 position-absolute top-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-top small",style:{opacity:.8},children:t.documento}),e.jsx("img",{src:t.base64&&t.base64.trim()!==""&&t.base64.trim()!=="null"?t.base64:defaultSvgUrl,className:"img-fluid mb-3 shadow",alt:t.nombre_apellido||"Imagen no disponible",style:{width:"500px",height:"auto"},loading:"lazy"})]}),e.jsx("div",{className:"fs-4 position-absolute  bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:t.nombre_apellido})]}),e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4",children:["Datos de la Solicitud ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-blueMui border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Motivo Captura "})}),t.motivo_captura&&t.motivo_captura.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.motivo_captura}):null,(!t.motivo_captura||t.motivo_captura.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-primary mx-4",onClick:()=>alert("Solicitud enviada. La información que requirió se le informará a los cargadores de captura para su carga. 🏤"),children:["Solicitar Información ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primaryMuiBlue text-white me-2",children:"Informacion Adicional"})}),t.descripcion_fisica&&t.descripcion_fisica.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.descripcion_fisica}):null,(!t.descripcion_fisica||t.descripcion_fisica.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-primary mx-4",onClick:()=>alert("Solicitud enviada. La información que requirió se le informará a los cargadores de captura para su carga. 🏤"),children:["Solicitar Información ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mt-4",children:["    ",e.jsx("hr",{className:"border border-blueMui border-1 opacity-75"}),t.entidad&&t.entidad.trim()!==""&&e.jsxs("span",{className:"badge text-bg-primary text-white  my-1 text-capitalize mx-3 p-2",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Solicita -  ",t.entidad]}),t.numero_contacto&&t.numero_contacto.trim()!==""&&e.jsxs("span",{className:"badge text-bg-primary text-white my-1 text-capitalize mx-3 p-2",children:[e.jsx("i",{className:"bi bi-telephone-forward-fill me-2"}),"Contactar  ",t.numero_contacto]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),c&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark ",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>i(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered ",onClick:l=>l.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center ",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>i(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/40",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"200vw",maxHeight:"200vh",objectFit:"contain"}})]})})})]}):null},oi=({setGridView:a,gridView:r,sortOrder:t,setSortOrder:c,sortBy:i,setSortBy:l,searchTerm:o,setSearchTerm:n,priorityFilter:m,setPriorityFilter:x,currentPage:h,handlePriorityChange:N,notificationCount:g=0})=>{const[v,u]=s.useState(!1),b=()=>{x([]),n(""),u(!1)};return e.jsxs("div",{className:"my-0",children:[e.jsx("div",{className:"my-2 p-2  d-lg-none d-flex flex-wrap justify-content-evenly  w-100 gap-2",children:e.jsxs("div",{className:"container-lg  text-center py-2 mb-2 text-capitalize text-secondary fs-3 fw-semibold col-9 col-sm-9 col-md-6 d-block d-lg-none ",children:[e.jsxs("button",{className:"btn Gradiante25 text-white border border-white border-5 rounded-pill w-100 mb-4 shadow-sm d-flex align-items-center position-relative ",type:"button","data-bs-toggle":"collapse","data-bs-target":"#responsiveDropdown","aria-expanded":"false","aria-controls":"responsiveDropdown",children:[e.jsx("span",{className:"bg-light text-pink d-flex justify-content-center align-items-center rounded-circle shadow-lg position-absolute top-50 translate-middle-y start-0 ms-3 border border-5",style:{width:"60px",height:"60px"},children:e.jsx("i",{className:"bi bi-list-check fs-3"})}),e.jsxs("span",{className:"flex-grow-1 text-center fw-semibold",children:[e.jsx("span",{className:"d-none d-md-inline",children:"Opciones de Filtros"}),e.jsx("span",{className:"d-inline d-md-none ms-5",children:" Orden Galeria"})]})]}),e.jsx("div",{className:"collapse",id:"responsiveDropdown",children:e.jsxs("div",{className:"row text-center",children:[e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("i",{className:"bi bi-sort-down me-2 text-pink"}),e.jsx("label",{htmlFor:"sortBySelect",className:"form-label text-secondary fs-6",children:"Ordenar por:"}),e.jsxs("select",{id:"sortBySelect",className:"form-select text-center",value:i,onChange:d=>l(d.target.value),disabled:h!==1,children:[e.jsx("option",{value:"fecha",children:"Fecha"}),e.jsx("option",{value:"nombreApellido",children:"Nombre"})]})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{htmlFor:"sortOrderSelect",className:"form-label text-secondary fs-6",children:"Orden:"}),e.jsx("select",{id:"sortOrderSelect",className:"form-select text-center",value:t,onChange:d=>c(d.target.value),disabled:h!==1,children:i==="fecha"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"Antiguo - Reciente"}),e.jsx("option",{value:"desc",children:"Reciente - Antiguo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"A - Z"}),e.jsx("option",{value:"desc",children:"Z - A"})]})})]})]})}),e.jsx("div",{className:"my-4",children:e.jsxs("div",{className:"input-group shadow-sm rounded-pill overflow-hidden",children:[e.jsx("span",{className:"input-group-text  border-0",children:e.jsx("i",{className:"bi bi-search textG fs-5"})}),e.jsx("input",{type:"text",className:"form-control border-0 text-center",placeholder:"Buscar ...",value:o,onChange:d=>n(d.target.value),"aria-label":"Buscar por nombre"}),o&&e.jsx("button",{className:"btn textG border-0",type:"button",onClick:()=>n(""),title:"Limpiar búsqueda",children:e.jsx("i",{className:"bi bi-x-circle fs-5"})})]})})]})}),!v&&e.jsxs("div",{className:"d-flex justify-content-end  mt-3",children:[e.jsx(ne,{to:"/notificaciones",className:"nav-link d-flex align-items-center",children:e.jsxs("button",{type:"button",className:"btn btn-primary rounded-circle text-white shadow-sm position-relative mx-2 d-block d-lg-none",children:[e.jsx("i",{className:"bi bi-bell "}),e.jsxs("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:[e.jsx(Fe,{notificationCount:g}),e.jsx("span",{className:"visually-hidden",children:"notificaciones"})]})]})}),e.jsx("button",{type:"button",onClick:()=>a(!0),className:"btn btn-primaryM rounded-circle text-white shadow-sm mx-2",children:e.jsx("i",{className:`bi bi-grid-3x3-gap-fill ${r?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn btn-blue rounded-circle text-white shadow-sm mx-2",children:e.jsx("i",{className:`bi bi-list ${r?"":"titilar"}`})}),e.jsxs("button",{className:"btn indigoG text-white btn-sm ",onClick:()=>u(!0),children:[e.jsx("i",{className:"bi bi-alphabet-uppercase"})," Mostrar Filtros"]})]}),v&&e.jsxs("div",{className:"card shadow",children:[e.jsxs("div",{className:"card-header fw-semibold Gradiante25 text-white d-flex justify-content-between align-items-center",children:[e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-sort-alpha-down mx-1"})," Filtros de Galería"]}),e.jsx("i",{className:"bi bi-x-lg cursor-pointer",onClick:b,style:{cursor:"pointer"}})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-12 col-md-8 mt-2 d-none d-lg-block",children:e.jsxs("div",{className:"input-group shadow-sm",children:[e.jsx("span",{className:"input-group-text",children:o?e.jsx("div",{className:"spinner-grow text-blue",role:"status",style:{width:"1rem",height:"1rem"},children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):e.jsx("i",{className:"bi bi-search text-blue"})}),e.jsx("input",{type:"text",className:"form-control text-center",placeholder:"Buscar por nombre",value:o,onChange:d=>n(d.target.value)}),o&&e.jsx("button",{className:"btn text-redUi1",onClick:()=>n(""),children:"✖"})]})}),e.jsx("div",{className:"col-12 col-md-2 my-md-0 mt-3 d-none d-lg-block",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm text-center",value:i,onChange:d=>l(d.target.value),children:[e.jsx("option",{value:"fecha",children:"Fecha"}),e.jsx("option",{value:"nombreApellido",children:"Nombre"})]}),e.jsx("label",{className:"text-primary p-2",children:"Filtrar por"})]})}),e.jsx("div",{className:"col-12 col-md-2 my-md-0 my-3 d-none d-lg-block",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("select",{className:"form-select shadow-sm text-center",value:t,onChange:d=>c(d.target.value),children:i==="fecha"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"Antiguo - Reciente"}),e.jsx("option",{value:"desc",children:"Reciente - Antiguo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"A - Z"}),e.jsx("option",{value:"desc",children:"Z - A"})]})}),e.jsx("label",{className:"text-primary p-2",children:"Ordenar Prioridad"})]})})]}),e.jsx("div",{className:"border shadow-sm rounded-4 pt-4 mb-4",children:e.jsxs("div",{className:"d-flex flex-wrap justify-content-center mb-4",children:[["No Prioritarias","Paradero","Evadidos","Prioritarias"].map((d,f)=>e.jsxs("div",{className:"form-check form-check-inline mb-2",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",value:f+1,checked:m.includes((f+1).toString()),onChange:S=>N(S),disabled:h!==1}),e.jsx("label",{className:"form-check-label",children:d})]},f)),m.length>0&&e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white shadow-sm mx-2 ",onClick:()=>x([]),children:e.jsx("i",{className:"bi bi-trash"})}),e.jsx("button",{type:"button",onClick:()=>a(!0),className:"btn btn-primary rounded-circle text-white shadow-sm mx-2",children:e.jsx("i",{className:`bi bi-grid-3x3-gap-fill ${r?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn btn-blue rounded-circle text-white shadow-sm mx-2",children:e.jsx("i",{className:`bi bi-list ${r?"":"titilar"}`})})]})})]})]})]})},Ye=15;function hs(a){const[r,t,c]=a.split("/").map(Number),i=2e3+c;return new Date(i,t-1,r)}const Js=()=>{const[a,r]=s.useState(!1),[t,c]=s.useState(!1),[i,l]=s.useState(!1),[o,n]=s.useState([]),[m,x]=s.useState(1),[h,N]=s.useState(0),[g,v]=s.useState(null),[u,b]=s.useState(null),[d,f]=s.useState(null),[S,w]=s.useState(null),[y,_]=s.useState(!0),[p,j]=s.useState(!1),[C,F]=s.useState(null),[E,k]=s.useState("fecha"),[M,L]=s.useState("desc"),[B,K]=s.useState(""),[H,J]=s.useState(!0),[ie,ce]=s.useState(""),[U,ee]=s.useState(!0),A=async()=>{try{_(!0);const D=await ae(V(I,"db_personas")),z=[];D.forEach(X=>{const Q={id:X.id,...X.data()};z.push(Q)}),n(z),N(Math.ceil(z.length/Ye))}catch(D){console.error("Error obteniendo documentos: ",D),F("No se pudieron cargar los documentos.")}finally{_(!1)}};s.useEffect(()=>{A()},[]);const T=D=>{const z=D.target.value;ce(X=>X.includes(z)?X.filter(Q=>Q!==z):[...X,z])},se=s.useMemo(()=>o.filter(D=>{var Q;const z=(Q=D.nombre_apellido)==null?void 0:Q.toLowerCase().includes(B.toLowerCase()),X=ie.length===0||ie.includes(String(D.prioridad));return z&&X}),[o,B,ie]),te=s.useMemo(()=>se.sort((D,z)=>{if(D.prioridad===3&&z.prioridad!==3)return-1;if(z.prioridad===3&&D.prioridad!==3)return 1;if(D.prioridad===4&&z.prioridad!==4)return-1;if(z.prioridad===4&&D.prioridad!==4)return 1;if(E==="fecha"){const X=hs(D.date)||0,Q=hs(z.date)||0;return M==="asc"?X-Q:Q-X}else return M==="asc"?D.nombre_apellido.localeCompare(z.nombre_apellido):z.nombre_apellido.localeCompare(D.nombre_apellido)}),[se,E,M]),le=(m-1)*Ye,xe=te.slice(le,le+Ye),$=()=>{m<h&&(j(!0),x(D=>D+1),setTimeout(()=>j(!1),500))},R=()=>{m>1&&(j(!0),x(D=>D-1),setTimeout(()=>j(!1),500))},Y=D=>{w(!0),b(D)},q=()=>{v(null),w(null)},G=D=>{f(!0),b(D)},P=()=>f(!1);return e.jsxs("div",{className:"container-lg  ",children:[y&&e.jsx(re,{}),C&&e.jsx("div",{className:"alert alert-danger",children:C}),e.jsx(oi,{setGridView:J,gridView:H,sortOrder:M,sortBy:E,setSortOrder:L,setSortBy:k,searchTerm:B,setSearchTerm:K,showFilters:U,priorityFilter:ie,setPriorityFilter:ce,currentPage:m,handlePriorityChange:T}),p?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(re,{})}):e.jsx("div",{className:H?"row mt-5":"d-flex flex-column align-items-center mt-5",children:xe.map(D=>e.jsx("div",{className:H?"col-6 col-sm-6 col-md-4 mb-4":" col-12 col-sm-6 col-md-6 mb-4",children:e.jsxs("div",{className:"card py-4 bg-transparent border-0 position-relative",children:[D.alerta&&!D.captura&&e.jsx("div",{onClick:()=>c(!t),children:t?e.jsx("div",{className:"position-absolute top-1  start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-exclamation-triangle-fill me-2 text-white titilar fs-5 shadow-sm "}),"Evadido ",D.date," "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-redUi1   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-exclamation-triangle-fill fs-5 mx-1 text-white titilar "})})}),"     ",D.paradero&&e.jsx("div",{onClick:()=>r(!a),children:a?e.jsx("div",{className:"position-absolute top-1 bg-blueMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-search fs-5 mx-2 text-white  "}),"Paradero "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-blueMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-search fs-5 mx-1 text-white "})})}),"           ",D.prioridad===4&&e.jsx("div",{onClick:()=>l(!i),children:i?e.jsx("div",{className:"position-absolute top-1 bg-yellowMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:"bi bi-star-fill fs-5 mx-2 text-white "}),"Prioritaria"]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-yellowMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-star-fill fs-5 mx-1 text-white "})})}),"       ",D.captura&&e.jsxs("div",{className:"captura-cinta",style:{maxWidth:"100%"},onClick:()=>G(D),children:[e.jsx("span",{children:"Capturado"}),e.jsx("span",{children:e.jsx("button",{className:"btn p-0 text-white ms-2 d-none d-md-inline",onClick:z=>{z.stopPropagation(),G(D)},children:"Ver detalles"})})]}),e.jsx("img",{src:D.base64&&D.base64.trim()!==""&&D.base64.trim()!=="null"?D.base64:be,className:`card-img-top img-fluid ${D.captura?"grayscale":""}`,alt:D.nombre_apellido||"Imagen no disponible",loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"cover"},onClick:()=>Y(D)}),e.jsx("button",{className:" shadow btn btn-outline mt-2 col-12 fw-semibold text-capitalize rounded",onClick:()=>Y(D),"aria-label":`Ver detalles de ${D.nombre_apellido||"NN"}`,children:H?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"d-none d-sm-inline",children:["  ",D.nombre_apellido," "]}),e.jsx("span",{className:"d-inline-block d-sm-none text-truncate",style:{width:"5rem",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:D.nombre_apellido})]}):D.nombre_apellido||"NN"})]})},D.id))}),e.jsx(ni,{show:S,onClose:q,datos:u}),e.jsx(li,{show:d,onClose:P,datos:u}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4",children:[m>1&&e.jsx("button",{className:"btn text-indigoMui bg-indigoMui2",onClick:R,children:e.jsx("i",{className:"bi bi-arrow-left fw-semibold fs-3 titilar"})}),e.jsxs("span",{className:"text-muted mx-3",children:["Página ",m," de ",h]}),m<h&&e.jsx("button",{className:"btn btn-indigoMui text-white rounded-pill shadow-sm",onClick:$,children:e.jsx("i",{className:"bi bi-arrow-right fw-semibold fs-3 titilar"})})]})]})},ci=()=>(s.useEffect(()=>(document.body.classList.add("degradado-body"),()=>{document.body.classList.remove("degradado-body")}),[]),e.jsxs(e.Fragment,{children:[e.jsx(ri,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Inicio | Menu Principal",element2:"Cx2",element3:"bi bi-ui-checks"}),e.jsx(Js,{}),e.jsx(ii,{}),e.jsx("div",{className:"container-lg",id:"bodyGallery"}),e.jsx(ve,{})]})),di=({notif:a})=>e.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center my-2 py-3 shadow",children:[e.jsxs("div",{children:[e.jsx("i",{className:"bi bi-person-arms-up me-3 text-primary"}),e.jsx("strong",{children:a.nombre_apellido||"Nombre desconocido"}),e.jsxs("span",{children:[" - ",a.dni||"DNI no disponible"]})]}),e.jsx("span",{className:"badge bg-primary",children:a.comisaria||"Sin fecha"})]}),mi=()=>{const[a,r]=s.useState([]),[t,c]=s.useState([]),[i,l]=s.useState(""),[o,n]=s.useState(!1),[m,x]=s.useState(!1),h=async()=>{try{n(!0);const g=we(V(I,"db_art_diez_bis"),De("visualidad","==",!0)),u=(await ae(g)).docs.map(b=>({id:b.id,...b.data()}));r(u),c(u)}catch(g){console.error("Error al obtener las notificaciones: ",g)}finally{n(!1)}};s.useEffect(()=>{h()},[]),s.useEffect(()=>{const g=a.filter(v=>v.nombre_apellido&&v.nombre_apellido.toLowerCase().includes(i.toLowerCase())||v.dni&&v.dni.toString().includes(i));c(g)},[i,a]);const N=()=>{l("")};return e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsxs("button",{className:`btn btn-${m?"secondary":"primary"}`,onClick:()=>x(g=>!g),children:[m?"Ocultar búsqueda":"Realizar búsqueda",e.jsx("i",{className:`ms-2 bi ${m?"bi-x-circle":"bi-search"}`})]})}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group mb-4",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar por DNI o nombre...",value:i,onChange:g=>l(g.target.value)}),i&&e.jsx("button",{className:"btn btn-outline-pink bg-danger",onClick:N,"aria-label":"Limpiar búsqueda",children:e.jsx("i",{className:"bi bi-trash3-fill text-white"})})]}),o?e.jsx("div",{className:"text-center my-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsx("ul",{className:"list-group",children:t.length>0?t.map(g=>e.jsx(di,{notif:g},g.id)):e.jsx("li",{className:"list-group-item text-center text-danger",children:i?`No se encontraron resultados para "${i}"`:"No hay notificaciones disponibles"})})]})]})},ui=()=>{const[a,r]=s.useState({personalEntrega:[],salidasArtUsuarioMap:[]});s.useEffect(()=>{(async()=>{const l=(await ae(V(I,"db_art_diez_bis_desactivados"))).docs.map(o=>o.data());t(l)})()},[]);const t=c=>{const i={},l={};c.forEach(m=>{m.personal_entrega.forEach(x=>{const h=x.nombre.split(" ")[0],N=`${x.ni} - ${h}`;i[N]=(i[N]||0)+1}),m.salida_art_usuario&&(l[m.salida_art_usuario]=(l[m.salida_art_usuario]||0)+1)});const o=Object.entries(i).map(([m,x])=>({key:m,value:x})).sort((m,x)=>x.value-m.value),n=Object.entries(l).map(([m,x])=>({usuario:m,cantidad:x})).sort((m,x)=>x.cantidad-m.cantidad);r({personalEntrega:o,salidasArtUsuarioMap:n})};return e.jsx("div",{className:"container",children:e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento en Personal Entrega ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Posición"}),e.jsx("th",{scope:"col",children:"Personal"}),e.jsx("th",{scope:"col",children:"Art 10 "}),e.jsx("th",{scope:"col",children:"Distinción"})]})}),e.jsx("tbody",{children:a.personalEntrega.length>0?a.personalEntrega.map(({key:c,value:i},l)=>e.jsxs("tr",{className:l===0?"table-warning":"",children:[e.jsx("td",{children:l===0?"👑 1":l===1?"🥈 2":l===2?"🥉 3":l+1}),e.jsx("td",{children:c}),e.jsxs("td",{children:[i," "]}),e.jsx("td",{children:l===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):l===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):l===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},c)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay datos disponibles"})})})]})]})})})},hi=({showModal:a,closeModal:r})=>{const[t,c]=s.useState(!1),[i,l]=s.useState(!1),o=Pe(),n=()=>{c(!1),l(!1),r()},m=()=>{c(!t)},x=()=>{l(!i)};return s.useEffect(()=>{if(o.pathname==="/dashboard"){const h=N=>{n()};return window.history.pushState(null,document.title),window.addEventListener("popstate",h),()=>{window.removeEventListener("popstate",h)}}},[]),a?e.jsx("div",{className:`modal bg-dark ${a?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:a?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{className:"modal-title text-white ",id:"modalTitle",children:"Herramientas Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:n})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("button",{className:`btn btn-${t?"secondary":"purple"}`,onClick:m,children:[t?"Ocultar Formulario":"Ingresar Nuevo Art. 10 Bis",e.jsx("i",{className:`ms-2 bi ${t?"bi-x-circle":"bi-person-add"}`})]})}),t&&e.jsx("div",{className:"container my-4",children:e.jsx(Bs,{showModal:a,closeModal:n})}),e.jsxs("div",{className:"container",children:[e.jsx("h4",{className:"text-center my-2",children:"Información de Plazas"}),e.jsx(Us,{})]}),e.jsx("div",{className:"container my-4",children:e.jsx(mi,{})}),e.jsx("div",{className:"text-center my-4",children:e.jsx("button",{className:"btn btn-secondaryM text-white",onClick:x,children:i?"Ocultar Rendimiento":"Ver Rendimiento"})}),i&&e.jsx("div",{className:"container my-4",children:e.jsx(ui,{})})]})]})})}):null},xi=()=>{const[a,r]=s.useState(!1),t=()=>r(!1);return e.jsxs("div",{children:[" ",e.jsx(hi,{showModal:a,closeModal:t}),e.jsx("div",{className:"container-lg  text-center py-2 text-capitalize text-secondary fs-3 fw-semibold col-9 col-sm-9 px-4 col-md-6 d-block d-lg-none ",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("button",{className:"btn btn-primary border border-white border-5 rounded-pill w-100  shadow-sm d-flex justify-content-center align-items-center shadow ",type:"button",onClick:()=>r(!0),children:e.jsxs("span",{className:"flex-grow-1 text-center fw-semibold",children:[e.jsx("span",{className:"d-none d-md-inline",children:"Herramientas 10 Bis"}),e.jsx("span",{className:"d-inline d-md-none me-5",children:"Art. 10 Bis"})]})}),e.jsx("span",{className:"bg-light text-primary d-flex justify-content-center align-items-center rounded-circle shadow-lg position-absolute top-50 translate-middle-y end-0 me-3 border border-5",style:{width:"60px",height:"60px"},children:e.jsx("strong",{children:e.jsx("i",{className:"bi bi-shield-lock fs-3"})})})]})})]})},bi=()=>{const[a,r]=s.useState(null),[t,c]=s.useState(!1);s.useEffect(()=>{const l=o=>{o.preventDefault(),r(o),c(!0),console.log("Evento beforeinstallprompt capturado.")};return window.addEventListener("beforeinstallprompt",l),()=>{window.removeEventListener("beforeinstallprompt",l)}},[]);const i=async()=>{a&&(a.prompt(),(await a.userChoice).outcome==="accepted"?console.log("El usuario aceptó la instalación."):console.log("El usuario rechazó la instalación."),r(null),c(!1))};return e.jsx(e.Fragment,{children:t&&e.jsxs("div",{className:"container-lg  text-center py-2  text-capitalize text-secondary fs-3 fw-semibold col-9 col-sm-9 px-4 col-md-6 d-block d-lg-none",children:["  ",e.jsxs("button",{className:"btn btn-teal text-white border border-white border-5 rounded-pill w-100 mb-4 shadow-sm d-flex align-items-center position-relative ",type:"button","data-bs-toggle":"collapse","data-bs-target":"#responsiveDropdown","aria-expanded":"false","aria-controls":"responsiveDropdown",onClick:i,children:[e.jsx("span",{className:"bg-light text-teal d-flex justify-content-center align-items-center rounded-circle shadow-lg position-absolute top-50 translate-middle-y start-0 ms-3 border border-5",style:{width:"60px",height:"60px"},children:e.jsx("i",{className:"bi bi-android2 fs-3"})}),e.jsxs("span",{className:"flex-grow-1 text-center fw-semibold",children:[e.jsx("span",{className:"d-none d-md-inline",children:"Instalar App"}),e.jsx("span",{className:"d-inline d-md-none ms-5",children:"Instalar App"})]})]})," "]})})},pi=()=>e.jsxs(e.Fragment,{children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(Ne,{element:"Incio | Menu Principal",element2:"Cx2",element3:"bi bi-ui-checks "}),e.jsx(bi,{}),e.jsx(xi,{}),e.jsx(Js,{}),e.jsx("div",{className:"container-lg",id:"bodyGallery"}),e.jsx(he,{}),e.jsx(ve,{})]}),ji=()=>e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"w-75 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("h1",{className:"display-4 fw-bold mt-3",children:"Art. 10 BIS"}),e.jsx("p",{className:"lead my-3",children:"Administra todas las Funciones Referentes al Artículo"}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsxs("div",{className:"text-center mx-2",children:[e.jsx(ne,{to:"/nuevo",className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})}),e.jsx("div",{className:"mt-1 small",children:"Nuevo"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx(ne,{to:"/validar",className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",children:e.jsx("i",{className:"bi bi-box-arrow-in-right fs-5"})}),e.jsx("div",{className:"mt-1 small",children:"Validar"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx(ne,{to:"/salida",className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",children:e.jsx("i",{className:"bi bi-box-arrow-left fs-5"})}),e.jsx("div",{className:"mt-1 small",children:"Salida"})]})]})]})})}),gi=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center ",children:e.jsx("div",{className:"w-75 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("h1",{className:"display-4 fw-bold ",children:"Bienvenido a CX2 Santa Fe"}),e.jsx("p",{className:"lead my-3  fs-5",children:"Descubrí todo lo que nuestro sistema tiene para ofrecer, ¡explorá nuestras funcionalidades y novedades!"}),e.jsx(ne,{to:"/galeriadev2",className:"btn btn-outline-light mt-3",children:"Ver Galería"})]})})})}),Te=({data1:a,data2:r,data3:t})=>{const c=a||"© 2025 Tics, Inc",i=r||"Cx2",l=t||"Policía de Santa Fe";return e.jsx("div",{className:"container-lg text-center mt-5",children:e.jsxs("footer",{className:"d-flex flex-wrap justify-content-between align-items-center pt-4 my-4 border-top ",children:[e.jsx("p",{className:"col-md-4 mb-0 text-white",children:c}),e.jsx("a",{href:"/",className:"col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none d-none d-md-block","aria-label":"Inicio",children:e.jsx("img",{className:"opacity-50",src:"/img/Escudo Pol SF Color Original_BN.png",width:"35",height:"32",alt:"Escudo Policía Santa Fe"})}),e.jsx("ul",{className:"nav col-md-4 justify-content-center",children:e.jsxs("li",{className:"nav-item",children:[e.jsx("strong",{children:i})," / ",e.jsx("strong",{children:l})," "]})})]})})};Te.propTypes={data1:pe.string,data2:pe.string,data3:pe.string};const fi=()=>{const[a,r]=s.useState(null),[t,c]=s.useState(!1),[i,l]=s.useState(!1);s.useEffect(()=>{const n=m=>{m.preventDefault(),r(m),c(!0)};return window.matchMedia("(display-mode: standalone)").matches&&l(!0),window.addEventListener("beforeinstallprompt",n),()=>{window.removeEventListener("beforeinstallprompt",n)}},[]);const o=async()=>{a&&(a.prompt(),(await a.userChoice).outcome==="accepted"?console.log("El usuario aceptó la instalación."):console.log("El usuario rechazó la instalación."),r(null),c(!1))};return e.jsx(e.Fragment,{children:t&&e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center ",children:e.jsx("div",{className:"w-75 text-white ",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg border-white border",children:[e.jsx("h2",{className:"fs-4 fw-semibold mb-3",children:i?"¡PWA ya instalada!":"¿Querés instalar la app?"}),e.jsx("p",{className:"lead fs-6 ",children:i?"Ya tenés la app instalada. ¡Gracias por usarla!":"Guardá CX2 Santa Fe en tu dispositivo para un acceso más rápido y cómodo."}),!i&&e.jsxs("button",{className:"btn btn-outline-light px-4 py-2 fs-5",onClick:o,children:[e.jsx("i",{className:"bi bi-android2 me-2"})," Instalar App"]})]})})})})},Ni=()=>{const[a,r]=s.useState(0);return s.useEffect(()=>{const t=document.querySelector(".navbar");if(t){const c=t.offsetHeight;r(c)}},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-vh-100 d-flex flex-column justify-content-center align-items-center text-white gap-5",style:{paddingTop:`${a}px`},children:[e.jsx(ji,{}),e.jsx(gi,{}),e.jsx(fi,{}),e.jsx(Te,{})]})})},xs=()=>{const{currentUser:a}=s.useContext(Ae),r=Le(),[t,c]=s.useState(!1),i=async()=>{try{await Qe(We),r("/")}catch(o){console.error("Error al cerrar sesión:",o)}},l=()=>{c(!1)};return a&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o=>{o.stopPropagation(),c(!0)},className:"btn text-secondaryMuiRed fw-semibold",children:[e.jsx("i",{className:"bi bi-box-arrow-right me-2 text-danger "})," Cerrar Sesión"]}),e.jsx("div",{className:`modal bg-dark fade ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:"-1","aria-labelledby":"logoutModalLabel","aria-hidden":!t,children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content   border border-white",children:[e.jsxs("div",{className:"modal-header bg-gradiante2 ",children:[e.jsx("h5",{className:"modal-title text-white  ",id:"logoutModalLabel",children:"Confirmar Cierre de Sesión"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:l,"aria-label":"Close"})]}),e.jsx("div",{className:"modal-body text-center  fw-semibold text-uppercase lh-lg",children:"¿Está seguro de que desea cerrar sesión?"}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-purpleUi ",onClick:()=>{i(),l()},children:"Cerrar Sesión"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Je=()=>{var c;const r=(()=>{const i=localStorage.getItem("user");return i?JSON.parse(i):null})(),t=((c=r==null?void 0:r.email)==null?void 0:c.split("@")[0])||"Usuario Sin Registro";return e.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-transparent position-absolute top-0 w-100 z-3",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx(ne,{className:"navbar-brand fw-bold text-white",to:"/inicio",children:e.jsx("img",{src:"/img/marca-fondo-blanco-2024.png",height:"30",width:"100",alt:"Logo",className:"m-1"})}),e.jsx("div",{className:"position-relative",children:e.jsxs("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:[e.jsx("span",{className:"navbar-toggler-icon"}),e.jsx("span",{className:"position-absolute top-0 start-90 mt-1 translate-middle badge rounded-pill bg-danger",children:e.jsx(Fe,{})})]})}),e.jsxs("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[e.jsxs("ul",{className:"navbar-nav ms-auto d-none d-md-flex flex-row flex-wrap justify-content-end w-100",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("div",{className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-person-fill me-2"}),t]})}),e.jsx("li",{className:"nav-item",children:e.jsx(Se,{to:"/inicio",className:"nav-link text-white",children:e.jsx("i",{className:"bi bi-house-door-fill me-2"})})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/notificacionesDev2",className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-bell-fill me-2"}),e.jsx("span",{className:"position-absolute top-1 start-75 translate-middle badge rounded-pill bg-danger",children:e.jsx(Fe,{})})]})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link dropdown-toggle text-white",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx("i",{className:"bi bi-grid-fill me-2 ms-2"}),e.jsx("span",{className:"d-none d-md-inline",children:"Más"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end text-center mb-3 shadow border-0",children:[e.jsxs(Se,{to:"/FormularioPageDev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario"})]}),e.jsxs(Se,{to:"/10bis",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-file-earmark-lock2-fill me-2 textG2"}),e.jsx("span",{children:"10 bis"})]}),e.jsxs(Se,{to:"/capturas",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-camera-fill me-2 textG2"}),e.jsx("span",{children:"Capturas"})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider bg-indigo "})}),e.jsx("li",{children:e.jsx(xs,{})})]})]})]}),e.jsxs("ul",{className:"navbar-nav ms-auto d-flex d-md-none flex-row flex-wrap justify-content-between w-100",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("div",{className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-person-fill me-2"}),t]})}),e.jsx("li",{className:"nav-item",children:e.jsx(Se,{to:"/inicio",className:"nav-link text-white",children:e.jsx("i",{className:"bi bi-house-door-fill me-2"})})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/notificacionesDev2",className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-bell-fill me-2"}),e.jsx("span",{className:"position-absolute top-1 start-75 translate-middle badge rounded-pill bg-danger",children:e.jsx(Fe,{})})]})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsx("a",{className:"nav-link dropdown-toggle text-white",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:e.jsx("i",{className:"bi bi-grid-fill me-2 ms-2"})}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end text-center mb-3 shadow border-0",children:[e.jsxs(Se,{to:"/formularioPageDev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario"})]}),e.jsxs(Se,{to:"/10bis",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-file-earmark-lock2-fill me-2 textG2"}),e.jsx("span",{children:"10 bis"})]}),e.jsxs(Se,{to:"/capturas",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-camera-fill me-2 textG2"}),e.jsx("span",{children:"Capturas"})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider bg-roseMui2"})}),e.jsx("li",{children:e.jsx(xs,{})})]})]})]})]})]})})},vi=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-primary bg-gradiante",children:[e.jsx(Je,{}),e.jsx(Ni,{})]}),e.jsx(he,{})]});function yi(){const[a,r]=s.useState([]),[t,c]=s.useState("noLeidas"),[i,l]=s.useState([]),[o,n]=s.useState(()=>{const y=localStorage.getItem("leidas");return y?JSON.parse(y):{}}),[m,x]=s.useState(!0),[h,N]=s.useState(!1),[g,v]=s.useState([]);s.useEffect(()=>{const y=Re(V(I,"db_notificaciones"),_=>{const p=_.docs.map(j=>({id:j.id,...j.data()})).sort((j,C)=>{var F,E;return(((F=C.timestamp)==null?void 0:F.seconds)??0)-(((E=j.timestamp)==null?void 0:E.seconds)??0)});r(p)});return()=>y()},[]),s.useEffect(()=>{(async()=>{const p=(await ae(V(I,"db_personas"))).docs.map(j=>({id:j.id,...j.data()}));l(p),x(!1)})()},[]);const u=y=>{n(_=>{const p={..._,[y]:!0};return localStorage.setItem("leidas",JSON.stringify(p)),p})},b=y=>{const _=a.find(p=>p.id===y);if(_!=null&&_.asociada){const p=i.filter(j=>_.asociada.includes(j.nombre_apellido));v(p),N(!0)}},d=()=>{N(!1),v([])},f=y=>({1:"Novedad",2:"Paradero",3:"Evasión",4:"Prioritaria"})[y]||"No definida",S=y=>/^https?:\/\//.test(y)?y:`https://${y}`,w=a.sort((y,_)=>{var C,F;const p=o[y.id]?1:0,j=o[_.id]?1:0;return p!==j?p-j:(((C=_.timestamp)==null?void 0:C.seconds)??0)-(((F=y.timestamp)==null?void 0:F.seconds)??0)}).filter(y=>t==="leidas"?o[y.id]:t==="noLeidas"?!o[y.id]:!0);return e.jsx("div",{className:"container-lg my-5",children:m?e.jsx(re,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"w-75 text-white",children:e.jsx("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Notificaciones"}),e.jsxs("button",{type:"button",className:"btn btn-light position-relative",children:[e.jsx("i",{className:"bi bi-bell fs-4 text-dark"}),e.jsxs("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:[a.length,e.jsx("span",{className:"visually-hidden",children:"unread messages"})]})]})]})})})}),e.jsx("div",{className:"d-flex justify-content-center mt-4 px-2",children:e.jsx("div",{className:"btn-group shadow",role:"group",children:["todas","leidas","noLeidas"].map(y=>e.jsxs("button",{className:`btn ${t===y?"btn-light text-dark fw-semibold":"btn-outline-light bg-transparent text-white"} ${y==="todas"?"rounded-start-pill":y==="noLeidas"?"rounded-end-pill":""}`,onClick:()=>c(y),children:[e.jsx("i",{className:`bi me-2 ${y==="todas"?"bi-list-ul":y==="leidas"?"bi-check-circle":"bi-bell-fill"}`}),y==="todas"?"Todas":y==="leidas"?"Leídas":"No Leídas"]},y))})}),w.length===0?e.jsx("div",{className:"text-muted my-5 alert d-flex justify-content-center text-center",children:e.jsxs("p",{className:"text-white border border-4 p-4 rounded-pill w-75",children:[e.jsx("i",{className:`bi me-2 ${t==="todas"?"bi-inbox":t==="leidas"?"bi-check-circle":"bi-bell-fill"}`}),t==="todas"?"No hay notificaciones disponibles.":t==="leidas"?"No hay notificaciones leídas.":"No hay notificaciones sin leer."]})}):w.map(y=>{var _,p;return e.jsxs("div",{className:"card shadow position-relative d-flex gap-3 p-4 my-5 mx-3",children:[!o[y.id]&&e.jsx("button",{className:"btn-close position-absolute top-0 end-0 m-2",onClick:()=>u(y.id)}),e.jsx("img",{src:o[y.id]?"img/Alertas/alertRead.png":"img/Alertas/alert1.gif",alt:"Alerta",className:"position-absolute rounded-circle bg-white p-2 shadow",style:{width:o[y.id]?"75px":"80px",height:o[y.id]?"75px":"80px",top:"-20px",left:"-20px",objectFit:"contain"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"40px"},children:[e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-2 mt-2",children:[e.jsx("h5",{className:"mb-1 text-center text-sm-start w-100 w-sm-auto",children:e.jsx("strong",{children:y.titulo||"Nueva Notificación"})}),y.timestamp&&e.jsx("p",{className:"mb-0 text-muted small d-none d-sm-block",children:new Date(y.timestamp.seconds*1e3).toLocaleString()})]}),e.jsxs("p",{children:[o[y.id]&&e.jsx("i",{className:"badge text-bg-indigoMui text-white bi bi-check-circle-fill",children:" Esta Notificación fue Leída"})," ",y.caratula&&e.jsxs(e.Fragment,{children:[parseInt(y.caratula)===1&&e.jsx("span",{className:"badge text-bg-teal text-white shadow-sm",children:f(y.caratula)}),parseInt(y.caratula)===2&&e.jsx("span",{className:"badge text-bg-primaryMuiBlue text-white shadow-sm",children:f(y.caratula)}),parseInt(y.caratula)===3&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-danger"}),e.jsx("span",{className:"badge text-bg-danger text-white shadow-sm",children:f(y.caratula)})]}),parseInt(y.caratula)===4&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-orange"}),e.jsx("span",{className:"badge text-bg-orange text-white shadow-sm",children:f(y.caratula)})]})]})]}),y.contenido&&e.jsx("p",{className:"mb-3",children:y.contenido}),((_=y.enlace)==null?void 0:_.length)>0&&e.jsx("p",{className:"text-center",children:y.enlace.map((j,C)=>e.jsxs("a",{href:S(j),target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none d-flex align-items-center gap-2 rounded-pill",style:{maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[e.jsx("i",{className:"bi bi-browser-chrome titilar",style:{fontSize:"20px"}}),j]},C))}),e.jsx("div",{className:"d-flex justify-content-center flex-wrap align-items-center gap-3 mt-3",children:(p=y.asociada)==null?void 0:p.map((j,C)=>{const F=i.find(E=>(E.nombre_apellido||"").toLowerCase()===(j||"").toLowerCase());return e.jsxs("div",{className:"d-flex align-items-center gap-2 border rounded shadow-sm p-2",style:{minWidth:"150px"},onClick:()=>b(y.id),children:[(F==null?void 0:F.base64)&&e.jsx("img",{src:F.base64,alt:F.nombre_apellido,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("span",{className:"text-capitalize",children:[C+1,". ",j]})]},C)})})]})]},y.id)}),h&&g.length>0&&e.jsx("div",{className:"modal fade bg-dark show d-block",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Personas Asociadas"}),e.jsx("button",{type:"button",className:"btn-close",onClick:d})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"row",children:g.map((y,_)=>e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"card",children:[e.jsx("img",{src:y.base64||"default-image-url.jpg",alt:y.nombre_apellido,className:"card-img-top",style:{height:"200px",objectFit:"cover"}}),e.jsxs("div",{className:"card-body text-center text-capitalize",children:[e.jsx("h5",{className:"card-title text-pink",children:y.nombre_apellido}),e.jsxs("p",{children:[e.jsx("strong",{children:"Documento:"})," ",y.documento]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Datos:"})," ",y.descripcion_fisica]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Motivo Captura:"})," ",y.motivo_captura]})]})]})},_))})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn btn-pink",onClick:d,children:"Cerrar"})})]})})})]})})}const wi=()=>{const[a,r]=s.useState(0);return s.useEffect(()=>{const t=document.querySelector(".navbar");if(t){const c=t.offsetHeight;r(c)}},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-vh-100 d-flex flex-column justify-content-center align-items-center text-white gap-5",style:{paddingTop:`${a}px`},children:[e.jsx(yi,{}),e.jsx(Te,{})]})})},Ci=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-primary bg-gradiante ",children:[e.jsx(Je,{}),e.jsx(wi,{}),e.jsx(he,{})]})});function Si({setGridView:a,gridView:r,sortOrder:t,setSortOrder:c,sortBy:i,setSortBy:l,searchTerm:o,setSearchTerm:n,priorityFilter:m,setPriorityFilter:x,currentPage:h,handlePriorityChange:N}){const[g,v]=s.useState(!1),u=()=>{v(!1),l("fecha"),c("desc"),x([])};return e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"w-75 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Personas"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-people-fill fs-4 text-dark"})})]}),e.jsx("form",{className:"d-flex justify-content-center my-4",onSubmit:b=>b.preventDefault(),children:e.jsxs("div",{className:"input-group input-group-lg w-100",style:{maxWidth:"600px"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar en Rosario...","aria-label":"Buscar",value:o,onChange:b=>n(b.target.value)}),e.jsx("button",{className:"btn btn-outline-light",type:"submit",children:e.jsx("i",{className:"bi bi-search"})})]})}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsx("button",{type:"button",onClick:()=>a(!0),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"active":""}`,title:"Vista en cuadrícula",children:e.jsx("i",{className:`bi bi-grid-3x3-gap-fill fs-5 ${r?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"":"active"}`,title:"Vista en lista",children:e.jsx("i",{className:`bi bi-list fs-5 ${r?"":"titilar"}`})}),e.jsx("button",{type:"button",onClick:()=>v(!g),className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",title:"Mostrar/Ocultar filtros",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})]}),g&&e.jsxs("div",{className:"card border border-white shadow",style:{backgroundColor:"transparent",color:"white"},children:[e.jsxs("div",{className:"card-header fw-semibold bg-gradiante2  d-flex justify-content-between align-items-center border-bottom border-white",children:[e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-sort-alpha-down mx-1"})," Filtros de Galería"]}),e.jsx("i",{className:"bi bi-x-lg cursor-pointer",onClick:u,style:{cursor:"pointer"}})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select   border-white shadow-sm text-center",value:i,onChange:b=>l(b.target.value),children:[e.jsx("option",{value:"fecha",children:"Fecha"}),e.jsx("option",{value:"nombreApellido",children:"Nombre"})]}),e.jsx("label",{className:" p-2",children:"Filtrar por"})]})}),e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("select",{className:"form-select  border-white shadow-sm text-center",value:t,onChange:b=>c(b.target.value),children:i==="fecha"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"Antiguo - Reciente"}),e.jsx("option",{value:"desc",children:"Reciente - Antiguo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"A - Z"}),e.jsx("option",{value:"desc",children:"Z - A"})]})}),e.jsx("label",{className:" p-2",children:"Ordenar Prioridad"})]})})]}),e.jsx("div",{className:"border border-white shadow-sm rounded-4 p-4 mb-4 text-white",children:e.jsxs("div",{className:"d-flex flex-wrap justify-content-center mb-3",children:[["No Prioritarias","Paradero","Evadidos","Prioritarias"].map((b,d)=>e.jsxs("div",{className:"form-check form-check-inline mb-2",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",value:d+1,checked:m.includes((d+1).toString()),onChange:N,disabled:h!==1,style:{cursor:h===1?"pointer":"not-allowed"}}),e.jsx("label",{className:"form-check-label text-white",children:b})]},d)),m.length>0&&e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white shadow-sm mx-2",onClick:()=>x([]),children:e.jsx("i",{className:"bi bi-trash"})})]})})]})]})]})})})}const _i=({show:a,onClose:r,datos:t})=>{s.useState(!1);const[c,i]=s.useState(!1);return s.useEffect(()=>{if(location.pathname==="/dashboard"){const l=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",l),()=>{window.removeEventListener("popstate",l)}}},[r]),a?e.jsxs("div",{className:"modal fade show bg-primary2 bg-gradiante2",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered border border-white rounded border-3 ",children:e.jsxs("div",{className:"modal-content bg-transparent border-0",children:[e.jsx("div",{className:"modal-header",children:e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:r})}),e.jsxs("div",{className:"modal-body text-center text-white",children:[e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>i(!0),children:[e.jsx("div",{className:"fs-5 position-absolute top-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-top small",style:{opacity:.8},children:t.documento}),e.jsx("img",{src:t.base64&&t.base64.trim()!==""&&t.base64.trim()!=="null"?t.base64:"https://via.placeholder.com/150",className:"img-fluid mb-3 shadow-lg ",alt:t.nombre_apellido||"Imagen no disponible",style:{width:"500px",height:"auto"},loading:"lazy"}),e.jsx("div",{className:"fs-1 position-absolute text-capitalize bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:t.nombre_apellido})]}),e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4",children:["Datos de la Solicitud ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-purpleUi me-2",children:"Motivo Captura"})}),t.motivo_captura&&t.motivo_captura.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.motivo_captura}):null,(!t.motivo_captura||t.motivo_captura.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-primary mx-4",onClick:()=>alert("Solicitud enviada. La información que requirió se le informará a los cargadores de captura para su carga. 🏤"),children:["Solicitar Información ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-purpleUi text-white me-2",children:"Información Adicional"})}),t.descripcion_fisica&&t.descripcion_fisica.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.descripcion_fisica}):null,(!t.descripcion_fisica||t.descripcion_fisica.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-primaryM mx-4",onClick:()=>alert("Solicitud enviada. La información que requirió se le informará a los cargadores de captura para su carga. 🏤"),children:["Solicitar Información ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("hr",{className:"border border-white border-1 opacity-75"}),t.entidad&&t.entidad.trim()!==""&&e.jsxs("span",{className:"badge text-bg-primaryM text-white my-1 text-capitalize mx-3 p-2",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Solicita - ",t.entidad]}),t.numero_contacto&&t.numero_contacto.trim()!==""&&e.jsxs("span",{className:"badge text-bg-primaryM text-white my-1 text-capitalize mx-3 p-2",children:[e.jsx("i",{className:"bi bi-telephone-forward-fill me-2"}),"Contactar ",t.numero_contacto]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),c&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark ",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>i(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:l=>l.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>i(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/40",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"200vw",maxHeight:"200vh",objectFit:"contain"}})]})})})]}):null},ki=({show:a,onClose:r,datos:t})=>{var n;const[c,i]=s.useState(!1),[l,o]=s.useState(!1);return s.useEffect(()=>{if(location.pathname==="/dashboard"){const m=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",m),()=>{window.removeEventListener("popstate",m)}}},[r]),a?e.jsxs("div",{className:"modal fade show bg-primary2 bg-gradiante2",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered border border-white rounded border-3",children:e.jsxs("div",{className:"modal-content bg-transparent border-0",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title text-center text-white fw-semibold",children:"Detalles de la Captura 👮"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:r})]}),e.jsxs("div",{className:"modal-body text-white",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-start mb-3",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>o(!0),children:[e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:t.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow mt-2",style:{width:"130px",height:"130px",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:"Capturado"})]})}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("small",{className:"d-flex gap-2 justify-content-end mb-1",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center text-capitalize",value:t.nombre_apellido,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center",value:t.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end",children:["Detalles de la Captura ",e.jsx("i",{className:"bi bi-journal-text"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),((n=t.capturas_informacion_estados)==null?void 0:n.length)>0?e.jsxs(e.Fragment,{children:[t.capturas_informacion_estados.slice().reverse().slice(0,c?t.capturas_informacion_estados.length:1).map((m,x)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:`rounded-pill px-3 py-2 text-white ${m.captura_fecha?"bg-primary":"bg-secondaryMuiRed"}`,children:[e.jsx("strong",{className:"me-3",children:m.captura_autor||"Sistema"}),m.captura_fecha||m.captura_quita_fecha]}),m.captura_fecha&&e.jsxs("p",{children:["Relato: ",e.jsx("span",{className:"fw-semibold",children:m.captura_descripcion||"Sin relato"})]})]},x)),t.capturas_informacion_estados.length>1&&e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-link text-white text-decoration-none",onClick:()=>i(!c),children:c?"Ver menos":"Ver historial completo"})})]}):e.jsx("p",{className:"text-center",children:"No hay detalles de captura disponibles."})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),l&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>o(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:m=>m.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>o(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain"}})]})})})]}):null},Ze=15;function bs(a){const[r,t,c]=a.split("/").map(Number),i=2e3+c;return new Date(i,t-1,r)}const Ei=()=>{const[a,r]=s.useState(!1),[t,c]=s.useState(!1),[i,l]=s.useState(!1),[o,n]=s.useState([]),[m,x]=s.useState(1),[h,N]=s.useState(0),[g,v]=s.useState(null),[u,b]=s.useState(null),[d,f]=s.useState(null),[S,w]=s.useState(null),[y,_]=s.useState(!0),[p,j]=s.useState(!1),[C,F]=s.useState(null),[E,k]=s.useState("fecha"),[M,L]=s.useState("desc"),[B,K]=s.useState(""),[H,J]=s.useState(!0),[ie,ce]=s.useState(""),[U,ee]=s.useState(!0),A=async()=>{try{_(!0);const D=await ae(V(I,"db_personas")),z=[];D.forEach(X=>{const Q={id:X.id,...X.data()};z.push(Q)}),n(z),N(Math.ceil(z.length/Ze))}catch(D){console.error("Error obteniendo documentos: ",D),F("No se pudieron cargar los documentos.")}finally{_(!1)}};s.useEffect(()=>{A()},[]);const T=D=>{const z=D.target.value;ce(X=>X.includes(z)?X.filter(Q=>Q!==z):[...X,z])},se=s.useMemo(()=>o.filter(D=>{var Q;const z=(Q=D.nombre_apellido)==null?void 0:Q.toLowerCase().includes(B.toLowerCase()),X=ie.length===0||ie.includes(String(D.prioridad));return z&&X}),[o,B,ie]),te=s.useMemo(()=>se.sort((D,z)=>{if(D.prioridad===3&&z.prioridad!==3)return-1;if(z.prioridad===3&&D.prioridad!==3)return 1;if(D.prioridad===4&&z.prioridad!==4)return-1;if(z.prioridad===4&&D.prioridad!==4)return 1;if(E==="fecha"){const X=bs(D.date)||0,Q=bs(z.date)||0;return M==="asc"?X-Q:Q-X}else return M==="asc"?D.nombre_apellido.localeCompare(z.nombre_apellido):z.nombre_apellido.localeCompare(D.nombre_apellido)}),[se,E,M]),le=(m-1)*Ze,xe=te.slice(le,le+Ze),$=()=>{m<h&&(j(!0),x(D=>D+1),setTimeout(()=>j(!1),500))},R=()=>{m>1&&(j(!0),x(D=>D-1),setTimeout(()=>j(!1),500))},Y=D=>{w(!0),b(D)},q=()=>{v(null),w(null)},G=D=>{f(!0),b(D)},P=()=>f(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Si,{setGridView:J,gridView:H,sortOrder:M,sortBy:E,setSortOrder:L,setSortBy:k,searchTerm:B,setSearchTerm:K,showFilters:U,priorityFilter:ie,setPriorityFilter:ce,currentPage:m,handlePriorityChange:T}),e.jsxs("div",{className:"container-lg",children:[y&&e.jsx(re,{}),C&&e.jsx("div",{className:"alert alert-danger",children:C}),p?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(re,{})}):e.jsx("div",{className:H?"row mt-5":"d-flex flex-column align-items-center mt-5",children:xe.map(D=>e.jsx("div",{className:H?"col-6 col-sm-6 col-md-4 mb-4":"col-12 col-sm-6 col-md-6 mb-4",children:e.jsx("div",{className:"card py-4 bg-transparent",children:e.jsxs("div",{className:"position-relative",children:[D.alerta&&!D.captura&&e.jsx("div",{onClick:()=>c(!t),children:t?e.jsx("div",{className:"position-absolute top-1  start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-exclamation-triangle-fill me-2 text-white titilar fs-5 shadow-sm "}),"Evadido ",D.date," "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-redUi1   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-exclamation-triangle-fill fs-5 mx-1 text-white titilar "})})}),D.paradero&&e.jsx("div",{onClick:()=>r(!a),children:a?e.jsx("div",{className:"position-absolute top-1 bg-blueMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-search fs-5 mx-2 text-white  "}),"Paradero "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-blueMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-search fs-5 mx-1 text-white "})})}),D.prioridad===4&&e.jsx("div",{onClick:()=>l(!i),children:i?e.jsx("div",{className:"position-absolute top-1 bg-yellowMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:"bi bi-star-fill fs-5 mx-2 text-white "}),"Prioritaria"]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-yellowMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-star-fill fs-5 mx-1 text-white "})})}),D.captura&&e.jsxs("div",{className:"captura-cinta",style:{maxWidth:"100%"},onClick:()=>G(D),children:[e.jsx("span",{children:"Capturado"}),e.jsx("span",{children:e.jsx("button",{className:"btn p-0 text-white ms-2 d-none d-md-inline",onClick:z=>{z.stopPropagation(),G(D)},children:"Ver detalles"})})]}),e.jsx("div",{}),e.jsx("img",{src:D.base64&&D.base64.trim()!==""&&D.base64.trim()!=="null"?D.base64:be,className:`card-img-top img-fluid  ${D.captura?"grayscale":""}`,alt:D.nombre_apellido||"Imagen no disponible",loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"cover"},onClick:()=>Y(D)}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-white text-capitalize",children:D.nombre_apellido}),e.jsx("p",{className:"card-text text-white",children:D.unidad_comisaria}),e.jsx("button",{onClick:()=>Y(D),className:"btn btn-outline-light",children:"Ver detalles"})]})]})})},D.id))}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4",children:[m>1&&e.jsx("button",{className:"btn btn-outline-light shadow-sm",onClick:R,children:e.jsx("i",{className:"bi bi-arrow-left fw-semibold fs-3 titilar"})}),e.jsxs("span",{className:"fs-6 mx-3 ",children:["Página ",m," de ",h]}),m<h&&e.jsx("button",{className:"btn btn-outline-light rounded-pill shadow-sm",onClick:$,children:e.jsx("i",{className:"bi bi-arrow-right fw-semibold fs-3 titilar"})})]})]}),e.jsx(_i,{show:S,datos:u,onClose:q}),e.jsx(ki,{show:d,datos:u,onClose:P})]})},Fi=()=>{const[a,r]=s.useState(0);return s.useEffect(()=>{const t=document.querySelector(".navbar");if(t){const c=t.offsetHeight;r(c)}},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-vh-100 d-flex flex-column justify-content-center align-items-center text-white gap-5",style:{paddingTop:`${a}px`},children:[e.jsx(Ei,{}),e.jsx(Te,{})]})})},Di=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-primaryM bg-gradiante2",children:[e.jsx(Je,{}),e.jsx(Fi,{}),e.jsx(he,{})]})}),ps=({onImageSave:a})=>{const[r,t]=s.useState(!1),[c,i]=s.useState(null),[l,o]=s.useState(""),n=s.useRef(null),[m,x]=s.useState(!1),[h,N]=s.useState({x:0,y:0}),[g,v]=s.useState({x:0,y:0}),[u,b]=s.useState(1),d=s.useRef(null),f=C=>{x(!0);const{offsetX:F,offsetY:E}=C.nativeEvent;v({x:F,y:E})},S=C=>{if(!m||!c)return;const{offsetX:F,offsetY:E}=C.nativeEvent;N(k=>({x:k.x+(F-g.x),y:k.y+(E-g.y)})),v({x:F,y:E})},w=()=>{x(!1)},y=()=>{t(!1),o(""),i(null),N({x:0,y:0}),b(1);const C=document.getElementById("file-input");C&&(C.value=""),d.current&&(URL.revokeObjectURL(d.current),d.current=null)},_=()=>t(!0),p=C=>{const F=C.target.files[0];if(F){if(!F.type.startsWith("image/")){o("Por favor, selecciona un archivo de imagen.");return}if(F.size>5*1024*1024){o("La imagen debe ser menor de 5 MB.");return}const E=URL.createObjectURL(F);d.current=E,i(E),o("")}},j=()=>{if(!c||!n.current){o("Por favor, selecciona una imagen antes de guardar.");return}const C=n.current,F=C.width,E=C.height,k=document.createElement("canvas");k.width=F,k.height=E;const M=k.getContext("2d"),L=new Image;L.src=c,L.onload=()=>{M.clearRect(0,0,F,E),M.drawImage(L,h.x,h.y,L.width*u,L.height*u);const B=k.toDataURL("image/jpeg",.92);a(B),y()}};return s.useEffect(()=>{if(c&&n.current){const C=n.current,F=C.getContext("2d"),E=new Image;E.src=c,E.onload=()=>{F.clearRect(0,0,C.width,C.height),F.drawImage(E,h.x,h.y,E.width*u,E.height*u)}}},[c,h,u]),s.useEffect(()=>{const C=n.current,F=E=>{if(E.preventDefault(),!c)return;const k=1.1,M=E.deltaY<0?u*k:u/k;b(Math.max(M,.1))};if(C)return C.addEventListener("wheel",F,{passive:!1}),()=>{C.removeEventListener("wheel",F)}},[c,u]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:e.jsxs("button",{type:"button",onClick:_,className:"btn btn-outline-light d-flex align-items-center gap-2 px-4 py-2 rounded-3 shadow-sm",children:[e.jsx("span",{className:"fw-semibold",children:"Agregar Nueva Captura"}),e.jsx("i",{className:"bi bi-plus-circle-fill fs-5"})]})}),e.jsx("div",{className:`modal fade  bg-gradiante2 ${r?"show":""}`,style:{display:r?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!r,children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-gradiante2",children:e.jsx("h5",{className:"modal-title text-light  ",id:"modalLabel ",children:"Selecciona tu imagen  / Edita "})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{id:"file-input",type:"file",className:"form-control",accept:"image/*",onChange:p}),c&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"d-flex justify-content-center mt-3",children:e.jsx("canvas",{ref:n,className:"shadow",onMouseDown:f,onMouseMove:S,onMouseUp:w,onMouseLeave:w,width:500,height:500,style:{border:"1px solid black",cursor:m?"grabbing":"grab"}})}),e.jsxs("p",{className:"alert alert-light text-redUi1 fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-pink",style:{width:"1rem",height:"1rem"},role:"status"}),"Para hacer zoom en la imagen, simplemente usa el scroll (la rueda) de tu mouse. 🖲️"]}),e.jsxs("p",{className:"alert alert-light text-indigoMui fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-indigoMui",style:{width:"1rem",height:"1rem"},role:"status"}),"Mantén presionado el botón del mouse para arrastrar la imagen. 🖱️"]})]}),l&&e.jsx("div",{className:"mt-2 text-danger",children:l})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:y,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn text-white bg-indigoMui",onClick:j,children:"Guardar Imagen"})]})]})})}),e.jsx("div",{className:`modal-backdrop fade ${r?"show":""}`,style:{display:r?"block":"none"}})]})},Pi=({onSubmit:a,savedImage:r,resetImage:t,formRef:c})=>{const[i,l]=s.useState(()=>{const S=localStorage.getItem("formData");return S?JSON.parse(S):{nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,captura:!1,prioridad:1,alertaParaderoCaptura:""}}),[o,n]=s.useState({}),[m,x]=s.useState(!1),[h,N]=s.useState(!1),[g,v]=s.useState("");s.useEffect(()=>{localStorage.setItem("formData",JSON.stringify(i))},[i]);const u=({target:{id:S,value:w,type:y,checked:_}})=>{l(p=>{let j={...p,[S]:y==="checkbox"?_:w};if(S==="alertaParaderoCaptura")switch(w){case"paradero":j={...j,prioridad:2,paradero:!0,alerta:!1};break;case"evadido":j={...j,prioridad:3,captura:!0,alerta:!0};break;case"prioritaria":j={...j,prioridad:4,alerta:!1};break;default:j={...j,prioridad:1,paradero:!1,alerta:!1};break}return j}),n(p=>({...p,[S]:""}))},b=()=>{const S={};return r?(i.nombreApellido.match(/[A-Za-zÑñÁáÉéÍíÓóÚú\s]+/)||(S.nombreApellido="Ingrese solo letras y espacios."),i.documento.length<6&&(S.documento="El número de documento debe tener al menos 6 caracteres."),n(S),Object.keys(S).length===0):(alert("Debes cargar una imagen antes de enviar el formulario."),v("Debes cargar una imagen antes de enviar el formulario."),N(!0),!1)},d=async S=>{if(S.preventDefault(),!b())return;if(!window.confirm("¿Estás seguro de que deseas enviar este formulario?")){alert("El envío ha sido cancelado.");return}x(!0);try{const y={...i,imagen:r};if(typeof a=="function")await a(y),alert("Formulario enviado correctamente."),v("Formulario enviado correctamente."),N(!0);else throw new Error("onSubmit no es una función válida")}catch(y){console.error(y),alert("Hubo un error al enviar el formulario."),v("Hubo un error al enviar el formulario."),N(!0)}finally{x(!1),f()}},f=()=>{localStorage.removeItem("formData"),l({nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,prioridad:1,alertaParaderoCaptura:""}),n({}),t()};return e.jsxs("div",{className:" mt-3",children:[m&&e.jsx(re,{})," ",h&&e.jsx(ds,{message:g,onClose:()=>N(!1)}),e.jsxs("form",{ref:c,onSubmit:d,children:[e.jsx(Ue,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-person-fill text-greenUi me-3 p-1"})," Nombre y Apellido"]}),id:"nombreApellido",type:"text",value:i.nombreApellido,error:o.nombreApellido,onChange:u,required:!0,className:"text-center"}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Ue,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-file-earmark-person text-greenUi me-3 p-1"})," Número de Documento"]}),id:"documento",type:"number",value:i.documento,error:o.documento,onChange:u,className:"col"}),e.jsx(js,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-gender-ambiguous text-greenUi me-3 p-1"})," Sexo"]}),id:"sexo",value:i.sexo,options:[{label:"Seleccione",value:""},{label:"Masculino 👨",value:"masculino"},{label:"Femenino 👩",value:"femenino"},{label:"Otros 👭🏻 ",value:"otro"}],onChange:u,className:"col"})]}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Ue,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-building text-greenUi me-3 p-1"})," Entidad Solicita Captura"]}),id:"entidad",type:"text",value:i.entidad,onChange:u,className:"col"}),e.jsx(Ue,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-telephone text-greenUi me-3 p-1"})," Número de Contacto"]}),id:"numeroContacto",type:"tel",value:i.numeroContacto,error:o.numeroContacto,onChange:u,className:"col"})]}),e.jsx(gs,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil text-greenUi me-3 p-1"})," Datos de la Persona / Info Adicional"]}),id:"descripcionFisica",value:i.descripcionFisica,onChange:u,className:"text-center"}),e.jsx(gs,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil-square text-greenUi me-3 p-1"})," Motivo  Captura "]}),id:"motivoCaptura",value:i.motivoCaptura,onChange:u,className:"text-center"}),e.jsx(js,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill p-1 text-white me-3 titilar "})," Selecciona una Tipo de Alerta"]}),id:"alertaParaderoCaptura",value:i.alertaParaderoCaptura,options:[{label:"Normal",value:"normal"},{label:"Búsqueda Paradero 🔍 ",value:"paradero"},{label:"Alerta Evadido 🚨",value:"evadido"},{label:"Captura Prioritaria ⚠️",value:"prioritaria"}],onChange:u}),e.jsxs("div",{className:"d-flex justify-content-end pt-4  mt-3",children:[e.jsxs("button",{type:"button",onClick:f,className:"btn btn-danger text-light shadow",children:[e.jsx("i",{className:"bi bi-x-circle "})," Limpiar Formulario"]}),e.jsxs("button",{type:"submit",className:"btn btn-primary2 shadow ms-2",disabled:m,children:[e.jsx("i",{className:"bi bi-send"})," Enviar Formulario"]})]})]})]})},Ue=({label:a,id:r,type:t="text",value:c,error:i,onChange:l,className:o="",required:n=!1})=>e.jsxs("div",{className:`mb-4 ${o}`,children:[e.jsx("span",{htmlFor:r,className:"input-group-text bg-gradiante2 border-white  text-white text-center mb-1",children:a}),e.jsx("input",{type:t,className:`form-control bg-transparent text-white border-white ${i?"is-invalid":""}`,id:r,value:c,onChange:l,required:n}),e.jsx("div",{className:"invalid-feedback text-light",children:i})]}),js=({label:a,id:r,value:t,options:c,onChange:i,className:l=""})=>e.jsxs("div",{className:`mb-5 ${l} text-center`,children:[e.jsx("span",{htmlFor:r,className:`input-group-text bg-gradiante2 text-white text-center d-flex justify-content-center shadow ${r==="alertaParaderoCaptura"?"bg-danger text-white":""}`,children:a}),e.jsx("select",{className:"form-select text-center",id:r,value:t,onChange:i,style:{color:"white",backgroundColor:"transparent",borderColor:"white"},children:c.map(({label:o,value:n})=>e.jsx("option",{value:n,style:{backgroundColor:"#5F3F8B",color:"white"},children:o},n))})]}),gs=({label:a,id:r,value:t,onChange:c,className:i=""})=>e.jsxs("div",{className:`form-floating mb-4 ${i}`,children:[e.jsx("textarea",{className:"form-control bg-transparent text-white border-white",id:r,value:t,onChange:c,style:{height:"100px"},placeholder:" "}),e.jsx("label",{htmlFor:r,className:"text-",children:a})]}),Ai=()=>{const[a,r]=s.useState(null),[t,c]=s.useState(!1),[i,l]=s.useState(!1),[o,n]=s.useState(!1),m=s.useRef(null);s.useEffect(()=>{const v=()=>{c(window.innerWidth<576)};return window.addEventListener("resize",v),v(),()=>window.removeEventListener("resize",v)},[]);const x=v=>{r(v),l(!1)},h=async v=>{var S;const u=()=>{const w=new Date,y=String(w.getDate()).padStart(2,"0"),_=String(w.getMonth()+1).padStart(2,"0"),p=String(w.getFullYear()).slice(-2);return`${y}/${_}/${p}`},d=(()=>{const w=localStorage.getItem("user");return w?JSON.parse(w):null})(),f={documento:v.documento,nombre_apellido:v.nombreApellido.toLowerCase(),sexo:v.sexo,entidad:v.entidad,numero_contacto:v.numeroContacto,descripcion_fisica:v.descripcionFisica,motivo_captura:v.motivoCaptura,base64:a,date:u(),usuario:d?d.email:"Desconocido",prioridad:v.prioridad,alerta:v.alerta||!1,paradero:v.paradero||!1};try{await Ee(V(I,"db_personas"),f),console.log("Datos guardados en Firebase:",f),(S=m.current)==null||S.reset(),N()}catch(w){console.error("Error al guardar los datos en Firebase:",w)}},N=()=>{r(null),l(!1),n(!1)},g=v=>{const u=v.target.files[0];if(u){const b=new FileReader;b.onloadend=()=>{const d=new Image;d.onload=()=>{const f=document.createElement("canvas"),S=f.getContext("2d"),w=500,y=500;let _=d.width,p=d.height;_>p?_>w&&(p*=w/_,_=w):p>y&&(_*=y/p,p=y),f.width=_,f.height=p,S.drawImage(d,0,0,_,p);const j=f.toDataURL("image/jpeg");r(j),l(!1)},d.src=b.result},b.readAsDataURL(u)}};return e.jsx(e.Fragment,{children:o?e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10 col-lg-8 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Formulario"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-ui-checks fs-4 text-dark"})})]}),e.jsx("p",{className:"mt-2 text-white-50",children:"Gestioná tus registros de ingreso."}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-5 mb-4",children:e.jsxs("div",{className:"text-center position-relative",children:[!i&&a&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-secondaryM text-purple position-absolute end-0 top-0 mt-5 m-2","aria-label":"Editar",onClick:()=>{r(null),l(!0)},children:e.jsx("i",{className:"bi bi-pencil-fill"})}),e.jsx("h5",{className:"text-light mt-4",children:"Vista previa de la imagen guardada:"}),e.jsx("img",{src:a,alt:"Captura subida",className:"img-fluid rounded-4 border border-light shadow mt-2",style:{maxWidth:"100%"}})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-light",children:"Subí una nueva imagen"}),t?e.jsx("div",{className:"mb-3 w-100 px-3",children:e.jsx("input",{type:"file",className:"form-control bg-gradiante2 text-white",onChange:v=>{g(v)}})}):e.jsx(ps,{onImageSave:v=>{x(v)}})]})]})}),e.jsx("div",{className:"col-12 col-md-7",children:e.jsx(Pi,{onSubmit:h,savedImage:a,resetImage:N,formRef:m})})]})]})})})}):e.jsx("div",{className:"w-75 text-white",children:e.jsxs("div",{className:"text-center py-5 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("h2",{className:"mb-4 display-5 fw-bold",children:"Subí una imagen para comenzar"}),e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3",children:t?e.jsxs("div",{className:"mb-3 w-100 px-3",children:[e.jsx("label",{className:"form-label fw-semibold",children:"Subir solo Imagen "}),e.jsx("input",{type:"file",className:"form-control bg-gradiante2 text-white",onChange:v=>{g(v),n(!0)}})]}):e.jsx(ps,{onImageSave:v=>{x(v),n(!0)}})})]})})})},Mi=()=>{const[a,r]=s.useState(0);return s.useEffect(()=>{const t=document.querySelector(".navbar");if(t){const c=t.offsetHeight;r(c)}},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-vh-100 d-flex flex-column justify-content-center align-items-center text-white gap-5",style:{paddingTop:`${a}px`},children:[e.jsx(Ai,{}),e.jsx(Te,{})]})})},Ii=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-primaryM bg-gradiante2",children:[e.jsx(Je,{}),e.jsx(Mi,{}),e.jsx(he,{})]})}),Li=()=>e.jsx("div",{className:"bg-primary Gradiante25 min-vh-100 d-flex justify-content-center align-items-center text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("h1",{className:"display-4 fw-bold",children:"Validar Ingreso 10 Bis"}),e.jsx("p",{className:"lead",children:"Descubrí todo lo que nuestra provincia tiene para ofrecer, ¡explorá nuestras funcionalidades y novedades!"}),e.jsx(ne,{to:"/about",className:"btn btn-outline-light mt-3",children:"Saber más"})]})}),Ri=()=>e.jsx(ca,{children:e.jsx(ra,{children:e.jsx("main",{children:e.jsxs(la,{children:[e.jsx(de,{path:"/",element:e.jsx(xa,{})}),e.jsx(de,{path:"/about",element:e.jsx(ba,{})}),e.jsx(de,{path:"/dashboard",element:e.jsx(me,{children:e.jsx(pi,{})})}),e.jsx(de,{path:"/inicio",element:e.jsx(me,{children:e.jsx(vi,{})})}),e.jsx(de,{path:"/formularios",element:e.jsx(me,{children:e.jsx(Pt,{})})}),e.jsx(de,{path:"/auditoria",element:e.jsx(me,{children:e.jsx(Ra,{})})}),e.jsx(de,{path:"/notificaciones",element:e.jsx(me,{children:e.jsx(za,{})})}),e.jsx(de,{path:"/NotificacionesDev2",element:e.jsx(me,{children:e.jsx(Ci,{})})}),e.jsx(de,{path:"/formulariopagedev2",element:e.jsx(me,{children:e.jsx(Ii,{})})}),e.jsx(de,{path:"/galeriadev2",element:e.jsx(me,{children:e.jsx(Di,{})})}),e.jsx(de,{path:"/csv",element:e.jsx(me,{children:e.jsx(Oa,{})})}),e.jsx(de,{path:"/panelcontrol",element:e.jsx(me,{children:e.jsx(jt,{})})}),e.jsx(de,{path:"/panelcontrol10bis",element:e.jsx(me,{children:e.jsx(ti,{})})}),e.jsx(de,{path:"/validar10bis",element:e.jsx(me,{children:e.jsx(Li,{})})}),e.jsx(de,{path:"/galley",element:e.jsx(me,{children:e.jsx(ci,{})})}),e.jsx(de,{path:"/nododenuncia",element:e.jsx(me,{children:e.jsx(wt,{})})}),e.jsx(de,{path:"/10bis",element:e.jsx(me,{children:e.jsx(Ua,{})})}),e.jsx(de,{path:"/10bisout",element:e.jsx(me,{children:e.jsx(kt,{})})}),e.jsx(de,{path:"*",element:e.jsx(pa,{})})]})})})});na(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(Ri,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(a=>{console.log("Service Worker registrado con éxito:",a)}).catch(a=>{console.log("Error al registrar el Service Worker:",a)})});
