import{i as Xs,g as Is,a as Ks,r as a,o as ea,j as e,c as sa,s as Ms,G as Ls,b as Rs,u as zs,d as aa,L as Fe,N as ta,P as Ze,e as H,f as qe,h as ge,k as K,q as Ce,w as Ie,l as Ee,m as Me,n as be,p as Le,t as O,v as ke,x as re,y as Ae,z as _e,A as Pe,B as xe,C as fe,D as es,E as ss,F as as,H as ts,I as $s,J as is,K as rs,M as Ts,O as ls,Q as ns,S as Bs,R as os,T as Ge,U as cs,V as ds,W as Re,X as ia,Y as Ns,Z as ra,_ as la,$ as ue,a0 as na}from"./vendor-CBz41kXd.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();const oa={apiKey:"AIzaSyDtO6GisGJP6gtbtTz3Gmdz0cGyp-id46w",authDomain:"tics-cc-2024.firebaseapp.com",projectId:"tics-cc-2024",storageBucket:"tics-cc-2024.appspot.com",messagingSenderId:"345093255804",appId:"1:345093255804:web:9c763d8852934fef7a8ff9"},ms=Xs(oa),Ve=Is(ms),P=Ks(ms),He=a.createContext(),ca=({children:s})=>{const[r,t]=a.useState(null),[o,i]=a.useState(!0);return a.useEffect(()=>{const l=localStorage.getItem("user");l&&(t(JSON.parse(l)),i(!1));const n=ea(Ve,c=>{if(c){const p={email:c.email};localStorage.setItem("user",JSON.stringify(p)),t(p)}else localStorage.removeItem("user"),t(null);i(!1)});return()=>n()},[]),e.jsx(He.Provider,{value:{currentUser:r,loading:o},children:s})},da=()=>a.useContext(He),ee=({leyendaSet:s="Cx2"})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"spinner-overlay d-flex flex-column justify-content-center align-items-center",children:[e.jsx("p",{className:"text-white display-4 mb-4",children:s}),e.jsxs("div",{className:"loader-bars",children:[e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]})]})});function ma({setIsLogin:s}){const r=Is(ms),[t,o]=a.useState(""),[i,l]=a.useState(!1),[n,c]=a.useState(""),[p,b]=a.useState("");function u(h){const m=["gmail.com","hotmail.com","outlook.com","live.com","msn.com","santafe.gov.ar"],f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,C=h.split("@")[1];return f.test(h)&&m.includes(C)}function g(h){return h.length>=6}async function j(h){if(h.preventDefault(),!u(n)){o("Por favor, utiliza un correo válido de Gmail o Microsoft (Outlook, Hotmail, Live, Santa fe ).");return}if(!g(p)){o("La contraseña debe tener al menos 6 caracteres.");return}l(!0);try{const f=(await sa(r,n,p)).user;console.log("Registro exitoso:",f),alert("Registro exitoso"),c(""),b(""),o(""),await Ms(r),console.log("Sesión cerrada después del registro."),s(!0)}catch(m){x(m)}finally{l(!1)}}function x(h){switch(h.code){case"auth/email-already-in-use":o("La dirección de correo electrónico ya está en uso.");break;case"auth/invalid-email":o("Tu dirección de correo electrónico no es válida.");break;case"auth/weak-password":o("Tu contraseña es muy débil - debe tener al menos 6 caracteres.");break;default:o("Oooops, algo salió mal :(")}}const d=async()=>{l(!0);const h=new Ls;try{const f=(await Rs(r,h)).user;alert(`Inicio de sesión con Google exitoso. Bienvenido ${f.displayName||f.email}`),navigate("/dashboard")}catch(m){console.error("Error al iniciar sesión con Google:",m),o("No se pudo iniciar sesión con Google.")}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:j,className:"form-container  my-2",action:"#!",id:"registerForm",children:[i&&e.jsx(ee,{}),e.jsxs("div",{className:"row gy-3 gy-md-4 my-4",children:[e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"registerEmail",className:"form-label text-capitalize",children:["Ingresa tu correo electrónico ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",id:"registerEmail",name:"email",className:"form-control",value:n,onChange:h=>c(h.target.value),autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"registerPassword",className:"form-label text-capitalize",children:["Ingresa tu Contraseña ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"password",id:"registerPassword",name:"password",className:"form-control text-capitalize",value:p,onChange:h=>b(h.target.value),autoComplete:"off",required:!0})]}),e.jsx("div",{className:"col-12 text-center",children:t&&e.jsx("span",{className:"error text-danger",role:"alert","aria-live":"assertive",children:t})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"d-grid",children:e.jsx("button",{className:"btn btn-purpleUi fw-semibold fs-6 rounded-3 shadow",type:"submit",id:"submitBtnRegistrar",disabled:i,children:"Registrar usuario"})})})]})]}),e.jsxs("div",{className:"col-12 mb-5",children:[e.jsx("hr",{className:"border-purple border-2 rounded-3"}),e.jsxs("div",{className:"d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-center",children:[e.jsx("button",{type:"button",className:"btn bg-secondaryMuiRed bg-opacity-75 fs-6 rounded-3 shadow-sm text-light",onClick:()=>s(!0),children:"Regresar"}),e.jsx("button",{type:"button",className:"btn bg-dark bg-opacity-50 fs-6 rounded-3 text-light ",onClick:d,children:"Iniciar sesión con Google"})]})]})]})}function ua({setIsLogin:s}){const{currentUser:r,loading:t}=a.useContext(He),o=zs(),[i,l]=a.useState(""),[n,c]=a.useState(""),[p,b]=a.useState(""),[u,g]=a.useState(!1);a.useEffect(()=>{r&&setTimeout(()=>{o("/dashboard")},1e3)},[r,o]);const j=async m=>{if(m.preventDefault(),!i||!n){b("Por favor, complete todos los campos.");return}if(!x(i)){b("Por favor, ingrese un correo electrónico válido.");return}if(n.length<6){b("La contraseña debe tener al menos 6 caracteres.");return}g(!0);try{const C=(await aa(Ve,i,n)).user;alert(`Inicio de sesión exitoso. Bienvenido ${C.email}`)}catch(f){d(f)}finally{g(!1)}};function x(m){const f=["gmail.com","hotmail.com","outlook.com","live.com","msn.com","santafe.gov.ar"],C=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,v=m.split("@")[1];return C.test(m)&&f.includes(v)}const d=m=>{switch(m.code){case"auth/wrong-password":b("La contraseña es incorrecta.");break;case"auth/user-not-found":b("No hay usuario registrado con este correo.");break;case"auth/invalid-email":b("El correo electrónico no es válido.");break;default:b("Oooops, algo salió mal :(")}},h=async()=>{g(!0);const m=new Ls;try{const C=(await Rs(Ve,m)).user;alert(`Inicio de sesión con Google exitoso. Bienvenido ${C.displayName||C.email}`),o("/dashboard")}catch(f){console.error("Error al iniciar sesión con Google:",f),b("No se pudo iniciar sesión con Google.")}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:j,className:"form-container  my-4",children:[u&&e.jsx(ee,{leyendaSet:"Cx2"}),e.jsxs("div",{className:"row gy-3 gy-md-4 my-1",children:[e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"username",className:"form-label text-capitalize",children:["Usuario ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",id:"username",className:"form-control",name:"username",value:i,onChange:m=>l(m.target.value),autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"password",className:"form-label",children:["Contraseña ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"password",id:"password",className:"form-control",name:"password",value:n,onChange:m=>c(m.target.value),autoComplete:"off",required:!0})]}),e.jsx("div",{className:"col-12 text-center",children:p&&e.jsx("span",{className:"error text-danger",role:"alert","aria-live":"assertive",children:p})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"d-grid",children:e.jsx("button",{className:"btn btn-purpleUi fw-semibold fs-6 rounded-3 shadow ",type:"submit",disabled:u,children:u?"Cargando...":"Iniciar sesión"})})})]})]}),e.jsxs("div",{className:"col-12 mb-5",children:[e.jsx("hr",{className:" border-purple border-2 rounded-3"}),e.jsxs("div",{className:"d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-center",children:[e.jsx("button",{type:"button",className:"btn bg-primary bg-opacity-75 fs-6 rounded-3 shadow-sm text-light",onClick:()=>s(!1),children:"Crear Cuenta"}),e.jsxs("button",{type:"button",className:"btn bg-dark bg-opacity-50 fs-6 rounded-3 text-light ",onClick:h,children:["Iniciar sesión con Google ",e.jsx("i",{className:"bi bi-google text-ligt mx-1"})]})]})]})]})}const ha=()=>{const[s,r]=a.useState(!0);return e.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:e.jsx("div",{className:"container px-2",children:e.jsx("div",{className:"card border-1 border-secondary shadow-sm rounded-4 overflow-hidden",children:e.jsxs("div",{className:"row ",children:[e.jsx("div",{className:"col-12 col-md-6 gradient-login p-4 d-flex align-items-center justify-content-center flex-column position-relative",children:e.jsxs("div",{className:"text-center animate__animated animate__fadeInDown",children:[e.jsx("div",{className:"d-flex justify-content-center d-none d-md-flex ",children:e.jsx("div",{className:"phone-frame bg-black rounded-4 p-2 shadow",children:e.jsxs("div",{className:"bg-white rounded-4 d-flex flex-column align-items-center pt-4 position-relative",style:{height:"100%"},children:[e.jsx("div",{className:"rounded-circle bg-gradiante2 d-flex align-items-center justify-content-center text-white fw-bold fs-3",style:{width:"80px",height:"80px"},children:e.jsx("span",{className:"shake fs-1  ",children:"🔍"})}),e.jsx("div",{className:"mt-1 fw-semibold text-dark",children:"Iniciar App"}),e.jsx("div",{className:"card text-center shadow-sm border-0 mt-5",style:{width:"14rem",borderRadius:"1rem"},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-2 p-2 text-light bg-indigo bg-opacity-75 rounded-4 shadow",style:{fontSize:"1.5rem"},children:["Cx2 App ",e.jsx("span",{className:"titilar",children:"_"})]}),e.jsx("p",{className:"card-text text-muted",style:{fontSize:"0.75rem"},children:"Direccion General OJO UR II"})]})}),e.jsxs("div",{className:"position-absolute text-center text-muted",style:{bottom:"40px",padding:"0 1rem",fontSize:"0.75rem"},children:[e.jsx("img",{className:"pt-3 my-1",loading:"lazy",src:"/img/logo-login-2024.png",width:"85",height:"45",alt:"Marca fondo blanco"}),e.jsx("div",{style:{fontSize:"0.65rem"},children:'"La seguridad se construye con datos."'})]})]})})}),e.jsxs("div",{className:"d-none d-md-block",children:[e.jsx("p",{className:"text-center fs-6 animate__animated animate__fadeIn text-light mb-1 mt-3",children:e.jsx("span",{children:"Policía de la Provincia de Santa Fe"})}),e.jsxs("div",{className:"text-center text-light small mb-2",children:[e.jsx("small",{children:"Versión: 1.0.0"})," | ",e.jsx("small",{children:"Fecha: 20/05/2025"})," | ",e.jsx("small",{children:"Desktop"})]})]}),e.jsxs("div",{className:"d-block d-md-none text-center text-light mt-3 mb-2",children:[e.jsxs("h1",{className:"fw-bold display-1 p-3 text-light bg-dark bg-opacity-50 rounded-4 shadow",children:[" Cx2  ",e.jsx("span",{className:"titilar",children:" _"})]}),e.jsxs("div",{className:"text-center text-light small mb-2",children:[e.jsx("small",{children:"Versión: 1.0.0"})," | ",e.jsx("small",{children:"Fecha: 20/05/2025"})," | ",e.jsx("small",{children:"Movil"})]})]})]})}),e.jsx("div",{className:"col-12  col-md-6 bg-white",children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center h-100 w-100 w-md-75 mx-auto px-3 mt-4 mt-md-5",children:[e.jsx("h2",{className:"text-center fw-bold ",children:s?"Iniciar Sesión":"Crear Cuenta"}),s?e.jsx(ua,{setIsLogin:r}):e.jsx(ma,{setIsLogin:r})]})})]})})})})};function xa(){return e.jsx("div",{id:"loginShowDivId",className:"d-flex justify-content-center align-items-center h-100",style:{minHeight:"100vh"},children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"login-rectangulo w-100",children:e.jsxs("div",{className:"login-texto-p p-5",children:[e.jsx("p",{className:"login-texto-p-parrafo1 lh-1 pt-5 text-white m-0",children:"Santa Fe"}),e.jsx("p",{className:"login-texto-p-parrafo2 lh-1 text-white m-0",children:"Provincia"})]})})})})}const ba=()=>{const[s,r]=a.useState(!0);return a.useEffect(()=>{const t=setTimeout(()=>{r(!1)},3e3);return()=>clearTimeout(t)},[]),e.jsx(e.Fragment,{children:s?e.jsx(xa,{}):e.jsx("div",{className:"container-lg",id:"homeContainer",children:e.jsx(ha,{})})})},pa=()=>e.jsx("div",{className:"bg-primary Gradiante25 min-vh-100 d-flex justify-content-center align-items-center text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("h1",{className:"display-4 fw-bold",children:"Bienvenido a Santa Fe"}),e.jsx("p",{className:"lead",children:"Descubrí todo lo que nuestra provincia tiene para ofrecer, ¡explorá nuestras funcionalidades y novedades!"}),e.jsx(Fe,{to:"/about",className:"btn btn-outline-light mt-3",children:"Saber más"})]})}),je=({children:s})=>{const{currentUser:r,loading:t}=da();return t?e.jsx(ee,{}):r?s:e.jsx(ta,{to:"/"})},ga=()=>e.jsx("div",{className:"container-fluid d-flex align-items-center justify-content-center text-center py-5 bg-white",style:{height:"100vh"},children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-capitalize text-secondary fs-1 fw-semibold",children:"Error 404"}),e.jsx("h5",{className:"text-capitalize text-secondary",children:"La página solicitada no funciona"}),e.jsx("img",{src:"/gif/dribbble_1.gif",alt:"error",className:"img-fluid my-3",style:{maxHeight:"700px"}})]})}),pe=({data1:s,data2:r,data3:t})=>{const o=s||"© 2025 Tics | Dg OJO",i=r||"Cx2",l=t||"Policía de Santa Fe";return e.jsx("div",{className:"container-lg text-center py-5",children:e.jsxs("footer",{className:"d-flex flex-wrap justify-content-between align-items-center pt-3 border-top",children:[e.jsx("p",{className:"col-md-4 mb-0 text-white",children:o}),e.jsx("a",{href:"/",className:"col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto text-decoration-none d-none d-md-block","aria-label":"Inicio",children:e.jsx("img",{className:"opacity-50",src:"/img/Escudo Pol SF Color Original_BN.png",width:"35",height:"32",alt:"Escudo Policía Santa Fe"})}),e.jsx("ul",{className:"nav col-md-4 justify-content-center text-light",children:e.jsxs("li",{className:"nav-item",children:[e.jsx("strong",{children:i})," / ",e.jsx("strong",{children:l})]})})]})})};pe.propTypes={data1:Ze.string,data2:Ze.string,data3:Ze.string};const ja={nombre:"Santa Fe Tema",valor:"linear-gradient(45deg, #ec4899, #8b5cf6, #0d6efd)",tipo:"gradiente"},fa=[{nombre:"🎨 Santa Fe Theme",valor:"linear-gradient(45deg, #ec4899, #8b5cf6, #0d6efd)"},{nombre:"🎨 Santa Fe Theme 2",valor:"linear-gradient(135deg, #ec4899, #8b5cf6)"},{nombre:"🎨 Santa Fe Theme 3",valor:"linear-gradient(45deg, #ec4899, #8b5cf6,rgba(0, 204, 255, 0.7), #0d6efd)"},{nombre:"🪵 Rustic Tones",valor:"linear-gradient(135deg, #c79081 0%, #dfa579 100%)"},{nombre:"🦄 Unicorn Light",valor:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)"},{nombre:"☀️ Amanecer",valor:"linear-gradient(135deg, #f6d365, #fda085)"},{nombre:"🌌 Noche Estrellada",valor:"linear-gradient(135deg, #2c3e50, #4ca1af)"},{nombre:"🌿 Bosque Vivo",valor:"linear-gradient(135deg, #56ab2f, #a8e063)"},{nombre:"🔥 Fuego Solar",valor:"linear-gradient(135deg, #ff416c, #ff4b2b)"},{nombre:"💧 Azul Oceánico",valor:"linear-gradient(135deg, #2193b0, #6dd5ed)"},{nombre:"🌇 Atardecer",valor:"linear-gradient(135deg, #e96443, #904e95)"},{nombre:"🌈 Prisma",valor:"linear-gradient(135deg, #f953c6, #b91d73)"},{nombre:"🧊 Hielo Azul",valor:"linear-gradient(135deg, #83a4d4, #b6fbff)"},{nombre:"☕ Café Tostado",valor:"linear-gradient(135deg, #b79891, #94716b)"},{nombre:"🌻 Campo Amarillo",valor:"linear-gradient(135deg, #f7971e, #ffd200)"},{nombre:"🌪 Tormenta Gris",valor:"linear-gradient(135deg, #bdc3c7, #2c3e50)"},{nombre:"🌸 Flor de Cerezo",valor:"linear-gradient(135deg, #fbc2eb, #a6c1ee)"},{nombre:"🌊 Costa Brava",valor:"linear-gradient(135deg, #00c6ff, #0072ff)"},{nombre:"🍂 Otoño Cálido",valor:"linear-gradient(135deg, #d38312, #a83279)"},{nombre:"🪐 Galaxia",valor:"linear-gradient(135deg, #654ea3, #eaafc8)"},{nombre:"🌟 Estrella Dorada",valor:"linear-gradient(135deg, #f6d365, #fda085)"},{nombre:"🏔 Rocas Frías",valor:"linear-gradient(135deg, #e0eafc, #cfdef3)"},{nombre:"🎆 Noche Festiva",valor:"linear-gradient(135deg, #fc466b, #3f5efb)"},{nombre:"🍃 Naturaleza",valor:"linear-gradient(135deg, #11998e, #38ef7d)"},{nombre:"💦 Celeste Aqua",valor:"#16B1FF"},{nombre:"🔮 Violeta Mágico",valor:"#8C57FF"},{nombre:"🍊 Naranja Fuego",valor:"#ff8f00"},{nombre:"🍇 Púrpura Uva",valor:"#7e57c2"},{nombre:"💙 Azul Profundo",valor:"#3c3ae5"},{nombre:"🌿 Verde Menta",valor:"#03dac6"},{nombre:"🍵 Verde Té",valor:"#20c997"},{nombre:"🧪 Verde Neón",valor:"#05F2D4"},{nombre:"🚨 Rojo Alerta",valor:"#f50057"},{nombre:"🪨 Gris Urbano",valor:"#757575"},{nombre:"🌫️ Gris Niebla",valor:"#f9f9f983"},{nombre:"🌌 Negro Noche",valor:"#212121"}],ve=({setThemeBackgroundColor:s})=>{const[r,t]=a.useState(!1),[o,i]=a.useState(()=>localStorage.getItem("theme")==="dark"),[l,n]=a.useState(()=>localStorage.getItem("bgColor")||ja.valor),c=b=>{t(!0),i(b==="dark"),localStorage.setItem("theme",b),setTimeout(()=>t(!1),500)},p=b=>{n(b),s(b),localStorage.setItem("bgColor",b)};return a.useEffect(()=>{const b=o?"dark":"light";document.body.setAttribute("data-bs-theme",b)},[o]),a.useEffect(()=>{s(l)},[l,s]),e.jsxs("div",{children:[r&&e.jsx(ee,{}),e.jsxs("div",{className:"dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle",children:[e.jsxs("button",{className:"btn btn-greenUi py-2 dropdown-toggle d-flex align-items-center rounded-4",id:"bd-theme",type:"button","aria-expanded":"false","data-bs-toggle":"dropdown","aria-label":"Toggle theme",children:[e.jsx("i",{className:o?"bi bi-moon-stars-fill":"bi bi-brightness-high-fill"}),e.jsx("span",{className:"visually-hidden",id:"bd-theme-text",children:"Toggle theme"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end shadow","aria-labelledby":"bd-theme-text",children:[e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${o?"":"active"}`,onClick:()=>c("light"),children:[e.jsx("i",{className:"bi bi-brightness-high-fill me-2 opacity-50"}),"Modo Luz"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${o?"active":""}`,onClick:()=>c("dark"),children:[e.jsx("i",{className:"bi bi-moon-stars-fill me-2 opacity-50"}),"Modo Nocturno"]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("li",{className:"px-3",children:e.jsx("div",{className:"d-flex flex-wrap gap-2",children:fa.map(({nombre:b,valor:u})=>e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>p(u),className:"rounded-circle border-0",style:{background:u,width:"24px",height:"24px",outline:u===l?"2px solid white":"none",cursor:"pointer"},title:b,"aria-label":b})},b))})})]})]})]})},ye=({Promp:s,Promp2:r})=>e.jsx("div",{className:"col-12 d-none d-md-flex justify-content-center align-items-center ",children:e.jsx("div",{className:"w-75 text-white",children:e.jsx("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:s}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:r})})]})})})}),vs=()=>{const{currentUser:s}=a.useContext(He),r=zs(),[t,o]=a.useState(!1),i=async()=>{try{await Ms(Ve),r("/")}catch(n){console.error("Error al cerrar sesión:",n)}},l=()=>{o(!1)};return s&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:n=>{n.stopPropagation(),o(!0)},className:"btn text-secondaryMuiRed fw-semibold",children:[e.jsx("i",{className:"bi bi-box-arrow-right me-2 text-danger "})," Cerrar Sesión"]}),e.jsx("div",{className:`modal bg-dark fade ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:"-1","aria-labelledby":"logoutModalLabel","aria-hidden":!t,children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content   border border-white",children:[e.jsxs("div",{className:"modal-header bg-gradiante2 ",children:[e.jsx("h5",{className:"modal-title text-white  ",id:"logoutModalLabel",children:"Confirmar Cierre de Sesión"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:l,"aria-label":"Close"})]}),e.jsx("div",{className:"modal-body text-center  fw-semibold text-uppercase lh-lg",children:"¿Está seguro de que desea cerrar sesión?"}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-purpleUi ",onClick:()=>{i(),l()},children:"Cerrar Sesión"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})};function Ye(){const[s,r]=a.useState(0),[t,o]=a.useState(()=>{const i=localStorage.getItem("leidas");return i?JSON.parse(i):{}});return a.useEffect(()=>{const i=H(P,"db_notificaciones"),l=qe(i,n=>{const p=n.docs.map(b=>({id:b.id,...b.data()})).filter(b=>!t[b.id]);r(p.length)});return()=>l()},[t]),s===0?null:e.jsx(e.Fragment,{children:s>99?"99+":s})}const Ne=()=>{var o;const r=(()=>{const i=localStorage.getItem("user");return i?JSON.parse(i):null})(),t=((o=r==null?void 0:r.email)==null?void 0:o.split("@")[0])||"Usuario Sin Registro";return e.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-transparent position-sticky top-0 top-0 w-100 z-3",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx(Fe,{className:"navbar-brand fw-bold text-white",to:"/dashboard",children:e.jsx("img",{src:"/img/marca-fondo-blanco-2024.png",height:"30",width:"100",alt:"Logo",className:"m-1"})}),e.jsx("div",{className:"position-relative",children:e.jsxs("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:[e.jsx("span",{className:"navbar-toggler-icon"}),e.jsx("span",{className:"position-absolute top-0 start-90 mt-1 translate-middle badge rounded-pill bg-danger",children:e.jsx(Ye,{})})]})}),e.jsxs("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[e.jsxs("ul",{className:"navbar-nav ms-auto d-none d-md-flex flex-row flex-wrap justify-content-end w-100",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("div",{className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-person-circle me-2"}),t]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ge,{to:"/notificaciones",className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-megaphone-fill me-2"}),e.jsx("span",{className:"position-absolute top-1 start-75 translate-middle badge rounded-pill bg-danger",children:e.jsx(Ye,{})})]})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link dropdown-toggle text-white",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx("i",{className:"bi bi-grid-fill me-2 ms-2"}),e.jsx("span",{className:"d-none d-md-inline",children:"Más"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end text-center mb-3 shadow border-0",children:[e.jsxs(ge,{to:"/FormularioPageDev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Personas"})]}),e.jsxs(ge,{to:"/Formulariovehiculo",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Vehiculos"})]}),e.jsxs(ge,{to:"/Formulariobuscados",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Buscados SF"})]}),e.jsxs(ge,{to:"/informes",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-braces-asterisk me-2 textG2"}),e.jsx("span",{children:"Noticias"}),e.jsx("span",{className:"badge text-bg-primary mx-1 text-white",children:"Crear"})]}),e.jsxs(ge,{to:"/panelcontrol10dev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-file-earmark-lock2-fill me-2 textG2"}),e.jsx("span",{children:"10 bis"}),e.jsx("span",{className:"badge text-bg-secondaryM mx-1 text-white",children:"Panel"})]}),e.jsxs(ge,{to:"/panelcontroldev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-camera-fill me-2 textG2"}),e.jsx("span",{children:"Capturas "}),e.jsx("span",{className:"badge text-bg-indigoMui text-white",children:"Panel"})]}),e.jsxs(ge,{to:"/panelcontrolvehiculos",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-car-front-fill me-2 textG2"}),e.jsx("span",{children:"Vehiculos "}),e.jsx("span",{className:"badge text-bg-pink text-white",children:"Panel"})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider bg-indigo "})}),e.jsx("li",{children:e.jsx(vs,{})})]})]})]}),e.jsxs("ul",{className:"navbar-nav ms-auto d-flex d-md-none flex-row flex-wrap justify-content-between w-100",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("div",{className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-person-fill me-2"}),t]})}),e.jsx("li",{className:"nav-item",children:e.jsx(ge,{to:"/dashboard",className:"nav-link text-white",children:e.jsx("i",{className:"bi bi-house-door-fill me-2"})})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ge,{to:"/notificaciones",className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-megaphone-fill me-2"}),e.jsx("span",{className:"position-absolute top-1 start-75 translate-middle badge rounded-pill bg-danger",children:e.jsx(Ye,{})})]})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link dropdown-toggle text-white",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx("i",{className:"bi bi-grid-fill me-2 ms-2"}),e.jsx("span",{className:"d-none d-md-inline",children:"Más"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end text-center mb-3 shadow border-0",children:[e.jsxs(ge,{to:"/FormularioPageDev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Personas"})]}),e.jsxs(ge,{to:"/Formulariovehiculo",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Vehiculos"})]}),e.jsxs(ge,{to:"/Formulariobuscados",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Buscados SF"})]}),e.jsxs(ge,{to:"/informes",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-braces-asterisk me-2 textG2"}),e.jsx("span",{children:"Noticias"}),e.jsx("span",{className:"badge text-bg-primary mx-1 text-white",children:"Crear"})]}),e.jsxs(ge,{to:"/panelcontrol10dev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-file-earmark-lock2-fill me-2 textG2"}),e.jsx("span",{children:"10 bis"}),e.jsx("span",{className:"badge text-bg-secondaryM mx-1 text-white",children:"Panel"})]}),e.jsxs(ge,{to:"/panelcontroldev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-camera-fill me-2 textG2"}),e.jsx("span",{children:"Capturas "}),e.jsx("span",{className:"badge text-bg-indigoMui text-white",children:"Panel"})]}),e.jsxs(ge,{to:"/panelcontrolvehiculos",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-car-front-fill me-2 textG2"}),e.jsx("span",{children:"Vehiculos "}),e.jsx("span",{className:"badge text-bg-pink text-white",children:"Panel"})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider bg-indigo "})}),e.jsx("li",{children:e.jsx(vs,{})})]})]})]})]})]})})},Na=({toggleRendimiento:s})=>{const[r,t]=a.useState({personalEntrega:[],salidasArtUsuarioMap:[]});a.useEffect(()=>{(async()=>{const n=(await K(H(P,"db_art_diez_bis_desactivados"))).docs.map(c=>c.data());o(n)})()},[]);const o=i=>{const l={},n={};i.forEach(b=>{b.personal_entrega.forEach(u=>{const g=u.nombre.split(" ")[0],j=`${u.ni} - ${g}`;l[j]=(l[j]||0)+1}),b.salida_art_usuario&&(n[b.salida_art_usuario]=(n[b.salida_art_usuario]||0)+1)});const c=Object.entries(l).map(([b,u])=>({key:b,value:u})).sort((b,u)=>u.value-b.value),p=Object.entries(n).map(([b,u])=>({usuario:b,cantidad:u})).sort((b,u)=>u.cantidad-b.cantidad);t({personalEntrega:c,salidasArtUsuarioMap:p})};return e.jsxs("div",{className:"container  ",children:[e.jsx("div",{className:"modal-header border border-0 ",children:e.jsx("button",{type:"button",className:"btn-close bg-white my-2",onClick:s})}),e.jsxs("div",{className:"card bg-transparent border-1 p-3  border-5",children:[e.jsxs("h5",{className:"card-title text-center  bg-gradiante2  text-white rounded p-2 m-2",children:["Rendimiento en  Entrega ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsx("div",{className:"card-body  ",children:e.jsxs("table",{className:"table table-striped text-center table-primary  ",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Posición"}),e.jsx("th",{scope:"col ",children:"Personal"}),e.jsx("th",{scope:"col",children:"Distinción"})]})}),e.jsx("tbody",{children:r.personalEntrega.length>0?r.personalEntrega.map(({key:i,value:l},n)=>e.jsxs("tr",{className:n===0?"table-warning":"",children:[e.jsx("td",{children:n===0?"👑 1":n===1?"🥈 2":n===2?"🥉 3":n+1}),e.jsx("td",{children:i}),e.jsx("td",{children:n===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):n===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):n===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},i)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay datos disponibles"})})})]})})]})]})},va=({notif:s})=>e.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center my-2 py-3 shadow",children:[e.jsxs("div",{children:[e.jsx("i",{className:"bi bi-person-arms-up me-3 text-primary"}),e.jsx("strong",{children:s.nombre_apellido||"Nombre desconocido"}),e.jsxs("span",{children:[" - ",s.dni||"DNI no disponible"]})]}),e.jsx("span",{className:"badge bg-primary",children:s.comisaria||"Sin fecha"})]}),ya=({toggleBusqueda:s})=>{const[r,t]=a.useState([]),[o,i]=a.useState([]),[l,n]=a.useState(""),[c,p]=a.useState(!1),b=async()=>{try{p(!0);const g=Ce(H(P,"db_art_diez_bis"),Ie("visualidad","==",!0)),x=(await K(g)).docs.map(d=>({id:d.id,...d.data()}));t(x),i(x)}catch(g){console.error("Error al obtener las notificaciones: ",g)}finally{p(!1)}};a.useEffect(()=>{b()},[]),a.useEffect(()=>{const g=r.filter(j=>j.nombre_apellido&&j.nombre_apellido.toLowerCase().includes(l.toLowerCase())||j.dni&&j.dni.toString().includes(l));i(g)},[l,r]);const u=()=>{n("")};return e.jsxs("div",{className:"container ",children:[e.jsx("div",{className:"modal-header border border-0 ",children:e.jsx("button",{type:"button",className:"btn-close bg-white my-2",onClick:s})}),e.jsxs("div",{className:"card bg-transparent border-1 p-3 border-5",children:[e.jsxs("h5",{className:"card-title text-center bg-gradiante2 text-white rounded p-2 m-2",style:{backdropFilter:"blur(5px)",backgroundColor:"rgba(0,0,0,0.4)"},children:["Buscar Persona ",e.jsx("i",{className:"ms-2 bi bi-search"})]}),e.jsxs("div",{className:"input-group my-4",children:[e.jsx("span",{className:"input-group-text bg-indigoMui ",children:e.jsx("i",{className:"bi bi-search text-white "})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar por DNI o nombre...",value:l,onChange:g=>n(g.target.value)}),l&&e.jsx("button",{className:"btn btn-outline-pink bg-secondaryMuiRed",onClick:u,"aria-label":"Limpiar búsqueda",children:e.jsx("i",{className:"bi bi-trash3-fill text-white"})})]}),c?e.jsx("div",{className:"text-center my-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsx("ul",{className:"list-group",children:o.length>0?o.map(g=>e.jsx(va,{notif:g},g.id)):e.jsx("li",{className:"list-group-item text-center text-danger p-4",children:l?`No se encontraron resultados para "${l}"`:"No hay personas disponibles"})})]})]})},wa=({togglePlazas:s})=>{const[r,t]=a.useState([]),[o,i]=a.useState([]),[l,n]=a.useState([]),[c,p]=a.useState("nombre"),b=async()=>{try{const m=(await K(H(P,"db_comisarias"))).docs.map(f=>({id:f.id,...f.data()})).filter(f=>f.disponibilidad===!0);t(m)}catch(h){console.error("Error al obtener las comisarías: ",h)}},u=async()=>{try{const m=(await K(H(P,"db_art_diez_bis"))).docs.map(v=>({id:v.id,...v.data()})),f=m.filter(v=>v.visualidad===!0&&v.comisaria_recibe===!0),C=m.filter(v=>v.visualidad===!1&&v.comisaria_recibe===!1);i(f),n(C)}catch(h){console.error("Error al obtener las notificaciones: ",h)}};a.useEffect(()=>{b(),u()},[]);const g=o.reduce((h,m)=>{const f=m.comisaria;return f&&(h[f]=(h[f]||0)+1),h},{}),j=l.reduce((h,m)=>{const f=m.comisaria;return f&&(h[f]=(h[f]||0)+1),h},{}),x=h=>{const m=r.find(f=>f.comisaria===h);if(m){const f=m.plazas_art_10_bis||0;return(g[h]||0)>=f?{estado:"Llena",clase:"badge bg-danger"}:{estado:"Disponible",clase:"badge bg-info"}}return{estado:"Desconocido",clase:"badge bg-secondary"}},d=()=>c==="nombre"?[...r].sort((h,m)=>h.comisaria.localeCompare(m.comisaria)):c==="plaza"?[...r].sort((h,m)=>(m.plazas_art_10_bis||0)-(h.plazas_art_10_bis||0)):r;return e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"modal-header border border-0 ",children:e.jsx("button",{type:"button",className:"btn-close bg-white my-2",onClick:s})}),e.jsxs("div",{className:"card bg-transparent border-1 p-3  border-5",children:[e.jsxs("h5",{className:"card-title text-center  bg-gradiante2  text-white rounded p-2 m-2",children:["Plazas Art 10 Bis ",e.jsx("i",{className:"ms-2 bi bi-shield-lock"})]}),e.jsxs("div",{className:"form-floating my-3",children:[e.jsxs("select",{className:"form-select",id:"filtroOrden",value:c,onChange:h=>p(h.target.value),"aria-label":"Ordenar por",children:[e.jsx("option",{value:"nombre",children:"Nombre (A-Z)"}),e.jsx("option",{value:"plaza",children:"Plazas Disponibles"})]}),e.jsx("label",{htmlFor:"filtroOrden",children:"Ordenar por"})]}),e.jsx("div",{className:"list-group",children:d().map(h=>{const{estado:m,clase:f}=x(h.comisaria),C=g[h.comisaria]||0,v=j[h.comisaria]||0;return e.jsx("div",{className:"list-group-item mb-3 shadow  ",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center ",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary",style:{fontSize:"1.5rem"}}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-capitalize",children:h.comisaria}),e.jsxs("div",{children:[e.jsx("small",{className:f,children:`${C} / ${h.plazas_art_10_bis||0} Plazas - ${m}`}),e.jsx("div",{children:e.jsx("small",{className:"badge bg-primary",children:`${v} Pendientes ( Por Validar )`})})]})]})]})},h.comisaria)})})]})]})},Ca=({notif:s})=>e.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center my-2 py-3 shadow",children:[e.jsxs("div",{children:[e.jsx("i",{className:"bi bi-person-arms-up me-3 text-primary"}),e.jsx("strong",{children:s.nombre_apellido||"Nombre desconocido"}),e.jsxs("span",{children:[" - ",s.dni||"DNI no disponible"]})]}),e.jsx("span",{className:"badge bg-primary",children:s.comisaria||"Sin fecha"})]}),Sa=({toggleBusqueda:s})=>{const[r,t]=a.useState([]),[o,i]=a.useState([]),[l,n]=a.useState(""),[c,p]=a.useState(!1),b=async()=>{try{p(!0);const g=Ce(H(P,"db_art_diez_bis"),Ie("visualidad","==",!0)),x=(await K(g)).docs.map(d=>({id:d.id,...d.data()}));t(x),i(x)}catch(g){console.error("Error al obtener las notificaciones: ",g)}finally{p(!1)}};a.useEffect(()=>{b()},[]),a.useEffect(()=>{const g=r.filter(j=>j.nombre_apellido&&j.nombre_apellido.toLowerCase().includes(l.toLowerCase())||j.dni&&j.dni.toString().includes(l));i(g)},[l,r]);const u=()=>{n("")};return e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"modal-header border border-0 m-0",children:e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:s})}),e.jsxs("h5",{className:"text-center  bg-primary text-white rounded p-2",children:["Ingreso Articulo 10 Bis ",e.jsx("i",{className:"ms-2 bi bi-search"})]}),e.jsxs("div",{className:"input-group mb-4",children:[e.jsx("span",{className:"input-group-text bg-blueW",children:e.jsx("i",{className:"bi bi-search text-primary "})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar por DNI o nombre...",value:l,onChange:g=>n(g.target.value)}),l&&e.jsx("button",{className:"btn btn-outline-pink bg-secondaryMuiRed",onClick:u,"aria-label":"Limpiar búsqueda",children:e.jsx("i",{className:"bi bi-trash3-fill text-white"})})]}),c?e.jsx("div",{className:"text-center my-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsx("ul",{className:"list-group",children:o.length>0?o.map(g=>e.jsx(Ca,{notif:g},g.id)):e.jsx("li",{className:"list-group-item text-center text-danger",children:l?`No se encontraron resultados para "${l}"`:"No hay notificaciones disponibles"})})]})},ka=({comisariaSeleccionada:s,cantidadDemorados:r,close:t,closeModalRaiz:o})=>{const i=["CRE Rosario","CRE Baigorria","BOU","BOP","AUOP","MOTORIZADA","CGI","PAT","CYP","VIAL","PUMAS","OTROS"],[l,n]=a.useState("Rosario"),[c,p]=a.useState(s),[b,u]=a.useState(""),[g,j]=a.useState(""),[x,d]=a.useState(""),[h,m]=a.useState(""),[f,C]=a.useState(""),[v,S]=a.useState(""),[_,N]=a.useState(!1),y=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,[w,E]=a.useState(!0),[k,F]=a.useState([]),[A,L]=a.useState(""),[U,Y]=a.useState(""),[q,W]=a.useState([]),le=new Date().toLocaleString(),me=M=>y.test(M),de=()=>{if(q.length>=r){alert(`Ya agregaste la cantidad máxima de ${r} personas.`);return}if(!me(g)){C("El nombre y apellido solo deben contener letras y espacios.");return}if(x.length!==8||isNaN(x)){C("El DNI debe ser un número de 8 caracteres.");return}W([...q,{nombreApellido:g,dni:x}]),j(""),d(""),C("")},ae=()=>{if(k.some(G=>G.ni===U)){S("El N.I. ya está registrado en la lista de integrantes.");return}if(U.length!==6||isNaN(U)){S("El N.I debe ser un número de 6 caracteres.");return}if(!me(A)){S("El nombre no debe contener números.");return}F([...k,{nombre:A,ni:U}]),E(!1),L(""),Y(""),S("")},B=()=>{E(!w)},te=async M=>{if(M.preventDefault(),!c){m("Por favor, selecciona una comisaría.");return}if(!b){m("Por favor, selecciona una unidad.");return}if(q.length===0){m("Debes agregar al menos una persona.");return}if(k.length===0){m("Debes agregar al menos una persona para la entrega.");return}if(!window.confirm("¿Estás seguro de que deseas agregar Art. 10 Bis?")){alert("La operación fue cancelada.");return}m(""),N(!0);try{const z=JSON.parse(localStorage.getItem("user"));for(let V=0;V<q.length;V++){const D=q[V];await Ee(H(P,"db_art_diez_bis"),{nombre_apellido:D.nombreApellido,dni:D.dni,selectedLocalidad:l,comisaria:s,unidad:b,timestamp:le,usuario:(z==null?void 0:z.email)||"Usuario desconocido",visualidad:!1,comisaria_recibe:!1,personal_entrega:k})}alert("Se agregaron las personas con Art. 10 Bis."),n("Rosario"),p(""),u(""),j(""),F(""),d(""),Y(""),o(),t()}catch(z){console.error("Error al enviar notificación: ",z),m("Error al enviar la notificación. Inténtalo de nuevo.")}finally{N(!1)}},ie=M=>{const G=q.filter((z,V)=>V!==M);W(G)},ne=M=>{const G=k.filter((z,V)=>V!==M);F(G),k.length<2&&E(!0)},oe=q.length>0,he=b&&b.trim().length>0,$=k.length>0;return e.jsx("form",{onSubmit:te,children:e.jsxs("div",{className:"container ",children:[q.length>0&&e.jsxs("div",{className:"text-center my-2",children:[e.jsx("hr",{className:"text-light mb-3"}),e.jsxs("h6",{className:"fw-semibold text-white ",children:["Personas Agregadas "," ",e.jsx("span",{className:"badge bg-indigo",children:q.length})]})]}),e.jsx("ul",{className:"list-group mb-4",children:q.map((M,G)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center my-2 p-2 rounded shadow-sm bg-light",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 titilar"}),M.nombreApellido," - ",M.dni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>ie(G),children:e.jsx("i",{className:"bi bi-trash"})})]},G))}),e.jsxs("div",{className:"mb-3 text-center",children:[b?e.jsx("div",{children:e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("hr",{className:"text-light mb-3"}),e.jsxs("h6",{className:"fw-semibold text-white",children:["Unidad Operacional "," ",e.jsx("span",{className:"badge bg-indigo",children:b}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>u(""),children:e.jsx("i",{className:"bi bi-trash"})})]})]})}):e.jsxs("div",{children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-gradiante2 fw-semibold shadow-sm text-white py-2 rounded",children:"Unidad Procede a la Entrega"}),e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{id:"unidad",className:`form-select ${h&&!b?"is-invalid":""}`,value:b,onChange:M=>u(M.target.value),children:[e.jsx("option",{value:"",className:"text-center mt-1",children:"Seleccionar Unidad"}),i.map(M=>e.jsx("option",{value:M,children:M},M))]}),e.jsx("label",{htmlFor:"unidad",children:"Unidad Procede a la Entrega"}),h&&!b&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una unidad."})]})]}),e.jsx("div",{className:"mb-3 text-center",children:h&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),h]})})]}),k.length>0&&e.jsxs("div",{className:"text-center  mt-4",children:[e.jsx("hr",{className:"text-light mb-3"}),e.jsxs("h6",{className:"fw-semibold text-white ",children:["integrantes Unidad"," ",e.jsx("span",{className:"badge bg-indigo ",children:k.length})]}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsxs("button",{type:"button",className:"btn border-light text-light my-1",onClick:B,children:[e.jsx("i",{className:"bi bi-car-front-fill mx-1"}),w?" Cerrar":" Agregar"]})})]}),e.jsx("ul",{className:"list-group mb-3 ",children:k.map((M,G)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light mt-3",children:[e.jsx("i",{className:"bi bi-car-front-fill text-primary me-3 titilar "}),M.nombre," - ",M.ni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>ne(G),children:e.jsx("i",{className:"bi bi-trash"})})]},G))}),e.jsx("hr",{className:"text-light mb-5"}),q.length<r&&e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center border border-3 fw-semibold shadow-sm text-white py-2 rounded",children:"Agregar personas 10 Bis"}),f&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),f]}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${f&&!y.test(g)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:g,onChange:M=>j(M.target.value)}),e.jsx("label",{htmlFor:"nombreApellido",children:"Nombre y Apellido"}),f&&!y.test(g)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${f&&(x.length!==8||isNaN(Number(x)))?"is-invalid":""}`,maxLength:"8",placeholder:"DNI",value:x,onChange:M=>d(M.target.value.replace(/[^\d]/g,""))}),e.jsx("label",{htmlFor:"dni",children:"DNI"}),f&&(x.length!==8||isNaN(Number(x)))&&e.jsx("div",{className:"invalid-feedback",children:"El DNI debe ser un número de hasta 8 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",onClick:()=>de(),children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})})]}),w?e.jsxs("div",{className:"mb-3 text-center mt-5",children:[e.jsxs("h6",{className:"fw-semibold text-capitalize text-center border border-3 fw-semibold shadow-sm text-white py-2 rounded",children:["Mi Unidad ",e.jsx("span",{className:"badge text-bg-indigo mx-1",children:" Integrantes"})]}),v&&e.jsxs("div",{className:"alert alert-light text-danger shadow my-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar"}),v]}),e.jsxs("div",{className:"row g-2 my-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${v&&!y.test(A)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:A,onChange:M=>L(M.target.value)}),e.jsx("label",{htmlFor:"nombreEntrega",children:"Nombre y Apellido"}),v&&!y.test(A)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${v&&(U.length!==6||isNaN(U))?"is-invalid":""}`,placeholder:"N.I",maxLength:"6",value:U,onChange:M=>Y(M.target.value)}),e.jsx("label",{htmlFor:"niEntrega",children:"N.I"}),v&&(U.length!==6||isNaN(U))&&e.jsx("div",{className:"invalid-feedback",children:"El N.I debe ser un número de 6 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",onClick:()=>ae(),children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})})]})]}):null,e.jsx("div",{className:"card  bg-transparent mt-5",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title mb-3",children:"Asistente de Estados "}),oe&&he&&$&&e.jsx("div",{className:"text-start",children:e.jsx("button",{type:"submit",className:"btn btn-primary shadow",disabled:_,children:_?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-arrow-repeat me-2"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"Confirmar Envio"]})})}),e.jsxs("div",{className:"d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:`btn btn-${oe?"teal":"secondaryMuiRed"} btn-sm text-white rounded-circle ms-3`,title:oe?"Condición cumplida":"Falta agregar persona",children:e.jsx("i",{className:"bi bi-person-fill"})}),e.jsx("button",{type:"button",className:`btn btn-${he?"teal":"secondaryMuiRed"} btn-sm text-white rounded-circle ms-3`,title:he?"Condición cumplida":"Falta seleccionar unidad",children:e.jsx("i",{className:"bi bi-shield-fill"})}),e.jsx("button",{type:"button",className:`btn btn-${$?"teal":"secondaryMuiRed"} btn-sm text-white rounded-circle ms-3`,title:$?"Condición cumplida":"Falta agregar persona para la entrega",children:e.jsx("i",{className:"bi bi-car-front-fill"})})]})]})})]})})},_a=({comisariaSeleccionada:s,cantidadDemorados:r,closeModalRaiz:t})=>{const[o,i]=a.useState(!1),l=()=>{i(!0),window.history.pushState({modalOpen:!0},"")},n=()=>{var c;i(!1),(c=window.history.state)!=null&&c.modalOpen&&window.history.back()};return a.useEffect(()=>{const c=p=>{o&&i(!1)};return window.addEventListener("popstate",c),()=>{window.removeEventListener("popstate",c)}},[o]),!s||!r?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-3",children:e.jsxs("button",{className:"btn btn-primary w-100",onClick:l,children:[e.jsx("i",{className:"bi bi-file-earmark-plus-fill me-2"})," Crear Formulario"]})}),o&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",style:{background:"linear-gradient(135deg, #6e7fdb, #4e5b9a ,#633D88,#8C57FF)",animation:o?"fadeIn 0.5s":"none"},children:[e.jsxs("div",{className:"modal-header border border-0 bg-gradiante2 text-white",children:[e.jsx("h5",{className:"modal-title",children:"Formulario de Ingreso"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:n})]}),e.jsx("hr",{className:"border-2 text-white opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row text-center text-white text-capitalize",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Destino :"})," ",e.jsxs("span",{className:"badge text-bg-indigo",children:[" ",s," "]})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Demorados :"})," ",e.jsx("span",{className:"badge text-bg-primary",children:r})]})})]}),e.jsx(ka,{comisariaSeleccionada:s,cantidadDemorados:r,close:n,closeModalRaiz:t})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn btn-outline-light",onClick:n,children:[e.jsx("i",{className:"bi bi-backspace"})," Regresar"]}),e.jsxs("button",{className:"btn btn-outline-light",onClick:t,children:[e.jsx("i",{className:"bi bi-x-circle"})," Cancelar"]})]})]})})}),o&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Ea=({comisariaSeleccionada:s,cantidadDemorados:r,closeModalRaiz:t})=>{const o=s&&r>0;return e.jsxs("div",{className:"alert alert-info mt-3 ",children:[e.jsx("strong",{className:"text-center ",children:"Resumen de Selección"}),e.jsxs("p",{className:"my-2",children:["Comisaría Seleccionada:"," ",e.jsx("strong",{className:"text-capitalize",children:s?e.jsxs(e.Fragment,{children:[s," ",e.jsx("i",{className:"bi bi-building-fill-check text-primary"})]}):e.jsx("span",{className:"text-pink titilar ",children:"Ninguna"})})]}),e.jsxs("p",{className:"mb-0",children:["Cantidad de Demorados:"," ",e.jsx("strong",{children:r?e.jsxs(e.Fragment,{children:[r," ",e.jsx("i",{className:"bi bi-person-add text-primary"})]}):0})]}),o&&e.jsx(_a,{comisariaSeleccionada:s,cantidadDemorados:r,closeModalRaiz:t})]})},Fa=({togglePlazas:s,cantidadDemorados:r,closeModalRaiz:t})=>{const[o,i]=a.useState([]),[l,n]=a.useState([]),[c,p]=a.useState([]),[b,u]=a.useState(""),[g,j]=a.useState("nombre"),[x,d]=a.useState(!0);a.useEffect(()=>{h(),m()},[]);const h=async()=>{try{const y=(await K(H(P,"db_comisarias"))).docs.map(w=>({id:w.id,...w.data()})).filter(w=>w.disponibilidad===!0);i(y),d(!1)}catch(N){console.error("Error al obtener comisarías:",N),d(!1)}},m=async()=>{try{const y=(await K(H(P,"db_art_diez_bis"))).docs.map(w=>({id:w.id,...w.data()}));n(y.filter(w=>w.visualidad===!0&&w.comisaria_recibe===!0)),p(y.filter(w=>w.visualidad===!1&&w.comisaria_recibe===!1))}catch(N){console.error("Error al obtener notificaciones:",N)}},f=l.reduce((N,y)=>{const w=y.comisaria;return w&&(N[w]=(N[w]||0)+1),N},{}),C=c.reduce((N,y)=>{const w=y.comisaria;return w&&(N[w]=(N[w]||0)+1),N},{}),v=N=>{const y=o.find(w=>w.comisaria===N);if(y){const w=y.plazas_art_10_bis||0,E=f[N]||0,k=w-E;return E>=w?{estado:"Llena",clase:"badge bg-danger"}:{estado:`Disponible (${k} libres)`,clase:"badge bg-secondaryM"}}return{estado:"Desconocido",clase:"badge bg-secondary"}},S=()=>g==="nombre"?[...o].sort((N,y)=>N.comisaria.localeCompare(y.comisaria)):g==="plaza"?[...o].sort((N,y)=>(y.plazas_art_10_bis||0)-(N.plazas_art_10_bis||0)):o,_=N=>r?N.filter(y=>{const w=f[y.comisaria]||0;return(y.plazas_art_10_bis||0)-w>=r}):N;return e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center my-4",children:[e.jsx("strong",{children:"Comisarías con plazas disponibles"}),e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:s,children:e.jsx("i",{className:"bi bi-trash3-fill"})})]}),x?e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsxs("div",{className:"list-group",children:[_(S()).map(N=>{const{estado:y,clase:w}=v(N.comisaria),E=f[N.comisaria]||0,k=C[N.comisaria]||0;return e.jsx("div",{className:"list-group-item mb-3 shadow",onClick:()=>{u(N.comisaria)},style:{cursor:"pointer"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary",style:{fontSize:"1.5rem"}}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-capitalize",children:N.comisaria}),e.jsxs("div",{children:[e.jsx("small",{className:w,children:`${E} / ${N.plazas_art_10_bis||0} Plazas `}),e.jsx("div",{children:e.jsx("small",{className:"badge bg-primary mt-1",children:`${k} Pendientes (por validar)`})})]})]})]})},N.comisaria)}),e.jsx("div",{className:"container mt-1",children:e.jsx(Ea,{cantidadDemorados:r,comisariaSeleccionada:b,closeModalRaiz:t})})]})]})},Da=({show:s,onClose:r,onConfirm:t,closeModalRaiz:o})=>{const[i,l]=a.useState(1),[n,c]=a.useState(!1),[p,b]=a.useState(null);if(!s)return null;const u=()=>{const g=parseInt(i,10);b(g),c(!0)};return e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content ",style:{background:"linear-gradient(135deg, #6e7fdb, #4e5b9a ,#633D88,#8C57FF)",animation:s?"fadeIn 0.5s":"none"},children:[e.jsxs("div",{className:"modal-header border border-0 bg-gradiante2 text-white",children:[e.jsx("h5",{className:"modal-title text-capitalize ",children:"Cuantas Plazas Necesitas ?"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:r})]}),"   ",e.jsx("hr",{className:" border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"input-group ",children:[e.jsx("span",{className:"input-group-text  fw-semibold bg-transparent text-light",children:"Plaza/s"}),e.jsx("input",{type:"number",className:"form-control text-center",value:i,onChange:g=>l(g.target.value),min:"1",max:"10","aria-describedby":"cantidadAddon","aria-label":"Cantidad"}),e.jsx("button",{className:"btn btn-outline-light",type:"button",id:"cantidadAddon",onClick:u,children:"Aceptar"})]}),n&&e.jsx(Fa,{togglePlazas:()=>c(!1),cantidadDemorados:p,closeModalRaiz:o})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("button",{className:"btn btn-outline-light",onClick:r,children:[e.jsx("i",{className:"bi bi-backspace"}),"   Regresar"]})})]})})})},Pa=({showModal:s,closeModal:r})=>{const[t,o]=a.useState(!1),[i,l]=a.useState(!1),[n,c]=a.useState(!1),[p,b]=a.useState(!1),[u,g]=a.useState(!1),[j,x]=a.useState(!1),[d,h]=a.useState([]),m=Me(),f=k=>{console.log(`Se demorarán ${k} personas`),o(!1)},C=()=>{l(!1),c(!1),x(!1),g(!1),b(!1),r()},v=()=>g(k=>!k),S=()=>b(k=>!k),_=()=>x(k=>!k),N=()=>c(k=>!k);a.useEffect(()=>{h([{id:"preformulario",component:e.jsx(Sa,{togglePreFormulario:N}),visible:n},{id:"busqueda",component:e.jsx(ya,{toggleBusqueda:v}),visible:u},{id:"plazas",component:e.jsx(wa,{togglePlazas:S}),visible:p},{id:"rendimiento",component:e.jsx(Na,{toggleRendimiento:_}),visible:j}])},[u,p,j,n]);const y=(k,F)=>{k.dataTransfer.setData("index",F)},w=(k,F)=>{k.preventDefault();const A=k.dataTransfer.getData("index");if(A!==null){const L=[...d],[U]=L.splice(A,1);L.splice(F,0,U),h(L)}},E=k=>k.preventDefault();return a.useEffect(()=>{if(m.pathname==="/dashboard"){const k=()=>C();return window.history.pushState(null,document.title),window.addEventListener("popstate",k),()=>window.removeEventListener("popstate",k)}},[]),a.useEffect(()=>{if(s){window.history.pushState({modalOpen:!0},"");const k=F=>{C()};return window.addEventListener("popstate",k),()=>{window.removeEventListener("popstate",k)}}},[s]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog",style:{display:"block",transition:"opacity 0.4s ease-in-out"},children:e.jsx("div",{className:"modal-dialog modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content bg-blueW2",style:{background:"linear-gradient(135deg, #4e5b9a , #633D88, #8C57FF)",animation:s?"fadeIn 0.5s":"none"},children:[e.jsxs("div",{className:"modal-header border-0 bg-gradiante2",children:[e.jsx("h5",{className:"modal-title ",children:"Menú Artículo 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close bg-prima btn-close-white",onClick:C})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-3 my-3 ",children:[e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:`btn rounded-circle shadow-sm border-2 px-3 py-2  ${t?"btn-light ":"btn-outline-light "}`,onClick:()=>{g(!1),x(!1),b(!1),l(!1),o(!0)},children:e.jsx("i",{className:"bi bi-person-lines-fill fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:t?"Ocultar":"Personas"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:`btn rounded-circle shadow-sm border-2 px-3 py-2 ${u?"btn-light":"btn-outline-light"}`,onClick:v,children:e.jsx("i",{className:"bi bi-search fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:u?"Ocultar":"Búsqueda"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:`btn rounded-circle shadow-sm border-2 px-3 py-2 ${p?"btn-light":"btn-outline-light"}`,onClick:S,children:e.jsx("i",{className:"bi bi-shield-lock fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:p?"Ocultar":"Plazas"})]}),e.jsxs("div",{className:"text-center me-2",children:[e.jsx("button",{className:`btn rounded-circle shadow-sm border-2 px-3 py-2 ${j?"btn-light":"btn-outline-light"}`,onClick:_,children:e.jsx("i",{className:"bi bi-bar-chart fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:j?"Ocultar":"Rendimiento"})]})]}),e.jsx("div",{className:"mt-3",children:d.map((k,F)=>k.visible&&e.jsx("div",{draggable:!0,onDragStart:A=>y(A,F),onDragOver:E,onDrop:A=>w(A,F),className:"border border-0 p-1 m-1 mt-3 text-white bg-transparent ",style:{cursor:"grab"},children:k.component},k.id))}),e.jsx("div",{className:"container my-4",children:e.jsx(Da,{show:t,onClose:()=>o(!1),onConfirm:f,closeModalRaiz:r})})]})]})})}):null},Aa=()=>{const[s,r]=a.useState(!1),t=()=>r(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsxs("div",{className:"text-center mx-2",children:[e.jsx(Fe,{onClick:()=>r(!0),className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})}),e.jsx("div",{className:"mt-1 small",children:"Nuevo"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx(Fe,{to:"/validaringreso10Bis",className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",children:e.jsx("i",{className:"bi bi-box-arrow-in-right fs-5"})}),e.jsx("div",{className:"mt-1 small",children:"Validar"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx(Fe,{to:"/validarsalida10Bis",className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",children:e.jsx("i",{className:"bi bi-box-arrow-left fs-5"})}),e.jsx("div",{className:"mt-1 small",children:"Salida"})]})]}),e.jsx(Pa,{showModal:s,closeModal:t})]})},ys=32e3,Ia=["db_art_diez_bis_descativados","db_buscados","db_formulario_diez_bis","db_informes","db_notificaciones","db_personas","db_personas_desactivados","db_vehiculos"],Ma=({titulo:s="Exportar Datos"})=>{const[r,t]=a.useState("db_buscados"),[o,i]=a.useState(!1),[l,n]=a.useState(!1);a.useEffect(()=>{document.body.style.overflow=l?"hidden":"auto"},[l]);const c=async()=>{const u=await K(H(P,r)),g=[];return u.forEach(j=>{const x=j.data();Object.keys(x).forEach(d=>{var h;(h=x[d])!=null&&h.toDate&&(x[d]=x[d].toDate().toLocaleString())}),Object.keys(x).forEach(d=>{typeof x[d]=="string"&&x[d].length>ys&&(x[d]=x[d].substring(0,ys)+"...")}),g.push({id:j.id,...x})}),g},p=async()=>{i(!0);try{const u=await c();if(u.length===0){alert("No hay datos para exportar.");return}const g=be.json_to_sheet(u),j=be.book_new();be.book_append_sheet(j,g,r),Le(j,`${r}.xlsx`)}catch(u){console.error("Error exportando a Excel:",u),alert("Ocurrió un error al exportar a Excel.")}finally{i(!1)}},b=async()=>{i(!0);try{const u=await c();if(u.length===0){alert("No hay datos para exportar.");return}const g=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),j=URL.createObjectURL(g),x=document.createElement("a");x.href=j,x.download=`${r}.json`,x.click(),URL.revokeObjectURL(j)}catch(u){console.error("Error exportando a JSON:",u),alert("Ocurrió un error al exportar a JSON.")}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"badge bg-white bg-opacity-75 text-dark fw-semibold px-3 py-1 my-2  mx-3",onClick:()=>n(!0),children:s}),l&&e.jsx("div",{className:"modal show fade d-block text-dark bg-dark bg-opacity-50  ",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered ",role:"document",children:e.jsxs("div",{className:"modal-content ",children:[e.jsxs("div",{className:"modal-header border border-0",children:[e.jsx("h5",{className:"modal-title",children:"Exportar Colección"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>n(!1)})]}),e.jsxs("div",{className:"modal-body ",children:[e.jsx("label",{className:"form-label",children:"Seleccione colección:"}),e.jsx("select",{className:"form-select mb-3",value:r,onChange:u=>t(u.target.value),children:Ia.map(u=>e.jsx("option",{value:u,children:u},u))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{onClick:p,className:"btn btn-green",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Exportando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-file-earmark-excel-fill me-2"}),"Exportar a Excel"]})}),e.jsx("button",{onClick:b,className:"btn btn-primary2",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Exportando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-filetype-json me-2"}),"Exportar a JSON"]})})]})]}),e.jsx("div",{className:"modal-footer border border-0",children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>n(!1),children:"Cerrar"})})]})})})]})},La=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-6   d-none d-md-block",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg my-4",children:[e.jsxs("h1",{className:"fw-bold display-1",children:["Cx2 App",e.jsx("span",{className:"titilar",children:"_"})]}),e.jsx("h2",{className:"fw-semibold fs-4",children:"Santa Fe - Datos + Comunicación"}),e.jsx("div",{className:"badge bg-white text-dark fw-semibold px-3 py-1 my-2 ",children:"Datos precisos. Acción directa.   "}),e.jsx(Ma,{}),"              "]}),e.jsx("div",{className:"p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:e.jsx("p",{className:"fs-5 mt-3 text-center",children:"Tu herramienta ágil para controlar, organizar y comunicar información de forma simple y eficiente."})}),e.jsxs("div",{className:"mt-5 small d-flex flex-column align-items-end",children:[e.jsx("p",{className:"mb-1",children:"Versión: 1.0.0 | Actualización: 1.0.0"}),e.jsxs("p",{className:"mb-0",children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})]})]}),e.jsxs("div",{className:" col-12 col-md-6  ",children:[e.jsxs("div",{className:"position-relative overflow-hidden rounded-4 shadow-lg ",children:[e.jsx("div",{className:"d-flex",children:e.jsx("img",{src:"/img/gif/sirena.gif",className:"w-100 object-fit-cover opacity-50",alt:"Ciudad nocturna",style:{height:"300px",objectFit:"cover"}})}),e.jsxs("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center text-white bg-dark bg-opacity-50",children:[e.jsxs("h1",{className:"fw-bold display-1",children:["Art 10 Bis ",e.jsx("i",{className:"bi bi-people-fill"})]}),e.jsx("p",{className:"lead text-center px-3",children:"Datos precisos. Acción directa."}),e.jsx(Aa,{})]})]}),e.jsxs("div",{className:"position-relative overflow-hidden rounded-4 shadow-lg my-4",children:[e.jsx("div",{className:"d-flex",children:e.jsx("img",{src:"/img/splash/concept5.jpeg",className:"w-100 object-fit-cover opacity-50",alt:"Ciudad nocturna",style:{height:"300px",objectFit:"cover"}})}),e.jsxs("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center text-white bg-dark bg-opacity-50",children:[e.jsxs("h1",{className:"fw-bold display-1",children:["Galeria ",e.jsx("i",{className:"bi bi-camera-fill mx-3"})]}),e.jsx("p",{className:"lead text-center px-3",children:"Información clara y eficaz, al instante."}),e.jsx(Fe,{className:"btn btn-outline-light mt-3",to:"/galeriacx2",children:"Explorar Galería"})]})]}),e.jsxs("div",{className:"position-relative overflow-hidden rounded-4 shadow-lg my-4",children:[e.jsx("div",{className:"d-flex",children:e.jsx("img",{src:"/img/splash/concept8.gif",className:"w-100 object-fit-cover opacity-50",alt:"Ciudad nocturna",style:{height:"300px",objectFit:"cover"}})}),e.jsxs("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center text-white bg-dark bg-opacity-50",children:[e.jsxs("h1",{className:"fw-bold display-1",children:["Vehiculos ",e.jsx("i",{className:"bi bi-car-front mx-3"})]}),e.jsx("p",{className:"lead text-center px-3",children:"Verifica en tiempo real, su captura."}),e.jsx(Fe,{className:"btn btn-outline-light mt-3",to:"/galeriavehiculos",children:"Explorar Capturas"})]})]}),e.jsxs("div",{className:"position-relative overflow-hidden rounded-4 shadow-lg my-4",children:[e.jsx("img",{src:"/img/splash/concept9.gif",className:"w-100 object-fit-cover opacity-50",alt:"Ciudad nocturna",style:{height:"300px",objectFit:"cover"}}),e.jsxs("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center text-white bg-dark bg-opacity-50",children:[e.jsxs("h1",{className:"fw-bold display-1 text-center ",children:["Buscados ",e.jsx("i",{className:"bi bi-currency-exchange mx-3"})]}),e.jsx("p",{className:"lead text-center px-3",children:"Recompensa por Información."}),e.jsx(Fe,{to:"/GaleriaBuscados",className:"btn btn-outline-light mt-3 px-4 py-2 rounded-pill",children:"Explorar Recompensa"})]})]}),e.jsxs("div",{className:"position-relative overflow-hidden rounded-4 shadow-lg my-4",children:[e.jsx("div",{className:"d-flex",children:e.jsx("img",{src:"/img/splash/concept3.jpeg",className:"w-100 object-fit-cover opacity-50",alt:"Ciudad nocturna",style:{height:"300px",objectFit:"cover"}})}),e.jsxs("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center text-white bg-dark bg-opacity-50",children:[e.jsxs("h1",{className:"fw-bold display-1",children:["Noticias ",e.jsx("i",{className:"bi bi-braces-asterisk mx-3"})]}),e.jsx("p",{className:"lead text-center px-3",children:"Noticias útiles, justo cuando las necesitás."}),e.jsx(Fe,{className:"btn btn-outline-light mt-3",to:"/informespost",children:"Explorar Informes"})]})]})]})]})})}),Ra=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),a.useEffect(()=>{const i=l=>{l.preventDefault(),l.returnValue="Estás a punto de dejar la página. ¿Quieres continuar?"};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Menu Inicio - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Menu de Incio App ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsxs("div",{className:" d-flexjustify-content-center  text-white gap-5",children:[e.jsx(La,{}),e.jsx(pe,{})]})]}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},za=()=>e.jsx(e.Fragment,{children:e.jsx(Ra,{})}),De="/svg/undraw_male_avatar_g98dG.svg",$a=({show:s,onClose:r,datos:t})=>{a.useState(!1);const[o,i]=a.useState(!1);a.useEffect(()=>{if(s){window.history.pushState({modalOpen:!0},"");const n=c=>{r()};return window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}}},[s]);const l=n=>{if(!n)return;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=`tel:${n}`:alert(`Tu dispositivo no puede realizar llamadas. Número: ${n}`)};return s?e.jsxs("div",{className:"modal fade show bg-dark",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog   ",children:e.jsxs("div",{className:"modal-content  bg-light  border-0",children:[e.jsx("div",{className:"modal-header",children:e.jsx("button",{type:"button",className:"btn-close ",onClick:r})}),e.jsxs("div",{className:"modal-body text-center ",children:[e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>i(!0),children:[e.jsx("div",{className:"fs-4 position-absolute top-0 start-50 translate-middle-x bg-secondary  text-center w-100 rounded-top small",style:{opacity:.8},children:t.documento}),e.jsx("img",{src:t.base64&&t.base64.trim()!==""&&t.base64.trim()!=="null"?t.base64:"https://via.placeholder.com/150",className:"img-fluid mb-3 shadow-lg rounded-2 ",alt:t.nombre_apellido||"Imagen no disponible",style:{width:"500px",height:"auto"},loading:"lazy"}),e.jsx("div",{className:"display-6 position-absolute text-capitalize bottom-0 start-50 translate-middle-x bg-primary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:t.nombre_apellido})]}),e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 text-dark",children:["Datos de la Solicitud ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-primary border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2",children:"Motivo Captura"})}),t.motivo_captura&&t.motivo_captura.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.motivo_captura}):null,(!t.motivo_captura||t.motivo_captura.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-outline-secondary  mx-4",onClick:()=>alert("Solicitud enviada. La información que requirió se le informará a los cargadores de captura para su carga. 🏤"),children:["Solicitar Información ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary2 text-white me-2",children:"Información Adicional"})}),t.descripcion_fisica&&t.descripcion_fisica.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.descripcion_fisica}):null,(!t.descripcion_fisica||t.descripcion_fisica.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-outline-secondary  mx-4",onClick:()=>alert("Solicitud enviada. La información que requirió se le informará a los cargadores de captura para su carga. 🏤"),children:["Solicitar Información ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("hr",{className:"border border-white border-1 opacity-75"}),t.entidad&&t.entidad.trim()!==""&&e.jsxs("span",{className:"badge text-bg-primaryM text-white my-1 text-capitalize mx-3 p-2",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Solicita - ",t.entidad]}),t.numero_contacto&&t.numero_contacto.trim()!==""&&e.jsx("div",{className:"d-flex justify-content-center my-3",children:e.jsxs("button",{className:"badge btn text-bg-primaryMuiBlue text-white text-capitalize p-2 d-flex align-items-center gap-2 mx-auto",onClick:()=>l(t.numero_contacto),children:[e.jsx("i",{className:"bi bi-telephone-forward-fill"}),"Contactar ",t.numero_contacto]})})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),o&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark ",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>i(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:n=>n.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>i(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/40",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"200vw",maxHeight:"200vh",objectFit:"contain"}})]})})})]}):null},Ta=({show:s,onClose:r,datos:t})=>{var c;const[o,i]=a.useState(!1),[l,n]=a.useState(!1);return a.useEffect(()=>{if(location.pathname==="/dashboard"){const p=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",p),()=>{window.removeEventListener("popstate",p)}}},[r]),s?e.jsxs("div",{className:"modal fade show bg-dark",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered ",children:e.jsxs("div",{className:"modal-content bg-gradiante2 border-0",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title text-center text-white fw-semibold",children:"Detalles de la Captura 👮"}),e.jsx("button",{type:"button",className:"btn-close btn-close-dark",onClick:r})]}),e.jsxs("div",{className:"modal-body text-white",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-start mb-3",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>n(!0),children:[e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:t.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow mt-2",style:{width:"130px",height:"130px",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:"Capturado"})]})}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("small",{className:"d-flex gap-2 justify-content-end mb-1",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center text-capitalize",value:t.nombre_apellido,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center",value:t.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end",children:["Detalles de la Captura ",e.jsx("i",{className:"bi bi-journal-text"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),((c=t.capturas_informacion_estados)==null?void 0:c.length)>0?e.jsxs(e.Fragment,{children:[t.capturas_informacion_estados.slice().reverse().slice(0,o?t.capturas_informacion_estados.length:1).map((p,b)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:`rounded-pill px-3 py-2 text-white ${p.captura_fecha?"bg-primary":"bg-secondaryMuiRed"}`,children:[e.jsx("strong",{className:"me-3",children:p.captura_autor||"Sistema"}),p.captura_fecha||p.captura_quita_fecha]}),p.captura_fecha&&e.jsxs("p",{children:["Relato: ",e.jsx("span",{className:"fw-semibold",children:p.captura_descripcion||"Sin relato"})]})]},b)),t.capturas_informacion_estados.length>1&&e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-link text-white text-decoration-none",onClick:()=>i(!o),children:o?"Ver menos":"Ver historial completo"})})]}):e.jsx("p",{className:"text-center",children:"No hay detalles de captura disponibles."})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),l&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>n(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>n(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain"}})]})})})]}):null};function Ba({setGridView:s,gridView:r,sortOrder:t,setSortOrder:o,sortBy:i,setSortBy:l,searchTerm:n,setSearchTerm:c,priorityFilter:p,setPriorityFilter:b,currentPage:u,handlePriorityChange:g,entidadSeleccionada:j,setEntidadSeleccionada:x,entidades:d}){const[h,m]=a.useState(!1),f=()=>{m(!1),l("fecha"),o("desc"),b([])};return e.jsx("div",{className:"container-lg  ",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center ",children:e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Personas"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-people-fill fs-4 text-dark"})})]}),e.jsx("form",{className:"d-flex justify-content-center my-4",onSubmit:C=>C.preventDefault(),children:e.jsxs("div",{className:"input-group input-group-lg w-100",style:{maxWidth:"600px"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar en Rosario...","aria-label":"Buscar",value:n,onChange:C=>c(C.target.value)}),e.jsx("button",{className:"btn btn-outline-light",type:"submit",children:e.jsx("i",{className:"bi bi-search"})})]})}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsx("button",{type:"button",onClick:()=>s(!0),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"active":""}`,title:"Vista en cuadrícula",children:e.jsx("i",{className:`bi bi-grid-3x3-gap-fill fs-5 ${r?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>s(!1),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"":"active"}`,title:"Vista en lista",children:e.jsx("i",{className:`bi bi-list fs-5 ${r?"":"titilar"}`})}),e.jsx("button",{type:"button",onClick:()=>m(!h),className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",title:"Mostrar/Ocultar filtros",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})]}),h&&e.jsxs("div",{className:"card shadow  bg-dark p-4 bg-opacity-25  rounded-4 shadow-lg text-white",style:{backgroundColor:"transparent",color:"white"},children:[e.jsxs("div",{className:"card-header fw-semibold  bg-light bg-opacity-25 rounded-4  p-3 text-ligh d-flex justify-content-between align-items-center ",children:[e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-sort-alpha-down mx-1"})," Filtros de Galería"]}),e.jsx("i",{className:"bi bi-x-lg cursor-pointer",onClick:f,style:{cursor:"pointer"}})]}),e.jsxs("div",{className:"card-body ",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select   border-white shadow-sm text-center ",value:i,onChange:C=>l(C.target.value),children:[e.jsx("option",{value:"fecha",children:"Fecha"}),e.jsx("option",{value:"nombreApellido",children:"Nombre"})]}),e.jsx("label",{className:" p-2",children:"Filtrar por"})]})}),e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating ",children:[e.jsx("select",{className:"form-select  border-white shadow-sm text-center",value:t,onChange:C=>o(C.target.value),children:i==="fecha"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"Antiguo - Reciente"}),e.jsx("option",{value:"desc",children:"Reciente - Antiguo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"A - Z"}),e.jsx("option",{value:"desc",children:"Z - A"})]})}),e.jsx("label",{className:" p-2",children:"Ordenar Prioridad"})]})})]}),e.jsx("div",{className:"border border-white shadow-sm rounded-4 p-4 mb-4 text-white",children:e.jsxs("div",{className:"d-flex flex-wrap justify-content-center mb-3",children:[["No Prioritarias","Paradero","Evadidos","Prioritarias"].map((C,v)=>e.jsxs("div",{className:"form-check form-check-inline mb-2",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",value:v+1,checked:p.includes((v+1).toString()),onChange:g,disabled:u!==1,style:{cursor:u===1?"pointer":"not-allowed"}}),e.jsx("label",{className:"form-check-label text-white",children:C})]},v)),p.length>0&&e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white shadow-sm mx-2",onClick:()=>b([]),children:e.jsx("i",{className:"bi bi-trash"})})]})}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12 col-md-12 mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select bg-light rounded-4 shadow-sm text-center pe-5",value:j,onChange:C=>x(C.target.value),children:[e.jsx("option",{value:"",children:"Todas las Entidades"}),d.map((C,v)=>e.jsx("option",{value:C,children:C},v))]}),e.jsx("label",{className:"p-2 m-2",children:"Filtrar por Entidad"})]}),j&&e.jsx("button",{type:"button",className:"btn btn-sm btn-danger text-white position-absolute top-50 end-0 translate-middle-y me-3 shadow-sm rounded-circle",onClick:()=>x(""),title:"Quitar filtro",children:e.jsx("i",{className:"bi bi-x-lg"})})]})})})]})]})]})})})})}const Oa=({informeId:s})=>{const[r,t]=a.useState(null),[o,i]=a.useState(!1),[l,n]=a.useState(0);a.useEffect(()=>{const b=localStorage.getItem("user");if(b){const u=JSON.parse(b);t(u.email),c(u.email)}},[s]);const c=async b=>{var j,x;const u=O(P,"db_personas",s),g=await ke(u);if(g.exists()){const d=g.data();n(((j=d.me_sirve)==null?void 0:j.length)||0),i((x=d.me_sirve)==null?void 0:x.includes(b))}},p=async()=>{if(!r)return;const b=O(P,"db_personas",s);await re(b,{me_sirve:o?Ae(r):_e(r)}),i(!o),n(u=>o?u-1:u+1)};return e.jsxs("button",{onClick:p,className:`btn btn-outline-light bg-dark bg-opacity-50 px-4 py-2 d-flex align-items-center gap-2 ${o?"text-secondaryM":""}`,children:[e.jsx("i",{className:`bi ${o?"bi-hand-thumbs-up-fill text-secondaryM":"bi-hand-thumbs-up"}`}),"Me sirve",l>0&&` (${l})`]})},Qe=15;function ws(s){const[r,t,o]=s.split("/").map(Number),i=2e3+o;return new Date(i,t-1,r)}const Ua=()=>{const[s,r]=a.useState(!1),[t,o]=a.useState(!1),[i,l]=a.useState(!1),[n,c]=a.useState([]),[p,b]=a.useState(1),[u,g]=a.useState(0),[j,x]=a.useState(null),[d,h]=a.useState(null),[m,f]=a.useState(null),[C,v]=a.useState(null),[S,_]=a.useState(!0),[N,y]=a.useState(!1),[w,E]=a.useState(null),[k,F]=a.useState("fecha"),[A,L]=a.useState("desc"),[U,Y]=a.useState(""),[q,W]=a.useState(!0),[le,me]=a.useState(""),[de,ae]=a.useState(!0),[B,te]=a.useState([]),[ie,ne]=a.useState(""),oe=async()=>{try{_(!0);const T=await K(H(P,"db_personas")),se=[],R=new Set;T.forEach(X=>{const ce={id:X.id,...X.data()};se.push(ce),ce.entidad&&R.add(ce.entidad)}),c(se),te(Array.from(R)),g(Math.ceil(se.length/Qe))}catch(T){console.error("Error obteniendo documentos: ",T),E("No se pudieron cargar los documentos.")}finally{_(!1)}};a.useEffect(()=>{oe()},[]);const he=T=>{const se=T.target.value;me(R=>R.includes(se)?R.filter(X=>X!==se):[...R,se])},$=a.useMemo(()=>n.filter(T=>{var ce;const se=(ce=T.nombre_apellido)==null?void 0:ce.toLowerCase().includes(U.toLowerCase()),R=le.length===0||le.includes(String(T.prioridad)),X=!ie||T.entidad===ie;return se&&R&&X}),[n,U,le,ie]),M=a.useMemo(()=>$.sort((T,se)=>{if(T.prioridad===3&&se.prioridad!==3)return-1;if(se.prioridad===3&&T.prioridad!==3)return 1;if(T.prioridad===4&&se.prioridad!==4)return-1;if(se.prioridad===4&&T.prioridad!==4)return 1;if(k==="fecha"){const R=ws(T.date)||0,X=ws(se.date)||0;return A==="asc"?R-X:X-R}else return A==="asc"?T.nombre_apellido.localeCompare(se.nombre_apellido):se.nombre_apellido.localeCompare(T.nombre_apellido)}),[$,k,A]),G=(p-1)*Qe,z=M.slice(G,G+Qe),V=()=>{p<u&&(y(!0),b(T=>T+1),setTimeout(()=>y(!1),500))},D=()=>{p>1&&(y(!0),b(T=>T-1),setTimeout(()=>y(!1),500))},Q=T=>{v(!0),h(T)},J=()=>{x(null),v(null)},I=T=>{f(!0),h(T)},Z=()=>f(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Ba,{setGridView:W,gridView:q,sortOrder:A,sortBy:k,setSortOrder:L,setSortBy:F,searchTerm:U,setSearchTerm:Y,showFilters:de,priorityFilter:le,setPriorityFilter:me,currentPage:p,handlePriorityChange:he,entidadSeleccionada:ie,setEntidadSeleccionada:ne,entidades:B}),e.jsxs("div",{className:"container-lg",children:[S&&e.jsx(ee,{leyendaSet:"Cargado Base - Cx2"}),w&&e.jsx("div",{className:"alert alert-danger",children:w}),N?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(ee,{})}):e.jsx("div",{className:q?"row mt-5":"d-flex flex-column align-items-center mt-5",children:z.map(T=>e.jsx("div",{className:q?"col-6 col-sm-6 col-md-4 mb-4":"col-12 col-sm-6 col-md-6 mb-4",children:e.jsx("div",{className:"card py-4  shadow-sm text-center bg-dark bg-opacity-50  rounded-4",children:e.jsxs("div",{className:"position-relative",children:[T.alerta&&!T.captura&&e.jsx("div",{onClick:()=>o(!t),children:t?e.jsx("div",{className:"position-absolute top-1  start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-exclamation-triangle-fill me-2 text-white titilar fs-5 shadow-sm "}),"Evadido ",T.date," "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-redUi1   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-exclamation-triangle-fill fs-5 mx-1 text-white titilar "})})}),T.paradero&&e.jsx("div",{onClick:()=>r(!s),children:s?e.jsx("div",{className:"position-absolute top-1 bg-blueMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-search fs-5 mx-2 text-white  "}),"Paradero "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-blueMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-search fs-5 mx-1 text-white "})})}),T.prioridad===4&&e.jsx("div",{onClick:()=>l(!i),children:i?e.jsx("div",{className:"position-absolute top-1 bg-yellowMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:"bi bi-star-fill fs-5 mx-2 text-white "}),"Prioritaria"]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-yellowMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-star-fill fs-5 mx-1 text-white "})})}),T.captura&&e.jsxs("div",{className:"captura-cinta d-flex flex-column flex-md-row justify-content-between align-items-center p-2",style:{maxWidth:"100%",cursor:"pointer"},onClick:()=>I(T),children:[e.jsx("span",{className:"text-white fw-bold",children:"Capturado"}),e.jsx("button",{className:"btn btn-link p-0 text-white ms-md-2 mt-2 mt-md-0",onClick:se=>{se.stopPropagation(),I(T)},children:"Ver Detalles"})]}),e.jsx("div",{}),e.jsx("img",{src:T.base64&&T.base64.trim()!==""&&T.base64.trim()!=="null"?T.base64:De,className:`card-img-top img-fluid  ${T.captura?"grayscale":""}`,alt:T.nombre_apellido||"Imagen no disponible",loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"cover"},onClick:()=>Q(T)}),e.jsx("h5",{className:"card-title text-white text-capitalize mt-4",children:T.nombre_apellido}),e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-2 mt-3",children:[e.jsx("button",{onClick:()=>Q(T),className:"btn btn-outline-light bg-dark bg-opacity-50 px-4 py-2",children:"Ver detalles"}),e.jsx(Oa,{informeId:T.id})]})]})})},T.id))}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4",children:[p>1&&e.jsx("button",{className:"btn btn rounded-pill shadow-sm text-center bg-dark bg-opacity-50 rounded-4 shadow-lg text-white",onClick:D,children:e.jsx("i",{className:"bi bi-arrow-left fw-semibold fs-3 titilar"})}),e.jsxs("span",{className:"fs-6 mx-3  text-light",children:["Página ",p," de ",u]}),p<u&&e.jsx("button",{className:"btn rounded-pill shadow-sm text-center bg-dark bg-opacity-50 rounded-4 shadow-lg text-white ",onClick:V,children:e.jsx("i",{className:"bi bi-arrow-right fw-semibold fs-3 titilar"})})]})]}),e.jsx($a,{show:C,datos:d,onClose:J}),e.jsx(Ta,{show:m,datos:d,onClose:Z})]})},Va=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Galeria - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(ye,{Promp:"Geleria de Capturas ",Promp2:"bi bi-code-slash fs-4 "})}),e.jsx(Ua,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},qa=()=>e.jsx(e.Fragment,{children:e.jsx(Va,{})}),Ga=({recepciones:s,loading:r})=>e.jsx("div",{className:" text-center ",children:r?e.jsx("div",{className:"spinner-border text-white",role:"status"}):Object.keys(s).length>0?e.jsxs("div",{className:"text-center p-4 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("strong",{className:"text-light fs-6 text-capitalize",children:"Recepciones pendientes por comisaría:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(s).map(([t,o],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-primaryMuiBlue spinner-grow-sm",role:"status"}),e.jsx("span",{children:t}),e.jsxs("span",{className:"badge bg-primaryMuiBlue",children:[o," pendientes"]})]},i))})]}):e.jsx("div",{className:"alert bg-light  bg-opacity-75  text-capitalize shadow",role:"alert",children:e.jsx("strong",{children:"No hay recepciones pendientes en este momento."})})}),We={"comisaria 1":"1111","comisaria 2":"2222","comisaria 3":"3333","comisaria 4":"4444","comisaria 5":"5555","comisaria 6":"6666","comisaria 7":"7777","Comisaria 8":"8888"},Ha=({notificaciones:s,loading:r,aceptarRecepcion:t,rechazarRecepcion:o})=>{const[i,l]=a.useState(""),[n,c]=a.useState(!1),[p,b]=a.useState(null),[u,g]=a.useState(""),[j,x]=a.useState(!1),d=async()=>{if(!p)return;x(!0);const{id:m,comisaria:f}=p,C=We[f];setTimeout(()=>{u&&u===C?(t(m),l(""),c(!1),g("")):l(`El código ingresado "${u}" es incorrecto.`),x(!1)},1e3)},h=m=>{b(m),c(!0),l(""),g("")};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg ",children:[e.jsxs("h1",{className:"display-4 fw-bold",children:["Ingreso 10 Bis ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("p",{className:"lead",children:"Administra las recepciones de este  articulo."})]})})}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-5",children:e.jsx("div",{className:"position-relative",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border text-white ",role:"status","aria-label":"Cargando...",children:" "})]}):e.jsxs("div",{className:"list-group",children:[i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i}),s&&s.length>0?s.map(m=>e.jsxs("div",{className:"list-group-item mb-3 shadow bg-light bg-opacity-75",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:m.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:m.dni})]}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-end row",children:[e.jsx("div",{className:"col mb-1",children:e.jsxs("button",{className:"btn btn-primary btn-sm me-2 mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>h(m),"aria-label":`Aceptar recepción para ${m.nombre_apellido} en la Comisaría ${m.comisaria}`,children:["Aceptar ",e.jsx("i",{className:"bi bi-check-all ms-2"})]})}),e.jsx("div",{className:"col",children:e.jsxs("button",{className:"btn btn-pink btn-sm mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>o(m.id),"aria-label":`Cancelar recepción para ${m.nombre_apellido}`,children:["Cancelar ",e.jsx("i",{className:"bi bi-trash ms-2"})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{children:e.jsxs("small",{children:[m.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:m.comisaria})," -"," ",m.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:m.unidad})]})})})]},m.id)):e.jsxs("div",{className:"alert bg-light  bg-opacity-75  text-capitalize shadow",role:"alert",children:["No se encontraron Personas en dependencias.",e.jsx("i",{className:"bi bi-hand-thumbs-up ms-2"})]})]})})})]}),n&&p&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Ingresar Código"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>c(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Ingresa el código para la Comisaría ",e.jsx("strong",{children:p.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:u,onChange:m=>g(m.target.value),placeholder:"Código"}),i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,disabled:!u||j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:"Cancelar"})]})]})})})]})},Wa=()=>{const[s,r]=a.useState([]),[t,o]=a.useState(!1),[i,l]=a.useState(""),n=async()=>{try{o(!0);const g=Ce(H(P,"db_art_diez_bis"),Ie("comisaria_recibe","==",!1)),x=(await K(g)).docs.map(d=>({id:d.id,...d.data()}));r(x)}catch(g){console.error("Error al obtener las recepciones pendientes: ",g)}finally{o(!1)}};a.useEffect(()=>{n()},[]);const c=async g=>{try{const j=JSON.parse(localStorage.getItem("user")),x=O(P,"db_art_diez_bis",g);await re(x,{comisaria_recibe:!0,visualidad:!0,fecha_ingreso_validado:Pe(),usuario_validado_ingreso:j.email}),r(d=>d.filter(h=>h.id!==g)),alert("Recepción aceptada correctamente.")}catch(j){console.error("Error al aceptar la recepción: ",j),alert("Hubo un error al aceptar la recepción.")}},p=async g=>{if(window.confirm("¿Estás seguro de que deseas rechazar esta recepción?"))try{const x=O(P,"db_art_diez_bis",g);await xe(x),r(d=>d.filter(h=>h.id!==g)),alert("Recepción rechazada correctamente.")}catch(x){console.error("Error al rechazar la recepción: ",x),alert("Hubo un error al rechazar la recepción.")}},b=s.reduce((g,j)=>{const x=j.comisaria||"Comisaría desconocida";return g[x]=(g[x]||0)+1,g},{}),u=i?s.filter(g=>g.comisaria===i):s;return e.jsx("div",{className:"container-lg ",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 mb-4",children:[e.jsx(Ga,{recepciones:b,loading:t}),e.jsxs("div",{className:"mt-2 p-3  text-center p-4 bg-transparent bg-opacity-50 rounded-4 shadow-lg mt-5",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize  text-white ",children:"Filtrar por comisaría"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select fw-light",value:i,onChange:g=>l(g.target.value),children:[e.jsx("option",{value:"",className:"fw-light",children:"Todas"}),Object.keys(b).map((g,j)=>e.jsx("option",{value:g,children:g},j))]})]})]}),e.jsx("div",{className:"col-12 col-md-8 mt-2 mt-md-0",children:e.jsx(Ha,{notificaciones:u,loading:t,aceptarRecepcion:c,rechazarRecepcion:p})})]})})},Ja=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Recepción Art. 10 Bis"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Recepción Art 10 bis",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(Wa,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},Za=()=>e.jsx(e.Fragment,{children:e.jsx(Ja,{})}),Ya=({recepciones:s,loading:r})=>e.jsx("div",{className:" text-center ",children:r?e.jsx("div",{className:"spinner-border text-white",role:"status"}):Object.keys(s).length>0?e.jsxs("div",{className:"text-center p-4 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("strong",{className:"text-light fs-6 text-capitalize",children:"Personas visibles por comisaría:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(s).map(([t,o],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-teal spinner-grow-sm",role:"status"}),e.jsx("span",{className:"text-truncate",children:t}),e.jsxs("span",{className:"badge bg-teal",children:[o," personas"]})]},i))})]}):e.jsx("div",{className:"alert bg-light  bg-opacity-75  text-capitalize shadow",role:"alert",children:e.jsx("strong",{children:"No hay recepciones pendientes en este momento."})})}),Qa=We,Xa=({dataInfo:s,loading:r,actualizarListado:t})=>{const[o,i]=a.useState(""),[l,n]=a.useState(null),[c,p]=a.useState(""),[b,u]=a.useState(!1),[g,j]=a.useState(null),[x,d]=a.useState({}),[h,m]=a.useState(!1),f=N=>Qa[N]||"",C=(N,y)=>{const w=new Date(y.seconds*1e3).getTime()+216e5,E=setInterval(()=>{const k=Date.now(),F=w-k;if(F<=0){clearInterval(E),d(q=>({...q,[N]:"00:00:00"}));return}const A=Math.floor(F/36e5),L=Math.floor(F%36e5/6e4),U=Math.floor(F%6e4/1e3),Y=`${A.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`;d(q=>({...q,[N]:Y}))},1e3);return E},v=async N=>{for(const y of N){const w=y.fecha_ingreso_validado;if(w&&w.seconds){const E=new Date(w.seconds*1e3);if(new Date().getTime()-E.getTime()>36e5){console.log(`Han pasado más de 1 hora desde la salida de ${y.nombre_apellido}`),alert(`Han pasado más de 1 hora el sistema da como salida a  ${y.nombre_apellido} del Articulo 10 bis`);const A=O(P,"db_art_diez_bis",y.id),L=await ke(A);if(L.exists()){const U=O(P,"db_art_diez_bis_desactivados",y.id);await fe(U,L.data()),await xe(A),await re(U,{visualidad:!1,salida_art:Pe(),salida_art_usuario:"sistema"}),t(),console.log(`Documento copiado, actualizado y eliminado para ${y.nombre_apellido}`)}}}}};a.useEffect(()=>{s&&s.length>0&&(v(s),s.forEach(N=>{N.fecha_ingreso_validado&&N.fecha_ingreso_validado.seconds&&C(N.id,N.fecha_ingreso_validado)}))},[s]);const S=async()=>{if(!g)return;m(!0);const{id:N,comisaria:y}=g,w=f(y);setTimeout(async()=>{if(c&&c===w)try{const E=JSON.parse(localStorage.getItem("user")),k=O(P,"db_art_diez_bis",N),F=await ke(k);if(F.exists()){const A=F.data();await fe(O(P,"db_art_diez_bis_desactivados",N),{...A,visualidad:!1,salida_art:Pe(),salida_art_usuario:(E==null?void 0:E.email)||"sistema"}),await xe(k),i(""),alert("Recepción aceptada correctamente."),u(!1),p(""),t()}else alert("El documento no existe.")}catch(E){console.error("Error al aceptar la recepción: ",E),alert("Hubo un error al aceptar la recepción.")}finally{m(!1)}else i(`El código ingresado (${c}) es incorrecto.`),m(!1)},1e3)},_=N=>{j(N),u(!0)};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("h1",{className:"display-4 fw-bold",children:["Salida 10 Bis ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("p",{className:"lead",children:"Administra las recepciones de este  articulo."})]})})}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-5",children:e.jsx("div",{className:"position-relative",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border text-white ",role:"status","aria-label":"Cargando...",children:" "})]}):e.jsxs("div",{className:"list-group",children:[o&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:o}),s&&s.length>0?s.map(N=>e.jsxs("div",{className:"list-group-item mb-3 shadow bg-light bg-opacity-75",children:[e.jsx("div",{className:"text-end me-2",children:e.jsxs("span",{className:"badge bg-primary",children:[e.jsx("i",{className:"bi bi-clock titilar me-1"})," ",x[N.id]||"Cargando..."]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:N.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:N.dni})]}),e.jsx("button",{className:"btn btn-teal text-white btn-sm w-25",onClick:()=>_(N),disabled:l===N.id,children:l===N.id?"Procesando...":"Finalizar"})]}),e.jsxs("small",{className:"mt-2",children:[N.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:N.comisaria})," - ",N.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:N.unidad})]})]},N.id)):e.jsxs("div",{className:"alert bg-light  bg-opacity-75  text-capitalize shadow",role:"alert",children:["No se encontraron Personas en dependencias.",e.jsx("i",{className:"bi bi-hand-thumbs-up ms-2"})]})]})})})]}),b&&g&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Ingresar Código"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>u(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body text-dark",children:[e.jsxs("p",{children:["Ingresa el código para la Comisaría ",e.jsx("strong",{children:g.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:N=>p(N.target.value),placeholder:"Código"}),o&&e.jsx("div",{className:"alert alert-light text-danger mt-3",role:"alert",children:o})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:S,disabled:!c||h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:"Cancelar"})]})]})})})]})},Ka=()=>{const[s,r]=a.useState(!1),[t,o]=a.useState(""),[i,l]=a.useState({}),[n,c]=a.useState([]),p=async()=>{try{r(!0);const u=Ce(H(P,"db_art_diez_bis"),Ie("visualidad","==",!0)),j=(await K(u)).docs.map(d=>({id:d.id,...d.data()}));c(j);const x=j.reduce((d,h)=>{const m=h.comisaria||"Comisaría desconocida";return d[m]=(d[m]||0)+1,d},{});l(x)}catch(u){console.error("Error al obtener datos: ",u)}finally{r(!1)}};a.useEffect(()=>{p()},[]);const b=t?n.filter(u=>(u.comisaria||"").toLowerCase()===t.toLowerCase()):n;return e.jsx("div",{className:"container-lg ",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 mb-4",children:[e.jsx(Ya,{recepciones:i,loading:s}),e.jsxs("div",{className:"mt-4 p-3 fw-light text-center p-4 bg-transparent bg-opacity-50 rounded-4 shadow-lg ",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize  text-white ",children:"Filtrar por comisaría"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select fw-light",value:t,onChange:u=>o(u.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),Object.keys(i).map((u,g)=>e.jsx("option",{value:u,children:u},g))]})]})]}),e.jsx("div",{className:"col-12 col-md-8 mt-4 mt-md-0",children:e.jsx(Xa,{dataInfo:b,loading:s,actualizarListado:p})})]})})},et=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Finalizar Art. 10 Bis"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Finalizar Art 10 bis",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(Ka,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},st=()=>e.jsx(e.Fragment,{children:e.jsx(et,{})});function at(){const[s,r]=a.useState([]),[t,o]=a.useState("noLeidas"),[i,l]=a.useState([]),[n,c]=a.useState(()=>{const y=localStorage.getItem("leidas");return y?JSON.parse(y):{}}),[p,b]=a.useState(!0),[u,g]=a.useState(!1),[j,x]=a.useState([]);a.useEffect(()=>{const y=qe(H(P,"db_notificaciones"),w=>{const E=w.docs.map(k=>({id:k.id,...k.data()})).sort((k,F)=>{var A,L;return(((A=F.timestamp)==null?void 0:A.seconds)??0)-(((L=k.timestamp)==null?void 0:L.seconds)??0)});r(E)});return()=>y()},[]),a.useEffect(()=>{(async()=>{const E=(await K(H(P,"db_personas"))).docs.map(k=>({id:k.id,...k.data()}));l(E),b(!1)})()},[]),a.useEffect(()=>{if(u){window.history.pushState({modalOpen:!0},"");const y=w=>{m()};return window.addEventListener("popstate",y),()=>{window.removeEventListener("popstate",y)}}},[u]);const d=y=>{c(w=>{const E={...w,[y]:!0};return localStorage.setItem("leidas",JSON.stringify(E)),E})},h=y=>{const w=s.find(E=>E.id===y);if(w!=null&&w.asociada){const E=i.filter(k=>w.asociada.includes(k.nombre_apellido));x(E),g(!0)}},m=()=>{g(!1),x([])},f=y=>({1:"Novedad",2:"Paradero",3:"Evasión",4:"Prioritaria"})[y]||"No definida",C=y=>/^https?:\/\//.test(y)?y:`https://${y}`,v=s.sort((y,w)=>{var F,A;const E=n[y.id]?1:0,k=n[w.id]?1:0;return E!==k?E-k:(((F=w.timestamp)==null?void 0:F.seconds)??0)-(((A=y.timestamp)==null?void 0:A.seconds)??0)}).filter(y=>t==="leidas"?n[y.id]:t==="noLeidas"?!n[y.id]:!0),S=s.length,_=n?Object.keys(n).length:0,N=S-_;return e.jsx("div",{className:"container my-5",children:p?e.jsx(ee,{leyendaSet:"Base de Datos"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx("div",{className:"d-flex flex-wrap justify-content-center align-items-center gap-1",children:["todas","leidas","noLeidas"].map(y=>{const w=y==="todas"?S:y==="leidas"?_:N,E=y==="todas"?"Todas":y==="leidas"?"Leídas":"No Leídas",k=y==="todas"?"bi-list-ul":y==="leidas"?"bi-check-circle":"bi-bell-fill";return e.jsxs("button",{className:`btn 
            ${t===y?"btn-light text-dark fw-semibold":"btn-outline-light bg-transparent text-white"} 
            ${y==="todas"?"rounded-start-pill":y==="noLeidas"?"rounded-end-pill":""}`,onClick:()=>o(y),children:[e.jsx("i",{className:`bi me-2 ${k}`}),E," ",e.jsxs("span",{className:"ms-1",children:["(",w,")"]})]},y)})})}),v.length===0?e.jsx("div",{className:"text-muted my-5 alert d-flex justify-content-center text-center",children:e.jsxs("p",{className:"text-white border border-4 p-4 rounded-pill w-100 bg-dark bg-opacity-25 fs-3",children:[e.jsx("i",{className:`bi me-2 ${t==="todas"?"bi-inbox":t==="leidas"?"bi-check-circle":"bi-bell-fill"}`}),t==="todas"&&e.jsxs(e.Fragment,{children:["No hay notificaciones disponibles. ",e.jsx("span",{className:"ms-2",role:"img","aria-label":"bandeja",children:"📭"}),e.jsx("br",{}),e.jsx("small",{className:"d-block mt-2 text-white-50",children:"Aún no se han generado notificaciones."})]}),t==="leidas"&&e.jsxs(e.Fragment,{children:["No hay notificaciones leídas. ",e.jsx("span",{className:"ms-2",role:"img","aria-label":"ojo",children:"👀"}),e.jsx("br",{}),e.jsx("small",{className:"d-block mt-2 text-white-50",children:"Aún no marcaste ninguna como leída."})]}),t==="noLeidas"&&e.jsxs(e.Fragment,{children:["No hay notificaciones sin leer. ",e.jsx("span",{className:"ms-2",role:"img","aria-label":"mano",children:"✋"}),e.jsx("br",{}),e.jsx("small",{className:"d-block mt-2 text-white-50",children:"¡Todo al día, sin novedades pendientes!"})]})]})}):v.map(y=>{var w,E;return e.jsxs("div",{className:"card shadow position-relative d-flex gap-3 p-4 my-5 mx-3",children:[!n[y.id]&&e.jsx("button",{className:"btn-close position-absolute top-0 end-0 m-2",onClick:()=>d(y.id)}),e.jsx("img",{src:n[y.id]?"img/Alertas/alertRead.png":"img/Alertas/alert1.gif",alt:"Alerta",className:"position-absolute rounded-circle bg-white p-2 shadow",style:{width:n[y.id]?"75px":"80px",height:n[y.id]?"75px":"80px",top:"-20px",left:"-20px",objectFit:"contain"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"40px"},children:[e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-2 mt-2",children:[e.jsx("h5",{className:"mb-1 text-center text-sm-start w-100 w-sm-auto",children:e.jsx("strong",{children:y.titulo||"Nueva Notificación"})}),y.timestamp&&e.jsx("p",{className:"mb-0 text-muted small d-none d-sm-block",children:new Date(y.timestamp.seconds*1e3).toLocaleString()})]}),e.jsxs("p",{children:[n[y.id]&&e.jsx("i",{className:"badge text-bg-indigoMui text-white bi bi-check-circle-fill",children:" Esta Notificación fue Leída"})," ",y.caratula&&e.jsxs(e.Fragment,{children:[parseInt(y.caratula)===1&&e.jsx("span",{className:"badge text-bg-teal text-white shadow-sm",children:f(y.caratula)}),parseInt(y.caratula)===2&&e.jsx("span",{className:"badge text-bg-primaryMuiBlue text-white shadow-sm",children:f(y.caratula)}),parseInt(y.caratula)===3&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-danger"}),e.jsx("span",{className:"badge text-bg-danger text-white shadow-sm",children:f(y.caratula)})]}),parseInt(y.caratula)===4&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-orange"}),e.jsx("span",{className:"badge text-bg-orange text-white shadow-sm",children:f(y.caratula)})]})]})]}),y.contenido&&e.jsx("p",{className:"mb-3",children:y.contenido}),((w=y.enlace)==null?void 0:w.length)>0&&e.jsx("p",{className:"text-center",children:y.enlace.map((k,F)=>e.jsxs("a",{href:C(k),target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none d-flex align-items-center gap-2 rounded-pill",style:{maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[e.jsx("i",{className:"bi bi-browser-chrome titilar",style:{fontSize:"20px"}}),k]},F))}),e.jsx("div",{className:"d-flex justify-content-center flex-wrap align-items-center gap-3 mt-3",children:(E=y.asociada)==null?void 0:E.map((k,F)=>{const A=i.find(L=>(L.nombre_apellido||"").toLowerCase()===(k||"").toLowerCase());return e.jsxs("div",{className:"d-flex align-items-center gap-2 border rounded shadow-sm p-2",style:{minWidth:"150px"},onClick:()=>h(y.id),children:[(A==null?void 0:A.base64)&&e.jsx("img",{src:A.base64,alt:A.nombre_apellido,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("span",{className:"text-capitalize",children:[F+1,". ",k]})]},F)})})]})]},y.id)}),u&&j.length>0&&e.jsx("div",{className:"modal fade bg-dark show d-block",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-dialog-scrollable text-dark ",children:e.jsxs("div",{className:"modal-content bg-light",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:["Personas Asociadas ",j.length," "]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:m})]}),e.jsx("div",{className:"modal-body ",children:e.jsx("div",{className:"row ",children:j.map((y,w)=>e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"card text-center p-2 bg-dark bg-opacity-75 rounded-4 shadow-lg text-light",children:[e.jsx("img",{src:y.base64||"default-image-url.jpg",alt:y.nombre_apellido,className:"card-img-top",style:{height:"200px",objectFit:"cover"}}),e.jsxs("div",{className:"card-body text-center text-capitalize ",children:[e.jsx("h5",{className:"card-title text-blueMui ",children:y.nombre_apellido}),e.jsxs("p",{children:[e.jsx("strong",{children:"Documento:"})," ",y.documento]})]})]})},w))})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn  text-center p-2 bg-dark bg-opacity-50  shadow-lg text-white ",onClick:m,children:"Cerrar"})})]})})})]})})}const tt=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Notificaciones - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Notificaciones",Promp2:"bi bi-megaphone fs-4 "}),"   "]}),e.jsx(at,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},it=()=>e.jsx(e.Fragment,{children:e.jsx(tt,{})}),Cs=({onImageSave:s})=>{const[r,t]=a.useState(!1),[o,i]=a.useState(null),[l,n]=a.useState(""),c=a.useRef(null),[p,b]=a.useState(!1),[u,g]=a.useState({x:0,y:0}),[j,x]=a.useState({x:0,y:0}),[d,h]=a.useState(1),m=a.useRef(null),f=w=>{b(!0);const{offsetX:E,offsetY:k}=w.nativeEvent;x({x:E,y:k})},C=w=>{if(!p||!o)return;const{offsetX:E,offsetY:k}=w.nativeEvent;g(F=>({x:F.x+(E-j.x),y:F.y+(k-j.y)})),x({x:E,y:k})},v=()=>{b(!1)},S=()=>{t(!1),n(""),i(null),g({x:0,y:0}),h(1);const w=document.getElementById("file-input");w&&(w.value=""),m.current&&(URL.revokeObjectURL(m.current),m.current=null)},_=()=>t(!0),N=w=>{const E=w.target.files[0];if(E){if(!E.type.startsWith("image/")){n("Por favor, selecciona un archivo de imagen.");return}if(E.size>5*1024*1024){n("La imagen debe ser menor de 5 MB.");return}const k=URL.createObjectURL(E);m.current=k,i(k),n("")}},y=()=>{if(!o||!c.current){n("Por favor, selecciona una imagen antes de guardar.");return}const w=c.current,E=w.width,k=w.height,F=document.createElement("canvas");F.width=E,F.height=k;const A=F.getContext("2d"),L=new Image;L.src=o,L.onload=()=>{A.clearRect(0,0,E,k),A.drawImage(L,u.x,u.y,L.width*d,L.height*d);const U=F.toDataURL("image/jpeg",.92);s(U),S()}};return a.useEffect(()=>{if(o&&c.current){const w=c.current,E=w.getContext("2d"),k=new Image;k.src=o,k.onload=()=>{E.clearRect(0,0,w.width,w.height),E.drawImage(k,u.x,u.y,k.width*d,k.height*d)}}},[o,u,d]),a.useEffect(()=>{const w=c.current,E=k=>{if(k.preventDefault(),!o)return;const F=1.1,A=k.deltaY<0?d*F:d/F;h(Math.max(A,.1))};if(w)return w.addEventListener("wheel",E,{passive:!1}),()=>{w.removeEventListener("wheel",E)}},[o,d]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:e.jsx("button",{type:"button",onClick:_,className:"btn shadow-sm text-light  ",title:"Crear nuevo",children:e.jsx("i",{className:"bi bi-plus-circle-fill display-1  "})})}),e.jsx("div",{className:`modal fade  bg-dark ${r?"show":""}`,style:{display:r?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!r,children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-gradiante2",children:e.jsx("h5",{className:"modal-title text-light  ",id:"modalLabel ",children:"Selecciona tu imagen  / Edita "})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{id:"file-input",type:"file",className:"form-control",accept:"image/*",onChange:N}),o&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"d-flex justify-content-center mt-3",children:e.jsx("canvas",{ref:c,className:"shadow",onMouseDown:f,onMouseMove:C,onMouseUp:v,onMouseLeave:v,width:500,height:500,style:{border:"1px solid black",cursor:p?"grabbing":"grab"}})}),e.jsxs("p",{className:"alert alert-light text-redUi1 fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-pink",style:{width:"1rem",height:"1rem"},role:"status"}),"Para hacer zoom en la imagen, simplemente usa el scroll (la rueda) de tu mouse. 🖲️"]}),e.jsxs("p",{className:"alert alert-light text-indigoMui fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-indigoMui",style:{width:"1rem",height:"1rem"},role:"status"}),"Mantén presionado el botón del mouse para arrastrar la imagen. 🖱️"]})]}),l&&e.jsx("div",{className:"mt-2 text-danger",children:l})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:S,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn text-white bg-indigoMui",onClick:y,children:"Guardar Imagen"})]})]})})}),e.jsx("div",{className:`modal-backdrop fade ${r?"show":""}`,style:{display:r?"block":"none"}})]})},rt=({onSubmit:s,savedImage:r,resetImage:t,formRef:o})=>{const[i,l]=a.useState(()=>{const d=localStorage.getItem("formData");return d?JSON.parse(d):{nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,captura:!1,prioridad:1,alertaParaderoCaptura:""}}),[n,c]=a.useState({}),[p,b]=a.useState(!1);a.useEffect(()=>{localStorage.setItem("formData",JSON.stringify(i))},[i]);const u=({target:{id:d,value:h,type:m,checked:f}})=>{l(C=>{let v={...C,[d]:m==="checkbox"?f:h};if(d==="alertaParaderoCaptura")switch(h){case"paradero":v={...v,prioridad:2,paradero:!0,alerta:!1};break;case"evadido":v={...v,prioridad:3,captura:!0,alerta:!0};break;case"prioritaria":v={...v,prioridad:4,alerta:!1};break;default:v={...v,prioridad:1,paradero:!1,alerta:!1};break}return v}),c(C=>({...C,[d]:""}))},g=()=>{const d={};return r?(i.nombreApellido.match(/[A-Za-zÑñÁáÉéÍíÓóÚú\s]+/)||(d.nombreApellido="Ingrese solo letras y espacios."),i.documento.length<6&&(d.documento="El número de documento debe tener al menos 6 caracteres."),c(d),Object.keys(d).length===0):(alert("Debes cargar una imagen antes de enviar el formulario."),!1)},j=async d=>{if(d.preventDefault(),!g())return;if(!window.confirm("¿Estás seguro de que deseas enviar este formulario?")){alert("El envío ha sido cancelado.");return}b(!0);try{const m={...i,imagen:r};if(typeof s=="function")await s(m),alert("Formulario enviado correctamente.");else throw new Error("onSubmit no es una función válida")}catch(m){console.error(m),alert("Hubo un error al enviar el formulario.")}finally{b(!1),x()}},x=()=>{localStorage.removeItem("formData"),l({nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,prioridad:1,alertaParaderoCaptura:""}),c({}),t()};return e.jsxs("div",{className:" mt-3",children:[p&&e.jsx(ee,{})," ",e.jsxs("form",{ref:o,onSubmit:j,children:[e.jsx(Oe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-person-fill text-greenUi me-3 p-1"})," Nombre y Apellido"]}),id:"nombreApellido",type:"text",value:i.nombreApellido,error:n.nombreApellido,onChange:u,required:!0,className:"text-center"}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Oe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-file-earmark-person text-greenUi me-3 p-1"})," Número de Documento"]}),id:"documento",type:"number",value:i.documento,error:n.documento,onChange:u,className:"col"}),e.jsx(Ss,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-gender-ambiguous text-greenUi me-3 p-1"})," Sexo"]}),id:"sexo",value:i.sexo,options:[{label:"Seleccione",value:""},{label:"Masculino 👨",value:"masculino"},{label:"Femenino 👩",value:"femenino"},{label:"Otros 👭🏻 ",value:"otro"}],onChange:u,className:"col"})]}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Oe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-building text-greenUi me-3 p-1"})," Entidad Solicita Captura"]}),id:"entidad",type:"text",value:i.entidad,onChange:u,className:"col"}),e.jsx(Oe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-telephone text-greenUi me-3 p-1"})," Número de Contacto"]}),id:"numeroContacto",type:"tel",value:i.numeroContacto,error:n.numeroContacto,onChange:u,className:"col"})]}),e.jsx(ks,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil text-greenUi me-3 p-1"})," Datos de la Persona / Info Adicional"]}),id:"descripcionFisica",value:i.descripcionFisica,onChange:u,className:"text-center"}),e.jsx(ks,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil-square text-greenUi me-3 p-1"})," Motivo  Captura "]}),id:"motivoCaptura",value:i.motivoCaptura,onChange:u,className:"text-center"}),e.jsx(Ss,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill p-1 text-white me-3 titilar "})," Selecciona una Tipo de Alerta"]}),id:"alertaParaderoCaptura",value:i.alertaParaderoCaptura,options:[{label:"Normal",value:"normal"},{label:"Búsqueda Paradero 🔍 ",value:"paradero"},{label:"Alerta Evadido 🚨",value:"evadido"},{label:"Captura Prioritaria ⚠️",value:"prioritaria"}],onChange:u}),e.jsxs("div",{className:"d-flex justify-content-end pt-4  mt-3",children:[e.jsxs("button",{type:"button",onClick:x,className:"btn btn-danger text-light shadow",children:[e.jsx("i",{className:"bi bi-x-circle "})," Limpiar Formulario"]}),e.jsxs("button",{type:"submit",className:"btn btn-primary2 shadow ms-2",disabled:p,children:[e.jsx("i",{className:"bi bi-send"})," Enviar Formulario"]})]})]})]})},Oe=({label:s,id:r,type:t="text",value:o,error:i,onChange:l,className:n="",required:c=!1})=>e.jsxs("div",{className:`mb-4 ${n}`,children:[e.jsx("span",{htmlFor:r,className:"input-group-text bg-light bg-opacity-25 border-white  text-white text-center mb-1",children:s}),e.jsx("input",{type:t,className:`form-control bg-transparent text-white border-white ${i?"is-invalid":""}`,id:r,value:o,onChange:l,required:c}),e.jsx("div",{className:"invalid-feedback text-light",children:i})]}),Ss=({label:s,id:r,value:t,options:o,onChange:i,className:l=""})=>e.jsxs("div",{className:`mb-5 ${l} text-center`,children:[e.jsx("span",{htmlFor:r,className:`input-group-text bg-light bg-opacity-25 text-white text-center d-flex justify-content-center shadow ${r==="alertaParaderoCaptura"?"bg-danger text-white":""}`,children:s}),e.jsx("select",{className:"form-select text-center",id:r,value:t,onChange:i,style:{color:"white",backgroundColor:"transparent",borderColor:"white"},children:o.map(({label:n,value:c})=>e.jsx("option",{value:c,style:{backgroundColor:"#5F3F8B",color:"white"},children:n},c))})]}),ks=({label:s,id:r,value:t,onChange:o,className:i=""})=>e.jsxs("div",{className:`form-floating mb-4 ${i}`,children:[e.jsx("textarea",{className:"form-control bg-transparent text-white border-white",id:r,value:t,onChange:o,style:{height:"100px"},placeholder:" "}),e.jsx("label",{htmlFor:r,className:"text-",children:s})]}),lt=()=>{const[s,r]=a.useState(null),[t,o]=a.useState(!1),[i,l]=a.useState(!1),[n,c]=a.useState(!1),p=a.useRef(null);a.useEffect(()=>{const x=()=>{o(window.innerWidth<576)};return window.addEventListener("resize",x),x(),()=>window.removeEventListener("resize",x)},[]);const b=x=>{r(x),l(!1)},u=async x=>{var C;const d=()=>{const v=new Date,S=String(v.getDate()).padStart(2,"0"),_=String(v.getMonth()+1).padStart(2,"0"),N=String(v.getFullYear()).slice(-2);return`${S}/${_}/${N}`},m=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),f={documento:x.documento,nombre_apellido:x.nombreApellido.toLowerCase(),sexo:x.sexo,entidad:x.entidad,numero_contacto:x.numeroContacto,descripcion_fisica:x.descripcionFisica,motivo_captura:x.motivoCaptura,base64:s,date:d(),usuario:m?m.email:"Desconocido",prioridad:x.prioridad,alerta:x.alerta||!1,paradero:x.paradero||!1};try{await Ee(H(P,"db_personas"),f),console.log("Datos guardados en Firebase:",f),(C=p.current)==null||C.reset(),g()}catch(v){console.error("Error al guardar los datos en Firebase:",v)}},g=()=>{r(null),l(!1),c(!1)},j=x=>{const d=x.target.files[0];if(d){const h=new FileReader;h.onloadend=()=>{const m=new Image;m.onload=()=>{const f=document.createElement("canvas"),C=f.getContext("2d"),v=500,S=500;let _=m.width,N=m.height;_>N?_>v&&(N*=v/_,_=v):N>S&&(_*=S/N,N=S),f.width=_,f.height=N,C.drawImage(m,0,0,_,N);const y=f.toDataURL("image/jpeg");r(y),l(!1)},m.src=h.result},h.readAsDataURL(d)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-lg",children:n?e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10 col-lg-8 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Formulario"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-ui-checks fs-4 text-dark"})})]}),e.jsx("p",{className:"mt-2 text-white",children:"Gestioná tus registros de ingreso."}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-5 mb-4",children:e.jsxs("div",{className:"text-center position-relative",children:[!i&&s&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-secondaryM text-purple position-absolute end-0 top-0 mt-5 m-2","aria-label":"Editar",onClick:()=>{r(null),l(!0)},children:e.jsx("i",{className:"bi bi-pencil-fill"})}),e.jsx("h5",{className:"text-light mt-4",children:"Vista previa  "}),e.jsx("img",{src:s,alt:"Captura subida",className:"img-fluid rounded-4 border border-light shadow mt-2",style:{maxWidth:"100%"}})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-light",children:"Subí una nueva imagen"}),t?e.jsx("div",{className:"mb-3 w-100 px-3",children:e.jsx("input",{type:"file",className:"form-control bg-gradiante2 text-white",onChange:x=>{j(x)}})}):e.jsx(Cs,{onImageSave:x=>{b(x)}})]})]})}),e.jsx("div",{className:"col-12 col-md-7",children:e.jsx(rt,{onSubmit:u,savedImage:s,resetImage:g,formRef:p})})]})]})})})}):e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center py-5 px-3 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 display-5 fw-bold text-white",children:[e.jsx("i",{className:"bi bi-image me-2"}),"Selecciona imagen para comenzar"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 flex-column flex-md-row",children:t?e.jsxs("div",{className:"mb-3 w-100 px-3",children:[e.jsxs("label",{className:"form-label fw-semibold text-white",children:[e.jsx("i",{className:"bi bi-upload me-2"}),"Subir solo imagen"]}),e.jsx("input",{type:"file",className:"form-control bg-light text-dark rounded-3 shadow-sm",onChange:x=>{j(x),c(!0)}})]}):e.jsx("div",{className:"p-3 bg-body bg-opacity-10 rounded-4 shadow-sm",children:e.jsx(Cs,{onImageSave:x=>{b(x),c(!0)}})})})]})})})})},nt=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Formulario - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsx("div",{className:"my-5",children:e.jsx(lt,{})})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},ot=()=>e.jsx(e.Fragment,{children:e.jsx(nt,{})}),ct=()=>{const[s,r]=a.useState(null),[t,o]=a.useState([]),[i,l]=a.useState([]),n=p=>{const b=p.target.files[0];if(r(null),l([]),b){if(!b.name.endsWith(".csv")){r("Solo se permiten archivos CSV.");return}const u=new FileReader;u.onload=g=>{const j=g.target.result,x=j.includes(";")?";":",",h=j.split(`
`).map(C=>C.trim()).map(C=>C.split(x)),m=[],f=[];h.forEach((C,v)=>{if(C.some(w=>w.trim()===""))return;const _=C[0],N=C[1],y=C[2];isNaN(_)||_.length!==8?f.push({rowIndex:v+1,error:"El primer valor debe ser numérico y tener 8 caracteres."}):typeof N!="string"||N.trim()===""?f.push({rowIndex:v+1,error:"La segunda columna debe ser texto."}):c(y)?m.push(C):f.push({rowIndex:v+1,error:"La tercera columna debe tener formato de correo electrónico."})}),f.length>0&&l(f),m.length===0&&f.length===0&&r("No se encontraron filas válidas."),o(m)},u.onerror=()=>{r("Ocurrió un error al leer el archivo.")},u.readAsText(b)}},c=p=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(p);return e.jsx("div",{className:"container-lg mt-5 mt-sm-5 mt-md-0 mt-lg-0 position-relative min-vh-100",children:e.jsxs("div",{className:"card shadow-lg rounded-4 position-relative",style:{zIndex:10},children:[e.jsx("div",{className:"card-header bg-orangeW text-dark shadow-sm rounded-top-4",children:e.jsxs("h4",{className:"fw-semibold p-2",children:["Subir Archivo CSV ",e.jsx("i",{className:"bi bi-filetype-csv ms-2"})]})}),e.jsxs("div",{className:"card-body bg-light rounded-bottom-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"csvFile",className:"form-label",children:"Selecciona un archivo CSV para subir:"}),e.jsx("input",{type:"file",className:"form-control",id:"csvFile",accept:".csv",onChange:n})]}),s&&e.jsx("div",{className:"alert alert-danger",children:s}),i.length>0&&e.jsxs("div",{className:"alert alert-danger bg-redW shadow my-5",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Errores en las siguientes filas:"]}),e.jsx("ul",{children:i.map((p,b)=>e.jsxs("li",{children:["Fila ",p.rowIndex,": ",p.error]},b))})]}),t.length>0&&e.jsxs("div",{className:"my-4",children:[e.jsxs("span",{className:"fw-semibold border border-2 rounded-pill p-2 px-5 border-teal bg-greenW2 text-dark d-inline-flex align-items-center",children:[e.jsx("i",{className:"me-3 bi bi-person-lines-fill"}),"Contenido del archivo:"]}),e.jsx("div",{className:"table-responsive text-center bg-greenW2 mt-3 rounded-3 shadow-sm",children:e.jsxs("table",{className:"table table-striped mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"DNI"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Correo"}),e.jsx("th",{children:"Dependencia"})]})}),e.jsx("tbody",{children:t.map((p,b)=>e.jsx("tr",{children:p.map((u,g)=>e.jsx("td",{children:u},g))},b))})]})})]})]})]})})};es.register(ss,as,ts,$s,is,rs,Ts,ls,ns);const dt=(s,r)=>{const t=parseInt(s.replace("#",""),16),o=Math.max((t>>16)-r,0),i=Math.max((t>>8&255)-r,0),l=Math.max((t&255)-r,0);return`#${(o<<16|i<<8|l).toString(16).padStart(6,"0")}`},mt=({totalCapturas:s,totalPrioridadNormal:r,totalParadero:t,totalEvasiones:o,totalPrioritaria:i,totalEvasionesCapturados:l})=>{const[n,c]=a.useState("bar"),b=["#03dac6","#ffef62","#f73378","#2196f3"],u=()=>{const h={labels:["Capturas Normales","Capturas Prioritarias","Evasiones","Búsqueda Paradero"],datasets:[]};switch(n){case"line":h.datasets.push({label:"Cantidad",data:[r,i,o,t],backgroundColor:"rgba(245, 245, 245, 0.2)",borderColor:"#ffffff",pointBackgroundColor:"#ffffff",pointBorderColor:"#fff",borderWidth:2,tension:.3,fill:!0});break;case"pie":case"doughnut":h.datasets.push({label:"Cantidad",data:[r,i,o,t],backgroundColor:b,borderColor:"#fff",borderWidth:2,hoverOffset:10});break;default:h.datasets.push({label:"Cantidad",data:[r,i,o,t],backgroundColor:b,borderColor:b.map(m=>dt(m,40)),borderWidth:1});break}return h},g={datasets:[{label:"Capturas y Evasiones",data:[{x:1,y:s},{x:2,y:t},{x:3,y:o},{x:4,y:i},{x:5,y:l}],backgroundColor:"#ffffff"}]},x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff"}},title:{display:!0,text:"Informe Gráfico de Capturas y Evasiones",color:"#ffffff",font:{size:20}},tooltip:{bodyColor:"#ffffff",titleColor:"#ffffff"}},animation:{duration:1e3,easing:"easeOutBounce"},scales:n==="pie"||n==="doughnut"?{}:{x:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.2)"}},y:{beginAtZero:!0,ticks:{color:"#ffffff",stepSize:1},grid:{color:"rgba(255, 255, 255, 0.2)"}}}},d=h=>{c(h.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-center my-5 text-light",children:"Estadísticas / Gráficos"}),e.jsx("div",{className:"row justify-content-center mb-4",children:e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"input-group input-group-sm shadow-sm",children:[e.jsx("span",{className:"input-group-text bg-dark bg-opacity-50 text-light",children:"Tipo de gráfico"}),e.jsxs("select",{className:"form-select text-center",onChange:d,value:n,children:[e.jsx("option",{value:"bar",children:"Barra"}),e.jsx("option",{value:"line",children:"Línea"}),e.jsx("option",{value:"pie",children:"Pastel"}),e.jsx("option",{value:"doughnut",children:"Doughnut"}),e.jsx("option",{value:"scatter",children:"Dispersión"})]})]})})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10",style:{height:"400px"},children:n==="scatter"?e.jsx(Bs,{data:g,options:x}):n==="bar"?e.jsx(os,{data:u(),options:x}):n==="line"?e.jsx(Ge,{data:u(),options:x}):n==="pie"?e.jsx(cs,{data:u(),options:x}):n==="doughnut"?e.jsx(ds,{data:u(),options:x}):null})})]})},ut=({showModalLink:s,setShowModalLink:r,selectedNotifId:t,setNewLink:o,newLink:i,setNotificaciones:l})=>{const[n,c]=a.useState(!0),[p,b]=a.useState(""),u=()=>{r(!1),o(""),c(!0),b("")},g=async()=>{if(!i){c(!1),b("Por favor, ingresa un enlace.");return}if(!t){c(!1),b("Por favor, selecciona una notificación.");return}try{await re(O(P,"db_notificaciones",t),{enlace:_e(i)}),o(""),c(!0),b(""),alert("Enlace agregado correctamente."),u()}catch(j){console.error("Error al agregar el enlace:",j),alert("Hubo un error al agregar el enlace.")}};return s&&e.jsx("div",{className:"modal fade show bg-dark ",style:{display:"block"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!s,children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content p-3 bg-gradient rounded-4 shadow-lg border-0",children:[e.jsxs("div",{className:"modal-header border-0",children:[e.jsx("h5",{className:"modal-title text-dark",id:"modalLabel ",children:"Agregar Enlace a la Notificación"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:u,"aria-label":"Cerrar",disabled:!1})]}),e.jsx("div",{className:"modal-body bg-light rounded-4 p-4 shadow-sm",children:e.jsxs("div",{className:"form-floating text-dark",children:[e.jsx("input",{type:"url",id:"link",className:`form-control ${n?"":"is-invalid"}`,placeholder:"https://example.com",value:i,onChange:j=>o(j.target.value),disabled:!1}),e.jsx("label",{htmlFor:"link",children:"Ingrese el enlace"}),!n&&e.jsx("div",{className:"invalid-feedback",children:p})]})}),e.jsxs("div",{className:"modal-footer bg-light border-0",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:u,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:g,disabled:!1,children:"Guardar Enlace"})]})]})})})},ht=({showModalNot:s,closeModalNot:r})=>{const t=Me(),[o,i]=a.useState(""),[l,n]=a.useState(""),[c,p]=a.useState("1"),[b,u]=a.useState(""),[g,j]=a.useState(!1),x=()=>{const m=new Date,f=String(m.getDate()).padStart(2,"0"),C=String(m.getMonth()+1).padStart(2,"0"),v=m.getFullYear().toString().slice(-2);return`${f}/${C}/${v}`};a.useEffect(()=>{if(t.pathname==="/panelcontrol"){const m=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",m),()=>{window.removeEventListener("popstate",m)}}},[t,r]);const d=async m=>{if(m.preventDefault(),o.trim()===""){u("El mensaje no puede estar vacío.");return}if(o.length>280){u("El mensaje no puede exceder los 280 caracteres.");return}if(c===""){u("Por favor, selecciona una carátula.");return}u(""),j(!0);try{await Ee(H(P,"db_notificaciones"),{titulo:l,contenido:o,timestamp:Pe(),leido:!1,fecha:x(),caratula:c}),n(""),i(""),p("1"),r()}catch(f){console.error("Error al enviar notificación: ",f),u("Error al enviar la notificación. Inténtalo de nuevo.")}finally{j(!1)}},h=()=>{i(""),p("1"),u(""),r()};return e.jsx("div",{className:`modal bg-dark text-white ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header text-center  bg-gradiante2 bg-opacity-50 ",children:[e.jsxs("h3",{className:"modal-title text-center ",id:"modalTitle",children:["Crear Notificación  ",e.jsx("i",{className:"bi bi-envelope-plus ms-2 titilar ",style:{fontSize:"1.8rem"}})]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:h})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("form",{onSubmit:d,children:[e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aquí",id:"titulo",value:l,onChange:m=>n(m.target.value)}),e.jsx("label",{className:"text-blue",children:"Titulo de la Notificación"})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aquí",id:"mensaje",value:o,onChange:m=>i(m.target.value),style:{minHeight:"150px"}}),e.jsx("label",{className:"text-blue",children:"Mensaje"})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsx("div",{className:"col-md",children:e.jsxs("div",{className:"form-floating shadow-sm",children:[e.jsxs("select",{className:"form-select text-center",id:"floatingSelectGrid",value:c,onChange:m=>p(m.target.value),children:[e.jsx("option",{value:"1",children:"Informativa "}),e.jsx("option",{value:"2",children:"Paradero 🔎"}),e.jsx("option",{value:"3",children:"Evadido 👮🏻"}),e.jsx("option",{value:"4",children:"Prioritaria ⭐"})]}),e.jsx("label",{className:"text-blue",children:"Selecciona Tipo de Notificación"})]})})}),b&&e.jsx("div",{className:"alert alert-danger mt-5",children:b}),g?e.jsx(ee,{}):e.jsx("div",{className:"d-grid",children:e.jsx("button",{type:"submit",className:"btn bg-primary border-white border-3 text-white rounded-pill position-absolute top-100 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Crear Notificación ",e.jsx("i",{className:"bi bi-send-check-fill ms-2 text-white"})]})})})]})})})]})})})},xt=({Date1:s,Date2:r,onCerrar:t,color:o})=>{const[i,l]=a.useState(!1),n=()=>{l(!0)};return e.jsxs("div",{className:`alert alert-${o} text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg text-light position-relative d-flex align-items-start gap-3`,children:[e.jsx("button",{type:"button",className:"btn-close  btn-close-white  position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:t}),e.jsx("img",{src:"img/ayuda.gif",alt:"Ayuda",style:{width:"80px",height:"70px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-secondaryM border border-2 d-none d-sm-table-cell"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Hola, soy el asistente de ayuda. Voy a guiarte en el proceso de creación de una notificación."}),e.jsxs("p",{children:["Para comenzar, presiona el botón ",e.jsx("strong",{className:"titilar",children:"'Crear Notificación'"}),". Luego, ingresa el título y el contenido del mensaje, y selecciona el tipo de notificación:"]}),e.jsxs("ul",{children:[e.jsx("p",{children:"Informativa (Normal)"}),e.jsx("p",{children:"Búsqueda de Paradero 🔎 "}),e.jsx("p",{children:"Prioritaria (Importante) ⭐ "}),e.jsx("p",{children:"Evadido (En caso de evasiones) 🚨"})]}),e.jsx("button",{type:"button",className:"btn btn-primary text-white btn-sm mx-2",onClick:n,children:"Continuar"}),e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed text-light btn-sm",onClick:t,children:"Finalizar "}),i&&e.jsxs("div",{children:[e.jsxs("p",{className:"mt-3",children:[e.jsx("i",{className:"bi bi-person-fill-add rounded-circle bg-cyan text-white p-2 mx-2"}),'"Usa este ícono  para asociar personas a tu notificación. Esto permitirá que el usuario vea una tarjeta con la información de la persona asociada."']}),e.jsxs("p",{className:"mt-3",children:[e.jsx("i",{className:"bi bi-link rounded-circle bg-teal text-white p-2 mx-2"}),'"Usa este ícono  para agregar enlaces relacionados con la notificación. Esto permitirá que el usuario se dirija directamente al sitio web indicado."']}),e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed text-light btn-sm",onClick:t,children:"Finalizar "})]})]})]})};function bt(){const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState(!1),[n,c]=a.useState(!1),[p,b]=a.useState(null),[u,g]=a.useState(null),[j,x]=a.useState(null),[d,h]=a.useState(""),[m,f]=a.useState(!1),[C,v]=a.useState(""),[S,_]=a.useState(""),[N,y]=a.useState(""),[w,E]=a.useState("desc"),[k,F]=a.useState(!1),[A,L]=a.useState(""),U=()=>F(!0),Y=()=>F(!1),[q,W]=a.useState(!1),le=D=>{D!=null&&D.asociada_notificacion_id&&Array.isArray(D.asociada_notificacion_id)&&alert(`Esta persona está asociada a las siguientes notificaciones: ${D.asociada_notificacion_id.join(", ")}`)},me=D=>{E(D.target.value),de(D.target.value)},de=(D,Q)=>{let J=[...s];D==="asc"?J.sort((I,Z)=>{var T,se;return((T=I.timestamp)==null?void 0:T.seconds)-((se=Z.timestamp)==null?void 0:se.seconds)}):J.sort((I,Z)=>{var T,se;return((T=Z.timestamp)==null?void 0:T.seconds)-((se=I.timestamp)==null?void 0:se.seconds)}),r(J)};a.useEffect(()=>{f(!0);const D=Ce(H(P,"db_notificaciones"),Re("timestamp","desc")),Q=qe(D,J=>{const I=J.docs.map(Z=>({id:Z.id,...Z.data()}));r(I)},J=>{console.error("Error al obtener notificaciones:",J)});return f(!1),()=>Q()},[]),a.useEffect(()=>{(async()=>{const Q=Ce(H(P,"db_personas"),Re("nombre_apellido","asc")),I=(await K(Q)).docs.map(Z=>({id:Z.id,...Z.data()}));o(I)})()},[]);const ae=async(D,Q)=>{try{if(!window.confirm("¿Desea eliminar este enlace?"))return;const I=O(P,"db_notificaciones",Q),Z=await ke(I);if(Z.exists()){const T=Z.data();if(Array.isArray(T.enlace)){const se=T.enlace.filter((R,X)=>X!==D);await re(I,{enlace:se}),alert("Enlace eliminado con exito ")}else alert("El campo 'enlace' no existe o no es un array.")}else alert("No se encontró el documento con el ID proporcionado.")}catch(J){alert.error("Error al eliminar el enlace:",J)}},B=async D=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta notificación?")){f(!0);try{await xe(O(P,"db_notificaciones",D)),r(J=>J.filter(I=>I.id!==D)),alert("Se eliminó la notificación")}catch(J){console.error("Error al eliminar la notificación:",J),alert("Hubo un error al eliminar la notificación.")}finally{f(!1)}}},te=D=>{b(D),l(!0)},ie=()=>{l(!1),b(null),h("")},ne=D=>{b(D),c(!0)},oe=async()=>{if(p&&d)try{const D=Ce(H(P,"db_personas"),Ie("nombre_apellido","==",d)),Q=await K(D);if(Q.empty)alert("No se encontró la persona seleccionada.");else{const J=Q.docs[0];await Promise.all([re(O(P,"db_notificaciones",p),{asociada:_e(d)}),re(O(P,"db_personas",J.id),{asociada_notificacion_id:_e(p)})]),alert(`La persona ${d} se asoció a la notificación.`),ie()}}catch(D){console.error("Error al asociar captura:",D),alert("Hubo un error al asociar la captura.")}else alert("Por favor, selecciona una persona para asociar.")},he=async(D,Q,J)=>{if(window.confirm(`¿Estás seguro de que deseas eliminar la asociación de la persona ${J} con la notificación?`)){f(!0);try{const Z=O(P,"db_notificaciones",D);await re(Z,{asociada:Ae(J)});const T=O(P,"db_personas",Q);await re(T,{asociada_notificacion_id:Ae(D)}),alert(`Se eliminó la asociación de la persona ${J} con la notificación.`)}catch(Z){console.error("Error al eliminar la asociación:",Z),alert("Hubo un error al eliminar la asociación.")}finally{f(!1)}}else alert(`La asociación de la persona ${J} no fue eliminada.`)},$=D=>{switch(D){case"1":return"Informativa";case"2":return"Paradero 🔎";case"3":return"Evasión 👮🏻";case"4":return"Prioritaria ⭐";default:return"No definida"}},M=D=>{switch(D){case 1:return"Normal";case 2:return"Paradero 🔎";case 3:return"Evasión 👮🏻";case 4:return"Prioritaria ⭐";default:return"No definida"}},G=D=>/^https?:\/\//.test(D)?D:`https://${D}`,z=async D=>{if(S.trim()){f(!0);try{const Q=O(P,"db_notificaciones",D);await re(Q,{contenido:S}),alert("Contenido actualizado correctamente"),g(null)}catch(Q){console.error("Error al actualizar contenido:",Q),alert("Hubo un error al actualizar el contenido.")}finally{f(!1)}}else alert("El contenido no puede estar vacío")},V=async D=>{if(N.trim()){f(!0);try{const Q=O(P,"db_notificaciones",D);await re(Q,{titulo:N}),alert("titulo actualizado correctamente"),x(null)}catch(Q){console.error("Error al actualizar titulo:",Q),alert("Hubo un error al actualizar el titulo.")}finally{f(!1)}}else alert("El titulo no puede estar vacío")};return e.jsxs("div",{children:[e.jsxs("div",{className:"row g-3 justify-content-center align-items-center mt-1",children:[e.jsxs("div",{className:"container",children:[q&&e.jsx(xt,{Date1:"Ninguno",Date2:"Desactivar Busqueda",onCerrar:()=>W(!1),color:"info"}),!q&&e.jsx("div",{className:"d-flex justify-content-end mb-1  ",children:e.jsxs("button",{className:"btn  fw-semibold",onClick:()=>W(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 titilar text-light"})," ",e.jsx("small",{className:"text-light",children:"Ayuda"})]})})]}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 text-center",children:e.jsxs("button",{className:"btn btn-light bg-opacity-50 fw-semibold px-4 d-flex align-items-center justify-content-center gap-2 shadow-sm border border-primary-subtle rounded-4",onClick:U,children:[e.jsx("span",{children:"Nuevo Notificación"}),e.jsx("i",{className:"bi bi-envelope-plus titilar",style:{fontSize:"1.5rem"}})]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-6 position-relative",children:e.jsxs("div",{className:"form-floating shadow rounded-4 border border-primary-subtle",children:[e.jsx("i",{className:"bi bi-sort-down-alt text-primary position-absolute top-50 start-0 translate-middle-y ms-3",style:{fontSize:"1.4rem",zIndex:2}}),e.jsxs("select",{className:"form-select ps-5 text-center",id:"floatingSelectOrder",value:w,onChange:me,children:[e.jsx("option",{value:"desc",children:"📥 Más recientes primero"}),e.jsx("option",{value:"asc",children:"📤 Más antiguos primero"})]}),e.jsx("label",{htmlFor:"floatingSelectOrder",children:"Ordenar por fecha"})]})})]}),e.jsx("div",{className:"row justify-content-center  ",children:e.jsx("div",{className:"col-12 col-md-10  ",children:e.jsx("div",{className:"list-group",children:s.map(D=>{var Q;return e.jsxs("div",{className:"list-group-item mb-4 shadow mt-5  ",children:[e.jsxs("div",{className:"d-flex align-items-center bg-gradiante2 text-white p-3 rounded",children:[e.jsx("button",{className:"btn bg-primaryMuiBlue px-3 border-white border-3 text-white rounded-pill position-absolute top-0 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Notificación",e.jsx("i",{className:"bi bi-send-check-fill ms-1 text-white"})]})}),e.jsx("span",{className:`badge rounded-pill me-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[D.caratula]||"bg-warning text-dark"}`,children:$(D.caratula)}),e.jsx("div",{className:"flex-grow-1"}),e.jsx("small",{className:"text-end",children:new Date(((Q=D.timestamp)==null?void 0:Q.seconds)*1e3).toLocaleString()})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Título"}),D.id===j?e.jsxs("div",{children:[e.jsx("input",{type:"text",value:N,onChange:J=>y(J.target.value),className:"form-control"}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:()=>V(D.id),disabled:m,children:m?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("small",{className:"mb-2 text-muted",children:D.titulo}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${D.id===j?"btn-danger":"btn-primary"}`,onClick:()=>{D.id===j?x(null):(y(D.titulo),x(D.id))},children:e.jsx("i",{className:`bi ${D.id===j?"bi-x-circle":"bi-pencil"}`})})}),e.jsx("h6",{className:"text-center bg-primary fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Contenido"}),D.id===u?e.jsxs("div",{children:[e.jsx("textarea",{value:S,onChange:J=>_(J.target.value),className:"form-control",rows:"5"}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:()=>z(D.id),disabled:m,children:m?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("small",{className:"mb-2 text-muted",children:D.contenido}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${D.id===u?"btn-danger":"btn-primary"}`,onClick:()=>{D.id===u?g(null):(_(D.contenido),g(D.id))},children:e.jsx("i",{className:`bi ${D.id===u?"bi-x-circle":"bi-pencil"}`})})}),D.enlace&&D.enlace.length>0?e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Enlaces Asociados"}),e.jsx("ul",{className:"list-unstyled",children:D.enlace.map((J,I)=>e.jsxs("li",{className:"d-flex align-items-center justify-content-center gap-3 p-2 rounded-pill bg-light shadow-sm",children:[e.jsx("i",{className:"bi bi-browser-chrome text-primary girar",style:{fontSize:"20px"}}),e.jsx("a",{href:G(J),target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none text-primary text-center flex-grow-1",style:{maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:J}),e.jsx("button",{className:"btn btn-redUi1 btn-sm rounded-circle",onClick:()=>ae(I,D.id),children:e.jsx("i",{className:"bi bi-trash text-white"})})]},I))})]}):e.jsx("p",{className:"text-danger mt-3 text-center",children:"No posee enlaces asociados"}),D.asociada&&D.asociada.length>0?e.jsxs("div",{className:"mt-3  ",children:[e.jsx("h6",{className:"text-center bg-primary fw-semibold shadow-sm text-white py-1 rounded",children:"Personas Asociadas"}),D.asociada.map((J,I)=>{var T,se;const Z=t.find(R=>R.nombre_apellido===J);return Z?e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2 p-2  shadow-sm bg-primary rounded-4 bg-opacity-25",children:[e.jsx("img",{src:((T=Z.base64)==null?void 0:T.trim())||De,alt:Z.nombre_apellido||"Imagen no disponible",className:"rounded-circle me-3",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[e.jsxs("span",{children:[I+1,". ",J]}),((se=Z.asociada_notificacion_id)==null?void 0:se.length)>0&&e.jsxs("span",{className:"badge bg-teal text-white ms-3",onClick:()=>le(Z),children:["Asociado ",Z.asociada_notificacion_id.length]})]}),e.jsx("button",{className:"btn btn-sm btn-redUi1 text-white ms-3",onClick:()=>he(D.id,Z.id,J),children:e.jsx("i",{className:"bi bi-trash"})})]},I):null})]}):e.jsx("span",{className:"text-danger text-center d-block",children:"No hay personas asociadas"})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 p-3",children:[e.jsx("button",{className:"btn btn-cyan text-white btn-sm rounded-circle ",onClick:()=>te(D.id),children:e.jsx("i",{className:"bi bi-person-fill-add"})}),e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle ",onClick:()=>ne(D.id),children:e.jsx("i",{className:"bi bi-link-45deg"})}),e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle ",onClick:()=>B(D.id),disabled:m,children:e.jsx("i",{className:"bi bi-trash3-fill"})})]})]},D.id)})})})}),e.jsx("div",{className:`modal fade bg-dark ${i?"show d-block":""}`,tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!i,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content p-3 bg-gradient rounded-4 shadow-lg border-0 ",children:[e.jsxs("div",{className:"modal-header border-0 text-dark",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Asociar Persona a la Notificación"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:ie,"aria-label":"Cerrar",disabled:m})]}),e.jsxs("div",{className:"modal-body bg-light rounded-4 p-4 shadow-sm",children:[d&&e.jsxs("div",{className:"alert alert-primary d-flex align-items-center mb-4 rounded-4 shadow-sm",children:[e.jsx("i",{className:"bi bi-person-check-fill fs-4 me-2"}),e.jsx("strong",{className:"mb-0",children:"Seleccionado:"}),e.jsx("span",{className:"ms-2",children:d}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary ms-auto",onClick:()=>h(null),"aria-label":"Quitar selección",children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsx("label",{htmlFor:"persona",className:"form-label fw-semibold text-dark",children:"Buscar DNI o Nombre:"}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Ej: Juan Pérez o 12345678",value:A,onChange:D=>L(D.target.value),disabled:m}),e.jsx("button",{className:"btn btn-outline-danger ms-2",onClick:()=>L(""),disabled:!A||m,"aria-label":"Limpiar búsqueda",children:e.jsx("i",{className:"bi bi-trash"})})]}),A&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"fw-bold text-start mb-2",children:"Resultados:"}),e.jsx("ul",{className:"list-group mb-3",style:{maxHeight:"180px",overflowY:"auto"},"aria-live":"polite",children:t.filter(D=>`${D.nombre_apellido} ${D.documento}`.toLowerCase().includes(A.toLowerCase())).map(D=>{var Q;return e.jsxs("li",{className:"list-group-item d-flex align-items-center gap-3",onClick:()=>{h(D.nombre_apellido),L("")},style:{cursor:"pointer"},tabIndex:0,onKeyDown:J=>{J.key==="Enter"&&(h(D.nombre_apellido),L(""))},children:[e.jsx("img",{src:((Q=D.base64)==null?void 0:Q.trim())||De,alt:D.nombre_apellido,className:"rounded-circle",style:{width:"45px",height:"45px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("p",{className:"mb-0 fw-semibold",children:D.nombre_apellido}),e.jsx("small",{className:"text-muted",children:D.documento})]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[D.prioridad]||"bg-warning text-dark"}`,children:M(D.prioridad)})]},D.id)})})]}),e.jsx("label",{htmlFor:"dropdownMenuButton",className:"form-label fw-semibold text-dark",children:"Buscar en lista:"}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100 text-truncate",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:m,children:d||"Selecciona una persona"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"250px",overflowY:"auto"},children:t.filter(D=>`${D.nombre_apellido} ${D.documento}`.toLowerCase().includes(A.toLowerCase())).map(D=>{var Q;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center gap-2",onClick:()=>h(D.nombre_apellido),type:"button",children:[e.jsx("img",{src:((Q=D.base64)==null?void 0:Q.trim())||De,alt:D.nombre_apellido,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[D.nombre_apellido," - ",D.documento]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[D.prioridad]||"bg-warning text-dark"}`,children:M(D.prioridad)})]})},D.id)})})]})]}),e.jsxs("div",{className:"modal-footer border-0 pt-0",children:[e.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:oe,disabled:m||!d,children:m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),e.jsx("span",{children:"Asociando..."})]}):e.jsxs(e.Fragment,{children:["Asociar Captura ",e.jsx("i",{className:"bi bi-person-plus-fill"})]})}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:ie,disabled:m,children:"Cerrar"})]})]})})}),e.jsx(ut,{showModalLink:n,setShowModalLink:c,selectedNotifId:p,setNewLink:v,newLink:C,setNotificaciones:r}),e.jsx(ht,{showModalNot:k,closeModalNot:Y})]})}const pt=({loading:s})=>e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"position-relative",children:s?e.jsx(ee,{}):e.jsx("div",{className:"list-group",children:e.jsx(bt,{})})})}),gt="/gif/dash.gif",jt=()=>{const s=localStorage.getItem("user");return s?JSON.parse(s):null},Xe=jt();var As;const _s=((As=Xe==null?void 0:Xe.email)==null?void 0:As.split("@")[0])||"Usuario Sin Registro",ft=_s.charAt(0).toUpperCase()+_s.slice(1),Nt=()=>e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center  mt-5 text-light",children:[e.jsxs("span",{className:"display-4 mb-2",children:["¡Bienvenido ",ft,"!"]}),e.jsx("span",{className:"mb-5 ",children:"Este panel de control te permite gestionar usuarios, ver estadísticas y configurar las opciones del sistema."}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("div",{className:"col-md-6 d-flex flex-column justify-content-center align-items-center mb-4 mb-md-0",children:[e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2",children:"Desde aquí podrás administrar los recursos del sistema de forma fácil y eficiente."})]}),e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-lightbulb  p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2",children:"Ante cualquier inconveniente, no dudes en solicitar asistencia técnica."})]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:gt,alt:"Panel de control gráfico",className:"img-fluid p-2 rounded-circle shadow",style:{maxWidth:"300px",height:"auto"}})})]})]}),vt=({loading:s})=>{const[r,t]=a.useState([]),[o,i]=a.useState([]),l=["captura","date","descripcion_fisica","documento","entidad","motivo_captura","nombre_apellido","paradero","prioridad","sexo","usuario","asociada_notificacion_id"],n={captura:"Captura",date:"Fecha",descripcion_fisica:"Datos de la Persona",documento:"Documento",entidad:"Entidad",motivo_captura:"Motivo de Captura",nombre_apellido:"Nombre y Apellido",paradero:"Paradero",prioridad:"Prioridad",sexo:"Sexo",usuario:"Usuario",asociada_notificacion_id:"ID Notificación "},c=async()=>{try{const x=(await K(H(P,"db_personas"))).docs.map(d=>({id:d.id,...d.data()}));t(x)}catch(j){console.error("Error al obtener los datos:",j)}},p=j=>{i(x=>x.includes(j)?x.filter(d=>d!==j):[...x,j])},b=()=>{i(l)},u=()=>{i([])},g=()=>{if(r.length===0||o.length===0)return;const j=r.map(h=>{const m={};return o.forEach(f=>{m[n[f]||f]=h[f]}),m}),x=be.json_to_sheet(j),d=be.book_new();be.book_append_sheet(d,x,"Datos Seleccionados"),Le(d,"Datos_Seleccionados.xlsx")};return a.useEffect(()=>{c()},[]),e.jsx(e.Fragment,{children:s?e.jsx(ee,{leyendaSet:"Exportar - Cx2"}):e.jsx("div",{className:"container-lg  mt-5 mt-md-0 text-white",children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center ",children:[e.jsxs("span",{className:"mb-4 display-5",children:["Exportar Datos  ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"mb-5 fw-light",children:"Selecciona los campos que deseas incluir en la exportación."}),e.jsxs("div",{className:"d-flex justify-content-center mb-4 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-light",onClick:b,children:"Seleccionar todos"}),e.jsx("button",{className:"btn btn-outline-light",onClick:u,children:"Limpiar selección"})]}),e.jsx("form",{className:"mb-4 w-100 px-3 ",children:e.jsx("div",{className:"row p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg border border-1",children:l.map(j=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",children:e.jsxs("div",{className:"form-check w-100 d-flex align-items-center",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:j,value:j,onChange:()=>p(j),checked:o.includes(j)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:j,children:n[j]||j})]})},j))})}),o.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn bg-green bg-opacity-50 text-white fw-semibold",onClick:g,children:["Descargar datos seleccionados ",e.jsx("i",{className:"bi bi-file-earmark-arrow-down-fill ms-2"})]})})]})})})},Os=({data1:s,data2:r})=>{var j;const[t,o]=a.useState(!1),i=()=>o(!0),l=()=>o(!1),[n,c]=a.useState(""),b=(()=>{const x=localStorage.getItem("user");return x?JSON.parse(x):null})(),u=async x=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta persona?"))try{const d=O(P,"db_personas_desactivados",x.id),h=new Date,m=`${h.getDate().toString().padStart(2,"0")}/${(h.getMonth()+1).toString().padStart(2,"0")}/${h.getFullYear().toString().slice(-2)}`;await fe(d,{...x,usuario_baja:b.email||"usuario_desconocido",usuario_baja_fecha:m});const f=O(P,"db_personas",x.id);await xe(f),r(),c("Persona eliminada y copiada a la colección de desactivados."),setTimeout(()=>c(""),3e3)}catch(d){console.error("Error al eliminar persona: ",d),c("Error al eliminar la persona. Inténtalo de nuevo."),setTimeout(()=>c(""),3e3)}},g=x=>{u(x),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-trash3-fill"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("h5",{className:"modal-title ",children:"Eliminar Persona"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(j=s.base64)==null?void 0:j.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-danger  bg-redW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas eliminar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:()=>{g(s)},children:"Confirmar Eliminación"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},yt=({data1:s,data2:r})=>{const[t,o]=a.useState(!1),i=()=>o(!0),l=()=>o(!1),[n,c]=a.useState(),[p,b]=a.useState(s.descripcion_fisica),[u,g]=a.useState(s.documento),[j,x]=a.useState(s.entidad),[d,h]=a.useState(s.motivo_captura),[m,f]=a.useState(s.nombre_apellido),[C,v]=a.useState(s.prioridad),[S,_]=a.useState(s.sexo),[N,y]=a.useState(s.numero_contacto),[w,E]=a.useState(s.base64),[k,F]=a.useState("edicion desde menu de capturas"),[A,L]=a.useState(s.paradero),[U,Y]=a.useState(s.alerta),[q,W]=a.useState(!1),[le,me]=a.useState(!1),[de,ae]=a.useState(!1),B=()=>{const z={nombre_apellido:m,documento:u,sexo:S,descripcion_fisica:p,entidad:j,motivo_captura:d,numero_contacto:N,prioridad:C,alerta:U,paradero:A};return["nombre_apellido","documento","sexo","descripcion_fisica","entidad","motivo_captura","numero_contacto","prioridad","alerta","paradero"].filter(Q=>z[Q]!==s[Q])},te=()=>{W(z=>!z)},ie=()=>{me(z=>!z)},ne=()=>{ae(z=>!z)},oe=z=>{const V=z.target.files[0];if(V){const D=new FileReader;D.onloadend=()=>{E(D.result)},D.readAsDataURL(V)}else alert("Por favor, selecciona un archivo de imagen válido.")},he=async()=>{const z=/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/;if(!m.trim()){alert("El campo Nombre y Apellido no puede estar vacío.");return}if(!z.test(m)){alert("El campo Nombre y Apellido solo debe contener letras.");return}const V=/^[0-9]+$/;if(!u.trim()){alert("El campo Documento no puede estar vacío.");return}if(!V.test(u)){alert("El campo Documento solo debe contener números.");return}if(u.length<8){alert("El Documento debe tener al menos 8 dígitos.");return}if(!k.trim()){alert("La descripción de las ediciones es obligatoria.");return}const D=O(P,"db_personas",s.id),Q=B();try{c(!0);const J=new Date,I=`${J.getDate().toString().padStart(2,"0")}/${(J.getMonth()+1).toString().padStart(2,"0")}/${J.getFullYear().toString().slice(-2)}`;await re(D,{descripcion_fisica:p,documento:u,entidad:j,motivo_captura:d,nombre_apellido:m,prioridad:C,sexo:S,numero_contacto:N,alerta:U,base64:w,paradero:A,ediciones:k.trim()?[...s.ediciones||[],{motivo:k,usuario:G.email,fecha:I,campos:Q}]:s.ediciones||[]}),r(),alert("Los cambios se han guardado correctamente.")}catch(J){console.error("Error al actualizar la persona: ",J),alert("Error al guardar los cambios. Inténtalo de nuevo.")}c(!1)},$=z=>{const V=parseInt(z.target.value,10);v(V),V===2&&(L(!0),Y(!1)),V===1&&(L(!1),Y(!1)),V===3&&(Y(!0),L(!1)),V===4&&(L(!1),Y(!1))},G=(()=>{const z=localStorage.getItem("user");return z?JSON.parse(z):null})();return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-pen"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header ",children:[" ",e.jsx("img",{src:"img/asistente.gif",alt:"Asistente",style:{width:"60px",height:"60px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border "}),e.jsx("h5",{className:"modal-title mx-4",children:"Asistente de Edición "}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:`col-3 mt-3 d-flex align-items-center ${q?"titilar":""}`,children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:te,children:[e.jsx("img",{src:w||"https://via.placeholder.com/40",alt:(w==null?void 0:w.nombre_apellido)||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:q?"Editando":"Editar"})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:m,onChange:z=>f(z.target.value)}),e.jsx("label",{className:" badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"number",className:"form-control",value:u,onChange:z=>g(z.target.value)}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select text-center",value:S,onChange:z=>_(z.target.value),children:[e.jsx("option",{value:"",children:"Seleccione una Opción"}),e.jsx("option",{value:"masculino",children:"Masculino 👨"}),e.jsx("option",{value:"femenino",children:"Femenino 👩"}),e.jsx("option",{value:"otros",children:"Otros 👭🏻"})]}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Sexo"})]})})]})]}),e.jsxs("div",{className:"btn-group mt-3",role:"group","aria-label":"Basic example",children:[e.jsx("button",{type:"button",className:`btn btn-secondaryM text-white ${de?"titilar":""}`,onClick:ne,children:de?e.jsx(e.Fragment,{children:"Editando Datos de Captura "}):"Datos de Captura"}),e.jsx("button",{type:"button",className:`btn btn-primary text-white ${le?"titilar":""}`,onClick:ie,children:le?e.jsx(e.Fragment,{children:"Editando Descripciones"}):"Descripciones"})]}),q&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Editar Fotografía ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:te})}),e.jsxs("div",{className:"my-3 text-center text-purple",children:[e.jsx("input",{type:"file",className:"form-control",onChange:oe}),w&&e.jsx("img",{src:w,alt:"Imagen previa",className:"img-fluid mt-5",style:{maxWidth:"300px"}})]})]})]}),de&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Datos de la Captura ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:ne})}),e.jsx("span",{className:"badge text-bg-secondaryM text-white me-2 ",children:"Atención "}),e.jsxs("small",{children:["La prioridad ",e.jsx("strong",{children:"modifica el contexto"})," de la captura"]})]}),e.jsxs("div",{className:"form-floating ",children:[e.jsxs("select",{className:"form-select text-center shadow-sm border border-secondaryM mb-3  border-opacity-50 ",value:C,onChange:$,children:[e.jsx("option",{value:"",children:"Seleccione una Opción"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero 🔎"}),e.jsx("option",{value:"3",children:"Evadido 🚨"}),e.jsx("option",{value:"4",children:"Prioridad ⭐"})]}),e.jsx("label",{className:"fw-semibold opacity-75 ms-2",children:"Prioridad"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Entidad que solicita captura"})}),e.jsx("input",{className:"form-control bg-blueW2",value:j,onChange:z=>x(z.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Numero de Contacto Entidad "})}),e.jsx("input",{className:"form-control bg-blueW2",value:N,onChange:z=>y(z.target.value)})]})]}),le&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Descripciones ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:ie})}),e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Descripción Fisica "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:p,onChange:z=>b(z.target.value),style:{minHeight:"160px"}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Motivo Captura "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:d,onChange:z=>h(z.target.value),style:{minHeight:"150px"}})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:l,children:e.jsx("i",{className:"bi bi-x-circle"})}),e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle",onClick:he,disabled:n,children:n?e.jsx("i",{className:"bi bi-floppy2 titilar"}):e.jsx("i",{className:"bi bi-floppy2"})})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Je=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1),[n,c]=a.useState(""),[p,b]=a.useState(!1),u=()=>l(!0),g=()=>l(!1),j=()=>{o([])},d=(()=>{const m=localStorage.getItem("user");return m?JSON.parse(m):null})(),h=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas copiar estas personas a la colección de desactivados?"))){b(!0);try{const C=r.filter(v=>s.includes(v.id)).map(async v=>{const S=H(P,"db_personas_desactivados"),_=new Date,N=`${_.getDate().toString().padStart(2,"0")}/${(_.getMonth()+1).toString().padStart(2,"0")}/${_.getFullYear().toString().slice(-2)}`;await Ee(S,{...v,usuario_baja:(d==null?void 0:d.email)||"usuario_desconocido",usuario_baja_fecha:N});const y=O(P,"db_personas",v.id);await xe(y)});await Promise.all(C),c("Personas copiadas a la colección de desactivados y eliminadas de la colección original."),t(),j()}catch(f){console.error("Error al eliminar personas:",f),c("Hubo un error al copiar o eliminar algunas personas.")}setTimeout(()=>c(""),3e3),b(!1),g()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:u,disabled:p,children:e.jsx("i",{className:"bi bi-trash3-fill"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Eliminar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:g})]}),e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-redW p-2 rounded-pill text-secondaryMuiRed fw-bold",children:["Se eliminarán ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(m=>s.includes(m.id)).map(m=>{var f;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(f=m.base64)==null?void 0:f.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),m.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(C=>C.filter(v=>v!==m.id)),title:"Quitar de la selección"})]},m.id)})}),e.jsxs("p",{className:"text-danger text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas eliminar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:g,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:h,disabled:p,children:p?"Eliminando...":"Confirmar Eliminación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"}),n&&e.jsx("div",{className:"alert alert-success mt-2",children:n})]})},ze=({Date1:s,Date2:r,setSelectedDocs:t,onCerrar:o,color:i})=>e.jsxs("div",{className:`card bg-${i} shadow my-4 position-relative text-dark d-flex align-items-start gap-3 p-4 card text-center p-2 bg-dark bg-opacity-75 rounded-4 shadow-lg`,style:{overflow:"visible"},children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:o}),e.jsx("img",{src:"img/Perfiles/9.png",alt:"Asistente",className:" position-absolute",style:{width:"120px",height:"200px",objectFit:"contain",top:"-30px",left:"-20px"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:e.jsx("strong",{children:"Asistente de Selección"})}),e.jsxs("p",{className:"mb-3",children:["Personas Seleccionadas: ",e.jsxs("strong",{children:[s.length," 🧑"]})]}),e.jsx("strong",{children:s.length>0?e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-start p-2 rounded mb-3  ",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(l=>s.includes(l.id)).map(l=>{var n;return e.jsxs("div",{className:"badge text-dark shadow d-flex align-items-center p-2 mx-2 position-relative bg-light bg-opacity-50 m-1",style:{fontSize:"0.75rem"},children:[e.jsx("img",{src:(n=l.base64)==null?void 0:n.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),l.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>t(c=>c.filter(p=>p!==l.id)),title:"Quitar de la selección"})]},l.id)})}):e.jsx("span",{className:"text-danger",children:"Ninguna"})})]})]}),$e=({searchTerm:s,setSearchTerm:r})=>e.jsxs("div",{className:"form-floating mb-3 position-relative  ",children:[e.jsx("input",{type:"text",className:"form-control  shadow-sm pe-5 bg-dark bg-opacity-50 text-light",placeholder:"Buscar por nombre",value:s,onChange:t=>r(t.target.value)}),e.jsx("label",{children:"Buscar por Nombre"}),s&&e.jsx("button",{type:"button",className:"btn btn-link position-absolute top-50 end-0 translate-middle-y pe-3 ",onClick:()=>r(""),"aria-label":"Cancelar búsqueda",children:e.jsx("i",{className:"bi bi-x-circle text-light "})})]}),Us=({prioridadFilter:s,setPrioridadFilter:r})=>e.jsxs("div",{className:"form-floating mb-3  ",children:[e.jsxs("select",{className:"form-select shadow-sm ","aria-label":"Floating label select example",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todas las Prioridades"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero 🔎"}),e.jsx("option",{value:"3",children:"Evadido 🚨"}),e.jsx("option",{value:"4",children:"Prioritaria ⭐"})]}),e.jsx("label",{children:"Seleccione una Prioridad"})]}),Te=({orden:s,setOrden:r})=>e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Ordenar alfabéticamente",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"asc",children:"Orden A-Z"}),e.jsx("option",{value:"desc",children:"Orden Z-A"})]}),e.jsxs("label",{children:["Ordenar ",e.jsx("i",{className:"bi bi-alphabet"})]})]}),wt=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState(!0);a.useState("");const[p,b]=a.useState(""),[u,g]=a.useState(""),[j,x]=a.useState(!0),[d,h]=a.useState("asc"),m=H(P,"db_personas"),f=async()=>{c(!0);try{const y=(await K(m)).docs.map(w=>({...w.data(),id:w.id}));r(y),o(y)}catch(N){console.error("Error al obtener personas: ",N)}finally{c(!1)}},C=N=>N.sort((y,w)=>d==="asc"?y.nombre_apellido.localeCompare(w.nombre_apellido):w.nombre_apellido.localeCompare(y.nombre_apellido));a.useEffect(()=>{f()},[]),a.useEffect(()=>{const N=s.filter(w=>w.nombre_apellido&&w.nombre_apellido.toLowerCase().includes(p.toLowerCase())||w.documento&&w.documento.includes(p)).filter(w=>u?w.prioridad===parseInt(u,10):!0),y=C(N);o(y)},[p,s,u,d]),a.useMemo(()=>t.filter(N=>i.includes(N.id)),[i,t]);const v=N=>{l(y=>y.includes(N)?y.filter(w=>w!==N):[...y,N])},S=()=>{if(i.length===t.length)l([]);else{const N=t.map(y=>y.id);l(N)}},_=N=>{switch(Number(N)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero 🔎"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido 🚨"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ⭐"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg text-white",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center my-5 animate__animated animate__bounce mt-sm-0 mt-5 ",children:"Listado de Capturas"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx($e,{searchTerm:p,setSearchTerm:b})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(Us,{prioridadFilter:u,setPrioridadFilter:g})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Te,{orden:d,setOrden:h})})]}),n?e.jsx(ee,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2  mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Je,{data1:i,data2:s,dataRefresh:f,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>l([])})]}),j&&e.jsx(ze,{Date1:i,Date2:s,setSelectedDocs:l,onCerrar:()=>x(!1),color:"blueW2"}),!j&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>x(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"})," ",e.jsxs("small",{className:"text-light",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-light",children:[i.length," 🧑"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5  ",children:e.jsxs("table",{className:"table table-striped table-hover text-center small rounded-pill",children:[e.jsx("thead",{className:"table-info",children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:S})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(N=>{var y;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(N.id),onChange:()=>v(N.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((y=N.base64)==null?void 0:y.trim())||"https://via.placeholder.com/40",alt:N.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize",children:N.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:N.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:_(N.prioridad)}),e.jsxs("td",{children:[e.jsx(yt,{data1:N,data2:f}),e.jsx(Os,{data1:N,data2:f})]}),e.jsx("td",{})]},N.id)})})]})})]})})]})},Vs=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1),[n,c]=a.useState(!1),p=()=>l(!0),b=()=>l(!1),u=()=>{o([])},j=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),x=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas modificar estas personas a la colección?"))){c(!0);try{const m=r.filter(f=>s.includes(f.id)).map(async f=>{const C=O(P,"db_personas",f.id),v=new Date,S=`${v.getDate().toString().padStart(2,"0")}/${(v.getMonth()+1).toString().padStart(2,"0")}/${v.getFullYear().toString().slice(-2)}`;await fe(C,{...f,prioridad:1,paradero:!1,alerta:!1,ediciones:[...f.ediciones||[],{motivo:"cambio de prioridad",usuario:j.email,fecha:S}]})});await Promise.all(m),alert("Personas modificadas con exito."),t(),u()}catch(h){console.error("Error al modificar personas:",h),alert("Hubo un error al modificar algunas personas.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-orange text-white btn-sm rounded-circle ",onClick:p,disabled:n,children:e.jsx("i",{className:"bi bi-star-fill"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Modificar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-orange border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-orangeW p-2 rounded-pill text-orange fw-bold",children:["Se modificarán ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var h;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(h=d.base64)==null?void 0:h.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(m=>m.filter(f=>f!==d.id)),title:"Quitar de la selección"})]},d.id)})}),e.jsxs("p",{className:"text-orangeDb text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas modificar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-orangeDb text-white",onClick:x,disabled:n,children:n?"Cargando...":"Confirmar Modificación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},us=({prioridadFilter:s,setPrioridadFilter:r,personas:t})=>{const o=[...new Set(t.map(i=>i.entidad))];return e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Floating label select example",value:s,onChange:i=>r(i.target.value),children:[e.jsx("option",{value:"",children:"Todas las Entidades"}),o.map((i,l)=>e.jsx("option",{value:i,children:i},l))]}),e.jsx("label",{children:"Seleccione una Entidad"})]})},hs=(s,r,t)=>s.filter(o=>{var i,l;return((i=o.nombre_apellido)==null?void 0:i.toLowerCase().includes(r.toLowerCase()))||((l=o.documento)==null?void 0:l.includes(r))}).filter(o=>!t||o.entidad===t),xs=(s,r)=>s.sort((t,o)=>r==="asc"?t.nombre_apellido.localeCompare(o.nombre_apellido):o.nombre_apellido.localeCompare(t.nombre_apellido)),Ct=(s,r)=>r?s.filter(t=>r==="capturado"?t.captura===!0:r==="evadido"?t.captura===!1:!0):s,bs=(s,r,t,o)=>{s(""),r(""),t("asc"),o&&o("")},St=({data1:s,data2:r})=>{var j;const[t,o]=a.useState(!1),i=()=>o(!0),l=()=>o(!1),[n,c]=a.useState(!1),b=(()=>{const x=localStorage.getItem("user");return x?JSON.parse(x):null})(),u=async x=>{if(window.confirm("¿Estás seguro de que deseas modificar esta persona?")){c(!0);try{const d=O(P,"db_personas",x.id),h=new Date,m=`${h.getDate().toString().padStart(2,"0")}/${(h.getMonth()+1).toString().padStart(2,"0")}/${h.getFullYear().toString().slice(-2)}`;await fe(d,{...x,prioridad:1,paradero:!1,alerta:!1,ediciones:[...x.ediciones||[],{motivo:"cambio de prioridad",usuario:b.email,fecha:m}]}),r(),c(!1),alert("Modificación exitosa.")}catch(d){console.error("Error al eliminar persona: ",d),alert("Error al modificar la persona. Inténtalo de nuevo.")}}},g=x=>{u(x),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-orange text-white btn-sm rounded-circle m-1",onClick:i,disabled:n,children:e.jsx("i",{className:"bi bi-star-fill"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("h5",{className:"modal-title ",children:"Modificar Prioridad Persona"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-orange border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(j=s.base64)==null?void 0:j.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-orange  bg-orangeW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-orangeDb text-white",onClick:()=>{g(s)},children:"Confirmar Cambio"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},kt=({data1:s,data2:r})=>{var d;const[t,o]=a.useState("busqueda paradero"),[i,l]=a.useState(!1),n=()=>l(!0),c=()=>l(!1),[p,b]=a.useState(!1),g=(()=>{const h=localStorage.getItem("user");return h?JSON.parse(h):null})(),j=async h=>{if(window.confirm("¿Estás seguro de que deseas modificar esta persona?")){b(!0);try{const m=O(P,"db_personas",h.id),f=new Date,C=`${f.getDate().toString().padStart(2,"0")}/${(f.getMonth()+1).toString().padStart(2,"0")}/${f.getFullYear().toString().slice(-2)}`;await fe(m,{...h,prioridad:1,paradero:!1,alerta:!1,ediciones:[...h.ediciones||[],{motivo:"desactivar busqueda paradero",usuario:g.email,fecha:C}]}),r(),b(!1),alert("Modificación exitosa.")}catch(m){console.error("Error al eliminar persona: ",m),alert("Error al modificar la persona. Inténtalo de nuevo.")}}},x=h=>{j(h),c()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primaryMuiBlue text-white btn-sm rounded-circle m-1",onClick:n,disabled:p,children:e.jsx("i",{className:"bi bi-search"})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsxs("h5",{className:"modal-title text-capitalize",children:["Modificar ",t]}),e.jsx("button",{type:"button",className:"btn-close ",onClick:c})]}),"  ",e.jsx("hr",{className:"border border-primary border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(d=s.base64)==null?void 0:d.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-primary  bg-blueW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:c,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primaryMuiBlue text-white",onClick:()=>{x(s)},children:"Confirmar Cambio"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},_t=({data1:s,data2:r})=>{const[t,o]=a.useState(!1),i=()=>o(!1),[l,n]=a.useState(!1),[c,p]=a.useState(""),[b,u]=a.useState(""),[g,j]=a.useState(""),d=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),h=async()=>{if(window.confirm(`¿Estás seguro de que deseas ${g}?`)){n(!0);try{const v=O(P,"db_personas",s.id),S=new Date,_=`${S.getDate().toString().padStart(2,"0")}/${(S.getMonth()+1).toString().padStart(2,"0")}/${S.getFullYear().toString().slice(-2)}`;await fe(v,{...s,captura:!0,capturas_informacion_estados:[...s.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:d.email,captura_fecha:_,captura_autor:b,captura_descripcion:c}]}),r(),n(!1),alert(`${g} realizado.`)}catch(v){console.error("Error al modificar persona: ",v),alert("Error al modificar la persona. Inténtalo de nuevo.")}}},m=async v=>{console.log(v),n(!0);try{const S=O(P,"db_personas",v),_=new Date,N=`${_.getDate().toString().padStart(2,"0")}/${(_.getMonth()+1).toString().padStart(2,"0")}/${_.getFullYear().toString().slice(-2)}`;await re(S,{...v,prioridad:1,capturas_informacion_estados:[...v.capturas_informacion_estados||[],{captura_motivo:"desactivar alerta",captura_informa_usuario:d.email,captura_fecha:N}]}),r(),n(!1),alert("Alerta desactivada correctamente.")}catch{alert("No se pudo desactivar la alerta.")}},f=()=>{o(!0),j("Informar Captura de Persona")},C=async()=>{if(window.confirm("¿Estás seguro de que deseas QUITAR EL ESTADO DE  CAPTURADO ?")){n(!0);try{const v=O(P,"db_personas",s.id),S=new Date,_=`${S.getDate().toString().padStart(2,"0")}/${(S.getMonth()+1).toString().padStart(2,"0")}/${S.getFullYear().toString().slice(-2)}`;await re(v,{...s,captura:!1,capturas_informacion_estados:[...s.capturas_informacion_estados||[],{captura_motivo:"quitar estado de captura",captura_quita_estado_usuario:d.email,captura_quita_fecha:_}]}),r(),alert("Captura quitada correctamente."),n(!1)}catch(v){console.error("Error al quitar la captura:",v),alert("No se pudo quitar la captura. Inténtalo de nuevo."),n(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:s.captura?"bg-redW ":"",children:e.jsxs("div",{className:"d-flex flex-column gap-1",children:[s.captura?e.jsx("button",{className:"btn btn-pink text-white btn-sm w-100",onClick:()=>{C()},children:"Quitar Captura"}):e.jsx("button",{className:"btn btn-primary btn-sm w-100",onClick:f,disabled:l,children:"Marcar Capturado"}),s.alerta?e.jsx("button",{className:"btn btn-secondaryMuiRed text-white btn-sm w-100",onClick:()=>{window.confirm("¿Seguro que deseas desactivar la alerta?")&&m(s.id)},children:"Desactivar Alerta"}):e.jsx("button",{className:"btn btn-secondaryM btn-sm w-100",disabled:!0,children:"Alerta Inactiva"})]})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"👮"}),e.jsxs("h5",{className:"modal-title mx-3",children:[g," "]}),e.jsx("button",{type:"button",className:"btn-close ",onClick:i})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3 mt-3 d-flex align-items-center",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},children:[e.jsx("img",{src:s.base64?s.base64.trim():"",alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:e.jsx("span",{children:"Capturado  👮 "})})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:s.nombre_apellido,disabled:!0}),e.jsx("label",{className:"badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2 ",children:[e.jsx("input",{className:"form-control border-0 border",value:s.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2 ",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:s.sexo,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Sexo"})]})})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM"}),g," ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Autor / Entidad que realizó la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:b,onChange:v=>u(v.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Breve relato de la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:c,onChange:v=>p(v.target.value)})]})]}),e.jsxs("p",{className:"text-primary bg-blueW rounded my-2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:h,disabled:!b||!c||l,children:g})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ps=({personas:s,selectedDocs:r,toggleSelectDoc:t,toggleSelectAll:o,getPrioridadLabel:i,fetchPersonas:l,isFiltered:n,color:c,prioridad:p})=>e.jsx("div",{className:"table-responsive-sm mt-5 ",children:e.jsxs("table",{className:"table table-striped table-hover  text-center small ",children:[e.jsx("thead",{className:"table-info",children:e.jsxs("tr",{className:"bg-light",children:[!n&&e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:r.length===s.length,onChange:o})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell ",children:"Entidad"}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"DNI"}),p===3?e.jsx("th",{className:"d-none d-sm-table-cell",children:"Fecha"}):null,e.jsx("th",{className:"d-none d-sm-table-cell",children:"Prioridad"}),p===3?e.jsx("th",{}):null,e.jsx("th",{})]})}),e.jsx("tbody",{children:s.map(b=>{var u;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{className:b.captura?"bg-redW":"",children:e.jsx("input",{type:"checkbox",checked:r.includes(b.id),onChange:()=>t(b.id)})}),e.jsx("td",{className:b.captura?"bg-redW ":"",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((u=b.base64)==null?void 0:u.trim())||De,alt:b.nombre_apellido,className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize d-inline-block text-truncate",children:b.nombre_apellido})]})}),e.jsx("td",{className:`d-none d-sm-table-cell text-dark ${b.captura?"bg-redW":c}`,children:b.entidad}),e.jsx("td",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.documento}),p===3?e.jsx("th",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.date}):null,e.jsx("td",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.captura?e.jsx("span",{className:"badge bg-dark",children:"Capturado 👮"}):i(b.prioridad)}),p===3?e.jsx(_t,{data1:b,data2:l}):null,e.jsxs("td",{className:b.captura?"bg-redW":"",children:[p===4?e.jsx(St,{data1:b,data2:l}):null,p===2?e.jsx(kt,{data1:b,data2:l}):null,e.jsx(Os,{data1:b,data2:l})]})]},b.id)})})]})}),gs=s=>{switch(Number(s)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero 🔎"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido 🚨"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ⭐"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}},js=s=>{const[r,t]=a.useState([]),[o,i]=a.useState(!0),l=H(P,"db_personas"),n=async()=>{i(!0);try{let p=(await K(l)).docs.map(b=>({...b.data(),id:b.id}));p=p.filter(b=>b.prioridad===s),t(p)}catch(c){console.error("Error al obtener personas: ",c)}finally{i(!1)}};return a.useEffect(()=>{n()},[]),{personas:r,loading:o,fetchPersonas:n}},fs=s=>{const[r,t]=a.useState([]);return{selectedDocs:r,setSelectedDocs:t,toggleSelectDoc:l=>{t(n=>n.includes(l)?n.filter(c=>c!==l):[...n,l])},toggleSelectAll:()=>{if(s&&s.length>0)if(r.length===s.length)t([]);else{const l=s.map(n=>n.id);t(l)}}}},Et=()=>{const[s,r]=a.useState(4),{personas:t,loading:o,fetchPersonas:i}=js(s),[l,n]=a.useState([]),[c,p]=a.useState(""),[b,u]=a.useState(""),[g,j]=a.useState(!0),[x,d]=a.useState("asc"),{selectedDocs:h,setSelectedDocs:m,toggleSelectDoc:f,toggleSelectAll:C}=fs(l||[]),v=c||b;return a.useEffect(()=>{const S=hs(t,c,b),_=xs(S,x);n(_)},[c,t,b,x]),e.jsxs("div",{className:"container-lg text-white",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0  my-5",children:"Listado de Capturas Prioritarias"}),e.jsxs("div",{className:"card my-5  bg-dark bg-opacity-50 p-4 rounded-4",children:[e.jsx("div",{className:"card-header bg-light bg-opacity-75 rounded-2",children:e.jsx("div",{children:"Filtros"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-3",children:[e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(us,{prioridadFilter:b,setPrioridadFilter:u,personas:t})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Te,{orden:x,setOrden:d})})]}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>bs(p,u,d),className:"btn bg-white bg-opacity-25 btn-sm text-light",children:"Limpiar Filtros"})})]})})]}),e.jsx("div",{className:"col-12",children:e.jsx($e,{searchTerm:c,setSearchTerm:p})}),o?e.jsx(ee,{}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[h.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Vs,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m}),e.jsx(Je,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>m([])})]}),g&&e.jsx(ze,{Date1:h,Date2:t,setSelectedDocs:m,onCerrar:()=>j(!1),color:"blueW2"}),!g&&h.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>j(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-white"})," ",e.jsxs("small",{className:"text-white",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-white",children:[h.length," 🧑"]}),")"]})]})})]}),e.jsx(ps,{personas:l,selectedDocs:h,toggleSelectDoc:f,toggleSelectAll:C,getPrioridadLabel:gs,fetchPersonas:i,isFiltered:v,color:"bg-yellowW",prioridad:s})]})})]})},Ft=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1),[n,c]=a.useState(!1),p=()=>l(!0),b=()=>l(!1),u=()=>{o([])},j=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),x=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas recuperar estas personas?"))){c(!0);try{const m=r.filter(f=>s.includes(f.id)).map(async f=>{const C=O(P,"db_personas",f.id),v=new Date,S=`${v.getDate().toString().padStart(2,"0")}/${(v.getMonth()+1).toString().padStart(2,"0")}/${v.getFullYear().toString().slice(-2)}`;await fe(C,{...f,recuperado:[...f.recuperado||[],{motivo:"recuperado manual",usuario:j.email,fecha:S,datos_resguardo_baja_previa:[{usuario_baja:f.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:f.usuario_baja_fecha||"fecha_no_disponible"}]}]});const _=O(P,"db_personas_desactivados",f.id);await xe(_)});await Promise.all(m),alert("Personas recuperadas y eliminadas de la colección de desactivados."),t(),u()}catch(h){console.error("Error al recuperar personas:",h),alert("Hubo un error al recuperar o eliminar algunas personas.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:p,disabled:n,children:e.jsx("i",{className:"bi bi-recycle"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Recuperar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-teal border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-greenW p-2 rounded-pill text-primary fw-bold",children:["Se reactivan ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var h;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(h=d.base64)==null?void 0:h.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(m=>m.filter(f=>f!==d.id)),title:"Quitar de la selección"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas reactivar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:x,disabled:n,children:n?"Recuperando...":"Confirmar Recuperación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Dt=({data1:s,data2:r})=>{var u;const[t,o]=a.useState(!1),i=()=>o(!0),l=()=>o(!1),c=(()=>{const g=localStorage.getItem("user");return g?JSON.parse(g):null})(),p=async g=>{if(window.confirm("¿Estás seguro de que deseas recuperar esta persona?"))try{const j=O(P,"db_personas",g.id),x=new Date,d=`${x.getDate().toString().padStart(2,"0")}/${(x.getMonth()+1).toString().padStart(2,"0")}/${x.getFullYear().toString().slice(-2)}`,h="campos_modificados_aqui";await fe(j,{...g,recuperado:[...g.recuperado||[],{motivo:"recuperado manual",usuario:c.email,fecha:d,datos_resguardo_baja_previa:[{usuario_baja:g.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:g.usuario_baja_fecha||"fecha_no_disponible"}]}]});const m=O(P,"db_personas_desactivados",g.id);await xe(m),r(),alert("Persona recuperada y copiada a la colección de capturas.")}catch(j){console.error("Error al eliminar persona: ",j)}},b=g=>{p(g),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-recycle"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Recuperar Persona"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("hr",{className:"border border-teal  border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(u=s.base64)==null?void 0:u.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-primary bg-greenW2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas recuperar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:()=>b(s),children:"Confirmar Recuperación"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Pt=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState(!0),[p,b]=a.useState(""),[u,g]=a.useState(""),[j,x]=a.useState(!0),[d,h]=a.useState("asc"),m=H(P,"db_personas_desactivados"),f=async()=>{c(!0);try{const y=(await K(m)).docs.map(w=>({...w.data(),id:w.id}));r(y),o(y)}catch(N){console.error("Error al obtener personas: ",N)}finally{c(!1)}},C=N=>N.sort((y,w)=>d==="asc"?y.nombre_apellido.localeCompare(w.nombre_apellido):w.nombre_apellido.localeCompare(y.nombre_apellido));a.useEffect(()=>{f()},[]),a.useEffect(()=>{const N=s.filter(w=>w.nombre_apellido&&w.nombre_apellido.toLowerCase().includes(p.toLowerCase())||w.documento&&w.documento.includes(p)).filter(w=>u?w.prioridad===parseInt(u,10):!0),y=C(N);o(y)},[p,s,u,d]);const v=N=>{l(y=>y.includes(N)?y.filter(w=>w!==N):[...y,N])},S=()=>{if(i.length===t.length)l([]);else{const N=t.map(y=>y.id);l(N)}},_=N=>{switch(Number(N)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero 🔎"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido 🚨"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ⭐"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg text-white ",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center mb-5 animate__animated animate__bounce mt-sm-0  ",children:"Listado de Capturas  Desactivadas"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx($e,{searchTerm:p,setSearchTerm:b})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(Us,{prioridadFilter:u,setPrioridadFilter:g})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Te,{orden:d,setOrden:h})})]}),n?e.jsx(ee,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2  mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Ft,{data1:i,data2:s,dataRefresh:f,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close  btn-close-white mt-1","aria-label":"Close",onClick:()=>l([])})]}),j&&e.jsx(ze,{Date1:i,Date2:s,setSelectedDocs:l,onCerrar:()=>x(!1),color:"blueW2"}),!j&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>x(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-white"})," ",e.jsxs("small",{className:"text-white",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-white",children:[i.length," 🧑"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:S})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(N=>{var y;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(N.id),onChange:()=>v(N.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((y=N.base64)==null?void 0:y.trim())||"https://via.placeholder.com/40",alt:N.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize",children:N.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:N.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:_(N.prioridad)}),e.jsx("td",{children:e.jsx(Dt,{data1:N,data2:f})}),e.jsx("td",{})]},N.id)})})]})})]})})]})},At=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1),[n,c]=a.useState(!1),p=()=>l(!0),b=()=>l(!1),u=()=>{o([])},j=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),x=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas modificar estas personas ?"))){c(!0);try{const m=r.filter(f=>s.includes(f.id)).map(async f=>{const C=O(P,"db_personas",f.id),v=new Date,S=`${v.getDate().toString().padStart(2,"0")}/${(v.getMonth()+1).toString().padStart(2,"0")}/${v.getFullYear().toString().slice(-2)}`;await fe(C,{...f,prioridad:1,paradero:!1,alerta:!1,ediciones:[...f.ediciones||[],{motivo:"desactivar busqueda paradero grupal",usuario:j.email,fecha:S}]})});await Promise.all(m),alert("Personas modificadas con exito."),t(),u()}catch(h){console.error("Error al modificar personas:",h),alert("Hubo un error al modificar algunas personas.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-primaryMuiBlue text-white btn-sm rounded-circle ",onClick:p,disabled:n,children:e.jsx("i",{className:"bi bi-search"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Modificar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-primary border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-blueW p-2 rounded-pill text-primary fw-bold",children:["Se modificarán ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var h;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(h=d.base64)==null?void 0:h.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(m=>m.filter(f=>f!==d.id)),title:"Quitar de la selección"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas modificar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primaryMuiBlue text-white",onClick:x,disabled:n,children:n?"Cargando...":"Confirmar Modificación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},It=()=>{const[s,r]=a.useState(2),{personas:t,loading:o,fetchPersonas:i}=js(s),[l,n]=a.useState([]),[c,p]=a.useState(""),[b,u]=a.useState(""),[g,j]=a.useState(!0),[x,d]=a.useState("asc"),{selectedDocs:h,setSelectedDocs:m,toggleSelectDoc:f,toggleSelectAll:C}=fs(l||[]),v=c||b;return a.useEffect(()=>{const S=hs(t,c,b),_=xs(S,x);n(_)},[c,t,b,x]),e.jsxs("div",{className:"container my-5 text-light",children:[e.jsx("h1",{className:"text-center my-5 animate__animated animate__bounce mt-sm-0  ",children:"Listado Busqueda de Paradero"}),e.jsxs("div",{className:"card my-5  bg-dark bg-opacity-50 p-4 rounded-4",children:[e.jsx("div",{className:"card-header bg-light bg-opacity-75 rounded-2",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-3",children:[e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(us,{prioridadFilter:b,setPrioridadFilter:u,personas:t})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Te,{orden:x,setOrden:d})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>bs(p,u,d),className:"btn bg-white bg-opacity-25 btn-sm text-light",children:"Limpiar Filtros"})})]})]}),e.jsx("div",{className:"col-12 ",children:e.jsx($e,{searchTerm:c,setSearchTerm:p})}),o?e.jsx(ee,{}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[h.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[s===4?e.jsx(Vs,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m}):null,s===2?e.jsx(At,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m}):null,e.jsx(Je,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>m([])})]}),g&&e.jsx(ze,{Date1:h,Date2:t,setSelectedDocs:m,onCerrar:()=>j(!1),color:"blueW2"}),!g&&h.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>j(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2"})," ",e.jsxs("small",{children:["Ver Resumen ( ",e.jsxs("span",{className:"text-primary",children:[h.length," 🧑"]}),")"]})]})})]}),e.jsx(ps,{personas:l,selectedDocs:h,toggleSelectDoc:f,toggleSelectAll:C,getPrioridadLabel:gs,fetchPersonas:i,isFiltered:v,color:"bg-blueW",prioridad:s})]})})]})},Mt=({alertaFilter:s,setAlertaFilter:r})=>e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Floating label select example",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todos los Estados"}),e.jsx("option",{value:"capturado",children:"Capturado"}),e.jsx("option",{value:"evadido",children:"Evadido"})]}),e.jsx("label",{children:"Seleccione un Estado"})]}),Lt=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1);a.useState("");const[n,c]=a.useState(!1),[p,b]=a.useState(""),[u,g]=a.useState(""),j=()=>l(!0),x=()=>l(!1),d=()=>{o([])},m=(()=>{const C=localStorage.getItem("user");return C?JSON.parse(C):null})(),f=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas dar por CAPTURADOS 👮 a este grupo personas ?"))){c(!0);try{const S=r.filter(_=>s.includes(_.id)).map(async _=>{const N=O(P,"db_personas",_.id),y=new Date,w=`${y.getDate().toString().padStart(2,"0")}/${(y.getMonth()+1).toString().padStart(2,"0")}/${y.getFullYear().toString().slice(-2)}`;await re(N,{..._,captura:!0,capturas_informacion_estados:[..._.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:m.email,captura_fecha:w,captura_autor:u,captura_descripcion:p}]})});await Promise.all(S),alert("Capturas Exitosas"),t(),d()}catch(v){console.error("Error al modificar personas:",v),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}c(!1),x()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-primary btn-sm w-100",onClick:j,disabled:n,children:["Marcar Capturas (",s.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"👮"}),e.jsx("h5",{className:"modal-title ms-3 text-dark",children:"Marcar Grupo como Capturado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:x})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(C=>s.includes(C.id)).map(C=>{var v;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(v=C.base64)==null?void 0:v.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),C.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(S=>S.filter(_=>_!==C.id)),title:"Quitar de la selección"})]},C.id)})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Autor / Entidad que realizó la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:u,onChange:C=>g(C.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Breve relato de la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:p,onChange:C=>b(C.target.value)})]}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas marcar como capturados estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:f,disabled:!u||!p||n,children:n?"Trabajando...":"Confirmar Captura"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Rt=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1);a.useState("");const[n,c]=a.useState(!1);a.useState(""),a.useState("");const p=()=>l(!0),b=()=>l(!1),u=()=>{o([])},j=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),x=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas QUITAR LOS ESTADOS DE CAPTURA 👮 a estas personas ?"))){c(!0);try{const m=r.filter(f=>s.includes(f.id)).map(async f=>{const C=O(P,"db_personas",f.id),v=new Date,S=`${v.getDate().toString().padStart(2,"0")}/${(v.getMonth()+1).toString().padStart(2,"0")}/${v.getFullYear().toString().slice(-2)}`;await re(C,{...f,captura:!1,capturas_informacion_estados:[...f.capturas_informacion_estados||[],{captura_motivo:"quitar captura",captura_informa_usuario:j.email,captura_fecha:S}]})});await Promise.all(m),alert("Se quito las capturas de forma Exitosa"),t(),u()}catch(h){console.error("Error al modificar personas:",h),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-pink btn-sm w-100",onClick:p,disabled:n,children:["Quitar Capturas (",s.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"👮"}),e.jsx("h5",{className:"modal-title ms-3 text-dark",children:"Quitar Estado de Capturados a Grupo "}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de  ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var h;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(h=d.base64)==null?void 0:h.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(m=>m.filter(f=>f!==d.id)),title:"Quitar de la selección"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas quitar estado de captura ?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:x,disabled:n,children:n?"Trabajando...":"Quitar Captura"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},zt=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1);a.useState("");const[n,c]=a.useState(!1);a.useState(""),a.useState("");const p=()=>l(!0),b=()=>l(!1),u=()=>{o([])},j=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),x=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas DESACTIVAR SU ESTADO DE ALERTA EVADIDO 🚨 a este grupo de  personas ?"))){c(!0);try{const m=r.filter(f=>s.includes(f.id)).map(async f=>{const C=O(P,"db_personas",f.id),v=new Date,S=`${v.getDate().toString().padStart(2,"0")}/${(v.getMonth()+1).toString().padStart(2,"0")}/${v.getFullYear().toString().slice(-2)}`;await re(C,{...f,prioridad:1,capturas_informacion_estados:[...f.capturas_informacion_estados||[],{captura_motivo:"desactivar alerta",captura_informa_usuario:j.email,captura_fecha:S}]})});await Promise.all(m),alert("Alrta Modificada Exitosas"),t(),u()}catch(h){console.error("Error al modificar personas:",h),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-secondaryMuiRed btn-sm w-100 text-white",onClick:p,disabled:n,children:["Desactivar Alerta (",s.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border titilar",children:"🚨"}),e.jsx("h5",{className:"modal-title ms-3 text-dark",children:"Desactivar Alerta Evadido"}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var h;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(h=d.base64)==null?void 0:h.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(m=>m.filter(f=>f!==d.id)),title:"Quitar de la selección"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center  titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas desactivar el estado evadido ?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:x,disabled:n,children:n?"Trabajando...":"Desactivar Evadido"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},$t=()=>{const[s,r]=a.useState(3),{personas:t,loading:o,fetchPersonas:i}=js(s),[l,n]=a.useState([]),[c,p]=a.useState(""),[b,u]=a.useState(""),[g,j]=a.useState(!0),[x,d]=a.useState("asc"),{selectedDocs:h,setSelectedDocs:m,toggleSelectDoc:f,toggleSelectAll:C}=fs(l||[]),v=c||b,[S,_]=a.useState(""),N=h.every(E=>{const k=t.find(F=>F.id===E);return(k==null?void 0:k.captura)===!0}),y=h.every(E=>{const k=t.find(F=>F.id===E);return(k==null?void 0:k.captura)===!1||(k==null?void 0:k.captura)===void 0}),w=!N&&!y;return a.useEffect(()=>{let E=hs(t,c,b);E=Ct(E,S);const k=xs(E,x);n(k)},[c,t,b,x,S]),e.jsxs("div",{className:"container-lg my-5 text-light",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0  ",children:"Listado de Evasiones"}),e.jsxs("div",{className:"card my-5  bg-dark bg-opacity-50 p-4 rounded-4",children:[e.jsx("div",{className:"card-header bg-light bg-opacity-75 rounded-2",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-3",children:[e.jsx("div",{className:"col-12 col-sm-4 col-md-8 col-lg-4",children:e.jsx(us,{prioridadFilter:b,setPrioridadFilter:u,personas:t})}),e.jsx("div",{className:"col-12 col-sm-4 col-md-8 col-lg-4",children:e.jsx(Mt,{alertaFilter:S,setAlertaFilter:_})}),e.jsx("div",{className:"col-12 col-sm-3 col-md-8 col-lg-2",children:e.jsx(Te,{orden:x,setOrden:d})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>bs(p,u,d,_),className:"btn bg-white bg-opacity-25 btn-sm text-light",children:"Limpiar Filtros"})})]})]}),e.jsx("div",{className:"col-12 ",children:e.jsx($e,{searchTerm:c,setSearchTerm:p})}),o?e.jsx(ee,{}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[h.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx("div",{className:"d-flex gap-2 mb-2 justify-content-end mb-2",children:!w&&e.jsxs(e.Fragment,{children:[N&&e.jsx(Rt,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m}),y&&e.jsx(Lt,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m})]})}),e.jsx(zt,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m}),e.jsx(Je,{data1:h,data2:t,dataRefresh:i,setSelectedDocs:m}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>m([])})]}),g&&e.jsx(ze,{Date1:h,Date2:t,setSelectedDocs:m,onCerrar:()=>j(!1),color:"blueW2"}),!g&&h.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>j(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"})," ",e.jsxs("small",{className:"text-light",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-ligh",children:[h.length," 🧑"]}),")"]})]})})]}),e.jsx(ps,{personas:l,selectedDocs:h,toggleSelectDoc:f,toggleSelectAll:C,getPrioridadLabel:gs,fetchPersonas:i,isFiltered:v,color:"bg-redW",prioridad:s})]})})]})},Tt=()=>{const[s,r]=a.useState("dashboard"),[t,o]=a.useState([]),[i,l]=a.useState(!1),n=localStorage.getItem("user");n&&JSON.parse(n);const c=async()=>{try{l(!0);const h=await K(H(P,"db_personas")),m=[];h.forEach(f=>{m.push({id:f.id,...f.data()})}),o(m)}catch(h){console.error("Error al obtener los documentos: ",h)}finally{l(!1)}};a.useEffect(()=>{c()},[]);const p=t.filter(h=>h.prioridad===3).length,b=t.filter(h=>h.prioridad===1).length,u=t.filter(h=>h.prioridad===2).length,g=t.filter(h=>h.prioridad===4).length,j=t.filter(h=>h.captura===!0).length,x=t.length,d=()=>{switch(s){case"dashboard":return e.jsx(Nt,{});case"reportes":return e.jsx(vt,{loading:i});case"graficos":return e.jsx(mt,{totalCapturas:x,totalPrioridadNormal:b,totalParadero:u,totalEvasiones:p,totalPrioritaria:g,totalEvasionesCapturados:j});case"Desactivados":return e.jsx(Pt,{});case"capturas":return e.jsx(wt,{});case"evasiones":return e.jsx($t,{});case"csv":return e.jsx(ct,{});case"paradero":return e.jsx(It,{});case"prioritaria":return e.jsx(Et,{});case"notificaciones":return e.jsx(pt,{loading:i});default:return e.jsx("p",{children:"Selecciona una opción del menú."})}};return e.jsx("div",{className:"container-lg",children:e.jsxs("div",{className:"row ",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-3 ",children:[e.jsx("div",{className:"text-center mb-4 text-light",children:e.jsxs("span",{className:"bg-dark bg-opacity-25 p-2 px-5 fs-6 rounded-5 ",children:[" ",e.jsx("i",{className:"mx-2 bi bi-menu-button-fill"}),"Menú Panel"]})}),e.jsxs("div",{className:"list-group p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenido"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="reportes"?"active":""}`,onClick:()=>r("reportes"),children:"Exportación"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="graficos"?"active":""}`,onClick:()=>r("graficos"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Graficos",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-teal rounded-pill",children:"Nuevo"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="notificaciones"?"active":""}`,onClick:()=>r("notificaciones"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Notificaciones",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-primaryMuiBlue rounded-pill",children:"Administrar"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="capturas"?"active":""}`,onClick:()=>r("capturas"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Capturas",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",x]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="evasiones"?"active":""}`,onClick:()=>r("evasiones"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Evasiones",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",p]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="paradero"?"active":""}`,onClick:()=>r("paradero"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Busqueda Paradero",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",u]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="prioritaria"?"active":""}`,onClick:()=>r("prioritaria"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Prioritarias",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",g]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="csv"?"active":""}`,onClick:()=>r("csv"),children:"Usuarios Csv"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="Desactivados"?"active":""}`,onClick:()=>r("Desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Desactivados",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-cyan rounded-pill",children:"Reactivar"})]})})]})]}),e.jsx("div",{className:"col-12 col-md-8 col-lg-9",children:d()})]})})},Bt=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Panel de Control"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Panel de Control ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(Tt,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},Ot=()=>e.jsx(e.Fragment,{children:e.jsx(Bt,{})}),Ut=({showModal:s,closeModal:r})=>{const t={Rosario:["Comisaria 1ra. - Sección Centro","Comisaria 2da. - Sección Puerto Norte","Comisaria 3ra. - Sección Tucuman","Comisaria 4ta. - Sección Echesortu","Comisaria 5ta. - Sección Pichincha","Comisaria 6ta. - Sección Zona Sur","Comisaria 7ma. - Sección La Florida","Comisaria 8va. - Sección Zona Oeste"]},o=["CRE Rosario","CRE Baigorria","BOU","BOP","AUOP","MOTORIZADA","CGI","PAT","CYP","VIAL","PUMAS","OTROS"],[i,l]=a.useState("Rosario"),[n,c]=a.useState(""),[p,b]=a.useState(""),[u,g]=a.useState(""),[j,x]=a.useState(""),[d,h]=a.useState(""),[m,f]=a.useState(""),[C,v]=a.useState(""),[S,_]=a.useState(!1),N=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,[y,w]=a.useState([]),[E,k]=a.useState(""),[F,A]=a.useState(""),[L,U]=a.useState([]),Y=new Date().toLocaleString(),q=B=>N.test(B),W=()=>{if(!q(u)){f("El nombre y apellido solo deben contener letras y espacios.");return}if(j.length!==8||isNaN(j)){v("El DNI debe ser un número de 8 caracteres.");return}U([...L,{nombreApellido:u,dni:j}]),g(""),x(""),f("")},le=()=>{if(F.length!==6||isNaN(F)){v("El NI debe ser un número de 6 caracteres.");return}if(!q(E)){v("El nombre no debe contener números.");return}w([...y,{nombre:E,ni:F}]),k(""),A(""),v("")},me=async B=>{if(B.preventDefault(),!n){h("Por favor, selecciona una comisaría.");return}if(!p){h("Por favor, selecciona una unidad.");return}if(L.length===0){h("Debes agregar al menos una persona.");return}if(y.length===0){h("Debes agregar al menos una persona para la entrega.");return}if(!window.confirm("¿Estás seguro de que deseas agregar Art. 10 Bis?")){alert("La operación fue cancelada.");return}h(""),_(!0);try{const ie=JSON.parse(localStorage.getItem("user"));for(let ne=0;ne<L.length;ne++){const oe=L[ne];await Ee(H(P,"db_art_diez_bis"),{nombre_apellido:oe.nombreApellido,dni:oe.dni,selectedLocalidad:i,comisaria:n.split(".")[0].trim(),unidad:p,timestamp:Y,usuario:(ie==null?void 0:ie.email)||"Usuario desconocido",visualidad:!1,comisaria_recibe:!1,personal_entrega:y})}alert("Se agregaron las personas con Art. 10 Bis."),g(""),x(""),c(""),b(""),l("Rosario"),w([]),r()}catch(ie){console.error("Error al enviar notificación: ",ie),h("Error al enviar la notificación. Inténtalo de nuevo.")}finally{_(!1)}},de=B=>{const te=L.filter((ie,ne)=>ne!==B);U(te)},ae=B=>{const te=y.filter((ie,ne)=>ne!==B);w(te)};return s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{className:"modal-title text-center fw-semibold text-white",children:"Agregar Persona - Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:r})]}),e.jsx("div",{className:"modal-body",children:e.jsx("form",{onSubmit:me,children:e.jsxs("div",{className:"container ",children:[e.jsxs("div",{className:"mb-3 text-center",children:[d&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),d]}),m&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),m]}),C&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar"}),C]})]}),e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-primary fw-semibold shadow-sm text-white py-2 rounded",children:"Agregar personas 10 Bis"}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${m&&!N.test(u)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:u,onChange:B=>g(B.target.value)}),e.jsx("label",{htmlFor:"nombreApellido",children:"Nombre y Apellido"}),m&&!N.test(u)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${m&&(j.length!==8||isNaN(Number(j)))?"is-invalid":""}`,maxLength:"8",placeholder:"DNI",value:j,onChange:B=>x(B.target.value.replace(/[^\d]/g,""))}),e.jsx("label",{htmlFor:"dni",children:"DNI"}),m&&(j.length!==8||isNaN(Number(j)))&&e.jsx("div",{className:"invalid-feedback",children:"El DNI debe ser un número de hasta 8 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-primary shadow-sm rounded-circle",onClick:()=>W(),children:"+"})})]}),L.map((B,te)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 "}),B.nombreApellido," - ",B.dni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>de(te),children:e.jsx("i",{className:"bi bi-trash"})})]},te)),e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-pink fw-semibold shadow-sm text-white py-2 rounded",children:"Dependencia Destino"}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("select",{className:`form-select ${d&&!i?"is-invalid":""}`,value:i,onChange:B=>l(B.target.value),children:e.jsx("option",{value:"Rosario",children:"Rosario"})}),e.jsx("label",{htmlFor:"localidad",children:"Localidad"}),d&&!i&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una localidad."})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:`form-select ${d&&!n?"is-invalid":""}`,value:n,onChange:B=>c(B.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar Comisaría"}),(t[i]||[]).map(B=>e.jsx("option",{value:B,children:B},B))]}),e.jsx("label",{htmlFor:"comisaria",children:"Comisaría"}),d&&!n&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una comisaría."})]})})]}),e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-blue fw-semibold shadow-sm text-white py-2 rounded",children:"Unidad Procede a la Entrega"}),e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{id:"unidad",className:`form-select ${d&&!p?"is-invalid":""}`,value:p,onChange:B=>b(B.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar Unidad"}),o.map(B=>e.jsx("option",{value:B,children:B},B))]}),e.jsx("label",{htmlFor:"unidad",children:"Unidad Procede a la Entrega"}),d&&!p&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una unidad."})]})]}),e.jsxs("div",{className:"mb-3 text-center mt-4",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-secondaryM fw-semibold shadow-sm text-white py-2 rounded",children:"Mi Unidad de Trabajo"}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${C&&!N.test(E)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:E,onChange:B=>k(B.target.value)}),e.jsx("label",{htmlFor:"nombreEntrega",children:"Nombre y Apellido"}),C&&!N.test(E)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${C&&(F.length!==6||isNaN(F))?"is-invalid":""}`,placeholder:"N.I",maxLength:"6",value:F,onChange:B=>A(B.target.value)}),e.jsx("label",{htmlFor:"niEntrega",children:"N.I"}),C&&(F.length!==6||isNaN(F))&&e.jsx("div",{className:"invalid-feedback",children:"El N.I debe ser un número de 6 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-primary shadow-sm rounded-circle",onClick:()=>le(),children:"+"})})]}),y.map((B,te)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light mt-3",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 "}),B.nombre," - ",B.ni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>ae(te),children:e.jsx("i",{className:"bi bi-trash"})})]},te))]}),e.jsx("div",{className:"text-center mb-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary shadow",disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-arrow-repeat me-2"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"Confirmar"]})})})," "]})})})]})})}):null},Vt=({showModal:s,closeModal:r})=>{const[t,o]=a.useState(!1),i=Me(),l=()=>{o(!1),r()},n=()=>{o(!t)};return a.useEffect(()=>{if(i.pathname==="/dashboard"){const c=p=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",c),()=>{window.removeEventListener("popstate",c)}}},[]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Herramientas Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("button",{className:`btn btn-${t?"secondary":"purple"}`,onClick:n,children:[t?"Ocultar Formulario":"Ingresar Nuevo Art. 10 Bis",e.jsx("i",{className:`ms-2 bi ${t?"bi-x-circle":"bi-person-add"}`})]})}),t&&e.jsx("div",{className:"container my-4",children:e.jsx(Ut,{showModal:s,closeModal:l})})]})]})})}):null},qt=({recepciones:s,loading:r})=>e.jsx("div",{className:" text-center mt-4",children:r?e.jsx("div",{className:"spinner-border text-primary",role:"status"}):Object.keys(s).length>0?e.jsxs("div",{className:"alert",children:[e.jsx("strong",{children:"Recepciones pendientes por comisaría:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(s).map(([t,o],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-primary",role:"status"}),e.jsx("span",{children:t}),e.jsxs("span",{className:"badge bg-primary",children:[o," pendientes"]})]},i))})]}):e.jsx("div",{className:"alert alert-primary",children:e.jsx("strong",{children:"No hay recepciones pendientes en este momento."})})}),Gt=({notificaciones:s,loading:r,aceptarRecepcion:t,rechazarRecepcion:o})=>{const[i,l]=a.useState(""),[n,c]=a.useState(!1),[p,b]=a.useState(null),[u,g]=a.useState(""),[j,x]=a.useState(!1),d=async()=>{if(!p)return;x(!0);const{id:m,comisaria:f}=p,C=We[f];setTimeout(()=>{u&&u===C?(t(m),l(""),c(!1),g("")):l(`El código ingresado "${u}" es incorrecto.`),x(!1)},1e3)},h=m=>{b(m),c(!0),l(""),g("")};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("p",{className:"text-center  text-center mb-4 bg-primary text-white rounded p-2 mt-4 mb-3",children:["       ",e.jsx("span",{className:"text-capitalize fs-3  ",children:" validación Recepción Art. 10 Bis "}),"  ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-4",children:e.jsx("div",{className:"position-relative",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border ",role:"status","aria-label":"Cargando...",children:" "})]}):e.jsxs("div",{className:"list-group",children:[i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i}),s&&s.length>0?s.map(m=>e.jsxs("div",{className:"list-group-item mb-3 shadow",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:m.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:m.dni})]}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-end row",children:[e.jsx("div",{className:"col mb-1",children:e.jsxs("button",{className:"btn btn-primary btn-sm me-2 mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>h(m),"aria-label":`Aceptar recepción para ${m.nombre_apellido} en la Comisaría ${m.comisaria}`,children:["Aceptar ",e.jsx("i",{className:"bi bi-check-all ms-2"})]})}),e.jsx("div",{className:"col",children:e.jsxs("button",{className:"btn btn-pink btn-sm mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>o(m.id),"aria-label":`Cancelar recepción para ${m.nombre_apellido}`,children:["Cancelar ",e.jsx("i",{className:"bi bi-trash ms-2"})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{children:e.jsxs("small",{children:[m.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:m.comisaria})," -"," ",m.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:m.unidad})]})})})]},m.id)):e.jsx("div",{className:"alert alert-info shadow",role:"alert",children:"No se encontraron notificaciones para validar."})]})})})]}),n&&p&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Ingresar Código"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>c(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Ingresa el código para la Comisaría ",e.jsx("strong",{children:p.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:u,onChange:m=>g(m.target.value),placeholder:"Código"}),i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,disabled:!u||j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:"Cancelar"})]})]})})})]})},Ht=()=>{const[s,r]=a.useState([]),[t,o]=a.useState(!1),[i,l]=a.useState(""),n=async()=>{try{o(!0);const g=Ce(H(P,"db_art_diez_bis"),Ie("comisaria_recibe","==",!1)),x=(await K(g)).docs.map(d=>({id:d.id,...d.data()}));r(x)}catch(g){console.error("Error al obtener las recepciones pendientes: ",g)}finally{o(!1)}};a.useEffect(()=>{n()},[]);const c=async g=>{try{const j=JSON.parse(localStorage.getItem("user")),x=O(P,"db_art_diez_bis",g);await re(x,{comisaria_recibe:!0,visualidad:!0,fecha_ingreso_validado:Pe(),usuario_validado_ingreso:j.email}),r(d=>d.filter(h=>h.id!==g)),alert("Recepción aceptada correctamente.")}catch(j){console.error("Error al aceptar la recepción: ",j),alert("Hubo un error al aceptar la recepción.")}},p=async g=>{if(window.confirm("¿Estás seguro de que deseas rechazar esta recepción?"))try{const x=O(P,"db_art_diez_bis",g);await xe(x),r(d=>d.filter(h=>h.id!==g)),alert("Recepción rechazada correctamente.")}catch(x){console.error("Error al rechazar la recepción: ",x),alert("Hubo un error al rechazar la recepción.")}},b=s.reduce((g,j)=>{const x=j.comisaria||"Comisaría desconocida";return g[x]=(g[x]||0)+1,g},{}),u=i?s.filter(g=>g.comisaria===i):s;return e.jsx("div",{className:"container-lg mt-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 mb-4",children:[e.jsx(qt,{recepciones:b,loading:t}),e.jsxs("div",{className:"mt-4 card p-3 shadow-sm",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize fw-bold text-muted",children:"Filtrar por comisaría"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select",value:i,onChange:g=>l(g.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),Object.keys(b).map((g,j)=>e.jsx("option",{value:g,children:g},j))]})]})]}),e.jsx("div",{className:"col-12 col-md-8 mt-4 mt-md-0",children:e.jsx(Gt,{notificaciones:u,loading:t,aceptarRecepcion:c,rechazarRecepcion:p})})]})})},Wt=({showModal:s,closeModal:r})=>{const[t,o]=a.useState(!1),i=Me(),l=()=>{o(!1),r()};return a.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const n=c=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}}},[]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Recepción Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(Ht,{})})})]})})}):null},Jt=({recepciones:s,loading:r})=>e.jsx("div",{className:"text-center mt-4",children:r?e.jsx("div",{className:"spinner-border text-primary",role:"status","aria-label":"Cargando..."}):Object.keys(s).length>0?e.jsxs("div",{className:"alert",children:[e.jsx("strong",{children:"Personas visibles por comisaría:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(s).map(([t,o],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-teal",role:"status","aria-label":"Comisaría con personas visibles"}),e.jsx("span",{className:"text-truncate",children:t}),e.jsxs("span",{className:"badge bg-teal",children:[o," personas"]})]},i))})]}):e.jsx("div",{className:"alert alert-primary shadow",children:e.jsx("strong",{children:"No hay personas visibles en este momento."})})}),Zt=We,Yt=({dataInfo:s,loading:r,actualizarListado:t})=>{const[o,i]=a.useState("");console.log(r);const[l,n]=a.useState(null),[c,p]=a.useState(""),[b,u]=a.useState(!1),[g,j]=a.useState(null),[x,d]=a.useState({}),[h,m]=a.useState(!1),f=N=>Zt[N]||"",C=(N,y)=>{const w=new Date(y.seconds*1e3).getTime()+216e5,E=setInterval(()=>{const k=Date.now(),F=w-k;if(F<=0){clearInterval(E),d(q=>({...q,[N]:"00:00:00"}));return}const A=Math.floor(F/36e5),L=Math.floor(F%36e5/6e4),U=Math.floor(F%6e4/1e3),Y=`${A.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`;d(q=>({...q,[N]:Y}))},1e3);return E},v=async N=>{for(const y of N){const w=y.fecha_ingreso_validado;if(w&&w.seconds){const E=new Date(w.seconds*1e3);if(new Date().getTime()-E.getTime()>36e5){console.log(`Han pasado más de 1 hora desde la salida de ${y.nombre_apellido}`),alert(`Han pasado más de 1 hora el sistema da como salida a  ${y.nombre_apellido} del Articulo 10 bis`);const A=O(P,"db_art_diez_bis",y.id),L=await ke(A);if(L.exists()){const U=O(P,"db_art_diez_bis_desactivados",y.id);await fe(U,L.data()),await xe(A),await re(U,{visualidad:!1,salida_art:Pe(),salida_art_usuario:"sistema"}),t(),console.log(`Documento copiado, actualizado y eliminado para ${y.nombre_apellido}`)}}}}};a.useEffect(()=>{s&&s.length>0&&(v(s),s.forEach(N=>{N.fecha_ingreso_validado&&N.fecha_ingreso_validado.seconds&&C(N.id,N.fecha_ingreso_validado)}))},[s]);const S=async()=>{if(!g)return;m(!0);const{id:N,comisaria:y}=g,w=f(y);setTimeout(async()=>{if(c&&c===w)try{const E=JSON.parse(localStorage.getItem("user")),k=O(P,"db_art_diez_bis",N),F=await ke(k);if(F.exists()){const A=F.data();await fe(O(P,"db_art_diez_bis_desactivados",N),{...A,visualidad:!1,salida_art:Pe(),salida_art_usuario:(E==null?void 0:E.email)||"sistema"}),await xe(k),i(""),alert("Recepción aceptada correctamente."),u(!1),p(""),t()}else alert("El documento no existe.")}catch(E){console.error("Error al aceptar la recepción: ",E),alert("Hubo un error al aceptar la recepción.")}finally{m(!1)}else i(`El código ingresado (${c}) es incorrecto.`),m(!1)},1e3)},_=N=>{j(N),u(!0)};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("p",{className:"text-center  text-center mb-4 bg-secondaryM text-white rounded p-2 mt-4 mb-3",children:["       ",e.jsx("span",{className:"text-capitalize fs-3  ",children:" Salida Art. 10 Bis "}),"  ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-4",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border ",role:"status","aria-label":"Cargando...",children:" "}),"  "]}):e.jsxs("div",{className:"list-group",children:[o&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:o}),s&&s.length>0?s.map(N=>e.jsxs("div",{className:"list-group-item mb-3 shadow",children:[e.jsx("div",{className:"text-end me-2",children:e.jsxs("span",{className:"badge bg-primary",children:[e.jsx("i",{className:"bi bi-clock titilar me-1"})," ",x[N.id]||"Cargando..."]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:N.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:N.dni})]}),e.jsx("button",{className:"btn btn-teal text-white btn-sm w-25",onClick:()=>_(N),disabled:l===N.id,children:l===N.id?"Procesando...":"Finalizar"})]}),e.jsxs("small",{className:"mt-2",children:[N.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:N.comisaria})," - ",N.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:N.unidad})]})]},N.id)):e.jsxs("div",{className:"alert alert-info text-capitalize shadow",role:"alert",children:["No se encontraron Personas en dependencias.",e.jsx("i",{className:"bi bi-hand-thumbs-up ms-2"})]})]})})]}),b&&g&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Ingresar Código"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>u(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Ingresa el código para la Comisaría ",e.jsx("strong",{children:g.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:N=>p(N.target.value),placeholder:"Código"}),o&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:o})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:S,disabled:!c||h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:"Cancelar"})]})]})})})]})},Qt=()=>{const[s,r]=a.useState(!1),[t,o]=a.useState(""),[i,l]=a.useState({}),[n,c]=a.useState([]),p=async()=>{try{r(!0);const u=Ce(H(P,"db_art_diez_bis"),Ie("visualidad","==",!0)),j=(await K(u)).docs.map(d=>({id:d.id,...d.data()}));c(j);const x=j.reduce((d,h)=>{const m=h.comisaria||"Comisaría desconocida";return d[m]=(d[m]||0)+1,d},{});l(x)}catch(u){console.error("Error al obtener datos: ",u)}finally{r(!1)}};a.useEffect(()=>{p()},[]);const b=t?n.filter(u=>(u.comisaria||"").toLowerCase()===t.toLowerCase()):n;return e.jsxs("div",{className:"container-lg mt-5",children:[e.jsx("div",{className:"row"}),e.jsxs("div",{className:"row gy-4",children:[e.jsxs("div",{className:"col-12 col-lg-4",children:[e.jsx(Jt,{recepciones:i,loading:s}),e.jsxs("div",{className:"mt-4 card p-3 shadow-sm",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize fw-bold text-muted",children:"Filtrar por comisaría"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select",value:t,onChange:u=>o(u.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),Object.keys(i).map((u,g)=>e.jsx("option",{value:u,children:u},g))]})]})]}),e.jsx("div",{className:"col-12 col-lg-8",children:e.jsx(Yt,{dataInfo:b,loading:s,actualizarListado:p})})]})]})},Xt=({showModal:s,closeModal:r})=>{const[t,o]=a.useState(!1),i=Me(),l=()=>{o(!1),r()};return a.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const n=c=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}}},[]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Salida / Egreso Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(Qt,{})})})]})})}):null},Kt=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState("nombre"),p=async()=>{try{const h=(await K(H(P,"db_comisarias"))).docs.map(m=>({id:m.id,...m.data()})).filter(m=>m.disponibilidad===!0);r(h)}catch(d){console.error("Error al obtener las comisarías: ",d)}},b=async()=>{try{const h=(await K(H(P,"db_art_diez_bis"))).docs.map(C=>({id:C.id,...C.data()})),m=h.filter(C=>C.visualidad===!0&&C.comisaria_recibe===!0),f=h.filter(C=>C.visualidad===!1&&C.comisaria_recibe===!1);o(m),l(f)}catch(d){console.error("Error al obtener las notificaciones: ",d)}};a.useEffect(()=>{p(),b()},[]);const u=t.reduce((d,h)=>{const m=h.comisaria;return m&&(d[m]=(d[m]||0)+1),d},{}),g=i.reduce((d,h)=>{const m=h.comisaria;return m&&(d[m]=(d[m]||0)+1),d},{}),j=d=>{const h=s.find(m=>m.comisaria===d);if(h){const m=h.plazas_art_10_bis||0;return(u[d]||0)>=m?{estado:"Llena",clase:"badge bg-danger"}:{estado:"Disponible",clase:"badge bg-info"}}return{estado:"Desconocido",clase:"badge bg-secondary"}},x=()=>n==="nombre"?[...s].sort((d,h)=>d.comisaria.localeCompare(h.comisaria)):n==="plaza"?[...s].sort((d,h)=>(h.plazas_art_10_bis||0)-(d.plazas_art_10_bis||0)):s;return e.jsxs("div",{children:[e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select",id:"filtroOrden",value:n,onChange:d=>c(d.target.value),"aria-label":"Ordenar por",children:[e.jsx("option",{value:"nombre",children:"Nombre (A-Z)"}),e.jsx("option",{value:"plaza",children:"Plazas Disponibles"})]}),e.jsx("label",{htmlFor:"filtroOrden",children:"Ordenar por"})]}),e.jsx("div",{className:"list-group",children:x().map(d=>{const{estado:h,clase:m}=j(d.comisaria),f=u[d.comisaria]||0,C=g[d.comisaria]||0;return e.jsx("div",{className:"list-group-item mb-3 shadow",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary",style:{fontSize:"1.5rem"}}),e.jsxs("div",{children:[e.jsx("strong",{children:d.comisaria}),e.jsxs("div",{children:[e.jsx("small",{className:m,children:`${f} / ${d.plazas_art_10_bis||0} Plazas - ${h}`}),e.jsx("div",{children:e.jsx("small",{className:"badge bg-primary",children:`${C} Pendientes ( Por Validar )`})})]})]})]})},d.comisaria)})})]})},ei=({showModal:s,closeModal:r})=>{const[t,o]=a.useState(!1),i=Me(),l=()=>{o(!1),r()};return a.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const n=c=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}}},[]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-md",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Plazas Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(Kt,{})})})]})})}):null},si=()=>{const[s,r]=a.useState(!1),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState({search:"",estado:"",comisaria:""}),[p,b]=a.useState(!1),[u,g]=a.useState(!1),[j,x]=a.useState(""),d=async()=>{r(!0);try{let v=H(P,"db_art_diez_bis");if(n.estado==="desactivado")v=H(P,"db_art_diez_bis_desactivados");else if(n.estado===""){const N=await K(H(P,"db_art_diez_bis")),y=await K(H(P,"db_art_diez_bis_desactivados")),w=N.docs.map(F=>({id:F.id,...F.data()})),E=y.docs.map(F=>({id:F.id,...F.data()})),k=[...w,...E];o(k),l(k),r(!1);return}const _=(await K(v)).docs.map(N=>({id:N.id,...N.data()}));o(_),l(_)}catch(v){console.error("Error al obtener las notificaciones: ",v)}finally{r(!1)}};a.useEffect(()=>{d()},[n.estado]);const h=v=>{const{name:S,value:_}=v.target;c(N=>({...N,[S]:_}))};a.useEffect(()=>{const{search:v,estado:S,comisaria:_}=n,N=t.filter(y=>{var F,A,L;const w=v===""||((F=y.nombre_apellido)==null?void 0:F.toLowerCase().includes(v.toLowerCase()))||((A=y.dni)==null?void 0:A.toString().includes(v)),E=S===""||(S==="activado"?y.visualidad:!y.visualidad),k=_===""||((L=y.comisaria)==null?void 0:L.toLowerCase())===_.toLowerCase();return w&&E&&k});l(N),N.length===0?b(!0):b(!1)},[n,t]);const m=async(v,S,_)=>{try{if(S){const N=O(P,"db_art_diez_bis",v);await re(N,{visualidad:!1}),await fe(O(P,"db_art_diez_bis_desactivados",v),_),await xe(N),d(),alert("Estado desactivado y documento movido a desactivados")}else{const N=O(P,"db_art_diez_bis_desactivados",v),y=_;await fe(O(P,"db_art_diez_bis",v),{...y,visualidad:!0}),await xe(N),d(),alert("Estado activado y documento movido a activados")}}catch(N){console.error("Error al actualizar la visualidad: ",N),alert("Hubo un error al cambiar la visualidad.")}},f=()=>g(!1),C=v=>{x(v),g(!0)};return e.jsxs("div",{className:"container-lg text-center mt-5  mt-sm-5 mt-md-0 ms-lg-0",children:[e.jsxs("div",{className:"alert alert-light text-danger text-center bg-white border border-2 shadow-sm",role:"alert",children:["Recuerda que las personas están dentro del contexto ",e.jsx("strong",{children:" 6 horas cumplidas como maximo ( Art. 10 Bis ) desde su Ingreso . "}),"Por lo tanto el sistema da salida automáticamente a esas personas cumplido el plazo."]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-4 mb-3  mb-sm-5 mb-md-0 mb-lg-0",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:"form-control shadow-sm",name:"search",value:n.search,onChange:h,placeholder:"Buscar por nombre o DNI"}),e.jsx("label",{htmlFor:"search",children:"Buscar por nombre o DNI"})]})}),e.jsx("div",{className:"col-md-4  mb-3 mb-sm-5 mb-md-0 mb-lg-0",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm",name:"estado",value:n.estado,onChange:h,children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"activado",children:"Activado"}),e.jsx("option",{value:"desactivado",children:"Desactivado"})]}),e.jsx("label",{htmlFor:"estado",children:"Filtrar por estado"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm",name:"comisaria",value:n.comisaria,onChange:h,children:[e.jsx("option",{value:"",children:"Todas las comisarías"}),[...new Set(t.map(v=>v.comisaria).filter(Boolean))].map(v=>e.jsx("option",{value:v,children:v},v))]}),e.jsx("label",{htmlFor:"comisaria",children:"Filtrar por comisaría"})]})})]}),p&&e.jsx("div",{className:"alert alert-danger",children:"No se encontraron coincidencias"}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("div",{className:"col-6 col-md-3 mt-4",children:[e.jsxs("button",{className:"btn btn-primary text-white fw-semibold mt-3 w-100",onClick:()=>C("panel"),children:["Nuevo 10 Bis"," ",e.jsx("i",{className:"bi bi-person-add rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-teal text-white fw-semibold mt-3 w-100",onClick:()=>C("recepcion"),children:["Recepción 10 Bis"," ",e.jsx("i",{className:"bi bi-people-fill rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-secondaryMuiRed text-white fw-semibold mt-3 w-100",onClick:()=>C("estadio"),children:["Alojados 10 Bis"," ",e.jsx("i",{className:"bi bi-person-raised-hand rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-orange text-white fw-semibold mt-3 w-100",onClick:()=>C("plazas"),children:["Plazas 10 Bis"," ",e.jsx("i",{className:"bi bi-shield-lock rounded-circle border border-2 p-1 m-1"})]})]}),e.jsx("div",{className:"col-12 col-md-9 mt-4",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{children:"Actividad Art 10 Bis"})}),s?e.jsx(ee,{}):e.jsx("div",{className:"list-group",children:i.map(v=>e.jsxs("div",{className:`list-group-item mb-3 shadow ${v.visualidad?"bg-greenW2":"bg-redW"}`,children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:v.nombre_apellido||"Sin nombre"})," -"," ",v.dni||"Sin DNI"]}),e.jsx("button",{className:`btn fw-semibold btn-sm ${v.visualidad?"btn-pink text-white rounded-pill":"btn-teal text-white rounded-pill"}`,onClick:()=>m(v.id,v.visualidad,v),children:v.visualidad?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-eye-slash me-1"})," Ocultar"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-eye me-2"})," Activar"]})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("small",{children:[v.selectedLocalidad||"Localidad desconocida"," -"," ",v.comisaria||"Comisaría desconocida"," -"," ",v.timestamp?v.timestamp.split(",")[0]+" "+v.timestamp.split(",")[1].trim().slice(0,5)+" hs":"Fecha no disponible"]})})]},v.id))})]})})]}),u&&j==="panel"&&e.jsx(Vt,{showModal:u,closeModal:f}),u&&j==="recepcion"&&e.jsx(Wt,{showModal:u,closeModal:f}),u&&j==="estadio"&&e.jsx(Xt,{showModal:u,closeModal:f}),u&&j==="plazas"&&e.jsx(ei,{showModal:u,closeModal:f})]})},ai=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState(!0),n=["comisaria","fecha_ingreso_validado","dni","nombre_apellido","selectedLocalidad","timestamp","unidad","usuario_validado_ingreso","salida_art","salida_art_usuario"],c=async()=>{try{const j=H(P,"db_art_diez_bis"),x=H(P,"db_art_diez_bis_desactivados"),[d,h]=await Promise.all([K(j),K(x)]),m=d.docs.map(v=>({id:v.id,...v.data()})),f=h.docs.map(v=>({id:v.id,...v.data()})),C=[...m,...f];r(C),l(!1)}catch(j){console.error("Error al obtener los datos:",j),l(!1)}},p=j=>{o(x=>x.includes(j)?x.filter(d=>d!==j):[...x,j])},b=()=>{o(n)},u=()=>{o([])},g=()=>{if(s.length===0){console.error("No hay datos para descargar");return}if(t.length===0){console.error("Debe seleccionar al menos un campo");return}const j=s.map(h=>{const m={};return t.forEach(f=>{m[f]=h[f]}),m}),x=be.json_to_sheet(j),d=be.book_new();be.book_append_sheet(d,x,"Datos Seleccionados"),Le(d,"Datos_Seleccionados.xlsx")};return a.useEffect(()=>{c()},[]),e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center text-white",style:{minHeight:"55vh"},children:[e.jsxs("h2",{className:"text-center mb-4",children:["Exportar Datos  ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"text-center mb-5 fw-light",children:"Selecciona los campos que deseas incluir en la exportación."}),i?e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm text-light mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-light mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-light mx-2",role:"status"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-center mb-4 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-light",onClick:b,children:"Seleccionar Todos"}),e.jsx("button",{className:"btn btn-outline-light",onClick:u,children:"Limpiar Selección"})]}),e.jsx("form",{className:"mb-4 w-100 px-3",children:e.jsx("div",{className:"row p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg border-1 border",children:n.map(j=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",style:{display:"flex",alignItems:"center"},children:e.jsxs("div",{className:"form-check w-100 d-flex align-items-center",children:[e.jsx("input",{type:"checkbox",className:"form-check-input ",id:j,value:j,onChange:()=>p(j),checked:t.includes(j)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:j,children:j})]})},j))})}),t.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn btn-green text-white fw-semibold",onClick:g,children:["Descargar Datos Seleccionados ",e.jsx("i",{className:"bi bi-filetype-xml"})]})})]})]})},ti=({chartType:s,onChange:r})=>e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("span",{className:"input-group-text bg-dark bg-opacity-50 text-white ",id:"inputGroup-sizing-sm",children:"Tipo de gráfico:"}),e.jsxs("select",{className:"form-select text-center ",onChange:r,value:s,children:[e.jsx("option",{value:"bar",children:"Barra"}),e.jsx("option",{value:"line",children:"Línea"}),e.jsx("option",{value:"pie",children:"Pastel"}),e.jsx("option",{value:"doughnut",children:"Doughnut"})]})]}),ii=({agrupacion:s,onChange:r})=>e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("span",{className:"input-group-text bg-purpleUi bg-opacity-50 text-white",children:[e.jsx("i",{className:"bi bi-diagram-3-fill me-1"})," Agrupar por"]}),e.jsxs("select",{className:"form-select text-center shadow-sm bg-dark bg-opacity-50 text-white",value:s,onChange:r,children:[e.jsx("option",{value:"comisaria",children:"Comisaría"}),e.jsx("option",{value:"unidad",children:"Unidad"})]})]}),ri=({coleccionesSeleccionadas:s,onChange:r})=>{const t=["db_art_diez_bis","db_art_diez_bis_desactivados"],o=n=>{const c=s.includes(n);c&&s.length===1||r(c?s.filter(p=>p!==n):[...s,n])},i=n=>n==="db_art_diez_bis"?"Activos":"Históricos",l=n=>n==="db_art_diez_bis"?"bi-person-fill-check":"bi-person-fill-slash";return e.jsx("div",{className:"d-flex justify-content-center gap-3 flex-wrap my-3",children:t.map(n=>{const c=s.includes(n);return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registros "}),e.jsxs("button",{type:"button",className:`btn d-flex align-items-center gap-2 px-4 py-1 rounded-3 shadow-sm fw-semibold ${c?"btn-light":"btn-outline-light"}`,onClick:()=>o(n),children:[e.jsx("i",{className:`bi ${l(n)} fs-5`}),i(n)]},n)]})})})},li=({chartType:s,data:r,options:t})=>{switch(s){case"line":return e.jsx(Ge,{data:r,options:t});case"pie":return e.jsx(cs,{data:r,options:t});case"doughnut":return e.jsx(ds,{data:r,options:t});case"bar":default:return e.jsx(os,{data:r,options:t})}},ni=(s,r)=>{const[t,o]=a.useState({}),[i,l]=a.useState(!0),[n,c]=a.useState(null);return a.useEffect(()=>{const p=async()=>{try{const b={};for(const u of r)(await K(H(P,u))).forEach(j=>{const x=j.data()[s];x&&(b[x]=(b[x]||0)+1)});o(b)}catch(b){c(b),console.error("Error fetching data:",b)}finally{l(!1)}};r.length>0?(l(!0),p()):(o({}),l(!1))},[s,r]),{data:t,loading:i,error:n}},oi=()=>{const[s,r]=a.useState("bar"),[t,o]=a.useState("comisaria"),[i,l]=a.useState(["db_art_diez_bis","db_art_diez_bis_desactivados"]),{data:n,loading:c,error:p}=ni(t,i);if(c)return e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm text-white mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-white mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-white mx-2",role:"status"})]});if(p)return e.jsx("p",{className:"alert alert-danger text-center",children:"Error cargando datos."});if(!n)return null;const b=Object.values(n).reduce((f,C)=>f+C,0),g=[" #1de9b6"," #ffca28"," #f73378"," #16B1FF"," #7e57c2"," #e353d3"," #c7f7d4"," #ffef62"," #05F2D4"].slice(0,9),j=Object.keys(n),x=Object.values(n),d={labels:j,datasets:[{label:`Total por ${t[0].toUpperCase()+t.slice(1)} (${b})`,data:x,backgroundColor:g,borderColor:"white",borderWidth:2,color:"#ffffff"}]},h={duration:1e3,easing:"easeOutBounce"},m={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff"}},title:{display:!0,text:`Total de Casos por ${t[0].toUpperCase()+t.slice(1)}`,color:"#ffffff",font:{size:20}},tooltip:{bodyColor:"#ffffff",titleColor:"#ffffff"}},animation:h,scales:s==="pie"||s==="doughnut"?{}:{y:{beginAtZero:!0,ticks:{stepSize:1,color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.2)"}},x:{beginAtZero:!0,ticks:{stepSize:1,color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.2)"}}}};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-center my-5 text-light",children:"Estadísticas / Gráficos"}),e.jsxs("div",{className:"row justify-content-center mb-3",children:[e.jsx("div",{className:"col-12 col-md-5 mb-2",children:e.jsx(ti,{chartType:s,onChange:f=>r(f.target.value)})}),e.jsx("div",{className:"col-12 col-md-5 mb-2",children:e.jsx(ii,{agrupacion:t,onChange:f=>o(f.target.value)})}),e.jsx("div",{className:"col-12 col-md-10",children:e.jsx(ri,{coleccionesSeleccionadas:i,onChange:l})})]}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10",style:{height:"400px"},children:e.jsx(li,{chartType:s,data:d,options:m})})})]})},ci=()=>{const[s,r]=a.useState([]),[t,o]=a.useState({totalDocumentos:0,personalEntrega:{},promedioTiempo:null,documentosPorComisaria:{},unidades:[],comisarias:[],salidasArtUsuarioMap:[]});a.useEffect(()=>{(async()=>{const c=(await K(H(P,"db_art_diez_bis_desactivados"))).docs.map(p=>p.data());r(c),i(c)})()},[]);const i=l=>{const n={},c={},p={},b={};let u=0,g=0;l.forEach(m=>{if(m.personal_entrega.forEach(f=>{const C=f.nombre.split(" ")[0],v=`${f.ni} - ${C}`;n[v]=(n[v]||0)+1}),c[m.comisaria]=(c[m.comisaria]||0)+1,m.unidad&&(p[m.unidad]=(p[m.unidad]||0)+1),m.salida_art_usuario&&(b[m.salida_art_usuario]=(b[m.salida_art_usuario]||0)+1),m.fecha_ingreso_validado&&m.salida_art){const f=m.fecha_ingreso_validado.toDate(),C=m.salida_art.toDate();!isNaN(f)&&!isNaN(C)?(u+=(C-f)/(1e3*60*60),g++):console.warn("Fecha inválida: ",m.fecha_ingreso_validado,m.salida_art)}});const j=Object.entries(p).map(([m,f])=>({unidad:m,cantidad:f})).sort((m,f)=>f.cantidad-m.cantidad),x=Object.entries(c).map(([m,f])=>({comisaria:m,cantidad:f})).sort((m,f)=>f.cantidad-m.cantidad),d=Object.entries(n).map(([m,f])=>({key:m,value:f})).sort((m,f)=>f.value-m.value),h=Object.entries(b).map(([m,f])=>({usuario:m,cantidad:f})).sort((m,f)=>f.cantidad-m.cantidad);o({totalDocumentos:l.length,personalEntrega:d,promedioTiempo:g>0?(u/g).toFixed(2):null,documentosPorComisaria:c,unidades:j,comisarias:x,salidasArtUsuarioMap:h})};return e.jsxs("div",{className:"container ",children:[e.jsxs("h3",{className:"text-center mb-4 bg-secondaryM text-white rounded p-2 ",children:["Estadísticas Art. 10 Bis ",e.jsx("i",{className:"ms-2 bi bi-bar-chart-fill"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2  ",children:"Total Art 10 Bis"}),e.jsxs("p",{className:"card-text fs-3",children:["    ",e.jsx("i",{className:"bi bi-clipboard-data mx-3",style:{fontSize:"1.5rem",color:"#007bff"}})," ",t.totalDocumentos," Total "]})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2 ",children:"Promedio Salida"}),e.jsx("i",{className:"bi bi-clock mx-3",style:{fontSize:"1.5rem",color:"#007bff"}}),e.jsxs("span",{className:"card-text fs-3",children:[t.promedioTiempo!==null?t.promedioTiempo:"N/A"," Horas"]})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:"Comisarías"}),e.jsx("ul",{className:"list-unstyled mb-0 text-center",children:Object.entries(t.documentosPorComisaria).map(([l,n])=>e.jsxs("li",{children:[l,": ",n]},l))}),e.jsx("hr",{}),e.jsxs("div",{className:"text-center",children:[e.jsx("strong",{children:"Total Art. por  Comisarías: "}),Object.values(t.documentosPorComisaria).reduce((l,n)=>l+n,0)]})]})})})]}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento en Personal Entrega ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Posición"}),e.jsx("th",{scope:"col",children:"Personal Entrega"}),e.jsx("th",{scope:"col",children:"Procedimientos"}),e.jsx("th",{scope:"col",children:"Distinción"})]})}),e.jsx("tbody",{children:t.personalEntrega.length>0?t.personalEntrega.map(({key:l,value:n},c)=>e.jsxs("tr",{className:c===0?"table-warning":"",children:[e.jsx("td",{children:c===0?"👑 1":c===1?"🥈 2":c===2?"🥉 3":c+1}),e.jsx("td",{children:l}),e.jsxs("td",{children:[n," Procedimientos"]}),e.jsx("td",{children:c===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):c===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):c===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Unidades ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Unidad"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinción"})]})}),e.jsx("tbody",{children:t.unidades.length>0?t.unidades.map(({unidad:l,cantidad:n},c)=>e.jsxs("tr",{className:c===0?"table-warning":"",children:[e.jsxs("td",{children:[c===0?"👑 1":c===1?"🥈 2":c===2?"🥉 3":c+1," ",l]}),e.jsx("td",{children:n}),e.jsx("td",{children:c===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):c===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):c===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Comisarías ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Comisaría"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinción"})]})}),e.jsx("tbody",{children:t.comisarias.length>0?t.comisarias.map(({comisaria:l,cantidad:n},c)=>e.jsxs("tr",{className:c===0?"table-warning":"",children:[e.jsxs("td",{children:[c===0?"👑 1":c===1?"🥈 2":c===2?"🥉 3":c+1," ",l]}),e.jsx("td",{children:n}),e.jsx("td",{children:c===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):c===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):c===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Salida Art Usuario ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Usuario"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinción"})]})}),e.jsx("tbody",{children:t.salidasArtUsuarioMap.length>0?t.salidasArtUsuarioMap.map(({usuario:l,cantidad:n},c)=>e.jsxs("tr",{className:c===0?"table-warning":"",children:[e.jsxs("td",{children:[c===0?"👑 1":c===1?"🥈 2":c===2?"🥉 3":c+1," ",l]}),e.jsx("td",{children:n}),e.jsx("td",{children:c===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):c===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):c===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})})]})};es.register(is,rs,ls,ns,ss,as,ts);const qs=({personas:s,visible:r,setVisible:t})=>{const o=a.useMemo(()=>{const l={};s.forEach(p=>{var u,g;const b=(g=(u=p.fecha_ingreso_validado)==null?void 0:u.toDate)==null?void 0:g.call(u);if(b){const j=b.getDate().toString().padStart(2,"0"),x=(b.getMonth()+1).toString().padStart(2,"0"),d=b.getFullYear(),h=`${j}-${x}-${d}`;l[h]=(l[h]||0)+1}});const n=Object.keys(l).sort(),c=n.map(p=>l[p]);return{labels:n,datasets:[{label:"Ingresos por día",data:c,fill:!1,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgb(75, 192, 192)",tension:.2}]}},[s]),i={responsive:!0,plugins:{legend:{position:"top"},title:{display:!1},datalabels:{anchor:"end",align:"top",color:"#000",font:{weight:"bold"},formatter:l=>l}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto m",onClick:()=>t(!r)})}),e.jsx("div",{className:"card shadow-sm  mt-1",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center",children:"📆 Ingresos en el tiempo"}),e.jsx(Ge,{data:o,options:i})]})})]})},Gs=({personas:s,seleccionadas:r=[],visible:t,setVisible:o})=>{const i=a.useMemo(()=>{const l=s.length,n=r.length,c={},p={};return s.forEach(b=>{const u=b.unidad||"Sin unidad",g=b.comisaria||"Sin comisaría";c[u]=(c[u]||0)+1,p[g]=(p[g]||0)+1}),{total:l,totalSeleccionadas:n,porUnidad:c,porComisaria:p}},[s,r]);return e.jsx("div",{className:"mb-4",children:t&&e.jsxs("div",{className:"text-center p-2 bg-transparent bg-opacity-50 rounded-4 shadow-lg ",children:[e.jsx("div",{className:"d-flex justify-content-end my-2 ",children:e.jsx("button",{type:"button",className:"btn-close btn-close-white ms-auto mb-2",onClick:()=>o(!t)})}),e.jsxs("div",{className:"row row-cols-1 row-cols-md-4 g-3 ",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100 bg-dark bg-opacity-50 text-light ",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3 bg-light",style:{width:"60px",height:"60px"},children:e.jsx("i",{className:"bi bi-people fs-3 text-dark"})}),e.jsx("h6",{className:"card-title mb-1",children:"Total registros"}),e.jsx("span",{className:"badge bg-primary fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.total})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#0d6efd",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100 bg-dark bg-opacity-50 text-light ",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center text-ligh",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3 bg-light",style:{width:"60px",height:"60px"},children:e.jsx("i",{className:"bi bi-check-circle fs-3 text-secondaryM"})}),e.jsx("h6",{className:"card-title mb-1",children:"Seleccionados"}),e.jsx("span",{className:"badge bg-secondaryM fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.totalSeleccionadas})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#03dac6",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card border-0 shadow-sm h-100 bg-dark bg-opacity-50 text-light ",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-car-front  me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Unidades"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porUnidad).map(([l,n])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsx("span",{cl:!0,children:l}),e.jsx("span",{className:"badge bg-indigo mb-2",children:n})]},l))})]})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card border-0 shadow-sm h-100 bg-dark bg-opacity-50 text-light ",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-shield-lock me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Comisarías"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porComisaria).map(([l,n])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:l}),e.jsx("span",{className:"badge bg-blue mb-2",children:n})]},l))})]})})})]})]})})},Hs=({searchTerm:s,setSearchTerm:r,orden:t,setOrden:o,prioridadFilter:i,setPrioridadFilter:l,comisariaFilter:n,setComisariaFilter:c,fechaInicio:p,setFechaInicio:b,fechaFin:u,setFechaFin:g,personas:j=[],visible:x,setVisible:d})=>{const h=[...new Set(j.map(v=>v.unidad))],m=[...new Set(j.map(v=>v.comisaria))],f=s||t!=="asc"||i||n||p||u,C=()=>{r(""),o("asc"),l(""),c(""),b(""),g("")};return x&&e.jsxs("div",{className:"text-center p-2 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("div",{className:"d-flex justify-content-end mt-2",children:e.jsx("button",{type:"button",className:"btn-close btn-close-white  ms-auto",onClick:()=>d(!x)})}),e.jsxs("div",{className:"card shadow-sm border-0 my-2 text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("div",{className:"card-header text-center bg-light bg-opacity-50 rounded-4 shadow-lg text-white p-1 rounded-2 mx-3 my-2",children:e.jsxs("h5",{children:[e.jsx("i",{className:"bi bi-funnel-fill me-2"}),"Filtros"]})}),e.jsxs("div",{className:"card-body px-4",children:[e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsxs("div",{className:"col-12 col-md-3 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Buscar por Nombre"}),e.jsx("input",{type:"text",className:"form-control",value:s,onChange:v=>r(v.target.value),placeholder:"Ej: Juan Pérez"})]}),e.jsxs("div",{className:"col-12 col-md-2 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Orden"}),e.jsxs("select",{className:"form-select",value:t,onChange:v=>o(v.target.value),children:[e.jsx("option",{value:"asc",children:"Ascendente (A-Z)"}),e.jsx("option",{value:"desc",children:"Descendente (Z-A)"})]})]}),e.jsxs("div",{className:"col-12 col-md-3 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Unidad"}),e.jsxs("select",{className:"form-select",value:i,onChange:v=>l(v.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),h.map(v=>e.jsx("option",{value:v,children:v},v))]})]}),e.jsxs("div",{className:"col-12 col-md-3 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Comisaría"}),e.jsxs("select",{className:"form-select",value:n,onChange:v=>c(v.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),m.map(v=>e.jsx("option",{value:v,children:v},v))]})]}),e.jsxs("div",{className:"col-12 col-md-6 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Rango de fechas (Ingreso)"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"date",className:"form-control",value:p,onChange:v=>b(v.target.value)}),e.jsx("span",{className:"input-group-text",children:"a"}),e.jsx("input",{type:"date",className:"form-control",value:u,onChange:v=>g(v.target.value)})]})]})]}),f&&e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{className:"btn btn-danger text-white rounded-circle d-flex align-items-center justify-content-center",style:{width:"45px",height:"45px",boxShadow:"0 0.5rem 1rem rgba(0,0,0,0.15)"},onClick:C,title:"Restaurar filtros",children:e.jsx("i",{className:"bi bi-trash"})})})]})]})," "]})},Ws=({columnasVisibles:s,setColumnasVisibles:r,visible:t,setVisible:o})=>t&&e.jsxs("div",{className:"text-center p-2 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("div",{className:"d-flex justify-content-end mt-2",children:e.jsx("button",{type:"button",className:"btn-close btn-close-white  ms-auto",onClick:()=>o(!t)})}),e.jsx("div",{className:"card shadow-sm border-0 my-2 text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:e.jsxs("div",{className:"card-body text-light",children:[e.jsxs("h5",{className:"card-title mb-3 text-center bg-primary text-white p-1 rounded-2 bg-light bg-opacity-50 rounded-4 shadow-lg text-white p-2",children:[e.jsx("i",{className:"bi bi-sliders me-2"}),"Mostrar / Ocultar columnas"]}),e.jsx("div",{className:"row",children:Object.entries(s).map(([i,l])=>e.jsx("div",{className:"col-6 col-md-4 mb-2",children:e.jsxs("div",{className:"form-check form-switch ",children:[e.jsx("input",{className:"form-check-input bg-light bg-opacity-50",type:"checkbox",id:`columna-${i}`,checked:l,onChange:()=>r(n=>({...n,[i]:!n[i]}))}),e.jsx("label",{className:"form-check-label",htmlFor:`columna-${i}`,children:i==="usuarioSalida"?"Usuario salida":i.charAt(0).toUpperCase()+i.slice(1)})]})},i))})]})})]}),Js=({filteredPersonas:s,selectedDocs:r,toggleSelectAll:t,toggleSelectDoc:o,columnasVisibles:i})=>{const[l,n]=a.useState(!0);return e.jsx(e.Fragment,{children:s.length===0?e.jsx("div",{className:"alert alert-light text-danger shadow text-center titilar mt-3",children:"Sin registro encontrado."}):e.jsx("div",{className:"table-responsive-sm d-none d-sm-block my-4",children:e.jsxs("div",{className:"card text-center p-2 bg-transparent bg-opacity-50 rounded-4 shadow-lg  ",children:[e.jsxs("div",{className:"card-header bg-dark bg-opacity-50  text-white px-3 p-1 d-flex justify-content-between align-items-center rounded-2 mx-2 my-2",children:[e.jsx("div",{style:{width:"32px"}}),e.jsxs("h5",{className:"mb-0 text-center flex-grow-1",children:[e.jsx("i",{className:"bi bi-view-list me-2"}),"Tabla"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>n(!l),children:[e.jsx("i",{className:`bi ${l?"bi-arrows-collapse":"bi-arrows-expand"} me-1`}),l?"Contraer":"Expandir"]})]}),l&&e.jsx("div",{className:"px-3 pb-3",children:e.jsxs("table",{className:"table table-striped table-hover text-center small mb-0 table-info",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:r.length===s.length,onChange:t})}),e.jsx("th",{children:"Nombre"}),i.unidad&&e.jsx("th",{children:"Unidad"}),i.dni&&e.jsx("th",{children:"Documento"}),i.comisaria&&e.jsx("th",{children:"Comisaría"}),i.ingreso&&e.jsx("th",{children:"F Ingreso"}),i.salida&&e.jsx("th",{children:"F Salida"}),i.usuarioSalida&&e.jsx("th",{children:"Salida"})]})}),e.jsx("tbody",{children:s.map(c=>{var p,b,u;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:r.includes(c.id),onChange:()=>o(c.id)})}),e.jsx("td",{className:"text-center",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("div",{className:"rounded-circle bg-primary text-white d-flex justify-content-center align-items-center",style:{width:"30px",height:"30px",fontSize:"0.9rem"},children:((p=c.unidad)==null?void 0:p.charAt(0).toUpperCase())||"?"}),e.jsx("span",{role:"button",onClick:()=>{var f,C,v;const g=((f=c.personal_entrega)==null?void 0:f.map(S=>`${S.nombre} (NI: ${S.ni})
🏢 Unidad: ${c.unidad||"No informada"}`).join(`

`))||"Sin datos",j=((C=c.fecha_ingreso_validado)==null?void 0:C.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"}))||"Sin fecha",x=((v=c.salida_art)==null?void 0:v.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"}))||"Sin fecha",d=c.usuario_validado_ingreso||"Desconocido",h=c.comisaria||"No informada",m=c.salida_art_usuario||"No informada";alert(`👤 Personal que entregó:
${g}

🏢 Comisaría: ${h}
📅 Fecha validación: ${j}
👮 Usuario que validó: ${d}
📅 Fecha salida: ${x}
👮 Usuario que validó salida: ${m}`)},className:"text-decoration-none",children:c.nombre_apellido})]})}),i.unidad&&e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:c.unidad})}),i.dni&&e.jsx("td",{children:c.dni}),i.comisaria&&e.jsx("td",{children:e.jsxs("div",{className:"d-flex flex-column align-items-center gap-1",children:[e.jsx("span",{className:"badge bg-pink",children:c.comisaria}),c.comisaria_recibe===!1&&e.jsx("span",{className:"badge bg-secondaryM titilar",children:"Pendiente Validar"})]})}),i.ingreso&&e.jsx("td",{children:(b=c.fecha_ingreso_validado)==null?void 0:b.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"medium",timeZone:"America/Argentina/Buenos_Aires"})}),i.salida&&e.jsx("td",{children:(u=c.salida_art)==null?void 0:u.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"medium",timeZone:"America/Argentina/Buenos_Aires"})}),i.usuarioSalida&&e.jsx("td",{children:e.jsx("span",{className:"badge bg-teal",children:c.salida_art_usuario})})]},c.id)})})]})})]})})})},di=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState(!0),[p,b]=a.useState(""),[u,g]=a.useState(""),[j,x]=a.useState("asc"),[d,h]=a.useState(""),[m,f]=a.useState(""),[C,v]=a.useState(""),[S,_]=a.useState(!1),[N,y]=a.useState(!1),[w,E]=a.useState(!1),[k,F]=a.useState(!1),A=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotales"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"tabla",componente:"TablaDatos"}],[L,U]=a.useState(A),[Y,q]=a.useState(null),[W,le]=a.useState({unidad:!0,dni:!0,comisaria:!0,ingreso:!1,salida:!1,usuarioSalida:!1}),me=H(P,"db_art_diez_bis_desactivados"),de=async()=>{c(!0);try{const M=(await K(me)).docs.map(G=>({...G.data(),id:G.id}));r(M),o(M)}catch($){console.error("Error al obtener personas: ",$)}finally{c(!1)}},ae=$=>$.sort((M,G)=>j==="asc"?M.nombre_apellido.localeCompare(G.nombre_apellido):G.nombre_apellido.localeCompare(M.nombre_apellido)),B=$=>{q($)},te=$=>{$.preventDefault()},ie=$=>{const M=[...L],G=M.findIndex(D=>D.id===Y),z=M.findIndex(D=>D.id===$),[V]=M.splice(G,1);M.splice(z,0,V),U(M)};a.useEffect(()=>{de()},[]),a.useEffect(()=>{const $=s.filter(M=>M.nombre_apellido&&M.nombre_apellido.toLowerCase().includes(p.toLowerCase())).filter(M=>u?M.unidad===u:!0).filter(M=>d?M.comisaria===d:!0).filter(M=>{var D;if(!m&&!C)return!0;const G=(D=M.fecha_ingreso_validado)==null?void 0:D.toDate();if(!G)return!1;const z=m?new Date(m):null,V=C?new Date(C):null;return!(z&&G<z||V&&G>V)});o(ae($))},[p,u,d,m,C,j,s]);const ne=$=>{l(M=>M.includes($)?M.filter(G=>G!==$):[...M,$])},oe=()=>{if(i.length===t.length)l([]);else{const $=t.map(M=>M.id);l($)}},he=()=>{const $=s.filter(V=>i.includes(V.id));if($.length===0){alert("No hay personas seleccionadas para exportar.");return}const M=$.map(V=>{var D,Q;return{Nombre:V.nombre_apellido,Documento:V.dni,Unidad:V.unidad,Comisaría:V.comisaria,"Fecha Ingreso":(D=V.fecha_ingreso_validado)==null?void 0:D.toDate().toLocaleString("es-AR"),"Fecha Salida":(Q=V.salida_art)==null?void 0:Q.toDate().toLocaleString("es-AR"),"Usuario Salida":V.salida_art_usuario}}),G=be.json_to_sheet(M),z=be.book_new();be.book_append_sheet(z,G,"Seleccionados"),Le(z,"personas_seleccionadas.xlsx")};return e.jsxs("div",{className:"container my-0 my-5 my-sm-5 my-md-0 my-lg-5 text-light",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado de Art. 10 Bis Historicos"})}),e.jsxs("div",{className:"container mb-4",children:[e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${N?"btn-light":"btn-outline-light"}`,onClick:()=>y(!N),children:[e.jsx("i",{className:`bi ${N?"bi-eye-slash":"bi-eye"} me-1`}),N?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${w?"btn-light":"btn-outline-light"}`,onClick:()=>E(!w),children:[e.jsx("i",{className:`bi ${w?"bi-eye-slash":"bi-eye"} me-1`}),w?"Ocultar filtro":"Ver filtro"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${k?"btn-light":"btn-outline-light"}`,onClick:()=>F(!k),children:[e.jsx("i",{className:`bi ${k?"bi-eye-slash":"bi-eye"} me-1`}),k?"Ocultar columnas":"Ver columnas"]})})]}),e.jsxs("div",{className:"row my-3 row g-2 align-items-center justify-content-center",children:["  ",e.jsx("div",{className:"col-12 col-md-auto",children:e.jsxs("button",{className:"btn btn-green w-100  bg-dark bg-opacity-50 text-light ",onClick:he,disabled:i.length===0,children:[e.jsx("i",{className:"bi bi-file-earmark-excel me-2"}),"Exportar seleccionados a Excel"]})}),e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("button",{className:"btn btn-primary w-100  bg-light bg-opacity-75 text-dark ",onClick:()=>_(!S),children:S?"Cerrar gráfico 📉":" Gráfico Fechas 📈"})})]})]}),n?e.jsx(ee,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-sm-none",children:t.map($=>{var M,G;return e.jsx("div",{className:"card mb-3 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:$.nombre_apellido}),e.jsx("input",{type:"checkbox",checked:i.includes($.id),onChange:()=>ne($.id)})]}),W.unidad&&e.jsx("div",{children:e.jsx("span",{className:"badge bg-primary",children:$.unidad})}),W.dni&&e.jsxs("div",{children:["DNI: ",$.dni]}),W.comisaria&&e.jsxs("div",{children:["Comisaría: ",e.jsx("span",{className:"badge bg-pink",children:$.comisaria})]}),W.ingreso&&e.jsxs("div",{children:["Ingreso: ",(M=$.fecha_ingreso_validado)==null?void 0:M.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),W.salida&&e.jsxs("div",{children:["Salida: ",(G=$.salida_art)==null?void 0:G.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),W.usuarioSalida&&e.jsxs("div",{children:["Usuario salida: ",e.jsx("span",{className:"badge bg-teal",children:$.salida_art_usuario})]})]})},$.id)})}),L.map(({id:$,componente:M})=>e.jsxs("div",{draggable:!0,onDragStart:()=>B($),onDragOver:te,onDrop:()=>ie($),className:"my-3 ",children:[M==="ColumnasVisiblesPanel"&&e.jsx(Ws,{columnasVisibles:W,setColumnasVisibles:le,visible:k,setVisible:F}),M==="ResumenTotales"&&e.jsx(Gs,{personas:t,seleccionadas:i,visible:N,setVisible:y}),M==="FiltrosPanel"&&e.jsx(Hs,{searchTerm:p,setSearchTerm:b,orden:j,setOrden:x,prioridadFilter:u,setPrioridadFilter:g,comisariaFilter:d,setComisariaFilter:h,fechaInicio:m,setFechaInicio:f,fechaFin:C,setFechaFin:v,personas:s,visible:w,setVisible:E}),M==="GraficoPorFechaIngreso"&&S&&e.jsx(qs,{personas:t,visible:S,setVisible:_}),M==="TablaDatos"&&e.jsx(Js,{filteredPersonas:t,selectedDocs:i,toggleSelectAll:oe,toggleSelectDoc:ne,columnasVisibles:W})]},$))]})]})},mi=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState(!0),[p,b]=a.useState(""),[u,g]=a.useState(""),[j,x]=a.useState("asc"),[d,h]=a.useState(""),[m,f]=a.useState(""),[C,v]=a.useState(""),[S,_]=a.useState(!1),[N,y]=a.useState(!1),[w,E]=a.useState(!1),[k,F]=a.useState(!1),A=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotales"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"tabla",componente:"TablaDatos"}],[L,U]=a.useState(A),[Y,q]=a.useState(null),[W,le]=a.useState({unidad:!0,dni:!0,comisaria:!0,ingreso:!1,salida:!1,usuarioSalida:!1}),me=H(P,"db_art_diez_bis"),de=async()=>{c(!0);try{const M=(await K(me)).docs.map(G=>({...G.data(),id:G.id}));r(M),o(M)}catch($){console.error("Error al obtener personas: ",$)}finally{c(!1)}},ae=$=>$.sort((M,G)=>j==="asc"?M.nombre_apellido.localeCompare(G.nombre_apellido):G.nombre_apellido.localeCompare(M.nombre_apellido)),B=$=>{q($)},te=$=>{$.preventDefault()},ie=$=>{const M=[...L],G=M.findIndex(D=>D.id===Y),z=M.findIndex(D=>D.id===$),[V]=M.splice(G,1);M.splice(z,0,V),U(M)};a.useEffect(()=>{de()},[]),a.useEffect(()=>{const $=s.filter(M=>M.nombre_apellido&&M.nombre_apellido.toLowerCase().includes(p.toLowerCase())).filter(M=>u?M.unidad===u:!0).filter(M=>d?M.comisaria===d:!0).filter(M=>{var D;if(!m&&!C)return!0;const G=(D=M.fecha_ingreso_validado)==null?void 0:D.toDate();if(!G)return!1;const z=m?new Date(m):null,V=C?new Date(C):null;return!(z&&G<z||V&&G>V)});o(ae($))},[p,u,d,m,C,j,s]);const ne=$=>{l(M=>M.includes($)?M.filter(G=>G!==$):[...M,$])},oe=()=>{if(i.length===t.length)l([]);else{const $=t.map(M=>M.id);l($)}},he=()=>{const $=s.filter(V=>i.includes(V.id));if($.length===0){alert("No hay personas seleccionadas para exportar.");return}const M=$.map(V=>{var D,Q;return{Nombre:V.nombre_apellido,Documento:V.dni,Unidad:V.unidad,Comisaría:V.comisaria,"Fecha Ingreso":(D=V.fecha_ingreso_validado)==null?void 0:D.toDate().toLocaleString("es-AR"),"Fecha Salida":(Q=V.salida_art)==null?void 0:Q.toDate().toLocaleString("es-AR"),"Usuario Salida":V.salida_art_usuario}}),G=be.json_to_sheet(M),z=be.book_new();be.book_append_sheet(z,G,"Seleccionados"),Le(z,"personas_seleccionadas.xlsx")};return e.jsxs("div",{className:"container-lg my-5 my-sm-5 my-md-0 my-lg-5 text-light",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado de Art. 10 Bis Activos"})}),e.jsxs("div",{className:"container mb-4",children:[e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${N?"btn-light":"btn-outline-light"}`,onClick:()=>y(!N),children:[e.jsx("i",{className:`bi ${N?"bi-eye-slash":"bi-eye"} me-1`}),N?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${w?"btn-light":"btn-outline-light"}`,onClick:()=>E(!w),children:[e.jsx("i",{className:`bi ${w?"bi-eye-slash":"bi-eye"} me-1`}),w?"Ocultar filtro":"Ver filtro"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${k?"btn-light":"btn-outline-light"}`,onClick:()=>F(!k),children:[e.jsx("i",{className:`bi ${k?"bi-eye-slash":"bi-eye"} me-1`}),k?"Ocultar columnas":"Ver columnas"]})})]}),e.jsxs("div",{className:"row my-3 row g-2 align-items-center justify-content-center",children:["  ",e.jsx("div",{className:"col-12 col-md-auto",children:e.jsxs("button",{className:"btn btn-green w-100",onClick:he,disabled:i.length===0,children:[e.jsx("i",{className:"bi bi-file-earmark-excel me-2"}),"Exportar seleccionados a Excel"]})}),e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("button",{className:"btn btn-primary w-100",onClick:()=>_(!S),children:S?"Cerrar gráfico 📉":" Gráfico Fechas 📈"})})]})]}),n?e.jsx(ee,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-info mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-sm-none",children:t.map($=>{var M,G;return e.jsx("div",{className:"card mb-3 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:$.nombre_apellido}),e.jsx("input",{type:"checkbox",checked:i.includes($.id),onChange:()=>ne($.id)})]}),W.unidad&&e.jsx("div",{children:e.jsx("span",{className:"badge bg-primary",children:$.unidad})}),W.dni&&e.jsxs("div",{children:["DNI: ",$.dni]}),W.comisaria&&e.jsxs("div",{children:["Comisaría: ",e.jsx("span",{className:"badge bg-pink",children:$.comisaria})]}),W.ingreso&&e.jsxs("div",{children:["Ingreso: ",(M=$.fecha_ingreso_validado)==null?void 0:M.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),W.salida&&e.jsxs("div",{children:["Salida: ",(G=$.salida_art)==null?void 0:G.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),W.usuarioSalida&&e.jsxs("div",{children:["Usuario salida: ",e.jsx("span",{className:"badge bg-teal",children:$.salida_art_usuario})]})]})},$.id)})}),L.map(({id:$,componente:M})=>e.jsxs("div",{draggable:!0,onDragStart:()=>B($),onDragOver:te,onDrop:()=>ie($),className:"my-3 ",children:[M==="ColumnasVisiblesPanel"&&e.jsx(Ws,{columnasVisibles:W,setColumnasVisibles:le,visible:k,setVisible:F}),M==="ResumenTotales"&&e.jsx(Gs,{personas:t,seleccionadas:i,visible:N,setVisible:y}),M==="FiltrosPanel"&&e.jsx(Hs,{searchTerm:p,setSearchTerm:b,orden:j,setOrden:x,prioridadFilter:u,setPrioridadFilter:g,comisariaFilter:d,setComisariaFilter:h,fechaInicio:m,setFechaInicio:f,fechaFin:C,setFechaFin:v,personas:s,visible:w,setVisible:E}),M==="GraficoPorFechaIngreso"&&S&&e.jsx(qs,{personas:t,visible:S,setVisible:_}),M==="TablaDatos"&&e.jsx(Js,{filteredPersonas:t,selectedDocs:i,toggleSelectAll:oe,toggleSelectDoc:ne,columnasVisibles:W})]},$))]})})]})},ui=()=>{const[s,r]=a.useState([]),[t,o]=a.useState(""),[i,l]=a.useState("plazas"),[n,c]=a.useState(!0),[p,b]=a.useState(!1),[u,g]=a.useState({comisariaNombre:"",comisariaNumero:"",disponibilidad:!0,plazas_art_10_bis:""}),[j,x]=a.useState({}),[d,h]=a.useState({comisariaNombre:!1,plazas_art_10_bis:!1}),m="1234",f=async()=>{c(!0);try{const A=(await K(H(P,"db_comisarias"))).docs.map(L=>({id:L.id,...L.data()}));r(A)}catch(F){console.error("Error al obtener las comisarías: ",F)}finally{c(!1)}};a.useEffect(()=>{f()},[]);const C=F=>{const{name:A,value:L,type:U,checked:Y}=F.target;if(!(A==="comisariaNombre"&&(!/^[A-Za-zÁÉÍÓÚÑáéíóúñ\s]*$/.test(L)||L.startsWith(" ")))){if(A==="comisariaNumero"){if(L===""||/^\d+$/.test(L)&&Number(L)<=40&&Number(L)>=0){g({...u,[A]:L});return}return}if(A==="plazas_art_10_bis"){const q=parseInt(L,10);L!==""&&(isNaN(q)||q<0||q>99)?h({...d,plazas_art_10_bis:!0}):h({...d,plazas_art_10_bis:!1})}g({...u,[A]:U==="checkbox"?Y:L})}},v=(F,A,L)=>{x({...j,[F]:{...j[F],[A]:A==="disponibilidad"?L==="true":L}})},S=async F=>{const{plazas_art_10_bis:A,disponibilidad:L}=j[F]||{};if(window.confirm("¿Estás seguro de que quieres guardar los cambios?"))try{const Y=O(P,"db_comisarias",F),q={};if(A!==void 0){const W=parseInt(A,10);if(isNaN(W)||W<0||W>30){alert("Por favor, ingresa un número válido de plazas entre 0 y 30.");return}q.plazas_art_10_bis=W}L!==void 0&&(q.disponibilidad=L),await re(Y,q),x(W=>{const le={...W};return delete le[F],le}),f()}catch(Y){console.error("Error al actualizar comisaría: ",Y)}},N=(()=>{const F=localStorage.getItem("user");return F?JSON.parse(F):null})(),y=async F=>{F.preventDefault();const A=u.comisariaNombre.trim(),L=u.comisariaNumero.trim(),U=parseInt(u.plazas_art_10_bis,10),Y={comisariaNombre:!A,plazas_art_10_bis:isNaN(U)||U<0||U>99};if(h(Y),Object.values(Y).some(ae=>ae)||!window.confirm("¿Estás seguro de agregar esta comisaría?"))return;if(prompt("⚠️ Para continuar, ingresá el código llave:")!==m){alert("❌ Código incorrecto. No se agrego la comisaría.");return}const le=L?`${A} ${parseInt(L,10)}`.toLowerCase():A.toLowerCase(),me=new Date,de=`${me.getDate().toString().padStart(2,"0")}/${(me.getMonth()+1).toString().padStart(2,"0")}/${me.getFullYear().toString().slice(-2)}`;try{await Ee(H(P,"db_comisarias"),{comisaria:le,plazas_art_10_bis:U,disponibilidad:u.disponibilidad,usuario:N.email,fecha:de}),g({comisariaNombre:"",comisariaNumero:"",disponibilidad:!0,plazas_art_10_bis:""}),f(),alert("Comisaría agregada con éxito.")}catch(ae){console.error("Error al agregar comisaría: ",ae)}},w=async F=>{if(!window.confirm("¿Estás seguro de que quieres eliminar esta comisaría?"))return;if(prompt("⚠️ Para continuar, ingresá el código llave:")!==m){alert("❌ Código incorrecto. No se eliminará la comisaría.");return}try{const U=O(P,"db_comisarias",F);await xe(U),f(),alert("✅ Comisaría eliminada correctamente.")}catch(U){console.error("Error al eliminar comisaría: ",U)}},k=[...s.filter(F=>F.comisaria.toLowerCase().includes(t.toLowerCase()))].sort((F,A)=>i==="plazas"?A.plazas_art_10_bis-F.plazas_art_10_bis:i==="nombre"?F.comisaria.localeCompare(A.comisaria):i==="estado"?F.disponibilidad===A.disponibilidad?0:F.disponibilidad?-1:1:0);return e.jsxs("div",{className:"container mt-0 mt-5 mt-sm-5 mt-md-0 my-lg-5 ",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Comisarias / Plazas"}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"card shadow position-relative  d-flex align-items-start gap-3  p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg text-white",style:{overflow:"visible"},children:[e.jsx("div",{className:"bg-red",children:e.jsx("img",{src:"img/tupel.gif",alt:"Asistente",className:"position-absolute rounded-circle shadow p-2",style:{width:"130px",height:"auto",objectFit:"contain",top:"-15px",left:"-10px"}})}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:"Bienvenido 👮‍♂️ "}),e.jsx("p",{className:"mb-3 text-capitalize m-0",children:"Puedes crear una nueva comisaría, administrando sus plazas disponibles y estado"}),e.jsx("div",{className:"d-flex justify-content-end align-items-center",children:e.jsxs("button",{className:`btn fw-semibold  ${p?"btn-outline-light":"btn-light"}`,onClick:()=>b(!p),children:[e.jsx("i",{className:"bi bi-shield-plus me-2"}),p?"Cancelar":"Nueva Comisaría"]})})]})]})}),p&&e.jsx("form",{onSubmit:y,className:"my-5",children:e.jsxs("div",{className:"row g-3 justify-content-center p-4 bg-light bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("div",{className:"col-12 col-md-5",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control ${d.comisariaNombre?"is-invalid":""}`,id:"comisariaNombre",name:"comisariaNombre",value:u.comisariaNombre,onChange:C}),e.jsx("label",{htmlFor:"comisariaNombre",children:"Nombre Comisaría"}),d.comisariaNombre&&e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras y espacios (no al inicio)."})]})}),e.jsx("div",{className:"col-12 col-md-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"number",className:`form-control ${d.comisariaNumero?"is-invalid":""}`,id:"comisariaNumero",name:"comisariaNumero",value:u.comisariaNumero,onChange:C}),e.jsx("label",{htmlFor:"comisariaNumero",children:"Número Comisaría"}),d.comisariaNumero&&e.jsx("div",{className:"invalid-feedback",children:"Solo números."})]})}),e.jsx("div",{className:"col-12 col-md-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"number",className:`form-control ${d.plazas_art_10_bis?"is-invalid":""}`,id:"plazas_art_10_bis",name:"plazas_art_10_bis",value:u.plazas_art_10_bis,onChange:C}),e.jsx("label",{htmlFor:"plazas_art_10_bis",children:"Plazas Art. 10 Bis"}),d.plazas_art_10_bis&&e.jsx("div",{className:"invalid-feedback",children:"Debe ingresar un número válido de plazas."})]})}),e.jsx("div",{className:"col-12 col-md-1 d-flex align-items-center justify-content-center",children:e.jsx("button",{type:"submit",className:"btn btn-primary fw-semibold rounded-circle shadow-sm",children:e.jsx("i",{className:"bi bi-plus titilar"})})})]})}),e.jsxs("h3",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg text-white mt-5",children:["Administrar Comisarías ",e.jsx("i",{className:"ms-2 bi bi-list"})]}),e.jsx("div",{className:"container my-4",children:e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 col-md-5 mb-4 mb-md-0",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-dark bg-opacity-50 text-white",children:e.jsx("i",{className:"bi bi-search text-white"})}),e.jsx("input",{type:"text",className:"form-control bg-light bg-opacity-50",placeholder:"Buscar por nombre de comisaría...",value:t,onChange:F=>o(F.target.value)})]})}),e.jsx("div",{className:"col-12 col-md-5",children:e.jsxs("div",{className:"form-floating ",children:[e.jsxs("select",{id:"sortOrder",className:"form-select ",value:i,onChange:F=>l(F.target.value),children:[e.jsx("option",{value:"plazas",children:"Plazas"}),e.jsx("option",{value:"nombre",children:"Nombre"}),e.jsx("option",{value:"estado",children:"Estado"})]}),e.jsx("label",{htmlFor:"sortOrder",children:"Ordenar por:"})]})})]})}),n?e.jsx(ee,{}):e.jsx("ul",{className:"list-group justify-content-center p-4  bg-opacity-50 rounded-4 shadow-lg",children:k.length===0?e.jsxs("li",{className:"list-group-item text-center text-muted  ",children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-danger"}),e.jsx("span",{className:"text-danger",children:" No hay comisarías registradas."})]}):k.map(({id:F,comisaria:A,plazas_art_10_bis:L,disponibilidad:U})=>{var Y,q;return e.jsxs("li",{className:"list-group-item mb-3 justify-content-center p-4 bg-light bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-3 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("div",{className:"spinner-grow spinner-grow-sm me-2 text-purple",role:"status"}),e.jsxs("span",{className:"badge Gradiante25 me-2 text-capitalize",children:[A,"°"]})]}),e.jsxs("div",{className:"col-12 col-md-3 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("span",{className:"badge bg-primaryMuiBlue me-2",children:"Plazas"}),e.jsx("input",{type:"number",value:((Y=j[F])==null?void 0:Y.plazas_art_10_bis)??L,onChange:W=>v(F,"plazas_art_10_bis",W.target.value),className:"form-control d-inline-block  bg-light bg-opacity-50",style:{maxWidth:"120px"}})]}),e.jsxs("div",{className:"col-12 col-md-4 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("span",{className:`badge ${U?"bg-teal":"bg-danger"} me-2`,children:"Estado"}),e.jsxs("select",{value:((q=j[F])==null?void 0:q.disponibilidad)??U,onChange:W=>v(F,"disponibilidad",W.target.value),className:"form-select d-inline-block  bg-light bg-opacity-50",children:[e.jsx("option",{value:!0,children:"Disponible 👍"}),e.jsx("option",{value:!1,children:"Llena ✋ "})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-start justify-content-md-end w-100 mt-2 mt-md-0",children:[j[F]&&e.jsx("button",{className:"btn btn-sm btn-primary me-2 rounded-circle",onClick:()=>S(F),children:e.jsx("i",{className:"bi bi-floppy2"})}),e.jsx("button",{className:"btn btn-sm btn-danger rounded-circle text-white",onClick:()=>w(F),children:e.jsx("i",{className:"bi bi-trash"})})]})]},F)})})]})},hi=({personas:s,seleccionadas:r=[],visible:t,setVisible:o})=>{a.useEffect(()=>{console.log("Selected IDs recibidos:",s,r)},[s,r]);const i=a.useMemo(()=>{var j,x;const l=s.length,n=r.length,c={},p={},b={};s.forEach(d=>{const h=d.unidad||"Sin unidad",m=d.comisaria||"Sin comisaría",f=d.salida_art_usuario||"Sin usuario";c[h]=(c[h]||0)+1,p[m]=(p[m]||0)+1,b[f]=(b[f]||0)+1});const u=((j=Object.entries(c).sort((d,h)=>h[1]-d[1])[0])==null?void 0:j[0])||null,g=((x=Object.entries(p).sort((d,h)=>h[1]-d[1])[0])==null?void 0:x[0])||null;return{total:l,totalSeleccionadas:n,porUnidad:c,porComisaria:p,topUnidad:u,topComisaria:g,salidaUsuarios:b}},[s,r]);return e.jsx("div",{className:"mb-4",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>o(!t)})}),e.jsxs("div",{className:"row row-cols-1 row-cols-md-4 g-3",children:[e.jsx("div",{className:"col ",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100 ",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px",backgroundColor:"rgba(13, 110, 253, 0.1)"},children:e.jsx("i",{className:"bi bi-people fs-3 text-primary"})}),e.jsx("h6",{className:"card-title text-muted mb-1",children:"Total registros"}),e.jsx("span",{className:"badge bg-primary fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.total})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#0d6efd",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:e.jsx("img",{src:"img/trophy.png",alt:"Trofeo",className:"rounded-circle shadow p-4",style:{width:"150px",height:"150px",objectFit:"contain"}})}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#03dac6",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-car-front text-primary me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Unidades"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porUnidad).map(([l,n])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:[l," ",l===i.topUnidad&&"🏆"]}),e.jsx("span",{className:"badge bg-primary mb-2",children:n})]},l))})]})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Comisarías"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porComisaria).map(([l,n])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:[l," ",l===i.topComisaria&&"🏆"]}),e.jsx("span",{className:"badge bg-secondary mb-2",children:n})]},l))})]})})})]})]})})},xi=({personas:s,visible:r,setVisible:t})=>{const o=a.useMemo(()=>{const l={},n={};return s.forEach(c=>{const p=c.salida_art_usuario;if(p){l[p]=(l[p]||0)+1;const b=c.comisaria||"Sin comisaría";n[p]||(n[p]={}),n[p][b]=(n[p][b]||0)+1}}),{conteo:l,comisariasPorUsuario:n}},[s]),i=a.useMemo(()=>{const l=Object.entries(o.conteo);return l.length===0?null:l.sort((n,c)=>c[1]-n[1])[0][0]},[o]);return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>t(!1)})}),e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-3",children:[e.jsx("i",{className:"bi bi-person-check-fill text-primary2 me-2"}),"Personal Comisaría Salida"]}),Object.keys(o.conteo).length===0?e.jsx("p",{className:"text-muted",children:"No hay registros de salida."}):e.jsx("ul",{className:"list-group list-group-flush",children:Object.entries(o.conteo).sort((l,n)=>n[1]-l[1]).map(([l,n])=>{let c="";if(l==="sistema")c="Automático DG OJO ⚠️";else{const p=o.comisariasPorUsuario[l];c=Object.entries(p).sort((b,u)=>u[1]-b[1]).map(([b,u])=>`${b} (${u})`).join(", ")}return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"fw-semibold",children:[l===i&&"🏆","  ",l]}),e.jsxs("div",{className:"text-muted small",children:["🏢 ",c]})]}),e.jsx("span",{className:"badge bg-primary2 rounded-pill",children:n})]},l)})})]})})]}):null},bi=({visible:s,setVisible:r})=>{const[t,o]=a.useState([]);a.useEffect(()=>{(async()=>{const p=(await K(H(P,"db_art_diez_bis_desactivados"))).docs.map(b=>b.data());o(p)})()},[]);const i=a.useMemo(()=>{const n={};return t.forEach(c=>{Array.isArray(c.personal_entrega)&&c.personal_entrega.forEach(p=>{var j;const b=p.ni,u=((j=p.nombre)==null?void 0:j.split(" ")[0])||p.nombre,g=c.comisaria;n[b]||(n[b]={nombre:u,count:0,comisarias:{}}),n[b].count+=1,g&&(n[b].comisarias[g]=(n[b].comisarias[g]||0)+1)})}),n},[t]);if(!s)return null;const l=Object.entries(i).sort((n,c)=>c[1].count-n[1].count);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>r(!1)})}),e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-3",children:[e.jsx("i",{className:"bi bi-award-fill text-primaryMuiBlue me-2"}),"Personal Entregas Destacadas"]}),l.length===0?e.jsx("p",{className:"text-muted",children:"No hay registros de entrega."}):e.jsx("ul",{className:"list-group list-group-flush",children:l.map(([n,c],p)=>{const{nombre:b,count:u,comisarias:g}=c,j=t.find(m=>(m.personal_entrega||[]).some(f=>`${f.ni}`===n)),x=(j==null?void 0:j.unidad)||"OTROS";let d="",h="bg-primaryMuiBlue";return p===0?(d="👑",h="bg-yellowMui"):p===1?(d="🥈",h="bg-yellowMui"):p===2&&(d="🥉",h="bg-yellowMui"),e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"fw-semibold",children:[d," ",b," - ",n]}),e.jsxs("div",{className:"text-muted small",children:[x.toUpperCase().includes("MOTORIZADA")?"🏍️":"🚓"," ",x]})]}),e.jsxs("div",{className:"text-end",children:[e.jsx("span",{className:`badge ${h} rounded-pill`,children:u}),e.jsxs("div",{className:"mt-2 text-muted small text-start",children:[e.jsx("strong",{children:"📍 Comisarías:"}),e.jsx("ul",{className:"mb-0 ps-3",children:Object.entries(g).map(([m,f])=>e.jsxs("li",{children:[m,": ",f," ",f===1?"vez":"veces"]},m))})]})]})]},`${n}-${p}`)})})]})})]})},pi=({personas:s})=>{const[r,t]=a.useState(null);return a.useEffect(()=>{let o=0,i=0;if(s.forEach(l=>{var p,b;const n=(p=l.fecha_ingreso_validado)==null?void 0:p.toDate(),c=(b=l.salida_art)==null?void 0:b.toDate();if(n&&c&&!isNaN(n)&&!isNaN(c)){const u=c-n;u>=0&&(o+=u,i++)}}),i>0){const l=o/i,n=Math.floor(l/(1e3*60*60)),c=Math.floor(l%(1e3*60*60)/(1e3*60)),p=Math.floor(l%(1e3*60)/1e3);t({horas:n,minutos:c,segundos:p})}else t(null)},[s]),e.jsx("div",{className:"card shadow my-5 border-0 p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg text-white",children:e.jsxs("div",{className:"card-body  ",children:[e.jsx("h5",{className:"card-title rounded-3",children:"⏱️ Tiempo Promedio entre Ingreso y Salida"}),r?e.jsx("div",{className:" d-flex justify-content-end align-items-end",children:e.jsxs("p",{className:"mb-0 fs-5 me-3 ",children:[e.jsxs("strong",{children:[r.horas,"h ",r.minutos,"m ",r.segundos,"s"]})," ",e.jsx("span",{className:"titilar",children:" ⏳ "})]})}):e.jsx("p",{className:"text-muted mb-0 ",children:"No hay datos válidos para calcular."})]})})},gi=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState(!0),[p,b]=a.useState(""),[u,g]=a.useState(""),[j,x]=a.useState("asc"),[d,h]=a.useState(""),[m,f]=a.useState(""),[C,v]=a.useState(""),[S,_]=a.useState(!1),[N,y]=a.useState(!1),[w,E]=a.useState(!1),k=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotalesRendimiento"},{id:"personalEntregaCard",componente:"PersonalEntregaCard"},{id:"personalSalidaCard",componente:"PersonalSalidaCard"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"card",componente:"CardInfo"},{id:"cardComisaria",componente:"ComisariaCardInfo"},{id:"tablaRendimiento",componente:"TablaDatosRendimiento"}],[F,A]=a.useState(k),[L,U]=a.useState(null);console.log(F);const Y=H(P,"db_art_diez_bis_desactivados"),q=async()=>{c(!0);try{const B=(await K(Y)).docs.map(te=>({...te.data(),id:te.id}));r(B),o(B)}catch(ae){console.error("Error al obtener personas: ",ae)}finally{c(!1)}},W=ae=>ae.sort((B,te)=>j==="asc"?B.nombre_apellido.localeCompare(te.nombre_apellido):te.nombre_apellido.localeCompare(B.nombre_apellido)),le=ae=>{U(ae)},me=ae=>{ae.preventDefault()},de=ae=>{const B=[...F],te=B.findIndex(oe=>oe.id===L),ie=B.findIndex(oe=>oe.id===ae),[ne]=B.splice(te,1);B.splice(ie,0,ne),A(B)};return a.useEffect(()=>{q()},[]),a.useEffect(()=>{const ae=s.filter(B=>B.nombre_apellido&&B.nombre_apellido.toLowerCase().includes(p.toLowerCase())).filter(B=>u?B.unidad===u:!0).filter(B=>d?B.comisaria===d:!0).filter(B=>{var oe;if(!m&&!C)return!0;const te=(oe=B.fecha_ingreso_validado)==null?void 0:oe.toDate();if(!te)return!1;const ie=m?new Date(m):null,ne=C?new Date(C):null;return!(ie&&te<ie||ne&&te>ne)});o(W(ae))},[p,u,d,m,C,j,s]),e.jsxs("div",{className:"  my-sm-5 my-md-5 my-lg-5 my-5 text-light ",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center  animate__animated animate__bounce mt-sm-0 ",children:"Rendimiento Art. 10 Bis"})}),e.jsx("div",{className:"container my-4",children:e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${S?"btn-light":"btn-outline-light"}`,onClick:()=>_(!S),children:[e.jsx("i",{className:`bi ${S?"bi-eye-slash":"bi-eye"} me-1`}),S?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${N?"btn-light":"btn-outline-light"}`,onClick:()=>y(!N),children:[e.jsx("i",{className:`bi ${N?"bi-eye-slash":"bi-eye"} me-1`}),N?"Ocultar Persdonal Salida":"Ver Personal Salida"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${w?"btn-light":"btn-outline-light"}`,onClick:()=>E(!w),children:[e.jsx("i",{className:`bi ${w?"bi-eye-slash":"bi-eye"} me-1`}),w?"Ocultar Personal Entrada":"Ver Personal Entrada"]})})]})}),e.jsx(pi,{personas:s,visible:w,setVisible:E}),n?e.jsx(ee,{}):e.jsx(e.Fragment,{children:F.map(({id:ae,componente:B})=>e.jsxs("div",{draggable:!0,onDragStart:()=>le(ae),onDragOver:me,onDrop:()=>de(ae),className:"my-3 ",children:[B==="ResumenTotalesRendimiento"&&e.jsx(hi,{personas:t,seleccionadas:i,visible:S,setVisible:_}),B==="PersonalEntregaCard"&&e.jsx(bi,{personas:s,visible:w,setVisible:E}),B==="PersonalSalidaCard"&&e.jsx(xi,{personas:s,visible:N,setVisible:y})]},ae))})]})},ji="/gif/dash3.gif",fi=()=>e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center text-white",style:{minHeight:"55vh"},children:[e.jsx("h5",{className:" fs-1 mb-5 text-greenW ",children:"Bienvenido al Panel 10 Bis !!!"}),e.jsxs("div",{className:"row justify-content-center my-4  ",children:[e.jsxs("div",{className:"col-md-6 d-flex flex-column justify-content-center align-items-center mb-4 mb-md-0",children:[e.jsxs("p",{className:"p-2 text-center",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-greenOn text-indigo"}),"Aquí podrás administrar los recursos del sistema de forma fácil y sencilla."]}),e.jsxs("p",{className:"p-2 text-center",children:[e.jsx("i",{className:"bi bi-lightbulb p-3 rounded-circle me-3 bg-greenOn text-indigo"}),"Recuerda que, ante cualquier problema, puedes solicitar asistencia técnica."]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:ji,alt:"Descripción de la imagen",className:"img-fluid p-2 rounded-circle shadow ",style:{maxWidth:"300px",height:"auto"}})})]})]}),Ni=()=>{const[s,r]=a.useState("dashboard"),[t,o]=a.useState(!1),i=()=>{switch(s){case"dashboard":return e.jsx(fi,{});case"administar":return e.jsx(si,{});case"exportacion":return e.jsx(ai,{});case"graficos":return e.jsx(oi,{});case"comisarias2":return e.jsx(ui,{});case"rendimiento":return e.jsx(ci,{});case"rendimientoApp":return e.jsx(gi,{});case"desactivados":return e.jsx(di,{});case"activados":return e.jsx(mi,{});default:return e.jsx("p",{children:"Selecciona una opción del menú."})}};return e.jsx("div",{className:"container-lg",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-3 ",children:[e.jsx("div",{className:"text-center mb-4 text-light",children:e.jsxs("span",{className:"bg-dark bg-opacity-25 p-2 px-5 fs-6 rounded-5 text-white",children:[" ",e.jsx("i",{className:"mx-2 bi bi-menu-button-fill"}),"Menú Panel"]})}),e.jsxs("div",{className:"list-group p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenidos"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="exportacion"?"active":""}`,onClick:()=>r("exportacion"),children:"Exportación"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action${s==="graficos"?"active":""}`,onClick:()=>r("graficos"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Graficos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-teal rounded-pill",children:"Nuevo"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="rendimientoApp"?"active":""}`,onClick:()=>r("rendimientoApp"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Rendimiento Art.10 Bis",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"",children:" 🏆 "})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="comisarias2"?"active":""}`,onClick:()=>r("comisarias2"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Comisarias",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-primaryMuiBlue rounded-pill",children:"Administar"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="activados"?"active":""}`,onClick:()=>r("activados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Art 10 Bis Activos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-secondaryM rounded-pill",children:"Panel"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="desactivados"?"active":""}`,onClick:()=>r("desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Art 10 Bis Historicos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-secondaryM rounded-pill",children:"Panel"})]})})]})]}),e.jsx("div",{className:"col-12 col-md-8 col-lg-9",children:i()})]})})},vi=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Panel de Control"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Panel de Control 10 Bis",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(Ni,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},yi=()=>e.jsx(e.Fragment,{children:e.jsx(vi,{})}),wi={nombre:"Santa Fe Tema",valor:"linear-gradient(135deg, #ec4899, #8b5cf6)",tipo:"gradiente"},Ci=[{nombre:"🎨 Santa Fe Theme",valor:"linear-gradient(135deg, #ec4899, #8b5cf6)"},{nombre:"💗 Rosa Chicle",valor:"#f73378"},{nombre:"🌞 Amarillo Sol",valor:"#ffef62"},{nombre:"💦 Celeste Aqua",valor:"#16B1FF"},{nombre:"🔮 Violeta Mágico",valor:"#8C57FF"},{nombre:"🍊 Naranja Fuego",valor:"#ff8f00"},{nombre:"🍇 Púrpura Uva",valor:"#7e57c2"},{nombre:"💙 Azul Profundo",valor:"#3c3ae5"},{nombre:"⚡ Azul Eléctrico",valor:"#0d6efd"},{nombre:"🌿 Verde Menta",valor:"#03dac6"},{nombre:"🍵 Verde Té",valor:"#20c997"},{nombre:"🧪 Verde Neón",valor:"#05F2D4"},{nombre:"🚨 Rojo Alerta",valor:"#f50057"},{nombre:"🪨 Gris Urbano",valor:"#757575"},{nombre:"🌫️ Gris Niebla",valor:"#f9f9f983"},{nombre:"🌌 Negro Noche",valor:"#212121"}],Zs=({setThemeBackgroundColor:s})=>{const[r,t]=a.useState(!1),[o,i]=a.useState(()=>localStorage.getItem("theme")==="dark"),[l,n]=a.useState(()=>localStorage.getItem("bgColor")||wi.valor),c=b=>{t(!0),i(b==="dark"),localStorage.setItem("theme",b),setTimeout(()=>t(!1),500)},p=b=>{n(b),s(b),localStorage.setItem("bgColor",b)};return a.useEffect(()=>{const b=o?"dark":"light";document.body.setAttribute("data-bs-theme",b)},[o]),a.useEffect(()=>{s(l)},[l,s]),e.jsxs("div",{children:[r&&e.jsx(ee,{}),e.jsxs("div",{className:"dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle",children:[e.jsxs("button",{className:"btn btn-greenUi py-2 dropdown-toggle d-flex align-items-center rounded-4",id:"bd-theme",type:"button","aria-expanded":"false","data-bs-toggle":"dropdown","aria-label":"Toggle theme",children:[e.jsx("i",{className:o?"bi bi-moon-stars-fill":"bi bi-brightness-high-fill"}),e.jsx("span",{className:"visually-hidden",id:"bd-theme-text",children:"Toggle theme"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end shadow","aria-labelledby":"bd-theme-text",children:[e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${o?"":"active"}`,onClick:()=>c("light"),children:[e.jsx("i",{className:"bi bi-brightness-high-fill me-2 opacity-50"}),"Modo Luz"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${o?"active":""}`,onClick:()=>c("dark"),children:[e.jsx("i",{className:"bi bi-moon-stars-fill me-2 opacity-50"}),"Modo Nocturno"]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("li",{className:"px-3",children:e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Ci.map(({nombre:b,valor:u})=>e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>p(u),className:"rounded-circle border-0",style:{background:u,width:"24px",height:"24px",outline:u===l?"2px solid white":"none",cursor:"pointer"},title:b,"aria-label":b})},b))})})]})]})]})},Si=()=>{const[s,r]=a.useState(0);return a.useEffect(()=>{const t=[],o=()=>{r(0),t.push(setTimeout(()=>r(1),0)),t.push(setTimeout(()=>r(2),3e3)),t.push(setTimeout(()=>r(3),6e3))};o();const i=setInterval(()=>{o()},9e3);return()=>{t.forEach(clearTimeout),clearInterval(i)}},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:" text-white px-3",children:e.jsx("div",{className:"container d-flex justify-content-center align-items-center  ",children:e.jsxs("div",{className:"row align-items-center text-center text-md-start",children:[e.jsxs("div",{className:"col-12 col-md-6 mb-5 mb-md-0  ",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg my-4",children:[e.jsx("h1",{className:"fw-bold display-1",children:"Cx2"}),e.jsx("h2",{className:"fw-semibold fs-4",children:"Santa Fe - Gestión diaria"}),e.jsx("div",{className:"badge bg-white text-dark fw-semibold px-3 py-1 my-2 ",children:" APP DIARIA, SIMPLE Y EFICIENTE.   "})]}),e.jsxs("div",{className:"p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:[e.jsx("p",{className:"fs-5 mt-3 text-center",children:"Tu herramienta ágil para controlar, organizar y comunicar información de forma simple y eficiente."}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("a",{href:"/denunciasimple",className:"btn btn-light  fw-semibold px-4 me-3",children:"Denuncia Simple "}),e.jsx("a",{className:"btn btn-outline-light fw-semibold px-4",children:"Administar"})]})]}),e.jsxs("div",{className:"mt-5 small ",children:[e.jsx("p",{children:"Versión: 1.0.0 | Actualización: 05/05/2025"}),e.jsxs("p",{children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})]})]}),e.jsx("div",{className:"col-12 col-md-6 d-flex justify-content-center",children:e.jsx("div",{className:"phone-frame bg-black rounded-4 p-2 shadow",children:e.jsxs("div",{className:"bg-white w-100 h-100 rounded-4 d-flex flex-column align-items-center pt-4 position-relative",children:[e.jsx("div",{className:"rounded-circle bg-gradiante2 d-flex align-items-center justify-content-center text-white fw-bold fs-3",style:{width:"80px",height:"80px"},children:e.jsx("span",{className:"shake",children:"🚀"})}),e.jsx("div",{className:"mt-1 fw-semibold text-dark",children:"Inicio App"}),e.jsxs("div",{className:"d-flex flex-column gap-3 mt-3",style:{width:"230px"},children:[s>=1&&e.jsxs("div",{className:"message-card bg-white text-dark rounded shadow p-2 align-self-start",children:[e.jsx("div",{className:"badge bg-primary text-white mb-1",children:"Usuario"}),e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("span",{className:"me-2 fs-4",children:"🗣️"}),e.jsx("p",{className:"mb-0 small",children:"¿Dónde debo registrar la denuncia?"})]})]}),s>=2&&e.jsxs("div",{className:"message-card bg-white text-dark rounded shadow p-2 align-self-end",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("div",{className:"badge bg-danger text-white mb-1",children:"Sistema BootSF"})}),e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("span",{className:"me-2 fs-4",children:"🤖"}),e.jsx("p",{className:"mb-0 small",children:"¡Hola! 🙌 Iniciá la denuncia simple y te voy guiando paso a paso 👋😉"})]}),e.jsxs("p",{className:"mb-0 small text-center mt-",children:["Tema a tratar: ",e.jsx("strong",{children:"Robo"})," • ",e.jsx("strong",{children:"Violencia"})," • ",e.jsx("strong",{children:"Otro"})," ❓"]})]}),s>=3&&e.jsxs("div",{className:"message-card bg-white text-dark rounded shadow p-2 align-self-start",children:[e.jsx("div",{className:"badge bg-primary text-white mb-1",children:"Usuario"}),e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("span",{className:"me-2 fs-4",children:"🗣️"}),e.jsx("p",{className:"mb-0 small",children:"Entendido. Iniciaré una denuncia simple ahora."})]})]})]}),e.jsx("div",{className:"position-absolute text-center small text-muted",style:{bottom:"40px",padding:"0 1rem"},children:"“Simplificá tu jornada con Cx2”"})]})})})]})})})})},ki=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),a.useEffect(()=>{const i=l=>{l.preventDefault(),l.returnValue="Estás a punto de dejar la página. ¿Quieres continuar?"};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Menu Inicio - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Denuncia Simple App ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsxs("div",{className:" d-flexjustify-content-center  text-white gap-5",children:[e.jsx(Si,{}),e.jsx(pe,{})]})]}),e.jsx(Zs,{setThemeBackgroundColor:o})]})})},_i=()=>e.jsx(e.Fragment,{children:e.jsx(ki,{})}),Ei=({showModalNot:s,closeModalNot:r})=>{var C;const t=Me(),[o,i]=a.useState(""),[l,n]=a.useState(""),[c,p]=a.useState("1"),[b,u]=a.useState(""),[g,j]=a.useState(!1),x=()=>{const v=new Date,S=String(v.getDate()).padStart(2,"0"),_=String(v.getMonth()+1).padStart(2,"0"),N=v.getFullYear().toString().slice(-2);return`${S}/${_}/${N}`};a.useEffect(()=>{if(t.pathname==="/informe"){const v=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",v),()=>{window.removeEventListener("popstate",v)}}},[t,r]);const h=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})();(C=h==null?void 0:h.email)!=null&&C.split("@")[0];const m=async v=>{if(v.preventDefault(),o.trim()===""){u("El informe no puede estar vacío.");return}if(o.length>500){u("El mensaje no puede exceder los 500 caracteres.");return}if(c===""){u("Por favor, selecciona una carátula.");return}u(""),j(!0);try{await Ee(H(P,"db_informes"),{titulo:l,contenido:o,timestamp:Pe(),leido:!1,fecha:x(),caratula:c,usuario_posteo:h.email,perfil:"oficial",difusion:"privado"}),n(""),i(""),p("1"),r()}catch(S){console.error("Error al enviar notificación: ",S),u("Error al enviar la notificación. Inténtalo de nuevo.")}finally{j(!1)}},f=()=>{i(""),p("1"),u(""),r()};return e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header text-center   text-dark",children:[e.jsxs("h3",{className:"modal-title text-center ",id:"modalTitle",children:["Crear Informe ",e.jsx("i",{className:"bi bi-code-slash ms-2 titilar ",style:{fontSize:"1.8rem"}})]}),e.jsx("button",{type:"button",className:"btn-close ",onClick:f})]}),e.jsx("div",{className:"modal-body bg-light  ",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("form",{onSubmit:m,children:[e.jsx("div",{className:"mb-3 text-center  ",children:e.jsxs("div",{className:"form-floating ",children:[e.jsx("textarea",{className:"form-control shadow-sm ",placeholder:"Escribe el mensaje aquí",id:"titulo",value:l,onChange:v=>n(v.target.value)}),e.jsx("label",{className:"text-dark",children:"Titulo del Informe "})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aquí",id:"mensaje",value:o,onChange:v=>i(v.target.value),style:{minHeight:"150px"}}),e.jsx("label",{className:"text-dark",children:"Contenido"})]})}),b&&e.jsx("div",{className:"alert alert-danger mt-5",children:b}),g?e.jsx(ee,{}):e.jsx("div",{className:"d-grid",children:e.jsx("button",{type:"submit",className:"btn bg-primary border-white border-3 text-white rounded-pill position-absolute top-100 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Crear Informe ",e.jsx("i",{className:"bi bi-code-slash p-1  text-white"})]})})})]})})})]})})})};function Fi({notificaciones:s,setNotificaciones:r,order:t,setOrder:o}){const i=n=>{o(n.target.value),l(n.target.value)},l=(n,c)=>{let p=[...s];n==="asc"?p.sort((b,u)=>{var g,j;return((g=b.timestamp)==null?void 0:g.seconds)-((j=u.timestamp)==null?void 0:j.seconds)}):p.sort((b,u)=>{var g,j;return((g=u.timestamp)==null?void 0:g.seconds)-((j=b.timestamp)==null?void 0:j.seconds)}),r(p)};return e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-3 gap-2 text-white",children:[e.jsx("label",{className:"mx-4",children:"Orden"}),e.jsxs("select",{className:"form-select bg-light bg-opacity-25 text-dark text-center rounded-3 text-white",value:t,onChange:i,children:[e.jsx("option",{value:"desc",children:"Más recientes primero"}),e.jsx("option",{value:"asc",children:"Más antiguos primero"})]})]})}const Di=()=>{const[s,r]=a.useState([]),[t,o]=a.useState(!0);return a.useEffect(()=>{const i=Ce(H(P,"db_informes"),Re("timestamp","desc")),l=qe(i,n=>{const c=n.docs.map(p=>({id:p.id,...p.data()}));r(c),o(!1)},n=>{console.error("Error al obtener informes:",n),o(!1)});return()=>l()},[]),{informes:s,loadingDb:t}},Pi=({showModalLink:s,setShowModalLink:r,selectedNotifId:t,newLink:o,setNewLink:i})=>{const[l,n]=a.useState(!0),[c,p]=a.useState(""),b=()=>{r(!1),i(""),n(!0),p("")},u=async()=>{if(!o){n(!1),p("Por favor, ingresa un enlace.");return}if(!t){n(!1),p("Por favor, selecciona un enlace.");return}try{await re(O(P,"db_informes",t),{enlace:_e(o)}),i(""),n(!0),p(""),alert("Enlace agregado correctamente."),b()}catch(g){console.error("Error al agregar el enlace:",g.code,g.message),alert("Hubo un error al agregar el enlace: "+g.message)}};return s&&e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!s,children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content text-white",children:[e.jsxs("div",{className:"modal-header bg-primary bg-opacity-75 ",children:[e.jsxs("h5",{className:"modal-title ",id:"modalLabel",children:["Agregar Enlace a la Notificación ",e.jsx("i",{className:"bi bi-share-fill mx-1"})]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white ",onClick:b,"aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"link",className:"form-label fw-semibold badge bg-primary ",children:"Ingrese el enlace"}),e.jsx("input",{type:"url",id:"link",className:`form-control text-center ${l?"":"is-invalid"}`,placeholder:"ejemplo.com",value:o,onChange:g=>i(g.target.value),"aria-describedby":"linkHelp"}),e.jsxs("div",{id:"linkHelp",className:"form-text text-center",children:["El enlace no incluyas  ",e.jsx("code",{children:" www. o  similares"})]}),!l&&e.jsx("div",{className:"invalid-feedback",children:c})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:b,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:u,children:"Guardar Enlace"})]})]})})})},Ai=({show:s,onClose:r,selectedNotifId:t})=>{const[o,i]=a.useState(null),[l,n]=a.useState(!1);a.useEffect(()=>{s&&(async()=>{if(t){n(!0);try{const b=O(P,"db_informes",t),u=await ke(b);u.exists()&&i(u.data().chat||!1)}catch(b){console.error("Error al obtener el estado del chat:",b)}finally{n(!1)}}})()},[t,s]);const c=async()=>{if(t!=null){n(!0);try{await re(O(P,"db_informes",t),{chat:!o}),i(!o),r()}catch(p){console.error("Error al actualizar el estado del chat:",p),alert("Ocurrió un error al actualizar el chat.")}finally{n(!1)}}};return s?e.jsx(e.Fragment,{children:l?e.jsx(ee,{}):e.jsx("div",{className:"modal d-block bg-dark bg-opacity-75 ",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered  ",children:e.jsxs("div",{className:"modal-content shadow  ",children:[e.jsxs("div",{className:"modal-header bg-light text-dark border-0 border",children:[e.jsxs("h5",{className:"modal-title ",children:[e.jsx("i",{className:"bi bi-chat-dots-fill me-2"})," Estado del Chat"]}),e.jsx("button",{type:"button",className:"btn-close  ",onClick:r})]}),e.jsxs("div",{className:"modal-body text-center  bg-light text-dark",children:[e.jsxs("p",{className:"fw-semibold m-0 ",children:["Estado actual: "," ",e.jsx("span",{className:o?"badge bg-teal mx-3":"badge bg-danger mx-3",children:o?"Activo ":"Inactivo "})]}),e.jsxs("p",{children:["¿Deseás ",o?"desactivar":"activar"," el chat para esta notificación?"]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between  bg-light text-dark  border-0 border",children:[e.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancelar"}),e.jsxs("button",{className:`btn ${o?"btn-secondaryMuiRed text-light":"btn-blue"}`,onClick:c,disabled:l,children:[o?"Desactivar Chat":"Activar Chat",e.jsx("i",{className:`ms-2 bi ${o?"bi-x-circle":"bi-check-circle"}`})]})]})]})})})}):null},Ii=({showModal:s,closeModal:r,selectedNotifId:t,setSelectedNotifId:o,selectedPersona:i,setSelectedPersona:l,personas:n})=>{const[c,p]=a.useState(""),[b,u]=a.useState(!1),g=()=>{r(!1),o(null),l("")},j=async()=>{if(t&&i){u(!0);try{const d=Ce(H(P,"db_personas"),Ie("nombre_apellido","==",i)),h=await K(d);if(h.empty)alert("No se encontró la persona seleccionada.");else{const m=h.docs[0];await Promise.all([re(O(P,"db_informes",t),{asociada:_e(i)}),re(O(P,"db_personas",m.id),{asociada_notificacion_id:_e(t)})]),alert(`La persona ${i} se asoció a la notificación.`),r()}}catch(d){console.error("Error al asociar captura:",d),alert("Hubo un error al asociar la captura.")}finally{u(!1)}}else alert("Por favor, selecciona una persona para asociar.")},x=d=>{switch(d){case 1:return"Normal";case 2:return"Paradero 🔎";case 3:return"Evasión 👮🏻";case 4:return"Prioritaria ⭐";default:return"No definida"}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:`modal fade bg-dark  ${s?"show":""}`,style:{display:s?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!s,children:e.jsx("div",{className:"modal-dialog text-white ",children:e.jsxs("div",{className:"modal-content ",children:[e.jsxs("div",{className:"modal-header bg-primary bg-opacity-75 ",children:[e.jsx("h5",{className:"modal-title ",id:"modalLabel",children:"Asociar Persona a la Notificación"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:g,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body ",children:[e.jsx("label",{htmlFor:"persona",className:"form-label mt-3 fw-semibold fw-semibold badge bg-primary ",children:"Selecciona una persona:"}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("input",{type:"text",className:"form-control dropdown-toggle w-100 bg-light bg-opacity-50 ",placeholder:"Buscar por nombre o DNI",value:c,onChange:d=>p(d.target.value)}),e.jsx("button",{className:"btn btn-secondaryMuiRed text-white ms-2",onClick:()=>p(""),disabled:!c,children:e.jsx("i",{className:"bi bi-trash"})})]}),c&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-start fw-bold",children:"Resultados:"}),e.jsx("ul",{className:"list-group",style:{maxHeight:"150px",overflowY:"auto"},children:n.filter(d=>`${d.nombre_apellido} ${d.documento}`.toLowerCase().includes(c.toLowerCase())).map(d=>{var h;return e.jsxs("li",{className:"list-group-item d-flex align-items-center",onClick:()=>{l(d.nombre_apellido),p("")},style:{cursor:"pointer"},children:[e.jsx("img",{src:((h=d.base64)==null?void 0:h.trim())||De,alt:d.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsxs("p",{className:"mb-0",children:[d.nombre_apellido," - ",d.documento]}),e.jsx("span",{className:`badge rounded-pill border border-white border-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[d.prioridad]||"bg-warning text-dark"}`,children:x(d.prioridad)})]})]},d.id)})})]}),e.jsxs("div",{className:"dropdown ",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100 bg-light bg-opacity-50 ",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:i||"Selecciona una persona"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"300px",overflowY:"auto"},children:n.filter(d=>`${d.nombre_apellido} ${d.documento}`.toLowerCase().includes(c.toLowerCase())).map(d=>{var h;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center",onClick:()=>l(d.nombre_apellido),children:[e.jsx("img",{src:((h=d.base64)==null?void 0:h.trim())||De,alt:d.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),d.nombre_apellido," - ",d.documento," -",e.jsx("span",{className:`badge rounded-pill border border-white border-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[d.prioridad]||"bg-warning text-dark"}`,children:x(d.prioridad)})]})},d.id)})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Asociando..."]}):e.jsxs(e.Fragment,{children:["Asociar Captura ",e.jsx("i",{className:"bi bi-person-plus-fill mx-2"})]})}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:g,disabled:b,children:"Cerrar"})]})]})})})})},Mi=({showModalFotos:s,setShowModalFotos:r,selectedNotifId:t,newFoto:o,setNewFoto:i})=>{const[l,n]=a.useState(null),[c,p]=a.useState(!0),[b,u]=a.useState(""),[g,j]=a.useState(null),x=()=>{r(!1),n(null),j(null),p(!0),u(""),i(null)},d=async()=>{if(!o){p(!1),u("Debes seleccionar una imagen.");return}if(!t){p(!1),u("No se ha seleccionado una notificación válida.");return}try{await re(O(P,"db_informes",t),{imagenes:_e(o)}),i(o),alert("Imagen agregada correctamente."),x()}catch(m){console.error("Error al subir la imagen:",m.message),alert("Hubo un error al subir la imagen: "+m.message)}},h=m=>{const f=m.target.files[0];if(f){n(f);const C=new FileReader;C.onloadend=()=>{const v=new Image;v.onload=()=>{const S=document.createElement("canvas"),_=S.getContext("2d"),N=640,y=480;let w=v.width,E=v.height;w>E?w>N&&(E*=N/w,w=N):E>y&&(w*=y/E,E=y),S.width=w,S.height=E,_.drawImage(v,0,0,w,E);const k=S.toDataURL("image/jpeg",.8);i(k),j(k)},v.src=C.result},C.readAsDataURL(f)}else j(null),i(null)};return s&&e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!s,children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content  text-white",children:[e.jsxs("div",{className:"modal-header bg-primary bg-opacity-75",children:[e.jsxs("h5",{className:"modal-title",id:"modalLabel",children:["Agregar Imagen a la Notificación ",e.jsx("i",{className:"bi bi-image mx-1"})]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:x,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"fileInput",className:"form-label fw-semibold badge bg-primary",children:"Selecciona una imagen"}),e.jsx("input",{type:"file",id:"fileInput",className:`form-control ${c?"":"is-invalid"}`,accept:".jpg, .jpeg",onChange:h}),!c&&e.jsx("div",{className:"invalid-feedback",children:b})]}),g&&e.jsx("div",{className:"mb-3 text-center",children:e.jsx("img",{src:g,alt:"Vista previa",className:"img-fluid rounded shadow",style:{maxHeight:"300px",objectFit:"contain"}})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:x,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,children:"Guardar Imagen"})]})]})})})};function Li(){const[s,r]=a.useState([]),[t,o]=a.useState(!1),[i,l]=a.useState(!1),[n,c]=a.useState(!1),[p,b]=a.useState(null),[u,g]=a.useState(null),[j,x]=a.useState(null),[d,h]=a.useState(""),[m,f]=a.useState(""),[C,v]=a.useState([]),[S,_]=a.useState(!1),[N,y]=a.useState(null),[w,E]=a.useState(""),[k,F]=a.useState(""),[A,L]=a.useState("desc"),{informes:U,loadingDb:Y}=Di(),[q,W]=a.useState([]),[le,me]=a.useState([]),[de,ae]=a.useState(!1),B=I=>{I!=null&&I.asociada_notificacion_id&&Array.isArray(I.asociada_notificacion_id)&&alert(`Esta persona está asociada a las siguientes notificaciones: ${I.asociada_notificacion_id.join(", ")}`)},te=I=>{me(Z=>Z.includes(I)?Z.filter(T=>T!==I):[...Z,I])},ie=I=>le.includes(I);a.useEffect(()=>{W(U)},[U]),a.useEffect(()=>{(async()=>{const Z=Ce(H(P,"db_personas"),Re("nombre_apellido","asc")),se=(await K(Z)).docs.map(R=>({id:R.id,...R.data()}));r(se)})()},[]);const ne=async(I,Z)=>{try{if(!window.confirm("¿Desea eliminar este enlace?"))return;const se=O(P,"db_informes",Z),R=await ke(se);if(R.exists()){const X=R.data();if(Array.isArray(X.enlace)){const ce=X.enlace.filter((we,Se)=>Se!==I);await re(se,{enlace:ce}),alert("Enlace eliminado con exito ")}else alert("El campo 'enlace' no existe o no es un array.")}else alert("No se encontró el documento con el ID proporcionado.")}catch(T){alert.error("Error al eliminar el enlace:",T)}},oe=async I=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta notificación?")){_(!0);try{await xe(O(P,"db_informes",I)),W(T=>T.filter(se=>se.id!==I)),alert("Se eliminó el informe")}catch(T){console.error("Error al eliminar el informe:",T),alert("Hubo un error al eliminar el informe.")}finally{_(!1)}}},he=I=>{b(I),o(!0)},$=I=>{b(I),l(!0)},M=I=>{b(I),c(!0)},G=async(I,Z,T)=>{if(window.confirm(`¿Estás seguro de que deseas eliminar la imagen número ${T+1}?`)){_(!0);try{const R=O(P,"db_informes",I);await re(R,{imagenes:Ae(Z)}),v(X=>X.filter(ce=>ce!==Z)),alert(`Se eliminó la imagen ${T+1} correctamente.`)}catch(R){console.error("Error al eliminar la imagen:",R),alert("Hubo un error al eliminar la imagen.")}finally{_(!1)}}else alert("La imagen no fue eliminada.")},z=async(I,Z,T)=>{if(window.confirm(`¿Estás seguro de que deseas eliminar la asociación de la persona ${T} con la notificación?`)){_(!0);try{const R=O(P,"db_informes",I);await re(R,{asociada:Ae(T)});const X=O(P,"db_personas",Z);await re(X,{asociada_notificacion_id:Ae(I)}),alert(`Se eliminó la asociación de la persona ${T} con la notificación.`)}catch(R){console.error("Error al eliminar la asociación:",R),alert("Hubo un error al eliminar la asociación.")}finally{_(!1)}}else alert(`La asociación de la persona ${T} no fue eliminada.`)},V=I=>{switch(I){case"1":return"Activo";case"2":return"Paradero 🔎";case"3":return"Evasión 👮🏻";case"4":return"Prioritaria ⭐";default:return"No definida"}},D=I=>/^https?:\/\//.test(I)?I:`https://${I}`,Q=async I=>{if(w.trim()){_(!0);try{const Z=O(P,"db_notificaciones",I);await re(Z,{contenido:w}),alert("Contenido actualizado correctamente"),g(null)}catch(Z){console.error("Error al actualizar contenido:",Z),alert("Hubo un error al actualizar el contenido.")}finally{_(!1)}}else alert("El contenido no puede estar vacío")},J=async I=>{if(k.trim()){_(!0);try{const Z=O(P,"db_informes",I);await re(Z,{titulo:k}),alert("titulo actualizado correctamente"),x(null)}catch(Z){console.error("Error al actualizar titulo:",Z),alert("Hubo un error al actualizar el titulo.")}finally{_(!1)}}else alert("El titulo no puede estar vacío")};return e.jsxs("div",{children:[e.jsx(Fi,{notificaciones:q,setNotificaciones:W,order:A,setOrder:L}),e.jsx("div",{className:"row g-3 justify-content-center align-items-center mt-1"}),e.jsx(e.Fragment,{children:Y?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"300px"},children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})]})}):e.jsx("div",{className:"row justify-content-center  ",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"list-group",children:q.length===0?e.jsx("div",{className:"text-center p-4 text-center tex-light bg-light bg-opacity-25 rounded text-white",children:e.jsx("span",{className:"display-6",children:"No hay Informes 👎🏻"})}):q.map(I=>{var Z,T,se;return e.jsxs("div",{className:"list-group-item shadow mt-5 bg-light bg-opacity-75 rounded-4",children:[e.jsxs("div",{className:"d-flex align-items-center shadow-sm text-center bg-dark bg-opacity-50 p-3 rounded-4 text-light position-relative",children:[e.jsx("button",{className:"btn bg-purple bg-opacity-75 px-5 border-white border-3 text-white rounded-pill position-absolute top-0 start-50 shadow-sm translate-middle d-none d-md-block",children:e.jsxs("span",{children:["       ",new Date(((Z=I.timestamp)==null?void 0:Z.seconds)*1e3).toLocaleString()," "]})}),e.jsx("span",{className:`badge rounded-pill me-3 ${{1:"bg-teal titilar",2:"bg-primaryMuiBlue",3:"bg-danger"}[I.caratula]||"bg-warning text-dark"}`,children:V(I.caratula)}),((T=I.asociada)==null?void 0:T.length)>0&&e.jsx("span",{className:"text-light ms-2",title:"Personas asociadas",children:e.jsx("i",{className:"bi bi-person-check-fill"})}),((se=I.enlace)==null?void 0:se.length)>0&&e.jsx("span",{className:"text-light ms-2",title:"Enlaces adjuntos",children:e.jsx("i",{className:"bi bi-link-45deg"})}),I.chat&&e.jsx("span",{className:"text-light ms-2",title:"Chat activo",children:e.jsx("i",{className:"bi bi-chat-dots-fill"})}),Array.isArray(I.imagenes)&&I.imagenes.length>0&&e.jsxs("span",{className:"text-light ms-2",title:"Fotos adjuntas",children:[e.jsx("i",{className:"bi bi-image-fill"})," "]}),e.jsx("div",{className:"flex-grow-1"}),e.jsx("button",{className:"btn btn-outline-light btn-sm rounded-circle ms-2",onClick:()=>te(I.id),children:e.jsx("i",{className:`bi ${ie(I.id)?"bi-chevron-up":"bi-chevron-down"}`})})]}),!ie(I.id)&&e.jsx("h6",{className:"text-center  fw-bold my-3",children:I.titulo}),ie(I.id)&&e.jsxs("div",{className:"p-3",children:[e.jsx("h6",{className:"shadow-sm text-center bg-light bg-opacity-75 p-2 rounded-4 text-dark",children:"Título"}),I.id===j?e.jsxs("div",{className:"text-center ",children:[e.jsx("input",{type:"text",value:k,onChange:R=>F(R.target.value),className:"form-control mt-3 text-center"}),e.jsx("button",{className:"btn btn-primary mt-4 ",onClick:()=>J(I.id),disabled:S,children:S?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1 "})]})})]}):e.jsx("div",{className:"mt-3 text-center fw-semibold",children:e.jsx("small",{className:"mb-2 text-muted ",children:I.titulo})}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${I.id===j?"btn-danger":"btn-primary"}`,onClick:()=>{I.id===j?x(null):(F(I.titulo),x(I.id))},children:e.jsx("i",{className:`bi ${I.id===j?"bi-x-circle":"bi-pencil"}`})})}),e.jsx("h6",{className:"shadow-sm text-center bg-dark bg-opacity-50 p-2 rounded-4 text-light my-3",children:"Contenido"}),I.id===u?e.jsxs("div",{className:"text-center",children:[e.jsx("textarea",{value:w,onChange:R=>E(R.target.value),className:"form-control",rows:"5"}),e.jsx("button",{className:"btn btn-primary mt-4",onClick:()=>Q(I.id),disabled:S,children:S?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("div",{className:"mt-3 text-center fw-semibold",children:e.jsx("small",{className:"mb-2 text-muted ",children:I.contenido})}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${I.id===u?"btn-danger":"btn-primary"}`,onClick:()=>{I.id===u?g(null):(E(I.contenido),g(I.id))},children:e.jsx("i",{className:`bi ${I.id===u?"bi-x-circle":"bi-pencil"}`})})}),I.enlace&&I.enlace.length>0?e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-center bg-light bg-opacity-50 fw-semibold shadow-sm  py-1 rounded my-3 ",children:"Enlaces Asociados"}),e.jsx("ul",{className:"list-unstyled",children:I.enlace.map((R,X)=>e.jsxs("li",{className:"d-flex align-items-center justify-content-center mb-2 p-2 shadow",children:[e.jsxs("span",{className:"badge bg-primary text-white d-flex align-items-center gap-2 px-2 py-2 ",style:{maxWidth:"250px"},children:[e.jsx("i",{className:"bi bi-browser-chrome"}),e.jsx("a",{href:D(R),target:"_blank",rel:"noopener noreferrer",className:"text-white text-decoration-none text-truncate mx-2",style:{maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:R})]}),e.jsx("button",{className:"btn btn-redUi1 btn-sm rounded-circle ms-2",onClick:()=>ne(X,I.id),children:e.jsx("i",{className:"bi bi-x-circle text-white"})})]},X))})]}):e.jsx("span",{className:"bg-dark bg-opacity-25 p-3 rounded-3 text-light text-center d-block my-2",children:"No hay enlaces asociados"}),I.asociada&&I.asociada.length>0?e.jsxs("div",{className:"mt-3",children:[e.jsx("h6",{className:"text-center bg-light bg-opacity-50 fw-semibold shadow-sm py-1 rounded mt-3",children:"Personas Asociadas"}),I.asociada.map((R,X)=>{var we,Se;const ce=s.find(Be=>Be.nombre_apellido===R);return ce?e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2 p-2 shadow ",children:[e.jsx("img",{src:((we=ce.base64)==null?void 0:we.trim())||De,alt:ce.nombre_apellido||"Imagen no disponible",onClick:()=>{var Be;return y((Be=ce.base64)==null?void 0:Be.trim())},className:"rounded-circle me-3",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[e.jsxs("span",{children:[X+1,". ",R]}),((Se=ce.asociada_notificacion_id)==null?void 0:Se.length)>0&&e.jsxs("span",{className:"badge bg-teal text-white ms-3",onClick:()=>B(ce),children:["Asociado ",ce.asociada_notificacion_id.length]})]}),e.jsx("button",{className:"btn btn-sm btn-redUi1 text-white ms-3",onClick:()=>z(I.id,ce.id,R),children:e.jsx("i",{className:"bi bi-trash"})})]},X):null})]}):e.jsx("span",{className:"bg-dark bg-opacity-25 p-3 rounded-3 text-light text-center d-block",children:"No hay personas asociadas"}),I.imagenes&&I.imagenes.length>0?e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"text-center bg-light bg-opacity-50 fw-semibold shadow-sm py-1 rounded",children:"Imágenes Asociadas"}),e.jsx("div",{className:"row mt-3",children:I.imagenes.map((R,X)=>e.jsxs("div",{className:"col-6 col-md-4 mb-3 position-relative",children:[e.jsx("button",{className:"btn btn-sm bg-dark bg-opacity-50 text-white position-absolute top-0 end-0 m-1 rounded-circle",style:{zIndex:2},onClick:()=>G(I.id,R,X),title:"Eliminar imagen",children:"×"}),e.jsx("img",{src:R,alt:`Imagen ${X+1}`,className:"img-fluid rounded shadow-sm w-100",style:{height:"200px",objectFit:"cover",cursor:"pointer"},onClick:()=>y(R)})]},X))})]}):e.jsx("span",{className:"bg-dark bg-opacity-25 p-3 rounded-3 text-light text-center d-block mt-4",children:"No hay imágenes asociadas"}),N&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center",style:{backgroundColor:"rgba(0,0,0,0.85)",zIndex:1050,cursor:"zoom-out"},onClick:()=>y(null),onKeyDown:R=>{R.key==="Escape"&&y(null)},tabIndex:0,children:e.jsx("img",{src:N,alt:"Vista completa",className:"img-fluid rounded shadow",style:{maxHeight:"95%",maxWidth:"95%",cursor:"default"},onClick:R=>R.stopPropagation()})})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 p-3",children:[e.jsx("button",{className:"btn btn-cyan text-white btn-sm rounded-circle",onClick:()=>he(I.id),title:"Asociar personas",children:e.jsx("i",{className:"bi bi-person-fill-add"})}),e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle",onClick:()=>$(I.id),title:"Agregar enlace",children:e.jsx("i",{className:"bi bi-link-45deg"})}),e.jsx("button",{className:"btn btn-orangeUi text-white btn-sm rounded-circle",onClick:()=>{b(I.id),ae(!0)},title:"Activar chat",children:e.jsx("i",{className:"bi bi-chat-dots-fill"})}),e.jsx("button",{className:"btn btn-purple text-white btn-sm rounded-circle",onClick:()=>M(I.id),title:"Subir Fotos",children:e.jsx("i",{className:"bi bi-image"})}),e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:()=>oe(I.id),disabled:S,title:"Eliminar notificación",children:e.jsx("i",{className:"bi bi-trash3-fill"})})]})]},I.id)})})})})}),e.jsx(Pi,{showModalLink:i,setShowModalLink:l,selectedNotifId:p,newLink:m,setNewLink:f,setNotificaciones:W}),e.jsx(Mi,{showModalFotos:n,setShowModalFotos:c,selectedNotifId:p,newFoto:C,setNewFoto:v,setNotificaciones:W}),e.jsx(Ai,{show:de,onClose:()=>ae(!1),selectedNotifId:p}),e.jsx(Ii,{showModal:t,closeModal:o,selectedNotifId:p,setSelectedNotifId:b,selectedPersona:d,setSelectedPersona:h,personas:s})]})}const Ri=()=>{const[s,r]=a.useState(!1),[t,o]=a.useState(0),[i,l]=a.useState(0),n=()=>r(!0),c=()=>r(!1);return a.useEffect(()=>{(async()=>{const u=(await K(H(P,"db_informes"))).size;o(u);const j=(await K(H(P,"db_personas"))).size;l(j)})()},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsxs("div",{className:"col-12 col-md-6  text-white ",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg my-4 text-center text-capitalize",children:[e.jsx("h1",{className:"fw-bold display-6 ",children:"Crear nueva Noticia "}),e.jsx("p",{className:"lead text-white text-center mt-4",children:"¿Querés registrar una nueva Noticia ? Comenzá completando los datos necesarios para dar inicio al proceso."}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{className:"btn btn-light fw-semibold px-4",onClick:n,children:"Nueva Noticia"})})]}),e.jsxs("div",{className:"p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:[e.jsx("p",{className:"fs-5 mt-3 text-center",children:"Tu herramienta ágil para controlar, organizar y comunicar información de forma simple y eficiente."}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsxs("p",{className:"text-light mb-1",children:["Total de Noticias registrados: ",e.jsx("strong",{children:t})]}),e.jsxs("p",{className:"text-light",children:["Total personas registradas : ",e.jsx("strong",{children:i})]})]})]}),e.jsx("div",{className:"mt-3 small d-flex flex-column align-items-end",children:e.jsxs("p",{className:"mb-0",children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})})]}),e.jsx("div",{className:" col-12 col-md-6  ",children:e.jsx(Li,{})})]})}),e.jsx(Ei,{showModalNot:s,closeModalNot:c})]})},zi=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Crear Noticias"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(ye,{Promp:"Crear Administar Noticias ",Promp2:"bi bi-code-slash fs-4 "})}),e.jsx(Ri,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},$i=()=>e.jsx(e.Fragment,{children:e.jsx(zi,{})}),Ti=({informeId:s})=>{const[r,t]=a.useState(null),[o,i]=a.useState(!1),[l,n]=a.useState(0);a.useEffect(()=>{const b=localStorage.getItem("user");if(b){const u=JSON.parse(b);t(u.email),c(u.email)}},[s]);const c=async b=>{var j,x;const u=O(P,"db_informes",s),g=await ke(u);if(g.exists()){const d=g.data();n(((j=d.me_sirve)==null?void 0:j.length)||0),i((x=d.me_sirve)==null?void 0:x.includes(b))}},p=async()=>{if(!r)return;const b=O(P,"db_informes",s);await re(b,{me_sirve:o?Ae(r):_e(r)}),i(!o),n(u=>o?u-1:u+1)};return e.jsxs("div",{onClick:p,style:{cursor:"pointer"},className:`d-flex align-items-center gap-1 ${o?"text-muted fw-bold":"text-muted"}`,children:[e.jsx("i",{className:`bi ${o?"bi-hand-thumbs-up-fill":"bi-hand-thumbs-up"} mx-1`}),"Me sirve"]})},Bi=["😀","👍","❤️","🎉","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😜","🤪","😝","🤑","🤗","🤭","🤫","🤔","🤐","🤨","😐","😑","😶","🙄","😏","😣","😥","😮","😯","😪","😫","🥱","😴","😛","🤓","😎","🤩","🥳","😕","😟","🙁","☹️","😮‍💨","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","😵","😡","😠","🤬","😷","🤒","🤕","🤢"],Oi=({show:s,onClose:r,informeId:t,count:o,onUpdateCount:i})=>{const[l,n]=a.useState(""),[c,p]=a.useState(!1),b=a.useRef(null),[u,g]=a.useState(null);a.useEffect(()=>{const h=localStorage.getItem("user");if(h){const m=JSON.parse(h);g(m.email)}},[t]);const j=()=>{p(!1),r()},x=async()=>{if(!u)return;if(l.trim()===""){alert("No se puede enviar un comentario vacío");return}const h=O(P,"db_informes",t),m=await ke(h);if(m.exists()){const C=m.data().comentarios||[],v={texto:l.trim(),autor:u,timestamp:new Date};await re(h,{comentarios:[...C,v]}),i&&typeof o=="number"&&i(o+1),alert("Comentario enviado"),n(""),p(!1),r()}},d=h=>{const m=b.current;if(!m)return;const f=m.selectionStart,C=m.selectionEnd,v=l.slice(0,f)+h+l.slice(C);n(v),setTimeout(()=>{m.selectionStart=m.selectionEnd=f+h.length,m.focus()},0)};return s?e.jsx("div",{className:"modal d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",onClick:j,style:{backgroundColor:"rgba(0,0,0,0.9)"},children:e.jsx("div",{className:"modal-dialog text-dark",onClick:h=>h.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Comentar"}),e.jsx("button",{type:"button",className:"btn-close",onClick:j})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("textarea",{ref:b,className:"form-control",rows:4,placeholder:"Escribe tu comentario...",value:l,onChange:h=>n(h.target.value)}),e.jsx("button",{type:"button",className:"btn btn-light mt-2",onClick:()=>p(h=>!h),children:c?"Ocultar emojis":"Mostrar emojis"}),c&&e.jsx("div",{className:"mt-2",style:{maxHeight:"150px",overflowY:"auto",border:"1px solid #ddd",padding:"8px",borderRadius:"4px"},children:Bi.map(h=>e.jsx("button",{type:"button",className:"btn btn-light me-1 mb-1",onClick:()=>d(h),style:{fontSize:"1.4rem",lineHeight:"1"},children:h},h))})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:j,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:x,disabled:!l.trim(),children:"Enviar"})]})]})})}):null},Ui=({comentarios:s=[],usuarioActual:r})=>{const[t,o]=a.useState(!1);return!s||s.length===0?e.jsx("div",{className:"mt-3 text-end",children:e.jsx("button",{className:"btn btn-sm btn-link p-0 text-decoration-none",disabled:!0,children:"Sin comentarios"})}):e.jsxs("div",{className:"my-3 text-end",children:[e.jsx("button",{className:"btn btn-sm btn-link p-0 text-decoration-none",onClick:()=>o(!t),children:t?"Ocultar comentarios":"Ver comentarios "}),t&&e.jsx("div",{className:"d-flex flex-column gap-2 mt-2",children:s.map((i,l)=>{var n,c;return e.jsxs("div",{className:"border rounded p-2 bg-light",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{className:"text-dark small text-capitalize",children:((n=i.autor)==null?void 0:n.split("@")[0])||"Anónimo"}),e.jsx("span",{className:"text-muted small r",children:new Date(((c=i.timestamp)==null?void 0:c.seconds)*1e3).toLocaleString()})]}),e.jsx("div",{className:"text-dark small mt-1 d-flex justify-content-between",children:i.texto}),i.autor===r&&e.jsx("div",{className:"text-end mt-1",children:e.jsx("span",{className:"badge bg-secondary small",children:"Tu comentario"})})]},l)})})]})},Vi=({imagenes:s=[],onExpand:r})=>!s||s.length===0?null:s.length===1?e.jsx("div",{className:"text-center mb-3",children:e.jsx("img",{src:s[0],alt:"Imagen",className:"img-fluid rounded shadow-sm",style:{width:"50%",maxWidth:"500px",height:"300px",objectFit:"cover",cursor:"pointer"},onClick:()=>r(s[0])})}):e.jsxs("div",{id:"carouselPublicacion",className:"carousel slide mb-3","data-bs-ride":"carousel",children:[e.jsx("div",{className:"carousel-inner",style:{maxHeight:"300px"},children:s.map((t,o)=>e.jsx("div",{className:`carousel-item ${o===0?"active":""}`,style:{cursor:"pointer"},onClick:()=>r(t),children:e.jsx("img",{src:t,className:"d-block w-100 rounded",alt:`Imagen ${o+1}`,style:{height:"300px",objectFit:"cover",width:"100%",maxWidth:"500px",margin:"0 auto"}})},o))}),e.jsxs("button",{className:"carousel-control-prev ",type:"button","data-bs-target":"#carouselPublicacion","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon bg-dark rounded-circle bg-opacity-75","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden  ",children:"Anterior"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselPublicacion","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon bg-dark rounded-circle bg-opacity-75","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Siguiente"})]})]}),qi=({perfilSeleccionado:s,onFiltrar:r})=>e.jsxs("div",{className:"mb-4  bg-light bg-opacity-25 p-4 rounded text-white",children:[e.jsx("label",{className:"form-label fw-bold",children:"Filtrar tipo de Información :"}),e.jsxs("select",{className:"form-select",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"personal",children:"👮‍♀️ Información del Personal"}),e.jsx("option",{value:"oficial",children:"📢 Información Oficial"})]})]}),Gi=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState(null),[n,c]=a.useState(!1),[p,b]=a.useState(null),[u,g]=a.useState(""),[j,x]=a.useState(0),[d,h]=a.useState(""),m=S=>{b(S),c(!0)},f=s.filter(S=>{var _;return d===""?!0:((_=S.perfil)==null?void 0:_.toLowerCase())===d});a.useEffect(()=>{const S=localStorage.getItem("user");if(S){const _=JSON.parse(S);g(_.email)}},[]),a.useEffect(()=>{(async()=>{try{const N=(await K(H(P,"db_informes"))).docs.map(y=>{const w=y.data();return{id:y.id,...w,comentarios:w.comentarios||[]}}).sort((y,w)=>{var F,A;const E=((F=y.timestamp)==null?void 0:F.seconds)||0;return(((A=w.timestamp)==null?void 0:A.seconds)||0)-E});r(N)}catch(_){console.error("Error al obtener los informes:",_)}})()},[]);const C=(S=[])=>S.filter(_=>_.autor===u).length,v=S=>{x(S)};return a.useEffect(()=>{(async()=>{const N=(await K(H(P,"db_personas"))).docs.map(y=>y.data());o(N)})()},[]),a.useEffect(()=>{if(i){window.history.pushState({modalOpen:!0},"");const S=_=>{l(null)};return window.addEventListener("popstate",S),()=>{window.removeEventListener("popstate",S)}}},[i]),e.jsxs("div",{className:"container py-4",children:[e.jsx(qi,{perfilSeleccionado:d,onFiltrar:h}),f.map(S=>{var _,N,y,w,E,k,F,A;return e.jsxs("div",{className:"bg-white rounded-3 shadow p-3 mb-4 mx-auto",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-3 shadow-sm",style:{width:"40px",height:"40px",fontWeight:"bold",fontSize:"1rem",textTransform:"uppercase"},children:((_=S.usuario_posteo)==null?void 0:_.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold small text-dark text-capitalize",children:((N=S.usuario_posteo)==null?void 0:N.split("@")[0])||"Usuario"}),e.jsxs("div",{className:"text-muted text-capitalize",style:{fontSize:"0.75rem"},children:[new Date(((y=S.timestamp)==null?void 0:y.seconds)*1e3).toLocaleString()," ·"," ",((w=S.difusion)==null?void 0:w.trim().toLowerCase())==="publico"?"🌍 Público ":((E=S.difusion)==null?void 0:E.trim().toLowerCase())==="privado"?"🔒 Privado ":S.difusion?"🔒 "+S.difusion:"🌍 Público ",S.perfil==="oficial"?"📢 Contenido oficial":"👮‍♀️ Personal Policial"]})]})]}),e.jsx("div",{className:"mb-2 text-dark",children:e.jsx("strong",{children:S.titulo})}),e.jsx("div",{className:"mb-2 text-dark ",children:S.contenido}),e.jsx("div",{className:"container ",children:e.jsx("div",{className:"row",children:e.jsx(Vi,{imagenes:S.imagenes,onExpand:l})})}),Array.isArray(S.enlace)&&S.enlace.length>0&&e.jsx("div",{className:"mb-2 text-secondary border border-1 bg-opacity-25 rounded  p-2  ",children:e.jsxs("small",{children:["Enlaces Compartidos:",e.jsx("ul",{className:"mb-0 ps-3 ",children:S.enlace.filter(L=>typeof L=="string"&&L.trim()!=="").map((L,U)=>{const Y=L.startsWith("http://")||L.startsWith("https://")?L:`https://${L}`;return e.jsx("li",{children:e.jsx("a",{href:Y,target:"_blank",rel:"noopener noreferrer",children:L})},U)})})]})}),Array.isArray(S.asociada)&&S.asociada.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("small",{className:"text-dark d-block mb-1",children:"Personas asociadas:"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 ",children:S.asociada.map((L,U)=>{const Y=t.find(q=>{var W;return((W=q.nombre_apellido)==null?void 0:W.toLowerCase())===L.toLowerCase()});return Y?e.jsxs("div",{className:"d-flex align-items-center gap-2 border rounded px-2 py-1",children:[e.jsx("div",{onClick:()=>l(Y.base64),className:"rounded-circle",style:{width:"32px",height:"32px",backgroundImage:`url(${Y.base64})`,backgroundSize:"cover",backgroundPosition:"center"}}),e.jsx("span",{className:"small text-dark ",children:Y.nombre_apellido})]},U):null})})]}),e.jsx(Ui,{comentarios:S.comentarios,usuarioActual:u}),e.jsxs("div",{className:"d-flex justify-content-between text-muted small mb-2",children:[e.jsx("div",{children:((k=S.me_sirve)==null?void 0:k.length)>0&&e.jsxs("div",{children:["👍 ",S.me_sirve.length]})}),e.jsxs("div",{children:[((F=S.comentarios)==null?void 0:F.length)||0," comentario",((A=S.comentarios)==null?void 0:A.length)===1?"":"s"," · 0 compartidos"]})]}),e.jsxs("div",{className:"d-flex justify-content-around border-top border-bottom py-2 text-muted",children:[e.jsx(Ti,{informeId:S.id}),e.jsxs("div",{className:`d-flex align-items-center gap-1 ${S.chat?"":"text-muted"}`,style:{pointerEvents:S.chat?"auto":"none",opacity:S.chat?1:.6,cursor:S.chat?"pointer":"default"},onClick:()=>S.chat&&m(S.id),children:[e.jsx("i",{className:"bi bi-chat-dots mx-1"}),"Comentar ",C(S.comentarios)>0?`(${C(S.comentarios)})`:""]}),e.jsxs("div",{className:"d-flex align-items-center gap-1 text-muted",style:{pointerEvents:"none",opacity:.6},children:[e.jsx("i",{className:"bi bi-share mx-1"}),"Compartir"]})]})]},S.id)}),i&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center",style:{backgroundColor:"rgba(0,0,0,0.85)",zIndex:1050,cursor:"zoom-out"},onClick:()=>l(null),onKeyDown:S=>{S.key==="Escape"&&l(null)},tabIndex:0,children:e.jsx("img",{src:i,alt:"Vista completa",className:"img-fluid rounded shadow",style:{maxHeight:"95%",maxWidth:"95%",cursor:"default"},onClick:S=>S.stopPropagation()})}),e.jsx(Oi,{show:n,onClose:c,informeId:p,count:j,onUpdateCount:v})]})},Hi=()=>{var g,j;const[s,r]=a.useState(null),t=((g=s==null?void 0:s.email)==null?void 0:g.split("@")[0])||"Usuario Sin Registro",[o,i]=a.useState(!1),[l,n]=a.useState(""),[c,p]=a.useState(!1);a.useEffect(()=>{const x=localStorage.getItem("user");if(x){const d=JSON.parse(x);r(d)}},[]);const b=async()=>{if(!l.trim())return alert("El contenido no puede estar vacío");try{i(!0),await Ee(H(P,"db_informes"),{email:(s==null?void 0:s.email)||"invitado",usuario_posteo:(s==null?void 0:s.email)||"invitado",contenido:l,timestamp:Pe(),chat:!0,perfil:"personal",difusion:"publico"}),n(""),alert("Publicación fue creada correctamente")}catch(x){console.error("Error al publicar:",x),alert("Error al publicar. Intenta nuevamente.")}finally{i(!1)}},u=x=>{n(d=>d+x),p(!1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:" rounded-4 my-4 d-flex justify-content-center",children:e.jsxs("div",{className:"bg-light  rounded shadow p-3 w-100",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("div",{className:"rounded-circle bg-purple me-2 d-flex justify-content-center align-items-center text-white",style:{width:"40px",height:"40px",fontSize:"14px"},children:((j=s==null?void 0:s.email)==null?void 0:j.charAt(0).toUpperCase())||"?"}),e.jsx("div",{className:"fw-bold small text-dark",children:t||"Invitado"})]}),e.jsx("textarea",{className:"form-control border-0 text-center ",rows:"2",value:l,onChange:x=>n(x.target.value),placeholder:`¿ Qué quieres informar, ${t||"invitado"} ?`}),e.jsx("hr",{className:"my-3 bg-dark"}),e.jsxs("div",{className:"d-flex justify-content-between flex-wrap text-secondary small",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 px-2 py-1 rounded disabled",style:{cursor:"not-allowed",opacity:.5},children:[e.jsx("img",{src:"ico/camera.png",alt:"Foto/Video",width:"18",height:"18"}),"Foto/Video"]}),e.jsxs("div",{className:"d-flex align-items-center gap-2 px-2 py-1 rounded",role:"button",onClick:()=>p(!c),children:[e.jsx("img",{src:"ico/happy--v1.png",alt:"Sentimiento",width:"18",height:"18"}),"Sentimiento"]}),e.jsxs("div",{className:"d-flex align-items-center gap-2 px-2 py-1 rounded disabled",style:{cursor:"not-allowed",opacity:.5},children:[e.jsx("img",{src:"ico/location.png",alt:"Ubicación",width:"18",height:"18"}),"Ubicación"]})]}),c&&e.jsx("div",{className:"d-flex justify-content-center mt-2",children:e.jsxs("div",{className:"border rounded p-3 bg-light mt-3 text-center text-dark",style:{maxWidth:"500px",margin:"0 auto"},children:[e.jsx("h6",{className:"mb-3",children:"Selecciona un emoji"}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:" Más populares"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["😂","❤️","😍","😭","😊","🔥","😅","👍","🥰","🤔"].map(x=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>u(x),children:x},x))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:" Entidad "}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["🕵️‍♂️","👮","👮‍♀️","👨‍⚖️","👨‍⚕️","👨‍🚒","🚒","🚑","🚓","🏍️"].map(x=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>u(x),children:x},x))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:"😀 Emociones"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["😀","😂","😅","😊","😍","🥰","😭","😡","🤯","🤔"].map(x=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>u(x),children:x},x))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:"❤️ Sentimientos"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["❤️","💔","💕","💖","💯","👏","🙏","🤝","🙌","💪"].map(x=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>u(x),children:x},x))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:"🥳 Celebración"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["🎉","🥳","🎂","🎁","🍰","🍻","🤩","😎","💃","🕺"].map(x=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>u(x),children:x},x))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:"✨ Útiles"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["⚠️","✅","❌","🔔","📢","📷","📍","📌","📝","📎"].map(x=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>u(x),children:x},x))})]})]})}),e.jsx("button",{className:"btn btn-primary w-100 mt-3 fw-bold",onClick:b,disabled:o,children:o?"Publicando...":"Publicar"})]})})})},Wi=()=>{const[s,r]=a.useState([]),[t,o]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const l=Ce(H(P,"db_informes"),Re("timestamp","desc"),ia(3)),c=(await K(l)).docs.map(p=>({id:p.id,...p.data()}));r(c)}catch(l){console.error("Error al obtener los informes:",l)}finally{o(!1)}})()},[]),t?e.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",role:"status","aria-live":"polite",children:[...Array(3)].map((i,l)=>e.jsx("div",{className:"spinner-grow text-light mx-2",role:"status",style:{width:"2rem",height:"2rem"},"aria-label":"Cargando vehículos",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})},l))}):s.length===0?e.jsx("div",{className:"alert alert-info my-4 text-center",role:"alert",children:"No hay informes cargados aún."}):e.jsxs("div",{className:"container my-5",style:{maxWidth:"700px"},children:[e.jsx("h5",{className:"mb-3 text-center",children:"Últimas Publicaciones 🔥"}),e.jsx("div",{className:"row g-3",children:s.map(i=>{var l;return e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card shadow-sm shadowh-100",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title text-truncate text-capitalize",title:i.titulo,children:i.perfil==="oficial"?"📢 Contenido Oficial ":"👮‍♀️ Personal Policial "}),e.jsx("p",{className:"card-text text-truncate",title:i.contenido,children:i.contenido||"Sin descripción"})]}),e.jsxs("div",{className:"card-footer text-muted d-flex justify-content-between align-items-center small",children:[e.jsx("div",{children:i.usuario_posteo?i.usuario_posteo.split("@")[0]:"Usuario desconocido"}),e.jsx("div",{children:(l=i.timestamp)!=null&&l.seconds?new Date(i.timestamp.seconds*1e3).toLocaleString():"Fecha no disponible"})]})]})},i.id)})})]})},Ji=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsxs("div",{className:"col-12 col-md-6   text-white ",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg my-4 text-center text-capitalize",children:[e.jsx("h1",{className:"fw-bold display-6 ",children:"Bienvenido "}),e.jsx("p",{className:"mb-1",children:"Acá vas a recibir notificaciones importantes, publicaciones recientes y actualizaciones en tiempo real."})]}),e.jsx(Hi,{}),e.jsx(Wi,{}),e.jsx("div",{className:"mt-3 small d-flex flex-column align-items-end",children:e.jsxs("p",{className:"mb-0",children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})})]}),e.jsx("div",{className:" col-12 col-md-6  ",children:e.jsx(Gi,{})})]})})}),Zi=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Noticias - Cx2 "})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(ye,{Promp:" Informes + Noticias ",Promp2:"bi bi-code-slash fs-4 "})}),e.jsx(Ji,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},Yi=()=>e.jsx(e.Fragment,{children:e.jsx(Zi,{})}),Qi=({onCiudadChange:s,onComisariaChange:r,clearSignal:t})=>{const[o,i]=a.useState(null),[l,n]=a.useState(null),c=[{ciudad:"Santa Fe",unidad:"UR I"},{ciudad:"Rosario",unidad:"UR II"},{ciudad:"Rafaela",unidad:"UR V"},{ciudad:"Venado Tuerto",unidad:"UR VIII"},{ciudad:"Reconquista",unidad:"UR IX"},{ciudad:"Villa Gobernador Gálvez",unidad:"UR II"},{ciudad:"San Lorenzo",unidad:"UR XVII"},{ciudad:"Esperanza",unidad:"UR XI"},{ciudad:"Casilda",unidad:"UR IV"},{ciudad:"Cañada de Gómez",unidad:"UR X"},{ciudad:"Sunchales",unidad:"UR V"},{ciudad:"Firmat",unidad:"UR VIII"},{ciudad:"Arroyo Seco",unidad:"UR II"},{ciudad:"Tostado",unidad:"UR XII"},{ciudad:"San Jorge",unidad:"UR XVIII"},{ciudad:"Gálvez",unidad:"UR XV"},{ciudad:"Coronda",unidad:"UR XV"},{ciudad:"Avellaneda",unidad:"UR IX"},{ciudad:"El Trébol",unidad:"UR XVIII"},{ciudad:"Las Parejas",unidad:"UR X"},{ciudad:"Funes",unidad:"UR II"},{ciudad:"Puerto General San Martín",unidad:"UR XVII"},{ciudad:"Ceres",unidad:"UR XIII"},{ciudad:"San Justo",unidad:"UR XVI"},{ciudad:"Laguna Paiva",unidad:"UR I"},{ciudad:"Granadero Baigorria",unidad:"UR II"},{ciudad:"Villa Ocampo",unidad:"UR IX"},{ciudad:"Helvecia",unidad:"UR I"},{ciudad:"San Cristóbal",unidad:"UR XIII"},{ciudad:"Carcarañá",unidad:"UR IV"},{ciudad:"Teodelina",unidad:"UR VIII"},{ciudad:"Humboldt",unidad:"UR XI"}],p={"Santa Fe":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barranquitas","Comisaría 3ra. - Sección Rivadavia","Comisaría 4ta. - Sección Las Flores","Comisaría 5ta. - Sección El Pozo","Comisaría 6ta. - Sección Fomento 9 de Julio"],Rosario:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Puerto Norte","Comisaría 3ra. - Sección Tucumán","Comisaría 4ta. - Sección Echesortu","Comisaría 5ta. - Sección Pichincha","Comisaría 6ta. - Sección Zona Sur","Comisaría 7ma. - Sección La Florida","Comisaría 8va. - Sección Zona Oeste"],Rafaela:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Belgrano","Comisaría 3ra. - Sección 9 de Julio","Comisaría 4ta. - Sección Barrio 2 de Abril","Comisaría 5ta. - Sección Barrio La Cañada"],"Venado Tuerto":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio Santa Fe","Comisaría 3ra. - Sección Malabrigo"],"San Lorenzo":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Zona Norte","Comisaría 3ra. - Sección Villa Felisa"],Firmat:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio Las Delicias"],Casilda:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio San Pedro","Comisaría 3ra. - Sección Barrio Granaderos"],"Cañada de Gómez":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio Sarmiento"],Reconquista:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio La Cortada","Comisaría 3ra. - Sección Barrio El Ombú"],Ceres:["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio San José"],"San Justo":["Comisaría 1ra. - Sección Centro","Comisaría 2da. - Sección Barrio El Paraíso","Comisaría 3ra. - Sección Barrio San Carlos"],Alcorta:["Comisaría 1ra. - Sección Centro"],Totoras:["Comisaría 1ra. - Sección Centro"],"Las Parejas":["Comisaría 1ra. - Sección Centro"]},b=g=>{const j=c.find(x=>x.ciudad===g.target.value);i(j),s(j)},u=g=>{const j=g.target.value;n(j),r(j)};return a.useEffect(()=>{i(""),n(null),s(null),r(null)},[t]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row ",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"¿Cuál es la Localidad?"}),e.jsxs("select",{className:"form-select text-center",onChange:b,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Elige una ciudad..."}),c.map(g=>e.jsx("option",{value:g.ciudad,children:g.ciudad},g.ciudad))]})]})}),e.jsx("div",{className:"col-6",children:o&&e.jsx("div",{className:"mb-3",children:p[o.ciudad]?e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Comisarías disponibles:"}),e.jsxs("select",{className:"form-select text-center",value:l||"_none_",onChange:u,children:[e.jsx("option",{value:"_none_",disabled:!0,children:"Selecciona una comisaría..."}),p[o.ciudad].map((g,j)=>e.jsx("option",{value:g,children:g},j))]})]}):e.jsx("p",{className:"text-light titilar",children:"No hay comisarías cargadas para esta ciudad."})})})]})})},Xi=({ciudadSeleccionada:s,comisariaSeleccionada:r,datosTiempo:t,sumario:o,pdfFile:i,relato:l,people:n})=>{if(!s||!r||!t)return e.jsx("div",{className:"alert alert-danger mt-3 text-center text-dark",children:"Por favor, selecciona la ciudad, comisaría y horario para generar el texto de denuncia."});const c=s.ciudad,p=s.unidad,b=r.split("-")[0].trim(),u=(n==null?void 0:n.filter(j=>j.caridad==="denunciante"))||[],g=u.length>0?u.map((j,x)=>{const d=`${j.nombreApellido} (DNI ${j.dni}, ${j.sexo})`;return u.length===1?d:x===u.length-1?`y ${d}`:d}).join(", ")+(u.length===1?" como denunciante ":" como denunciantes "):"la persona denunciante ";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-light bg-opacity-50 rounded-4 shadow-lg p-4 mt-3",children:[e.jsx("h5",{className:"text-primary mb-3",children:"Denuncia Generada 👮"}),e.jsxs("p",{className:"text-dark fs-5",children:["Siendo aproximadamente las ",e.jsxs("strong",{children:[t," hs"]}),", se presenta ",g,"en la ",e.jsx("strong",{children:b})," de la ciudad de ",e.jsx("strong",{children:c}),", correspondiente a la ",e.jsx("strong",{children:p}),o&&e.jsxs(e.Fragment,{children:[" con número de sumario ",e.jsx("strong",{children:o})]}),", con el fin de radicar una denuncia por hechos que serán detallados a continuación."]}),l&&e.jsx("p",{className:"text-dark mt-2",children:l})]}),e.jsx("div",{className:"mt-4",children:i?e.jsxs("p",{className:"text-secondaryMuiRed fs-6 bg-light bg-opacity-50 rounded-4 shadow-lg p-2",children:["Se ha adjuntado un archivo PDF junto a la denuncia. ",e.jsx("i",{className:"bi bi-file-earmark-pdf ms-1"})]}):e.jsx("p",{className:"text-muted fs-6",children:"No se adjuntó archivo PDF junto a esta denuncia."})})]})},Ki=({ciudadSeleccionada:s,comisariaSeleccionada:r,datosTiempo:t,sumario:o,pdfFile:i,relato:l,people:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"  text-dark text-center p-2 bg-light bg-opacity-50 rounded-4 shadow-lg  text-capitalize  ",children:[e.jsxs("p",{className:"mt-3",children:[e.jsxs("span",{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-primary"}),"👮 Iniciando Denuncia -"]}),e.jsxs("span",{className:" fw-semibold",children:[" ",s.ciudad," - "]}),e.jsxs("span",{children:[t," hs"]})]}),r&&e.jsxs("span",{className:"badge bg-primary me-3",children:[r.split("-")[0].trim()," ",e.jsxs("span",{className:"text-indigo border border-indigo border-2 bg-white rounded-pill px-2 py-1 ms-2",children:[s.unidad," "]})]}),o&&e.jsxs("span",{className:"badge bg-purpleUi me-3",children:["Sumario: ",o]}),i&&e.jsxs("span",{className:"rounded-circle p-2 bg-secondaryMuiRed  ",children:["  ",e.jsx("i",{className:" bi bi-filetype-pdf fs-5  text-light  ",children:" "})]}),l&&e.jsx("span",{className:"badge  bg-teal mt-2 d-inline-block",children:"Posee Relato"}),e.jsx("p",{})]}),n.length>0&&e.jsxs("div",{className:"mt-0",children:[e.jsxs("div",{className:"text-purple",children:[" ",e.jsx("i",{className:"bi bi-arrow-down fs-3"})]}),e.jsx("div",{className:"  text-dark text-center p-2 bg-light bg-opacity-50 rounded-4 shadow-lg  text-capitalize  ",children:n.map((c,p)=>e.jsxs("div",{children:[e.jsx("span",{children:"🧑🏻"}),e.jsx("small",{className:"me-2",children:c.dni}),"  ",e.jsx("small",{className:"me-2",children:c.nombreApellido}),e.jsxs("small",{className:"ms-2",children:[c.sexo==="femenino"&&e.jsx("i",{className:"bi bi-gender-female  text-pink"}),c.sexo==="masculino"&&e.jsx("i",{className:"bi bi-gender-male  text-blue"}),c.sexo==="otros"&&e.jsx("i",{className:"bi bi-gender-ambiguous  text-teal"})]})," ",e.jsx("small",{className:`badge ms-2 text-capitalize ${c.caridad==="denunciante"?"text-bg-dark bg-opacity-50  text-white ":c.caridad==="imputado"?"text-bg-pink":""}`,children:c.caridad}),e.jsx("button",{type:"button",className:"btn text-danger btn-sm ms-3",onClick:()=>handleRemovePerson(c),children:e.jsx("i",{className:"bi bi-trash3"})})]},p))})]})]}),er=({show:s,handleClose:r,people:t,setPeople:o})=>{if(!s)return null;const[i,l]=a.useState({sexo:"otros",nombreApellido:"",dni:"",caridad:"denunciante"}),n=()=>{if(i){const c={sexo:i.sexo||"otros",nombreApellido:i.nombreApellido||"NN",dni:i.dni||"",caridad:i.caridad||"denunciante"};o([...t,c]),console.log("Nueva persona agregada:",c),l({sexo:"otros",nombreApellido:"",dni:"",caridad:"denunciante"}),r()}};return e.jsx("div",{className:"modal fade show bg-dark bg-opacity-75   ",style:{display:"block"},tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-gradiante2",children:[e.jsx("h5",{className:"modal-title",children:"Agregar Persona"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:r})]}),e.jsxs("div",{className:"modal-body text-dark",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-8",children:[e.jsx("label",{htmlFor:"nombreApellido",children:"Nombre y Apellido:"}),e.jsx("input",{id:"nombreApellido",type:"text",className:"form-control",value:i.nombreApellido,onChange:c=>l({...i,nombreApellido:c.target.value})})]}),e.jsxs("div",{className:"col-4 ",children:[e.jsx("label",{htmlFor:"sexo",children:"Sexo:"}),e.jsxs("select",{id:"sexo",className:"form-control",value:i.sexo,onChange:c=>l({...i,sexo:c.target.value}),children:[e.jsx("option",{disabled:!0,children:"Seleccione"}),e.jsx("option",{value:"masculino",children:"👨 Masculino"}),e.jsx("option",{value:"femenino",children:"👩 Femenino"}),e.jsx("option",{value:"otros",children:"🧑‍🤝‍🧑 Otros"})]})]})]}),e.jsxs("div",{className:"row mt-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"dni",children:"DNI:"}),e.jsx("input",{id:"dni",type:"text",className:"form-control",value:i.dni,onChange:c=>l({...i,dni:c.target.value})})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"caridad",children:"Caridad:"}),e.jsxs("select",{id:"caridad",className:"form-control",value:i.caridad,onChange:c=>l({...i,caridad:c.target.value}),children:[e.jsx("option",{value:"denunciante",children:"Denunciante"}),e.jsx("option",{value:"victima",children:"Victima"}),e.jsx("option",{value:"imputado",children:"Imputado"})]})]})]})]}),e.jsxs("div",{className:"modal-footer bg-light",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cerrar"}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:n,children:[e.jsx("i",{className:"bi bi-person-fill-add  mx-1 "}),"     Agregar"]})]})]})})})},Es=[{categoria:"Delitos contra la persona",tipos:["Homicidio","Lesiones","Violencia de género","Abuso sexual","Secuestro"]},{categoria:"Delitos patrimoniales",tipos:["Robos","Hurtos","Estafas","Fraude"]},{categoria:"Delitos contra la administración pública",tipos:["Abuso de autoridad","Soborno","Corrupción"]},{categoria:"Delitos contra la propiedad intelectual",tipos:["Contrabando de mercancías","Violación de derechos de autor"]},{categoria:"Delitos ambientales",tipos:["Contaminación","Tráfico ilegal de especies"]},{categoria:"Delitos contra el orden público",tipos:["Disturbios","Desobediencia a la autoridad"]},{categoria:"Delitos contra la fe pública",tipos:["Falsificación de documentos","Falsificación de moneda"]},{categoria:"Delitos de índole federal",tipos:["Narcotráfico","Trata de personas","Lavado de activos"]},{categoria:"Acoso laboral",tipos:["Acoso moral","Acoso sexual","Discriminación"]},{categoria:"Faltas a la probidad administrativa",tipos:["Soborno","Conflicto de intereses","Uso indebido de fondos públicos"]},{categoria:"Violaciones de derechos humanos",tipos:["Violencia de género","Discriminación","Explotación"]},{categoria:"Violaciones de leyes especiales",tipos:["Delitos electorales","Delitos ambientales"]},{categoria:"Denuncias laborales",tipos:["No pago de salarios","Despido injustificado","Incumplimiento contractual"]},{categoria:"Denuncias relacionadas con la salud",tipos:["Atención médica negligente","Falsificación de medicamentos"]},{categoria:"Delitos rurales y abigeato",tipos:["Robo de ganado","Invasión de propiedad rural","Daños a instalaciones agropecuarias"]},{categoria:"Narcotráfico local",tipos:["Tenencia de estupefacientes","Narcomenudeo","Asociación ilícita vinculada"]},{categoria:"Violencia institucional/policial",tipos:["Apremios ilegales","Detenciones arbitrarias","Uso excesivo de la fuerza","Tortura o tratos inhumanos"]},{categoria:"Bandas criminales y mafias locales",tipos:["Extorsión","Balaceras","Intimidación pública","Amenazas"]},{categoria:"Corrupción local",tipos:["Enriquecimiento ilícito","Licitaciones irregulares","Nepotismo","Tráfico de influencias"]},{categoria:"Conflictos urbanos/barriales",tipos:["Usurpación de viviendas","Toma de terrenos","Violencia vecinal"]},{categoria:"Delitos contra menores",tipos:["Grooming","Abandono de persona","Trabajo infantil"]},{categoria:"Situaciones adicionales",tipos:["Conflicto de intereses","Problemas de salud pública"]}],sr=({show:s,handleClose:r,onAceptar:t})=>{var b;const[o,i]=a.useState(""),[l,n]=a.useState(""),c=((b=Es.find(u=>u.categoria===o))==null?void 0:b.tipos)||[],p=()=>{o&&l?(t(o,l),r()):alert("Debe seleccionar una categoría y un tipo.")};return s?e.jsx("div",{className:"modal fade show bg-dark ",style:{display:"block"},tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-gradiante2",children:[e.jsx("h5",{className:"modal-title text-light",children:"Agregar Categoría del Hecho"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:r})]}),e.jsxs("div",{className:"modal-body text-dark",children:[e.jsxs("div",{className:"mb-3 ",children:[e.jsx("label",{className:"form-label ",children:"Categoría"}),e.jsxs("select",{className:"form-select ",value:o,onChange:u=>{i(u.target.value),n("")},children:[e.jsx("option",{value:"",children:"Seleccionar categoría..."}),Es.map((u,g)=>e.jsx("option",{value:u.categoria,children:u.categoria},g))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Tipo"}),e.jsxs("select",{className:"form-select",value:l,onChange:u=>n(u.target.value),disabled:!o,children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),c.map((u,g)=>e.jsx("option",{value:u,children:u},g))]})]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:p,children:"Aceptar"})]})]})})}):null},ar=({show:s,handleClose:r,onAceptar:t})=>{const[o,i]=a.useState(""),l=c=>{i(c.target.value)},n=()=>{o.trim()?(t(o),r()):alert("Debe escribir un relato.")};return s?e.jsx("div",{className:"modal fade show bg-dark bg-opacity-75",style:{display:"block"},tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-gradiante2",children:[e.jsx("h5",{className:"modal-title text-light",children:"Agregar Relato de la Denuncia"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:r})]}),e.jsx("div",{className:"modal-body text-dark",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-floating text-dark",children:[e.jsx("textarea",{className:"form-control",placeholder:"Completa",id:"relatoDenuncia",value:o,onChange:l,style:{height:"150px"}}),e.jsx("label",{htmlFor:"relatoDenuncia",children:"Relato de la denuncia"})]})})}),e.jsxs("div",{className:"modal-footer d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:n,children:"Aceptar"})]})]})})}):null},tr=()=>{const[s,r]=a.useState(!1),[t,o]=a.useState(!1),[i,l]=a.useState(null),[n,c]=a.useState(null),p=(u,g)=>{l({categoria:u,tipo:g}),r(!1)},b=u=>{const g=u;console.log("Relato recibido:",u),c(g),o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:i&&e.jsx("div",{className:"card text-dark text-center p-2 bg-light bg-opacity-75 rounded-4 shadow-lg my-3",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("span",{className:"card-title",children:"Categoría Seleccionada"}),e.jsxs("p",{className:"card-text fs-5",children:[e.jsx("span",{className:"fw-bold",children:i.categoria})," - ",i.tipo]})]})})}),e.jsx("div",{className:"mb-3",children:n&&e.jsx("div",{className:"card text-dark text-center p-2 bg-light bg-opacity-75 rounded-4 shadow-lg my-3",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("span",{className:"card-title",children:"Realto del Hecho"}),e.jsxs("p",{className:"card-text fs-5",children:[e.jsx("span",{className:"fw-bold",children:n})," - ",n]})]})})}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3 flex-wrap text-white text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",title:"Agregar Categoría",onClick:()=>r(!0),children:e.jsx("i",{className:"bi bi-tags fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:"Categoria"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",title:"Agregar Lugar",children:e.jsx("i",{className:"bi bi-geo-alt-fill fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:"Lugar"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",title:"Agregar Relato",onClick:()=>o(!0),children:e.jsx("i",{className:"bi bi-chat-left-text fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:"Relato"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",title:"Herramienta  Asociar",children:e.jsx("i",{className:"bi bi-person-lines-fill fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:"Asociar"})]})]}),e.jsx(sr,{show:s,handleClose:()=>r(!1),onAceptar:p}),e.jsx(ar,{show:t,handleClose:()=>o(!1),onAceptar:b})]})},ir=()=>{const[s,r]=a.useState([]),t=()=>{r([...s,{categoria:"",tipo:"",lugar:""}])},o=i=>{const l=s.filter((n,c)=>c!==i);r(l)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-footer d-flex flex-row-reverse my-5 ",children:e.jsxs("button",{type:"button",className:"btn text-light text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg   ",onClick:t,children:[e.jsx("i",{className:"bi bi-puzzle mx-2"})," Agregar Hecho/s"]})}),e.jsx("div",{className:"container",children:s.map((i,l)=>e.jsxs("div",{className:"text-dark text-center p-4 bg-light bg-opacity-75 rounded-4 shadow-lg mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("div",{className:"flex-grow-1 text-start fw-bold ",children:e.jsxs("span",{className:"bg-light bg-opacity-75 p-2 rounded-4",children:[" Hecho N° ",l+1]})}),e.jsx("button",{type:"button",className:"btn-close ms-2",onClick:()=>o(l)})]}),e.jsx("div",{className:"mb-3",children:e.jsx(tr,{})})]},l))})]})},rr=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(null),[i,l]=a.useState(null),[n,c]=a.useState(null),[p,b]=a.useState(""),[u,g]=a.useState(null),[j,x]=a.useState(""),[d,h]=a.useState(!1),[m,f]=a.useState([]),[C,v]=a.useState(!1),S=()=>{v(!0)},_=()=>{v(!1)},N=E=>{if(!E)return"";const k=new Date(E),F=k.getHours().toString().padStart(2,"0"),A=k.getMinutes().toString().padStart(2,"0");return`${k.getDate()}/${k.getMonth()+1}/${k.getFullYear()} ${F}:${A}`},y=E=>{const k=E.target.files[0];g(k)},w=()=>{o(null),l(null),c(null),b(""),x(""),g(null),h(E=>!E),localStorage.removeItem("denuncia")};return e.jsx("div",{className:"container  d-flex justify-content-center align-items-center",children:e.jsxs("div",{className:"row w-100",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3 flex-wrap text-white text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("strong",{className:"d-flex align-items-center",children:[s?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-easel me-2"}),"Modo Gráfico"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-file-text me-2"}),"Modo Texto"]})," ACTIVO"]}),e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-arrow-left-right me-2"}),"Cambiar a modo"]}),e.jsx("button",{type:"button",onClick:()=>r(!0),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${s?"active":""}`,title:"Vista en gráfico",children:e.jsx("i",{className:`bi bi-easel fs-5 ${s?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>r(!1),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${s?"":"active"}`,title:"Vista en texto",children:e.jsx("i",{className:`bi bi-card-text fs-5 ${s?"":"titilar"}`})}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",title:"Mostrar/Ocultar filtros",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})]}),e.jsx("div",{className:"text-dark text-center p-4 bg-light bg-opacity-75 rounded-4 shadow-lg mb-4",children:s?e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3",children:[e.jsx("i",{className:"bi bi-easel me-2"}),"Modo Gráfico"]}),t?e.jsx(Ki,{ciudadSeleccionada:t,comisariaSeleccionada:i,datosTiempo:N(n),sumario:p,pdfFile:u,relato:j,people:m}):e.jsxs("p",{className:"fs-6",children:["Listo para trabajar"," ",e.jsx("span",{className:"spinner-grow mx-2 text-light",style:{width:"1rem",height:"1rem"},role:"status"})]})]}):e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3",children:[e.jsx("i",{className:"bi bi-file-text me-2"}),"Modo Texto"]}),e.jsx(Xi,{ciudadSeleccionada:t,comisariaSeleccionada:i,datosTiempo:N(n),sumario:p,pdfFile:u,relato:j,people:m})]})}),e.jsxs("div",{className:"mt-auto small text-light  ",children:[e.jsx("i",{className:"bi bi-info-circle me-1"}),"Ayuda rápida disponible"]})]}),e.jsxs("div",{className:"col-md-6 text-dark text-center p-4 bg-light bg-opacity-50 rounded-4 shadow-lg mb-4 text-capitalize ",children:[e.jsx("div",{className:"text-center p-4 bg-light bg-opacity-75 rounded-4 shadow-lg mb-4 ",children:e.jsxs("h5",{className:"mb-0",children:[" Comenzamos con la denuncia ",e.jsx("i",{className:"bi bi-flag ms-2 "})]})}),e.jsx("form",{children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg text-light ",children:[e.jsx(Qi,{onCiudadChange:E=>{o(E),c(Date.now())},onComisariaChange:E=>l(E),clearSignal:d}),i&&e.jsxs("div",{className:"row mt-text-center",children:[e.jsxs("div",{className:"col-3 mb-3",children:[e.jsx("label",{htmlFor:"numeroSumario",className:"form-label",children:"N° de sumario"}),e.jsx("input",{type:"number",id:"numeroSumario",className:"form-control",placeholder:"Ej: 123/24",value:p,onChange:E=>b(E.target.value)})]}),i&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"col-9 mb-3",children:[e.jsx("label",{htmlFor:"pdfFile",className:"form-label",children:"¿Posee archivo PDF asociado?"}),e.jsx("input",{type:"file",id:"pdfFile",className:"form-control",accept:"application/pdf",onChange:y}),u&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-yellow",children:["Archivo PDF cargado: ",u.name]})})]})})]})]})}),p&&e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3 flex-wrap text-white text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",onClick:()=>r(!0),title:"Agregar Vehiculo",children:e.jsx("i",{className:"bi bi-bicycle  fs-5 "})}),e.jsx("div",{className:"mt-1 small text-white",children:"Vehículo"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",onClick:S,title:"Agregar Personas",children:e.jsx("i",{className:"bi bi-person-fill-add  fs-5 "})}),e.jsx("div",{className:"mt-1 small text-white",children:"Personas"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",onClick:()=>r(!0),title:"Agregar Armas",children:e.jsx("i",{className:"bi bi-shield fs-5 "})}),e.jsx("div",{className:"mt-1 small text-white",children:"Armas"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",onClick:()=>r(!0),title:"Agregar elementos",children:e.jsx("i",{className:"bi bi-boxes fs-5 "})}),e.jsx("div",{className:"mt-1 small text-white",children:"Elementos"})]})]}),e.jsx(ir,{})]}),t&&e.jsx("div",{className:"form-footer d-flex flex-row-reverse mt-3 ",children:e.jsxs("button",{type:"button",className:"btn text-light text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg mb-4 text-capitalize  ",onClick:w,children:[e.jsx("i",{className:"bi bi-trash mx-2"})," Restablecer Campos"]})}),e.jsx(er,{show:C,handleClose:_,people:m,setPeople:f})]})})},lr=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),a.useEffect(()=>{const i=l=>{l.preventDefault(),l.returnValue="Estás a punto de dejar la página. ¿Quieres continuar?"};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Menu Inicio - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Denuncia Simple App ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsxs("div",{className:" d-flexjustify-content-center  text-white gap-5",children:[e.jsx(rr,{}),e.jsx(pe,{})]})]}),e.jsx(Zs,{setThemeBackgroundColor:o})]})})};function nr(){const[s,r]=a.useState({carta:null,fechaHora:"",tipo:"",marca:"",modelo:"",color:"",dominio:"",nroChasis:"",nroMotor:"",qth:"",ciudad:"",titular:"",telefono:"",observaciones:""}),[t,o]=a.useState({}),[i,l]=a.useState(!1),n=x=>{const{name:d,value:h}=x.target;r({...s,[d]:["carta","nroChasis","nroMotor"].includes(d)?h===""?null:Number(h):h})},p=(()=>{const x=localStorage.getItem("user");return x?JSON.parse(x):null})(),b=x=>/^[a-zA-ZáéíóúÁÉÍÓÚüÜ\s]*$/.test(x),u=x=>/^[0-9]*$/.test(x),g=()=>{const x=s.dominio.toUpperCase();if(!x)return!0;const d=/^\d{3}[A-Z]{3}$/,h=/^[A-Z]\d{2}\d[A-Z]{3}$/,m=/^[A-Z]{3}\d{3}$/,f=/^[A-Z]{2}\d{3}[A-Z]{2}$/;return s.tipo==="moto"||s.tipo==="cuatriciclo"?d.test(x)||h.test(x):m.test(x)||f.test(x)},j=async x=>{x.preventDefault(),l(!0);const d={};if(s.tipo||(d.tipo=!0),(!s.dominio||!g())&&(d.dominio=!0),b(s.marca)||(d.marca=!0),b(s.modelo)||(d.modelo=!0),b(s.ciudad)||(d.ciudad=!0),b(s.titular)||(d.titular=!0),u(s.nroChasis)||(d.nroChasis=!0),u(s.nroMotor)||(d.nroMotor=!0),u(s.carta)||(d.carta=!0),Object.keys(d).length>0){o(d),alert("Por favor, complete todos los campos requeridos correctamente ❌"),l(!1);return}try{await Ee(H(P,"db_vehiculos"),{...s,fechaHora:s.fechaHora?Ns.fromDate(new Date(s.fechaHora)):null,createdAt:Ns.now(),usuario:p?p.email:"Desconocido"}),alert(`Captura de Vehículo guardada, Gracias ${p?p.email:"Desconocido"} ✅`),r({fechaHora:"",tipo:"",marca:"",modelo:"",color:"",dominio:"",nroChasis:"",nroMotor:"",qth:"",ciudad:"",titular:"",telefono:"",observaciones:"",carta:null}),o({})}catch(h){console.error("Error guardando vehículo:",h),alert("Error al guardar vehículo ❌")}finally{l(!1)}};return e.jsx("div",{className:"container my-5",children:e.jsxs("div",{className:"card shadow border-0 rounded-3 bg-dark bg-opacity-50 text-white",children:[e.jsx("div",{className:"card-header bg-dark text-white bg-opacity-50 rounded-top-3 p-4",children:e.jsxs("h4",{className:"mb-0",children:[e.jsx("i",{className:"bi bi-car-front-fill me-2"})," Registro de Vehículo"]})}),e.jsx("div",{className:"col-12 mt-3",children:s.dominio&&e.jsx("div",{className:"d-flex justify-content-center",children:s.tipo==="moto"||s.tipo==="cuatriciclo"?(()=>{const x=s.dominio.toUpperCase(),d=/^\d{3}[A-Z]{3}$/,h=/^[A-Z]\d{2}\d[A-Z]{3}$/;if(d.test(x)){const m=x.slice(0,3),f=x.slice(3,6);return e.jsx("div",{className:"card text-center shadow-sm",style:{width:"150px",borderRadius:"0.5rem",backgroundColor:"black",color:"white"},children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.7rem",marginBottom:"0.2rem"},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:m}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:f})]})})}else if(h.test(x)){const m=x.slice(0,3),f=x.slice(3,7);return e.jsx("div",{className:"card text-center shadow-sm",style:{width:"150px",borderRadius:"0.5rem",backgroundColor:"#f5f5f5",color:"black"},children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{className:"bg-primary text-white py-1 mb-2",style:{fontWeight:"bold",fontSize:"0.7rem",marginBottom:"0.2rem"},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:m}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:f})]})})}else return null})():e.jsx("div",{className:"card text-center shadow-sm",style:{width:"250px",borderRadius:"0.5rem",backgroundColor:"#f5f5f5"},children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{className:"bg-primary text-white py-1 mb-2",style:{borderRadius:"0.5rem 0.5rem 0 0",fontWeight:"bold",fontSize:"0.9rem"},children:"ARGENTINA"}),e.jsx("h4",{className:"card-title m-0",style:{letterSpacing:"0.2rem",fontWeight:"bold"},children:s.dominio.toUpperCase()}),e.jsx("p",{className:"card-text m-0",style:{fontSize:"0.8rem",color:"#555"},children:s.ciudad||"Ciudad"})]})})})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("form",{onSubmit:j,className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Numero de Carta"}),e.jsx("input",{type:"number",className:`form-control ${s.carta&&!u(s.carta)?"is-invalid":""}`,name:"carta",value:s.carta,onChange:n,placeholder:"Número de carta "}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten números."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Fecha y Hora"}),e.jsx("input",{type:"datetime-local",className:"form-control",name:"fechaHora",value:s.fechaHora,onChange:n})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Tipo de Vehículo"}),e.jsxs("select",{className:`form-select ${t.tipo?"is-invalid":""}`,name:"tipo",value:s.tipo,onChange:n,children:[e.jsx("option",{value:"",children:"Seleccione un tipo..."}),e.jsx("option",{value:"auto",children:"🚗 Auto"}),e.jsx("option",{value:"moto",children:"🏍️ Moto"}),e.jsx("option",{value:"camioneta",children:"🚙 Camioneta"}),e.jsx("option",{value:"camion",children:"🚚 Camión"}),e.jsx("option",{value:"colectivo",children:"🚌 Colectivo"}),e.jsx("option",{value:"cuatriciclo",children:"🏍️ Cuatriciclo"}),e.jsx("option",{value:"tractor",children:"🚜 Tractor"}),e.jsx("option",{value:"ambulancia",children:"🚑 Ambulancia"}),e.jsx("option",{value:"policial",children:"🚓 Patrullero"}),e.jsx("option",{value:"bomberos",children:"🚒 Bomberos"}),e.jsx("option",{value:"otros",children:"Otros"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Marca"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.marca&&!b(s.marca)?"is-invalid":""}`,name:"marca",value:s.marca,onChange:n}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Modelo"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.modelo&&!b(s.modelo)?"is-invalid":""}`,name:"modelo",value:s.modelo,onChange:n}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Color"}),e.jsxs("select",{className:"form-select",name:"color",value:s.color,onChange:n,children:[e.jsx("option",{value:"",children:"Seleccione un color..."}),e.jsx("option",{value:"blanco",children:"⚪ Blanco"}),e.jsx("option",{value:"negro",children:"⚫ Negro"}),e.jsx("option",{value:"gris",children:"⚪ Gris"}),e.jsx("option",{value:"plata",children:"⚪ Plata"}),e.jsx("option",{value:"rojo",children:"🔴 Rojo"}),e.jsx("option",{value:"bordo",children:"🔴 Bordó"}),e.jsx("option",{value:"azul",children:"🔵 Azul"}),e.jsx("option",{value:"verde",children:"🟢 Verde"}),e.jsx("option",{value:"amarillo",children:"🟡 Amarillo"}),e.jsx("option",{value:"dorado",children:"🟡 Dorado"}),e.jsx("option",{value:"naranja",children:"🟠 Naranja"}),e.jsx("option",{value:"violeta",children:"🟣 Violeta"}),e.jsx("option",{value:"marron",children:"🟤 Marrón"}),e.jsx("option",{value:"otros",children:"Otros"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Dominio"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.dominio&&!g()||t.dominio?"is-invalid":""}`,name:"dominio",placeholder:"Ej: 111AAA o A11BCD",value:s.dominio,onChange:n}),e.jsx("div",{className:"invalid-feedback",children:t.dominio?"Dominio es obligatorio":"Formato inválido. Use "+(s.tipo==="moto"||s.tipo==="cuatriciclo"?"111AAA o A11BCD":"AAA123 o AB123CD")+"."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Nro. Chasis"}),e.jsx("input",{type:"text",className:`form-control ${s.nroChasis&&!u(s.nroChasis)?"is-invalid":""}`,name:"nroChasis",value:s.nroChasis,onChange:n}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten números."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Nro. Motor"}),e.jsx("input",{type:"text",className:`form-control ${s.nroMotor&&!u(s.nroMotor)?"is-invalid":""}`,name:"nroMotor",value:s.nroMotor,onChange:n}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten números."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"QTH Sustracción"}),e.jsx("input",{type:"text",className:"form-control",name:"qth",value:s.qth,onChange:n})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Ciudad"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.ciudad&&!b(s.ciudad)?"is-invalid":""}`,name:"ciudad",value:s.ciudad,onChange:n}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Nombre y Apellido Titular"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.titular&&!b(s.titular)?"is-invalid":""}`,name:"titular",value:s.titular,onChange:n}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Teléfono"}),e.jsx("input",{type:"tel",className:"form-control",name:"telefono",placeholder:"+54 9 341 ...",value:s.telefono,onChange:n})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Observaciones"}),e.jsx("textarea",{className:"form-control",name:"observaciones",rows:"3",value:s.observaciones,onChange:n})]}),e.jsx("div",{className:"col-12 text-end my-5",children:e.jsxs("button",{type:"submit",className:"btn btn-primary px-4",disabled:i,children:[i&&e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),e.jsx("i",{className:"bi bi-save me-2"})," Guardar Captura Vehículo"]})})]})})]})})}const or=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Formulario Vehiculos - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(ye,{Promp:"Nueva Captura ",Promp2:"bi bi-car-front-fill fs-4 "})}),e.jsx("div",{className:"my-5",children:e.jsx(nr,{})})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},cr=()=>e.jsx(e.Fragment,{children:e.jsx(or,{})});function dr(){const[s,r]=a.useState([]),[t,o]=a.useState(""),[i,l]=a.useState(""),[n,c]=a.useState(!0),[p,b]=a.useState({});a.useEffect(()=>{(async()=>{c(!0);try{const f=(await K(H(P,"db_vehiculos"))).docs.map(C=>({id:C.id,...C.data()}));r(f)}catch(m){console.error("Error cargando vehículos:",m)}finally{c(!1)}})()},[]);const u=h=>h?(h.toDate?h.toDate():new Date(h)).toLocaleString():"",g=(h,m=!1)=>{if(!(h!=null&&h.dominio))return null;const f=h.dominio.toUpperCase(),C=m?{width:"100px",fontSize:"0.8rem"}:{width:"140px",fontSize:"1rem"},v=/^\d{3}[A-Z]{3}$/.test(f),S=/^[A-Z]\d{2}\d[A-Z]{3}$/.test(f),_=m?"card text-center shadow-sm bg-light":h.tipo==="moto"||h.tipo==="cuatriciclo"?"card text-center shadow-sm bg-dark text-white":"card text-center shadow-sm bg-light";if((h.tipo||"").toLowerCase()==="moto"||(h.tipo||"").toLowerCase()==="cuatriciclo"){if(v)return e.jsx("div",{className:_,style:{...C},children:e.jsxs("div",{className:"card-body bg-dark text-white p-1",children:[e.jsx("div",{style:{fontSize:m?"0.65rem":"0.8rem",fontWeight:"700"},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:m?"1rem":"1.2rem",fontWeight:"700"},children:f.slice(0,3)}),e.jsx("div",{style:{fontSize:m?"1rem":"1.2rem",fontWeight:"700"},children:f.slice(3,6)})]})});if(S)return e.jsx("div",{className:_,style:{...C},children:e.jsxs("div",{className:"card-body p-1",children:[e.jsx("div",{className:"bg-primary text-white py-1 mb-1",style:{fontSize:m?"0.65rem":"0.8rem",fontWeight:700},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:m?"1rem":"1.2rem",fontWeight:700},children:f.slice(0,3)}),e.jsx("div",{style:{fontSize:m?"1rem":"1.2rem",fontWeight:700},children:f.slice(3)})]})})}return e.jsx("div",{className:"card text-center shadow-sm bg-light",style:{...C},children:e.jsxs("div",{className:"card-body p-1",children:[e.jsx("div",{className:"bg-primary text-white py-1 mb-1",style:{fontWeight:700,fontSize:m?"0.65rem":"0.8rem"},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:m?"0.95rem":"1.15rem",fontWeight:700},children:f})]})})},j=h=>{switch((h||"").toLowerCase()){case"auto":return"bi-car-front-fill";case"moto":return"bi-bicycle";case"cuatriciclo":return"bi-bicycle";case"camioneta":return"bi-truck";case"camion":return"bi-truck";case"colectivo":return"bi-bus-front-fill";case"bicicleta":return"bi-bicycle";case"tractor":return"bi-gear-fill";case"ambulancia":return"bi-truck";case"policial":return"bi-shield-lock-fill";case"bomberos":return"bi-fire";default:return"bi-car-front-fill"}},x=Array.from(new Set(s.map(h=>h.tipo).filter(Boolean))),d=s.filter(h=>t?h.tipo===t:!0).filter(h=>{var m;return i?(m=h.dominio)==null?void 0:m.toUpperCase().includes(i.toUpperCase()):!0});return n?e.jsx("div",{className:"d-flex justify-content-center my-5",children:e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsxs("div",{className:"container my-5",children:[e.jsx("h3",{className:"text-white mb-4 d-flex justify-content-center d-lg-none bg-dark p-3 bg-opacity-25 rounded-pill m-2",children:"Listado de Vehículos"}),e.jsx("div",{className:"mb-4 p-4 bg-light bg-opacity-50 rounded-4 shadow-sm",children:e.jsxs("div",{className:"row g-3 align-items-center",children:[e.jsxs("div",{className:"col-12 col-md-6 d-flex flex-column",children:[e.jsx("label",{className:"form-label text-white",children:"Filtrar Tipo"}),e.jsxs("select",{className:"form-select bg-light bg-opacity-75 text-dark text-center rounded-3 text-capitalize",value:t,onChange:h=>o(h.target.value),children:[e.jsx("option",{value:"",children:"Todos los tipos"}),x.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsxs("div",{className:"col-12 col-md-6 d-flex flex-column",children:[e.jsx("label",{className:"form-label text-white",children:"Buscar Dominio"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control bg-light bg-opacity-75 text-dark text-center",placeholder:"🔍 Buscar por dominio...",value:i,onChange:h=>l(h.target.value)}),i&&e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle m-2",onClick:()=>l(""),title:"Eliminar búsqueda",children:e.jsx("i",{className:"bi bi-trash3-fill"})})]})]})]})}),e.jsx("div",{className:"list-group",children:d.map(h=>{var v,S,_,N,y;const m=!!p[h.id],f=()=>b(w=>({...w,[h.id]:!w[h.id]})),C=w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),f())};return e.jsxs("div",{className:"card shadow-lg border-0 my-4 bg-dark bg-opacity-75 text-white rounded-4 overflow-hidden",children:[e.jsxs("div",{className:"card-header d-flex align-items-center gap-3 px-3 py-3",role:"button",tabIndex:0,"aria-expanded":m,onClick:f,onKeyDown:C,style:{cursor:"pointer",background:"linear-gradient(90deg, rgba(255,255,255,0.03), rgba(0,0,0,0.03))"},children:[e.jsx("div",{className:"d-flex align-items-center",style:{minWidth:110},children:g(h,!0)}),e.jsxs("div",{className:"d-flex flex-column flex-grow-1",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[e.jsxs("h5",{className:"mb-0 fw-bold text-truncate d-none d-md-block",style:{maxWidth:"min(65vw, 600px)"},children:[e.jsx("span",{className:"text-white",children:((v=h.marca)==null?void 0:v.toUpperCase())||"—"})," ",e.jsx("span",{className:"text-white-50",children:((S=h.modelo)==null?void 0:S.toUpperCase())||""})]}),e.jsxs("div",{className:"small text-white-50 mt-1 d-block d-md-none",style:{maxWidth:"min(65vw, 600px)"},children:[e.jsx("span",{className:"fw-bold",children:((_=h.marca)==null?void 0:_.toUpperCase())||"—"})," ",e.jsx("span",{children:((N=h.modelo)==null?void 0:N.toUpperCase())||""})]}),h.tipo&&e.jsxs("span",{className:"badge bg-light text-dark text-capitalize d-flex align-items-center px-2 py-1",children:[e.jsx("i",{className:`bi ${j(h.tipo)} fs-6 me-1`}),e.jsx("span",{className:"small",children:h.tipo})]})]}),e.jsx("div",{className:"small text-white-50 mt-1",children:((y=h.dominio)==null?void 0:y.toUpperCase())||""})]}),e.jsx("div",{className:"ms-3 d-none d-md-block",children:e.jsx("i",{className:`bi ${m?"bi-dash-circle-fill text-light":"bi-plus-circle-fill text-light titilar"} fs-4`,"aria-hidden":"true"})})]}),e.jsxs("div",{className:`collapse ${m?"show":""}`,children:[e.jsxs("div",{className:"card-body text-light",children:[e.jsxs("div",{className:"row g-3 text-capitalize",children:[e.jsxs("div",{className:"col-12 col-md-6  text-center",children:[h.color&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-palette2 me-2"})," ",e.jsx("strong",{children:"Color:"})," ",h.color]}),h.nroChasis&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-hammer me-2"})," ",e.jsx("strong",{children:"Chasis:"})," ",h.nroChasis]}),h.nroMotor&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-cpu me-2"})," ",e.jsx("strong",{children:"Motor:"})," ",h.nroMotor]})]}),e.jsxs("div",{className:"col-12 col-md-6 text-center",children:[h.ciudad&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-geo-alt me-2"})," ",e.jsx("strong",{children:"Ciudad:"})," ",h.ciudad]}),h.titular&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-person-badge me-2"})," ",e.jsx("strong",{children:"Titular:"})," ",h.titular]}),h.telefono&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-telephone-forward me-2"})," ",e.jsx("strong",{children:"Teléfono:"})," ",h.telefono]})]})]}),h.qth&&e.jsxs("div",{className:"alert bg-white bg-opacity-75 mt-3 mb-0 text-center text-dark",children:[e.jsx("i",{className:"bi bi-exclamation-triangle me-2"})," ",e.jsx("strong",{children:"Sustracción QTH:"})," ",h.qth]}),h.observaciones&&e.jsxs("div",{className:"alert bg-white bg-opacity-50 mt-3 mb-0 text-center",children:[e.jsx("i",{className:"bi bi-journal-text me-2"})," ",e.jsx("strong",{children:"Observaciones:"})," ",h.observaciones]})]}),e.jsxs("div",{className:"card-footer bg-dark bg-opacity-50 text-center text-white small",children:[e.jsx("i",{className:"bi bi-person-circle me-1"})," Registrado por:"," ",e.jsx("span",{className:"fw-semibold",children:"911"})," |"," ",e.jsx("i",{className:"bi bi-calendar-date me-1"})," ",u(h.fechaHora)]})]})]},h.id)})})]})}const mr=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Captura  Vehiculos - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(ye,{Promp:"Capturas de Vehiculos ",Promp2:"bi bi-car-front-fill fs-4 "})}),e.jsx("div",{className:"my-5",children:e.jsx(dr,{})})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},ur=()=>e.jsx(e.Fragment,{children:e.jsx(mr,{})}),Fs=({onImageSave:s})=>{const[r,t]=a.useState(!1),[o,i]=a.useState(null),[l,n]=a.useState(""),c=a.useRef(null),[p,b]=a.useState(!1),[u,g]=a.useState({x:0,y:0}),[j,x]=a.useState({x:0,y:0}),[d,h]=a.useState(1),m=a.useRef(null),f=w=>{b(!0);const{offsetX:E,offsetY:k}=w.nativeEvent;x({x:E,y:k})},C=w=>{if(!p||!o)return;const{offsetX:E,offsetY:k}=w.nativeEvent;g(F=>({x:F.x+(E-j.x),y:F.y+(k-j.y)})),x({x:E,y:k})},v=()=>{b(!1)},S=()=>{t(!1),n(""),i(null),g({x:0,y:0}),h(1);const w=document.getElementById("file-input");w&&(w.value=""),m.current&&(URL.revokeObjectURL(m.current),m.current=null)},_=()=>t(!0),N=w=>{const E=w.target.files[0];if(E){if(!E.type.startsWith("image/")){n("Por favor, selecciona un archivo de imagen.");return}if(E.size>5*1024*1024){n("La imagen debe ser menor de 5 MB.");return}const k=URL.createObjectURL(E);m.current=k,i(k),n("")}},y=()=>{if(!o||!c.current){n("Por favor, selecciona una imagen antes de guardar.");return}const w=c.current,E=w.width,k=w.height,F=document.createElement("canvas");F.width=E,F.height=k;const A=F.getContext("2d"),L=new Image;L.src=o,L.onload=()=>{A.clearRect(0,0,E,k),A.drawImage(L,u.x,u.y,L.width*d,L.height*d);const U=F.toDataURL("image/jpeg",.92);s(U),S()}};return a.useEffect(()=>{if(o&&c.current){const w=c.current,E=w.getContext("2d"),k=new Image;k.src=o,k.onload=()=>{E.clearRect(0,0,w.width,w.height),E.drawImage(k,u.x,u.y,k.width*d,k.height*d)}}},[o,u,d]),a.useEffect(()=>{const w=c.current,E=k=>{if(k.preventDefault(),!o)return;const F=1.1,A=k.deltaY<0?d*F:d/F;h(Math.max(A,.1))};if(w)return w.addEventListener("wheel",E,{passive:!1}),()=>{w.removeEventListener("wheel",E)}},[o,d]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:e.jsx("button",{type:"button",onClick:_,className:"btn  text-light  ",title:"Crear nuevo",children:e.jsx("i",{className:"bi bi-plus-circle-fill display-1  "})})}),e.jsx("div",{className:`modal fade  bg-dark ${r?"show":""}`,style:{display:r?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!r,children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-gradiante2",children:e.jsx("h5",{className:"modal-title text-light  ",id:"modalLabel ",children:"Selecciona tu imagen  / Edita "})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{id:"file-input",type:"file",className:"form-control",accept:"image/*",onChange:N}),o&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"d-flex justify-content-center mt-3",children:e.jsx("canvas",{ref:c,className:"shadow",onMouseDown:f,onMouseMove:C,onMouseUp:v,onMouseLeave:v,width:500,height:500,style:{border:"1px solid black",cursor:p?"grabbing":"grab"}})}),e.jsxs("p",{className:"alert alert-light text-redUi1 fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-pink",style:{width:"1rem",height:"1rem"},role:"status"}),"Para hacer zoom en la imagen, simplemente usa el scroll (la rueda) de tu mouse. 🖲️"]}),e.jsxs("p",{className:"alert alert-light text-indigoMui fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-indigoMui",style:{width:"1rem",height:"1rem"},role:"status"}),"Mantén presionado el botón del mouse para arrastrar la imagen. 🖱️"]})]}),l&&e.jsx("div",{className:"mt-2 text-danger",children:l})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:S,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn text-white bg-indigoMui",onClick:y,children:"Guardar Imagen"})]})]})})}),e.jsx("div",{className:`modal-backdrop fade ${r?"show":""}`,style:{display:r?"block":"none"}})]})},hr=({onSubmit:s,savedImage:r,resetImage:t,formRef:o})=>{const[i,l]=a.useState(()=>{const d=localStorage.getItem("formData");return d?JSON.parse(d):{nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,captura:!1,prioridad:5,alertaParaderoCaptura:"",montoRecompensa:null}}),[n,c]=a.useState({}),[p,b]=a.useState(!1);a.useEffect(()=>{localStorage.setItem("formData",JSON.stringify(i))},[i]);const u=({target:{id:d,value:h,type:m,checked:f}})=>{l(C=>{let v={...C,[d]:m==="checkbox"?f:h};if(d==="alertaParaderoCaptura")switch(h){case"paradero":v={...v,prioridad:2,paradero:!0,alerta:!1};break;case"evadido":v={...v,prioridad:3,captura:!0,alerta:!0};break;case"prioritaria":v={...v,prioridad:4,alerta:!1};break;default:v={...v,prioridad:1,paradero:!1,alerta:!1};break}return v}),c(C=>({...C,[d]:""}))},g=()=>{const d={};return r?(i.nombreApellido.match(/[A-Za-zÑñÁáÉéÍíÓóÚú\s]+/)||(d.nombreApellido="Ingrese solo letras y espacios."),i.documento&&i.documento.length<6&&(d.documento="El número de documento debe tener al menos 6 caracteres."),(!i.montoRecompensa||i.montoRecompensa.length<7)&&(d.montoRecompensa="El monto de recompensa debe tener al menos 7 dígitos."),c(d),Object.keys(d).length===0):(alert("Debes cargar una imagen antes de enviar el formulario."),!1)},j=async d=>{if(d.preventDefault(),!g())return;if(!window.confirm("¿Estás seguro de que deseas enviar este formulario?")){alert("El envío ha sido cancelado.");return}b(!0);try{const m={...i,imagen:r};if(typeof s=="function")await s(m),alert("Formulario enviado correctamente.");else throw new Error("onSubmit no es una función válida")}catch(m){console.error(m),alert("Hubo un error al enviar el formulario.")}finally{b(!1),x()}},x=()=>{localStorage.removeItem("formData"),l({nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,prioridad:5,alertaParaderoCaptura:"",montoRecompensa:0}),c({}),t()};return e.jsxs("div",{className:" mt-3",children:[p&&e.jsx(ee,{})," ",e.jsxs("form",{ref:o,onSubmit:j,children:[e.jsx(Ue,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-person-fill text-greenUi me-3 p-1"})," Nombre y Apellido"]}),id:"nombreApellido",type:"text",value:i.nombreApellido,error:n.nombreApellido,onChange:u,required:!0,className:"text-center"}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Ue,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-building text-greenUi me-3 p-1"})," Entidad Solicita Captura"]}),id:"entidad",type:"text",value:i.entidad,onChange:u,className:"col"}),e.jsx(Ue,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-telephone text-greenUi me-3 p-1"})," Número de Contacto"]}),id:"numeroContacto",type:"tel",value:i.numeroContacto,error:n.numeroContacto,onChange:u,className:"col"})]}),e.jsx(Ds,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil text-greenUi me-3 p-1"})," Info Adicional"]}),id:"descripcionFisica",value:i.descripcionFisica,onChange:u,className:"text-center"}),e.jsx(Ds,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil-square text-greenUi me-3 p-1"})," ","Motivo Captura"," "]}),id:"motivoCaptura",value:i.motivoCaptura,onChange:u,className:"text-center"}),e.jsx(xr,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill p-1 text-white me-3 titilar "})," ","Selecciona una Tipo de Alerta"]}),id:"alertaParaderoCaptura",value:i.alertaParaderoCaptura,options:[{label:"Captura Recompensa 💰",value:"normal"}],onChange:u}),e.jsx(Ue,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-cash-coin text-warning me-3 p-1"})," Monto de Recompensa"]}),id:"montoRecompensa",type:"number",value:i.montoRecompensa,error:n.montoRecompensa,onChange:u,className:"text-center",required:!0}),e.jsxs("div",{className:"d-flex justify-content-end pt-4  mt-3",children:[e.jsxs("button",{type:"button",onClick:x,className:"btn btn-danger text-light shadow",children:[e.jsx("i",{className:"bi bi-x-circle "})," Limpiar Formulario"]}),e.jsxs("button",{type:"submit",className:"btn btn-primary2 shadow ms-2",disabled:p,children:[e.jsx("i",{className:"bi bi-send"})," Enviar Formulario"]})]})]})]})},Ue=({label:s,id:r,type:t="text",value:o,error:i,onChange:l,className:n="",required:c=!1})=>e.jsxs("div",{className:`mb-4 ${n}`,children:[e.jsx("span",{htmlFor:r,className:"input-group-text bg-light bg-opacity-25 border-white  text-white text-center mb-1",children:s}),e.jsx("input",{type:t,className:`form-control bg-transparent text-white border-white ${i?"is-invalid":""}`,id:r,value:o,onChange:l,required:c}),e.jsx("div",{className:"invalid-feedback text-light",children:i})]}),xr=({label:s,id:r,value:t,options:o,onChange:i,className:l=""})=>e.jsxs("div",{className:`mb-5 ${l} text-center`,children:[e.jsx("span",{htmlFor:r,className:`input-group-text bg-light bg-opacity-25 text-white text-center d-flex justify-content-center shadow ${r==="alertaParaderoCaptura"?"bg-danger text-white":""}`,children:s}),e.jsx("select",{className:"form-select text-center",id:r,value:t,onChange:i,style:{color:"white",backgroundColor:"transparent",borderColor:"white"},children:o.map(({label:n,value:c})=>e.jsx("option",{value:c,style:{backgroundColor:"#5F3F8B",color:"white"},children:n},c))})]}),Ds=({label:s,id:r,value:t,onChange:o,className:i=""})=>e.jsxs("div",{className:`form-floating mb-4 ${i}`,children:[e.jsx("textarea",{className:"form-control bg-transparent text-white border-white",id:r,value:t,onChange:o,style:{height:"100px"},placeholder:" "}),e.jsx("label",{htmlFor:r,className:"text-",children:s})]}),br=()=>{const[s,r]=a.useState(null),[t,o]=a.useState(!1),[i,l]=a.useState(!1),[n,c]=a.useState(!1),p=a.useRef(null);a.useEffect(()=>{const x=()=>{o(window.innerWidth<576)};return window.addEventListener("resize",x),x(),()=>window.removeEventListener("resize",x)},[]);const b=x=>{r(x),l(!1)},u=async x=>{var C;const d=()=>{const v=new Date,S=String(v.getDate()).padStart(2,"0"),_=String(v.getMonth()+1).padStart(2,"0"),N=String(v.getFullYear()).slice(-2);return`${S}/${_}/${N}`},m=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),f={documento:x.documento,nombre_apellido:x.nombreApellido.toLowerCase(),sexo:x.sexo,entidad:x.entidad,numero_contacto:x.numeroContacto,descripcion_fisica:x.descripcionFisica,motivo_captura:x.motivoCaptura,base64:s,date:d(),usuario:m?m.email:"Desconocido",prioridad:x.prioridad,alerta:x.alerta||!1,paradero:x.paradero||!1,montoRecompensa:x.montoRecompensa?Number(x.montoRecompensa):!1};try{await Ee(H(P,"db_buscados"),f),console.log("Datos guardados en Firebase:",f),(C=p.current)==null||C.reset(),g()}catch(v){console.error("Error al guardar los datos en Firebase:",v)}},g=()=>{r(null),l(!1),c(!1)},j=x=>{const d=x.target.files[0];if(d){const h=new FileReader;h.onloadend=()=>{const m=new Image;m.onload=()=>{const f=document.createElement("canvas"),C=f.getContext("2d"),v=500,S=500;let _=m.width,N=m.height;_>N?_>v&&(N*=v/_,_=v):N>S&&(_*=S/N,N=S),f.width=_,f.height=N,C.drawImage(m,0,0,_,N);const y=f.toDataURL("image/jpeg");r(y),l(!1)},m.src=h.result},h.readAsDataURL(d)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-lg",children:n?e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10 col-lg-8 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Formulario"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-ui-checks fs-4 text-dark"})})]}),e.jsx("p",{className:"mt-2 text-white",children:"Gestioná tus registros de ingreso."}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-5 mb-4",children:e.jsxs("div",{className:"text-center position-relative",children:[!i&&s&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-secondaryM text-purple position-absolute end-0 top-0 mt-5 m-2","aria-label":"Editar",onClick:()=>{r(null),l(!0)},children:e.jsx("i",{className:"bi bi-pencil-fill"})}),e.jsx("h5",{className:"text-light mt-4",children:"Vista previa "}),e.jsx("img",{src:s,alt:"Captura subida",className:"img-fluid rounded-4 border border-light shadow mt-2",style:{maxWidth:"100%"}})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-light",children:"Subí una nueva imagen"}),t?e.jsx("div",{className:"mb-3 w-100 px-3",children:e.jsx("input",{type:"file",className:"form-control bg-gradiante2 text-white",onChange:x=>{j(x)}})}):e.jsx(Fs,{onImageSave:x=>{b(x)}})]})]})}),e.jsx("div",{className:"col-12 col-md-7",children:e.jsx(hr,{onSubmit:u,savedImage:s,resetImage:g,formRef:p})})]})]})})})}):e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center py-5 px-3 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 display-5 fw-bold text-white",children:[e.jsx("i",{className:"bi bi-image me-2"}),"Selecciona imagen para comenzar"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 flex-column flex-md-row",children:t?e.jsxs("div",{className:"mb-3 w-100 px-3",children:[e.jsxs("label",{className:"form-label fw-semibold text-white",children:[e.jsx("i",{className:"bi bi-upload me-2"}),"Subir solo imagen"]}),e.jsx("input",{type:"file",className:"form-control bg-light text-dark rounded-3 shadow-sm",onChange:x=>{j(x),c(!0)}})]}):e.jsx("div",{className:"p-3 bg-body bg-opacity-10 rounded-4 shadow-sm",children:e.jsx(Fs,{onImageSave:x=>{b(x),c(!0)}})})})]})})})})},pr=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Formulario Buscados - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsx("div",{className:"my-5",children:e.jsx(br,{})})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},gr=()=>e.jsx(e.Fragment,{children:e.jsx(pr,{})}),jr=({show:s,onClose:r,datos:t})=>{a.useState(!1);const[o,i]=a.useState(!1);a.useEffect(()=>{if(s){window.history.pushState({modalOpen:!0},"");const n=c=>{r()};return window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}}},[s]);const l=n=>{if(!n)return;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=`tel:${n}`:alert(`Tu dispositivo no puede realizar llamadas. Número: ${n}`)};return s?e.jsxs("div",{className:"modal fade show bg-dark",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog   ",children:e.jsxs("div",{className:"modal-content  bg-light  border-0",children:[e.jsx("div",{className:"modal-header",children:e.jsx("button",{type:"button",className:"btn-close ",onClick:r})}),e.jsxs("div",{className:"modal-body text-center ",children:[e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>i(!0),children:[e.jsx("div",{className:"fs-4 position-absolute top-0 start-50 translate-middle-x bg-secondary  text-center w-100 rounded-top small",style:{opacity:.8},children:t.documento}),e.jsx("img",{src:t.base64&&t.base64.trim()!==""&&t.base64.trim()!=="null"?t.base64:"https://via.placeholder.com/150",className:"img-fluid mb-3 shadow-lg rounded-2 ",alt:t.nombre_apellido||"Imagen no disponible",style:{width:"500px",height:"auto"},loading:"lazy"}),e.jsx("div",{className:"display-6 position-absolute text-capitalize bottom-0 start-50 translate-middle-x bg-primary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:t.nombre_apellido})]}),e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 text-dark",children:["Datos de la Solicitud ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-primary border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2",children:"Motivo Captura"})}),t.motivo_captura&&t.motivo_captura.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.motivo_captura}):null,(!t.motivo_captura||t.motivo_captura.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-outline-secondary  mx-4",onClick:()=>alert("Solicitud enviada. La información que requirió se le informará a los cargadores de captura para su carga. 🏤"),children:["Solicitar Información ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary2 text-white me-2",children:"Información Adicional"})}),t.descripcion_fisica&&t.descripcion_fisica.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.descripcion_fisica}):null,(!t.descripcion_fisica||t.descripcion_fisica.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-outline-secondary  mx-4",onClick:()=>alert("Solicitud enviada. La información que requirió se le informará a los cargadores de captura para su carga. 🏤"),children:["Solicitar Información ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("hr",{className:"border border-white border-1 opacity-75"}),t.entidad&&t.entidad.trim()!==""&&e.jsxs("span",{className:"badge text-bg-primaryM text-white my-1 text-capitalize mx-3 p-2",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Solicita - ",t.entidad]}),t.numero_contacto&&t.numero_contacto.trim()!==""&&e.jsx("div",{className:"d-flex justify-content-center my-3",children:e.jsxs("button",{className:"badge btn text-bg-primaryMuiBlue text-white text-capitalize p-2 d-flex align-items-center gap-2 mx-auto",onClick:()=>l(t.numero_contacto),children:[e.jsx("i",{className:"bi bi-telephone-forward-fill"}),"Contactar ",t.numero_contacto]})})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),o&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark ",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>i(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:n=>n.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>i(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/40",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"200vw",maxHeight:"200vh",objectFit:"contain"}})]})})})]}):null},fr=({show:s,onClose:r,datos:t})=>{var c;const[o,i]=a.useState(!1),[l,n]=a.useState(!1);return a.useEffect(()=>{if(location.pathname==="/dashboard"){const p=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",p),()=>{window.removeEventListener("popstate",p)}}},[r]),s?e.jsxs("div",{className:"modal fade show bg-dark",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered ",children:e.jsxs("div",{className:"modal-content bg-gradiante2 border-0",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title text-center text-white fw-semibold",children:"Detalles de la Captura 👮"}),e.jsx("button",{type:"button",className:"btn-close btn-close-dark",onClick:r})]}),e.jsxs("div",{className:"modal-body text-white",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-start mb-3",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>n(!0),children:[e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:t.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow mt-2",style:{width:"130px",height:"130px",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:"Capturado"})]})}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("small",{className:"d-flex gap-2 justify-content-end mb-1",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center text-capitalize",value:t.nombre_apellido,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center",value:t.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end",children:["Detalles de la Captura ",e.jsx("i",{className:"bi bi-journal-text"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),((c=t.capturas_informacion_estados)==null?void 0:c.length)>0?e.jsxs(e.Fragment,{children:[t.capturas_informacion_estados.slice().reverse().slice(0,o?t.capturas_informacion_estados.length:1).map((p,b)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:`rounded-pill px-3 py-2 text-white ${p.captura_fecha?"bg-primary":"bg-secondaryMuiRed"}`,children:[e.jsx("strong",{className:"me-3",children:p.captura_autor||"Sistema"}),p.captura_fecha||p.captura_quita_fecha]}),p.captura_fecha&&e.jsxs("p",{children:["Relato: ",e.jsx("span",{className:"fw-semibold",children:p.captura_descripcion||"Sin relato"})]})]},b)),t.capturas_informacion_estados.length>1&&e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-link text-white text-decoration-none",onClick:()=>i(!o),children:o?"Ver menos":"Ver historial completo"})})]}):e.jsx("p",{className:"text-center",children:"No hay detalles de captura disponibles."})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),l&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>n(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>n(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain"}})]})})})]}):null};function Nr({setGridView:s,gridView:r,sortOrder:t,setSortOrder:o,sortBy:i,setSortBy:l,searchTerm:n,setSearchTerm:c,priorityFilter:p,setPriorityFilter:b,currentPage:u,handlePriorityChange:g,entidadSeleccionada:j,setEntidadSeleccionada:x,entidades:d}){const[h,m]=a.useState(!1),f=()=>{m(!1),l("fecha"),o("desc"),b([])};return e.jsx("div",{className:"container-lg  ",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center ",children:e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Recompensas"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-currency-exchange fs-4 text-dark"})})]}),e.jsx("form",{className:"d-flex justify-content-center my-4",onSubmit:C=>C.preventDefault(),children:e.jsxs("div",{className:"input-group input-group-lg w-100",style:{maxWidth:"600px"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar en Rosario...","aria-label":"Buscar",value:n,onChange:C=>c(C.target.value)}),e.jsx("button",{className:"btn btn-outline-light",type:"submit",children:e.jsx("i",{className:"bi bi-search"})})]})}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsx("button",{type:"button",onClick:()=>s(!0),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"active":""}`,title:"Vista en cuadrícula",children:e.jsx("i",{className:`bi bi-grid-3x3-gap-fill fs-5 ${r?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>s(!1),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"":"active"}`,title:"Vista en lista",children:e.jsx("i",{className:`bi bi-list fs-5 ${r?"":"titilar"}`})}),e.jsx("button",{type:"button",onClick:()=>m(!h),className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",title:"Mostrar/Ocultar filtros",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})]}),h&&e.jsxs("div",{className:"card shadow  bg-dark p-4 bg-opacity-25  rounded-4 shadow-lg text-white",style:{backgroundColor:"transparent",color:"white"},children:[e.jsxs("div",{className:"card-header fw-semibold  bg-light bg-opacity-25 rounded-4  p-3 text-ligh d-flex justify-content-between align-items-center ",children:[e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-sort-alpha-down mx-1"})," Filtros de Galería"]}),e.jsx("i",{className:"bi bi-x-lg cursor-pointer",onClick:f,style:{cursor:"pointer"}})]}),e.jsxs("div",{className:"card-body ",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select   border-white shadow-sm text-center ",value:i,onChange:C=>l(C.target.value),children:[e.jsx("option",{value:"fecha",children:"Fecha"}),e.jsx("option",{value:"nombreApellido",children:"Nombre"})]}),e.jsx("label",{className:" p-2",children:"Filtrar por"})]})}),e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating ",children:[e.jsx("select",{className:"form-select  border-white shadow-sm text-center",value:t,onChange:C=>o(C.target.value),children:i==="fecha"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"Antiguo - Reciente"}),e.jsx("option",{value:"desc",children:"Reciente - Antiguo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"A - Z"}),e.jsx("option",{value:"desc",children:"Z - A"})]})}),e.jsx("label",{className:" p-2",children:"Ordenar Prioridad"})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12 col-md-12 mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select bg-light rounded-4 shadow-sm text-center pe-5",value:j,onChange:C=>x(C.target.value),children:[e.jsx("option",{value:"",children:"Todas las Entidades"}),d.map((C,v)=>e.jsx("option",{value:C,children:C},v))]}),e.jsx("label",{className:"p-2 m-2",children:"Filtrar por Entidad"})]}),j&&e.jsx("button",{type:"button",className:"btn btn-sm btn-danger text-white position-absolute top-50 end-0 translate-middle-y me-3 shadow-sm rounded-circle",onClick:()=>x(""),title:"Quitar filtro",children:e.jsx("i",{className:"bi bi-x-lg"})})]})})})]})]})]})})})})}const vr=({informeId:s})=>{const[r,t]=a.useState(null),[o,i]=a.useState(!1),[l,n]=a.useState(0);a.useEffect(()=>{const b=localStorage.getItem("user");if(b){const u=JSON.parse(b);t(u.email),c(u.email)}},[s]);const c=async b=>{var j,x;const u=O(P,"db_personas",s),g=await ke(u);if(g.exists()){const d=g.data();n(((j=d.me_sirve)==null?void 0:j.length)||0),i((x=d.me_sirve)==null?void 0:x.includes(b))}},p=async()=>{if(!r)return;const b=O(P,"db_personas",s);await re(b,{me_sirve:o?Ae(r):_e(r)}),i(!o),n(u=>o?u-1:u+1)};return e.jsx("button",{onClick:p,className:"btn btn-outline-light bg-dark bg-opacity-50 d-flex align-items-center justify-content-center rounded-circle",style:{width:"50px",height:"50px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Me sirve",children:e.jsx("i",{className:`bi ${o?"bi-hand-thumbs-up-fill text-secondaryM":"bi-hand-thumbs-up"} fs-4`})})},yr=({informeId:s,objeto:r})=>{const[t,o]=a.useState(!1),[i,l]=a.useState(""),[n,c]=a.useState([]),[p,b]=a.useState(0),[u,g]=a.useState(!0);a.useEffect(()=>{r&&Array.isArray(r.InfoUsuario)?(c(r.InfoUsuario),b(r.InfoUsuario.length)):(c([]),b(0))},[r]),a.useEffect(()=>{document.body.style.overflow=t?"hidden":"auto"},[t]),a.useEffect(()=>{if(!t)return;window.history.pushState({modalOpen:!0},"");const x=()=>o(!1);return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[t]);const j=async()=>{const x=localStorage.getItem("user"),d=x?JSON.parse(x):null;if(!d||!i.trim()){alert("No se puede enviar un comentario vacío.");return}const h={comentario:i.trim(),usuario:d.email,timestamp:new Date().toISOString()};try{const m=O(P,"db_buscados",s);await re(m,{InfoUsuario:_e(h)}),c(f=>[h,...f]),b(f=>f+1),l(""),alert("Comentario enviado correctamente ✅"),o(!1)}catch(m){console.error("Error al guardar el comentario:",m),alert("Error al enviar el comentario.")}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("button",{className:"btn btn-outline-light bg-dark bg-opacity-50 d-flex align-items-center justify-content-center p-3 rounded-circle",style:{width:"50px",height:"50px"},onClick:()=>o(!0),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Informar",children:e.jsx("i",{className:"bi bi-chat-dots fs-4 text-white"})}),p>0&&e.jsx("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",style:{fontSize:"0.7rem"},children:p})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",style:{zIndex:1055},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header d-flex justify-content-between align-items-center border-0",children:[e.jsx("h5",{className:"modal-title",children:u?"Agregar información":"Comentarios"}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm text-primary me-2",onClick:()=>g(!u),children:u?`Ver comentarios (${n.length})`:"Agregar información"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>o(!1)})]})]}),e.jsx("div",{className:"modal-body",children:u?e.jsx("textarea",{className:"form-control",placeholder:"Escribí tu comentario...",value:i,onChange:x=>l(x.target.value),rows:4}):n.length>0?e.jsx("ul",{className:"list-group",children:n.slice().reverse().map((x,d)=>{const m=(x.usuario||"Usuario").charAt(0).toUpperCase(),f=x.timestamp?new Date(x.timestamp).toLocaleString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return e.jsxs("li",{className:"list-group-item d-flex align-items-center my-2 shadow border-0",children:[e.jsx("span",{className:"rounded-circle bg-primary text-white d-flex justify-content-center align-items-center me-3",style:{width:"40px",height:"40px",flexShrink:0},children:m}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[x.comentario,e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:f})]})]},d)})}):e.jsx("p",{children:"No hay comentarios aún."})}),e.jsxs("div",{className:"modal-footer border-0",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>o(!1),children:"Cerrar"}),u&&e.jsx("button",{className:"btn btn-primary",onClick:j,children:"Guardar / Informar"})]})]})})}),e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100",style:{backgroundColor:"rgba(0,0,0,0.75)",zIndex:1050},onClick:()=>o(!1)})]})]})},Ke=15;function Ps(s){const[r,t,o]=s.split("/").map(Number),i=2e3+o;return new Date(i,t-1,r)}const wr=()=>{const[s,r]=a.useState(!1),[t,o]=a.useState(!1),[i,l]=a.useState(!1),[n,c]=a.useState(!1),[p,b]=a.useState([]),[u,g]=a.useState(1),[j,x]=a.useState(0),[d,h]=a.useState(null),[m,f]=a.useState(null),[C,v]=a.useState(null),[S,_]=a.useState(null),[N,y]=a.useState(!0),[w,E]=a.useState(!1),[k,F]=a.useState(null),[A,L]=a.useState("fecha"),[U,Y]=a.useState("desc"),[q,W]=a.useState(""),[le,me]=a.useState(!0),[de,ae]=a.useState(""),[B,te]=a.useState(!0),[ie,ne]=a.useState([]),[oe,he]=a.useState(""),$=async()=>{try{y(!0);const R=await K(H(P,"db_buscados")),X=[],ce=new Set;R.forEach(we=>{const Se={id:we.id,...we.data()};X.push(Se),Se.entidad&&ce.add(Se.entidad)}),b(X),ne(Array.from(ce)),x(Math.ceil(X.length/Ke))}catch(R){console.error("Error obteniendo documentos: ",R),F("No se pudieron cargar los documentos.")}finally{y(!1)}};a.useEffect(()=>{$()},[]);const M=R=>{const X=R.target.value;ae(ce=>ce.includes(X)?ce.filter(we=>we!==X):[...ce,X])},G=a.useMemo(()=>p.filter(R=>{var Se;const X=(Se=R.nombre_apellido)==null?void 0:Se.toLowerCase().includes(q.toLowerCase()),ce=de.length===0||de.includes(String(R.prioridad)),we=!oe||R.entidad===oe;return X&&ce&&we}),[p,q,de,oe]),z=a.useMemo(()=>G.sort((R,X)=>{if(R.prioridad===3&&X.prioridad!==3)return-1;if(X.prioridad===3&&R.prioridad!==3)return 1;if(R.prioridad===4&&X.prioridad!==4)return-1;if(X.prioridad===4&&R.prioridad!==4)return 1;if(A==="fecha"){const ce=Ps(R.date)||0,we=Ps(X.date)||0;return U==="asc"?ce-we:we-ce}else return U==="asc"?R.nombre_apellido.localeCompare(X.nombre_apellido):X.nombre_apellido.localeCompare(R.nombre_apellido)}),[G,A,U]),V=(u-1)*Ke,D=z.slice(V,V+Ke),Q=()=>{u<j&&(E(!0),g(R=>R+1),setTimeout(()=>E(!1),500))},J=()=>{u>1&&(E(!0),g(R=>R-1),setTimeout(()=>E(!1),500))},I=R=>{_(!0),f(R)},Z=()=>{h(null),_(null)},T=R=>{v(!0),f(R)},se=()=>v(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Nr,{setGridView:me,gridView:le,sortOrder:U,sortBy:A,setSortOrder:Y,setSortBy:L,searchTerm:q,setSearchTerm:W,showFilters:B,priorityFilter:de,setPriorityFilter:ae,currentPage:u,handlePriorityChange:M,entidadSeleccionada:oe,setEntidadSeleccionada:he,entidades:ie}),e.jsxs("div",{className:"container-lg",children:[N&&e.jsx(ee,{leyendaSet:"Cargado Base - Cx2"}),k&&e.jsx("div",{className:"alert alert-danger",children:k}),w?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(ee,{})}):e.jsx("div",{className:le?"row mt-5":"d-flex flex-column align-items-center mt-5",children:D.map(R=>e.jsx("div",{className:le?"col-6 col-sm-6 col-md-4 mb-4":"col-12 col-sm-6 col-md-6 mb-4",children:e.jsx("div",{className:"card py-4  shadow-sm text-center bg-dark bg-opacity-50  rounded-4",children:e.jsxs("div",{className:"position-relative",children:[R.alerta&&!R.captura&&e.jsx("div",{onClick:()=>o(!t),children:t?e.jsx("div",{className:"position-absolute top-1  start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-exclamation-triangle-fill me-2 text-white titilar fs-5 shadow-sm "}),"Evadido ",R.date," "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-redUi1   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-exclamation-triangle-fill fs-5 mx-1 text-white titilar "})})}),R.prioridad===5&&e.jsx("div",{onClick:()=>c(!n),children:n?e.jsx("div",{className:"position-absolute top-1 bg-greenMui start-50 translate-middle text-center d-flex justify-content-center align-items-center p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark fw-semibold text-white",children:[e.jsx("i",{className:"bi bi-cash-coin fs-5 mx-2 text-white titilar"}),"Monto : $"," ",R.montoRecompensa?R.montoRecompensa.toLocaleString("es-AR"):"Sin datos"]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-greenMui p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-cash-coin fs-5 mx-1 text-white"})})}),R.paradero&&e.jsx("div",{onClick:()=>r(!s),children:s?e.jsx("div",{className:"position-absolute top-1 bg-blueMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-search fs-5 mx-2 text-white  "}),"Paradero "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-blueMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-search fs-5 mx-1 text-white "})})}),R.prioridad===4&&e.jsx("div",{onClick:()=>l(!i),children:i?e.jsx("div",{className:"position-absolute top-1 bg-yellowMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:"bi bi-star-fill fs-5 mx-2 text-white "}),"Prioritaria"]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-yellowMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-star-fill fs-5 mx-1 text-white "})})}),R.captura&&e.jsxs("div",{className:"captura-cinta d-flex flex-column flex-md-row justify-content-between align-items-center p-2",style:{maxWidth:"100%",cursor:"pointer"},onClick:()=>T(R),children:[e.jsx("span",{className:"text-white fw-bold",children:"Capturado"}),e.jsx("button",{className:"btn btn-link p-0 text-white ms-md-2 mt-2 mt-md-0",onClick:X=>{X.stopPropagation(),T(R)},children:"Ver Detalles"})]}),e.jsx("div",{}),e.jsx("img",{src:R.base64&&R.base64.trim()!==""&&R.base64.trim()!=="null"?R.base64:De,className:`card-img-top img-fluid  ${R.captura?"grayscale":""}`,alt:R.nombre_apellido||"Imagen no disponible",loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"cover"},onClick:()=>I(R)}),e.jsx("h5",{className:"card-title text-white text-capitalize mt-4",children:R.nombre_apellido}),e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-2 mt-3",children:[e.jsx("button",{onClick:()=>I(R),className:"btn btn-outline-light bg-dark bg-opacity-50 d-flex align-items-center justify-content-center rounded-circle",style:{width:"50px",height:"50px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Ver detalles",children:e.jsx("i",{className:"bi bi-eye fs-4"})}),e.jsx(vr,{informeId:R.id}),e.jsx(yr,{informeId:R.id,objeto:R})]})]})})},R.id))}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4",children:[u>1&&e.jsx("button",{className:"btn btn rounded-pill shadow-sm text-center bg-dark bg-opacity-50 rounded-4 shadow-lg text-white",onClick:J,children:e.jsx("i",{className:"bi bi-arrow-left fw-semibold fs-3 titilar"})}),e.jsxs("span",{className:"fs-6 mx-3  text-light",children:["Página ",u," de ",j]}),u<j&&e.jsx("button",{className:"btn rounded-pill shadow-sm text-center bg-dark bg-opacity-50 rounded-4 shadow-lg text-white ",onClick:Q,children:e.jsx("i",{className:"bi bi-arrow-right fw-semibold fs-3 titilar"})})]})]}),e.jsx(jr,{show:S,datos:m,onClose:Z}),e.jsx(fr,{show:C,datos:m,onClose:se})]})},Cr=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Recompensa - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(ye,{Promp:"Geleria Buscados SF ",Promp2:"bi bi-people-fill  fs-4 "})}),e.jsx(wr,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},Sr=()=>e.jsx(e.Fragment,{children:e.jsx(Cr,{})});es.register(ss,as,ts,$s,is,rs,Ts,ls,ns);const kr=(s,r)=>{const t=parseInt(s.replace("#",""),16),o=Math.max((t>>16)-r,0),i=Math.max((t>>8&255)-r,0),l=Math.max((t&255)-r,0);return`#${(o<<16|i<<8|l).toString(16).padStart(6,"0")}`},_r=({totalAutos:s,totalMotos:r,totalCuatriciclos:t,totalCamionetas:o,totalCamiones:i,totalColectivos:l,totalBicicletas:n,totalTractores:c,totalAmbulancias:p,totalPoliciales:b,totalBomberos:u})=>{const[g,j]=a.useState("bar"),x=["#03dac6","#ffef62","#f73378","#2196f3","#7c4dff","#00e676","#ff9100","#ff1744","#00b0ff","#cddc39","#8d6e63"],h=[{label:"Autos",value:s},{label:"Motos",value:r},{label:"Cuatriciclos",value:t},{label:"Camionetas",value:o},{label:"Camiones",value:i},{label:"Colectivos",value:l},{label:"Bicicletas",value:n},{label:"Tractores",value:c},{label:"Ambulancias",value:p},{label:"Policiales",value:b},{label:"Bomberos",value:u}].filter(C=>C.value>0),m={labels:h.map(C=>C.label),datasets:[{label:"Vehículos por tipo",data:h.map(C=>C.value),backgroundColor:x.slice(0,h.length),borderColor:x.slice(0,h.length).map(C=>kr(C,40)),borderWidth:1}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff"}},title:{display:!0,text:"Vehículos por Tipo",color:"#ffffff",font:{size:20}},tooltip:{bodyColor:"#ffffff",titleColor:"#ffffff"}},scales:g==="pie"||g==="doughnut"?{}:{x:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.2)"}},y:{beginAtZero:!0,ticks:{color:"#ffffff",stepSize:1},grid:{color:"rgba(255, 255, 255, 0.2)"}}}};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-center my-5 text-light",children:"Vehículos por Tipo"}),e.jsx("div",{className:"row justify-content-center mb-4",children:e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"input-group input-group-sm shadow-sm",children:[e.jsx("span",{className:"input-group-text bg-dark bg-opacity-50 text-light",children:"Tipo de gráfico"}),e.jsxs("select",{className:"form-select text-center",onChange:C=>j(C.target.value),value:g,children:[e.jsx("option",{value:"bar",children:"Barra"}),e.jsx("option",{value:"line",children:"Línea"}),e.jsx("option",{value:"pie",children:"Pastel"}),e.jsx("option",{value:"doughnut",children:"Doughnut"}),e.jsx("option",{value:"scatter",children:"Dispersión"})]})]})})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10",style:{height:"400px"},children:g==="scatter"?e.jsx(Bs,{data:m,options:f}):g==="bar"?e.jsx(os,{data:m,options:f}):g==="line"?e.jsx(Ge,{data:m,options:f}):g==="pie"?e.jsx(cs,{data:m,options:f}):g==="doughnut"?e.jsx(ds,{data:m,options:f}):null})})]})},Er=({title:s="app",ImagenDash:r="/gif/dash.gif"})=>e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center  mt-5 text-light",children:[e.jsxs("span",{className:"display-4 mb-2",children:["¡Bienvenido a ",s,"!"]}),e.jsxs("span",{className:"mb-5 ",children:["Este panel de control te permite gestionar ",s,", ver estadísticas y configurar las opciones del sistema."]}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("div",{className:"col-md-6 d-flex flex-column justify-content-center align-items-center mb-4 mb-md-0",children:[e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2",children:"Desde aquí podrás administrar los recursos del sistema de forma fácil y eficiente."})]}),e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-lightbulb  p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2",children:"Ante cualquier inconveniente, no dudes en solicitar asistencia técnica."})]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:r,alt:"Panel de control gráfico",className:"img-fluid p-2 rounded-circle shadow",style:{maxWidth:"300px",height:"auto"}})})]})]}),Fr=({loading:s})=>{const[r,t]=a.useState([]),[o,i]=a.useState([]),l=["ciudad","color","createdAt","dominio","fechaHora","marca","modelo","nroChasis","nroMotor","observaciones","qth","telefono","tipo","titular","carta"],n={ciudad:"Ciudad",color:"Color",createdAt:"Fecha de creación",dominio:"Dominio / Patente",fechaHora:"Fecha y Hora",marca:"Marca",modelo:"Modelo",nroChasis:"Número de Chasis",nroMotor:"Número de Motor",observaciones:"Observaciones",qth:"QTH (Ubicación)",telefono:"Teléfono",tipo:"Tipo",titular:"Titular",carta:"Carta"},c=async()=>{try{const x=(await K(H(P,"db_vehiculos"))).docs.map(d=>({id:d.id,...d.data()}));t(x)}catch(j){console.error("Error al obtener los datos:",j)}},p=j=>{i(x=>x.includes(j)?x.filter(d=>d!==j):[...x,j])},b=()=>{i(l)},u=()=>{i([])},g=()=>{if(r.length===0||o.length===0)return;const j=r.map(h=>{const m={};return o.forEach(f=>{m[n[f]||f]=h[f]}),m}),x=be.json_to_sheet(j),d=be.book_new();be.book_append_sheet(d,x,"Datos Seleccionados"),Le(d,"Datos_Seleccionados.xlsx")};return a.useEffect(()=>{c()},[]),e.jsx(e.Fragment,{children:s?e.jsx(ee,{leyendaSet:"Exportar - Cx2"}):e.jsx("div",{className:"container-lg  mt-5 mt-md-0 text-white",children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center ",children:[e.jsxs("span",{className:"mb-4 display-5",children:["Exportar Datos  ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"mb-5 fw-light",children:"Selecciona los campos que deseas incluir en la exportación."}),e.jsxs("div",{className:"d-flex justify-content-center mb-4 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-light",onClick:b,children:"Seleccionar todos"}),e.jsx("button",{className:"btn btn-outline-light",onClick:u,children:"Limpiar selección"})]}),e.jsx("form",{className:"mb-4 w-100 px-3 ",children:e.jsx("div",{className:"row p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg border border-1",children:l.map(j=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",children:e.jsxs("div",{className:"form-check w-100 d-flex align-items-center",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:j,value:j,onChange:()=>p(j),checked:o.includes(j)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:j,children:n[j]||j})]})},j))})}),o.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn bg-green bg-opacity-50 text-white fw-semibold",onClick:g,children:["Descargar datos seleccionados ",e.jsx("i",{className:"bi bi-file-earmark-arrow-down-fill ms-2"})]})})]})})})},Dr=({data1:s,data2:r})=>{var j;const[t,o]=a.useState(!1),i=()=>o(!0),l=()=>o(!1),[n,c]=a.useState(""),b=(()=>{const x=localStorage.getItem("user");return x?JSON.parse(x):null})(),u=async x=>{if(window.confirm("¿Estás seguro de que deseas eliminar esta persona?"))try{const d=O(P,"db_personas_desactivados",x.id),h=new Date,m=`${h.getDate().toString().padStart(2,"0")}/${(h.getMonth()+1).toString().padStart(2,"0")}/${h.getFullYear().toString().slice(-2)}`;await fe(d,{...x,usuario_baja:b.email||"usuario_desconocido",usuario_baja_fecha:m});const f=O(P,"db_personas",x.id);await xe(f),r(),c("Persona eliminada y copiada a la colección de desactivados."),setTimeout(()=>c(""),3e3)}catch(d){console.error("Error al eliminar persona: ",d),c("Error al eliminar la persona. Inténtalo de nuevo."),setTimeout(()=>c(""),3e3)}},g=x=>{u(x),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-trash3-fill"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("h5",{className:"modal-title ",children:"Eliminar Persona"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(j=s.base64)==null?void 0:j.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-danger  bg-redW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas eliminar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:()=>{g(s)},children:"Confirmar Eliminación"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Pr=({data1:s,data2:r})=>{const[t,o]=a.useState(!1),i=()=>o(!0),l=()=>o(!1),[n,c]=a.useState(),[p,b]=a.useState(s.descripcion_fisica),[u,g]=a.useState(s.documento),[j,x]=a.useState(s.entidad),[d,h]=a.useState(s.motivo_captura),[m,f]=a.useState(s.nombre_apellido),[C,v]=a.useState(s.prioridad),[S,_]=a.useState(s.sexo),[N,y]=a.useState(s.numero_contacto),[w,E]=a.useState(s.base64),[k,F]=a.useState("edicion desde menu de capturas"),[A,L]=a.useState(s.paradero),[U,Y]=a.useState(s.alerta),[q,W]=a.useState(!1),[le,me]=a.useState(!1),[de,ae]=a.useState(!1),B=()=>{const z={nombre_apellido:m,documento:u,sexo:S,descripcion_fisica:p,entidad:j,motivo_captura:d,numero_contacto:N,prioridad:C,alerta:U,paradero:A};return["nombre_apellido","documento","sexo","descripcion_fisica","entidad","motivo_captura","numero_contacto","prioridad","alerta","paradero"].filter(Q=>z[Q]!==s[Q])},te=()=>{W(z=>!z)},ie=()=>{me(z=>!z)},ne=()=>{ae(z=>!z)},oe=z=>{const V=z.target.files[0];if(V){const D=new FileReader;D.onloadend=()=>{E(D.result)},D.readAsDataURL(V)}else alert("Por favor, selecciona un archivo de imagen válido.")},he=async()=>{const z=/^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/;if(!m.trim()){alert("El campo Nombre y Apellido no puede estar vacío.");return}if(!z.test(m)){alert("El campo Nombre y Apellido solo debe contener letras.");return}const V=/^[0-9]+$/;if(!u.trim()){alert("El campo Documento no puede estar vacío.");return}if(!V.test(u)){alert("El campo Documento solo debe contener números.");return}if(u.length<8){alert("El Documento debe tener al menos 8 dígitos.");return}if(!k.trim()){alert("La descripción de las ediciones es obligatoria.");return}const D=O(P,"db_personas",s.id),Q=B();try{c(!0);const J=new Date,I=`${J.getDate().toString().padStart(2,"0")}/${(J.getMonth()+1).toString().padStart(2,"0")}/${J.getFullYear().toString().slice(-2)}`;await re(D,{descripcion_fisica:p,documento:u,entidad:j,motivo_captura:d,nombre_apellido:m,prioridad:C,sexo:S,numero_contacto:N,alerta:U,base64:w,paradero:A,ediciones:k.trim()?[...s.ediciones||[],{motivo:k,usuario:G.email,fecha:I,campos:Q}]:s.ediciones||[]}),r(),alert("Los cambios se han guardado correctamente.")}catch(J){console.error("Error al actualizar la persona: ",J),alert("Error al guardar los cambios. Inténtalo de nuevo.")}c(!1)},$=z=>{const V=parseInt(z.target.value,10);v(V),V===2&&(L(!0),Y(!1)),V===1&&(L(!1),Y(!1)),V===3&&(Y(!0),L(!1)),V===4&&(L(!1),Y(!1))},G=(()=>{const z=localStorage.getItem("user");return z?JSON.parse(z):null})();return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-pen"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header ",children:[" ",e.jsx("img",{src:"img/asistente.gif",alt:"Asistente",style:{width:"60px",height:"60px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border "}),e.jsx("h5",{className:"modal-title mx-4",children:"Asistente de Edición "}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:`col-3 mt-3 d-flex align-items-center ${q?"titilar":""}`,children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:te,children:[e.jsx("img",{src:w||"https://via.placeholder.com/40",alt:(w==null?void 0:w.nombre_apellido)||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:q?"Editando":"Editar"})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:m,onChange:z=>f(z.target.value)}),e.jsx("label",{className:" badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"number",className:"form-control",value:u,onChange:z=>g(z.target.value)}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select text-center",value:S,onChange:z=>_(z.target.value),children:[e.jsx("option",{value:"",children:"Seleccione una Opción"}),e.jsx("option",{value:"masculino",children:"Masculino 👨"}),e.jsx("option",{value:"femenino",children:"Femenino 👩"}),e.jsx("option",{value:"otros",children:"Otros 👭🏻"})]}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Sexo"})]})})]})]}),e.jsxs("div",{className:"btn-group mt-3",role:"group","aria-label":"Basic example",children:[e.jsx("button",{type:"button",className:`btn btn-secondaryM text-white ${de?"titilar":""}`,onClick:ne,children:de?e.jsx(e.Fragment,{children:"Editando Datos de Captura "}):"Datos de Captura"}),e.jsx("button",{type:"button",className:`btn btn-primary text-white ${le?"titilar":""}`,onClick:ie,children:le?e.jsx(e.Fragment,{children:"Editando Descripciones"}):"Descripciones"})]}),q&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Editar Fotografía ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:te})}),e.jsxs("div",{className:"my-3 text-center text-purple",children:[e.jsx("input",{type:"file",className:"form-control",onChange:oe}),w&&e.jsx("img",{src:w,alt:"Imagen previa",className:"img-fluid mt-5",style:{maxWidth:"300px"}})]})]})]}),de&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Datos de la Captura ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:ne})}),e.jsx("span",{className:"badge text-bg-secondaryM text-white me-2 ",children:"Atención "}),e.jsxs("small",{children:["La prioridad ",e.jsx("strong",{children:"modifica el contexto"})," de la captura"]})]}),e.jsxs("div",{className:"form-floating ",children:[e.jsxs("select",{className:"form-select text-center shadow-sm border border-secondaryM mb-3  border-opacity-50 ",value:C,onChange:$,children:[e.jsx("option",{value:"",children:"Seleccione una Opción"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero 🔎"}),e.jsx("option",{value:"3",children:"Evadido 🚨"}),e.jsx("option",{value:"4",children:"Prioridad ⭐"})]}),e.jsx("label",{className:"fw-semibold opacity-75 ms-2",children:"Prioridad"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Entidad que solicita captura"})}),e.jsx("input",{className:"form-control bg-blueW2",value:j,onChange:z=>x(z.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Numero de Contacto Entidad "})}),e.jsx("input",{className:"form-control bg-blueW2",value:N,onChange:z=>y(z.target.value)})]})]}),le&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Descripciones ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:ie})}),e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Descripción Fisica "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:p,onChange:z=>b(z.target.value),style:{minHeight:"160px"}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Motivo Captura "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:d,onChange:z=>h(z.target.value),style:{minHeight:"150px"}})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:l,children:e.jsx("i",{className:"bi bi-x-circle"})}),e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle",onClick:he,disabled:n,children:n?e.jsx("i",{className:"bi bi-floppy2 titilar"}):e.jsx("i",{className:"bi bi-floppy2"})})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Ar=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1),[n,c]=a.useState(""),[p,b]=a.useState(!1),u=()=>l(!0),g=()=>l(!1),j=()=>{o([])},d=(()=>{const m=localStorage.getItem("user");return m?JSON.parse(m):null})(),h=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas copiar estas personas a la colección de desactivados?"))){b(!0);try{const C=r.filter(v=>s.includes(v.id)).map(async v=>{const S=H(P,"db_personas_desactivados"),_=new Date,N=`${_.getDate().toString().padStart(2,"0")}/${(_.getMonth()+1).toString().padStart(2,"0")}/${_.getFullYear().toString().slice(-2)}`;await Ee(S,{...v,usuario_baja:(d==null?void 0:d.email)||"usuario_desconocido",usuario_baja_fecha:N});const y=O(P,"db_personas",v.id);await xe(y)});await Promise.all(C),c("Personas copiadas a la colección de desactivados y eliminadas de la colección original."),t(),j()}catch(f){console.error("Error al eliminar personas:",f),c("Hubo un error al copiar o eliminar algunas personas.")}setTimeout(()=>c(""),3e3),b(!1),g()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:u,disabled:p,children:e.jsx("i",{className:"bi bi-trash3-fill"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Eliminar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:g})]}),e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-redW p-2 rounded-pill text-secondaryMuiRed fw-bold",children:["Se eliminarán ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(m=>s.includes(m.id)).map(m=>{var f;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(f=m.base64)==null?void 0:f.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),m.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(C=>C.filter(v=>v!==m.id)),title:"Quitar de la selección"})]},m.id)})}),e.jsxs("p",{className:"text-danger text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas eliminar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:g,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:h,disabled:p,children:p?"Eliminando...":"Confirmar Eliminación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"}),n&&e.jsx("div",{className:"alert alert-success mt-2",children:n})]})},Ys=({Date1:s,Date2:r,setSelectedDocs:t,onCerrar:o,color:i})=>{const l=n=>{if(!n)return"❓";switch(n.toLowerCase()){case"auto":return"🚗";case"moto":return"🏍️";case"cuatriciclo":return"🛵";case"camioneta":return"🚙";case"camion":return"🚚";case"colectivo":return"🚌";case"bicicleta":return"🚲";case"tractor":return"🚜";case"ambulancia":return"🚑";case"policial":return"🚓";case"bomberos":return"🔥";default:return"❓"}};return e.jsxs("div",{className:`card bg-${i} shadow my-4 position-relative text-dark d-flex align-items-start gap-3 p-4 card text-center p-2 bg-dark bg-opacity-75 rounded-4 shadow-lg`,style:{overflow:"visible"},children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:o}),e.jsx("img",{src:"img/Perfiles/9.png",alt:"Asistente",className:" position-absolute",style:{width:"120px",height:"200px",objectFit:"contain",top:"-30px",left:"-20px"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:e.jsx("strong",{children:"Asistente de Selección"})}),e.jsxs("p",{className:"mb-3",children:["Vehículos Seleccionadas: ",e.jsxs("strong",{children:[s.length," 🚗"]})]}),e.jsx("strong",{children:s.length>0?e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-start p-2 rounded mb-3  ",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(n=>s.includes(n.id)).map(n=>e.jsxs("div",{className:"badge text-dark shadow d-flex align-items-center p-2 mx-2 position-relative bg-light bg-opacity-50 m-1",style:{fontSize:"0.75rem"},children:[l(n.tipo)," / ",n.dominio||"Sin Dominio",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>t(c=>c.filter(p=>p!==n.id)),title:"Quitar de la selección"})]},n.id))}):e.jsx("span",{className:"text-danger",children:"Ninguna"})})]})]})},Qs=({orden:s,setOrden:r})=>e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Ordenar alfabéticamente",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"asc",children:"Orden A-Z"}),e.jsx("option",{value:"desc",children:"Orden Z-A"})]}),e.jsxs("label",{children:["Ordenar ",e.jsx("i",{className:"bi bi-alphabet"})]})]}),Ir=({searchTerm:s,setSearchTerm:r})=>e.jsxs("div",{className:"form-floating mb-3 position-relative  ",children:[e.jsx("input",{type:"text",className:"form-control  shadow-sm pe-5 bg-dark bg-opacity-50 text-light",placeholder:"Buscar por dominio",value:s,onChange:t=>r(t.target.value)}),e.jsx("label",{children:"Buscar por Dominio"}),s&&e.jsx("button",{type:"button",className:"btn btn-link position-absolute top-50 end-0 translate-middle-y pe-3 ",onClick:()=>r(""),"aria-label":"Cancelar búsqueda",children:e.jsx("i",{className:"bi bi-x-circle text-light "})})]}),Mr=({tipoFilter:s,setTipoFilter:r})=>e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Seleccione tipo de vehículo",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todos los Tipos"}),e.jsx("option",{value:"auto",children:"Auto 🚗"}),e.jsx("option",{value:"moto",children:"Moto 🏍️"}),e.jsx("option",{value:"cuatriciclo",children:"Cuatriciclo 🛺"}),e.jsx("option",{value:"camioneta",children:"Camioneta 🚙"}),e.jsx("option",{value:"camion",children:"Camión 🚚"}),e.jsx("option",{value:"colectivo",children:"Colectivo 🚌"}),e.jsx("option",{value:"bicicleta",children:"Bicicleta 🚲"}),e.jsx("option",{value:"tractor",children:"Tractor 🚜"}),e.jsx("option",{value:"ambulancia",children:"Ambulancia 🚑"}),e.jsx("option",{value:"policial",children:"Policial 🚓"}),e.jsx("option",{value:"bomberos",children:"Bomberos 🚒"})]}),e.jsx("label",{children:"Seleccione un Tipo"})]}),Lr=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState(!0),[p,b]=a.useState(""),[u,g]=a.useState(""),[j,x]=a.useState(!0),[d,h]=a.useState("asc"),[m,f]=a.useState(""),C=H(P,"db_vehiculos"),v=async()=>{c(!0);try{const w=(await K(C)).docs.map(E=>({...E.data(),id:E.id}));console.error(w),r(w),o(w)}catch(y){console.error("Error al obtener vehículos: ",y)}finally{c(!1)}},S=y=>y.sort((w,E)=>d==="asc"?(w.dominio||"").localeCompare(E.dominio||""):(E.dominio||"").localeCompare(w.dominio||""));a.useEffect(()=>{v()},[]),a.useEffect(()=>{const y=s.filter(E=>E.dominio&&E.dominio.toLowerCase().includes(p.toLowerCase())||E.marca&&E.marca.toLowerCase().includes(p.toLowerCase())).filter(E=>u?E.prioridad===parseInt(u,10):!0).filter(E=>m?E.tipo.toLowerCase()===m.toLowerCase():!0),w=S(y);o(w)},[p,s,u,m,d]),a.useMemo(()=>t.filter(y=>i.includes(y.id)),[i,t]);const _=y=>{l(w=>w.includes(y)?w.filter(E=>E!==y):[...w,y])},N=()=>{if(i.length===t.length)l([]);else{const y=t.map(w=>w.id);l(y)}};return e.jsxs("div",{className:"container-lg text-white",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center my-5 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado de Vehículos"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(Ir,{searchTerm:p,setSearchTerm:b})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(Mr,{tipoFilter:m,setTipoFilter:f})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Qs,{orden:d,setOrden:h})})]}),n?e.jsx(ee,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Ar,{data1:i,data2:s,dataRefresh:v,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>l([])})]}),j&&e.jsx(Ys,{Date1:i,Date2:s,setSelectedDocs:l,onCerrar:()=>x(!1),color:"blueW2"}),!j&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>x(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"})," ",e.jsxs("small",{className:"text-light",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-light",children:[i.length," 🚗"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small rounded-pill",children:[e.jsx("thead",{className:"table-info",children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:N})}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Dominio"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Tipo"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Marca"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Modelo"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(y=>e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(y.id),onChange:()=>_(y.id)})}),e.jsx("td",{children:e.jsx("span",{className:"text-capitalize",children:y.dominio})}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:y.tipo}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:y.marca}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:y.modelo}),e.jsxs("td",{children:[e.jsx(Pr,{data1:y,data2:v}),e.jsx(Dr,{data1:y,data2:v})]}),e.jsx("td",{})]},y.id))})]})})]})})]})},Rr=({prioridadFilter:s,setPrioridadFilter:r})=>e.jsxs("div",{className:"form-floating mb-3  ",children:[e.jsxs("select",{className:"form-select shadow-sm ","aria-label":"Floating label select example",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todas las Prioridades"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero 🔎"}),e.jsx("option",{value:"3",children:"Evadido 🚨"}),e.jsx("option",{value:"4",children:"Prioritaria ⭐"})]}),e.jsx("label",{children:"Seleccione una Prioridad"})]}),zr=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:o})=>{const[i,l]=a.useState(!1),[n,c]=a.useState(!1),p=()=>l(!0),b=()=>l(!1),u=()=>{o([])},j=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),x=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¿Estás seguro de que deseas recuperar estas personas?"))){c(!0);try{const m=r.filter(f=>s.includes(f.id)).map(async f=>{const C=O(P,"db_personas",f.id),v=new Date,S=`${v.getDate().toString().padStart(2,"0")}/${(v.getMonth()+1).toString().padStart(2,"0")}/${v.getFullYear().toString().slice(-2)}`;await fe(C,{...f,recuperado:[...f.recuperado||[],{motivo:"recuperado manual",usuario:j.email,fecha:S,datos_resguardo_baja_previa:[{usuario_baja:f.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:f.usuario_baja_fecha||"fecha_no_disponible"}]}]});const _=O(P,"db_personas_desactivados",f.id);await xe(_)});await Promise.all(m),alert("Personas recuperadas y eliminadas de la colección de desactivados."),t(),u()}catch(h){console.error("Error al recuperar personas:",h),alert("Hubo un error al recuperar o eliminar algunas personas.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:p,disabled:n,children:e.jsx("i",{className:"bi bi-recycle"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Recuperar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-teal border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-greenW p-2 rounded-pill text-primary fw-bold",children:["Se reactivan ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var h;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(h=d.base64)==null?void 0:h.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>o(m=>m.filter(f=>f!==d.id)),title:"Quitar de la selección"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¿Estás seguro que deseas reactivar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:x,disabled:n,children:n?"Recuperando...":"Confirmar Recuperación"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},$r=({data1:s,data2:r})=>{var u;const[t,o]=a.useState(!1),i=()=>o(!0),l=()=>o(!1),c=(()=>{const g=localStorage.getItem("user");return g?JSON.parse(g):null})(),p=async g=>{if(window.confirm("¿Estás seguro de que deseas recuperar esta persona?"))try{const j=O(P,"db_personas",g.id),x=new Date,d=`${x.getDate().toString().padStart(2,"0")}/${(x.getMonth()+1).toString().padStart(2,"0")}/${x.getFullYear().toString().slice(-2)}`,h="campos_modificados_aqui";await fe(j,{...g,recuperado:[...g.recuperado||[],{motivo:"recuperado manual",usuario:c.email,fecha:d,datos_resguardo_baja_previa:[{usuario_baja:g.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:g.usuario_baja_fecha||"fecha_no_disponible"}]}]});const m=O(P,"db_personas_desactivados",g.id);await xe(m),r(),alert("Persona recuperada y copiada a la colección de capturas.")}catch(j){console.error("Error al eliminar persona: ",j)}},b=g=>{p(g),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-recycle"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Recuperar Persona"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("hr",{className:"border border-teal  border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(u=s.base64)==null?void 0:u.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-primary bg-greenW2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¿Estás seguro que deseas recuperar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:()=>b(s),children:"Confirmar Recuperación"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Tr=()=>{const[s,r]=a.useState([]),[t,o]=a.useState([]),[i,l]=a.useState([]),[n,c]=a.useState(!0),[p,b]=a.useState(""),[u,g]=a.useState(""),[j,x]=a.useState(!0),[d,h]=a.useState("asc"),m=H(P,"db_personas_desactivados"),f=async()=>{c(!0);try{const y=(await K(m)).docs.map(w=>({...w.data(),id:w.id}));r(y),o(y)}catch(N){console.error("Error al obtener personas: ",N)}finally{c(!1)}},C=N=>N.sort((y,w)=>d==="asc"?y.nombre_apellido.localeCompare(w.nombre_apellido):w.nombre_apellido.localeCompare(y.nombre_apellido));a.useEffect(()=>{f()},[]),a.useEffect(()=>{const N=s.filter(w=>w.nombre_apellido&&w.nombre_apellido.toLowerCase().includes(p.toLowerCase())||w.documento&&w.documento.includes(p)).filter(w=>u?w.prioridad===parseInt(u,10):!0),y=C(N);o(y)},[p,s,u,d]);const v=N=>{l(y=>y.includes(N)?y.filter(w=>w!==N):[...y,N])},S=()=>{if(i.length===t.length)l([]);else{const N=t.map(y=>y.id);l(N)}},_=N=>{switch(Number(N)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero 🔎"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido 🚨"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ⭐"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg text-white ",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center mb-5 animate__animated animate__bounce mt-sm-0  ",children:"Listado de Capturas  Desactivadas"}),e.jsx("div",{className:"col-12 col-sm-6"}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(Rr,{prioridadFilter:u,setPrioridadFilter:g})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Qs,{orden:d,setOrden:h})})]}),n?e.jsx(ee,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2  mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(zr,{data1:i,data2:s,dataRefresh:f,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close  btn-close-white mt-1","aria-label":"Close",onClick:()=>l([])})]}),j&&e.jsx(Ys,{Date1:i,Date2:s,setSelectedDocs:l,onCerrar:()=>x(!1),color:"blueW2"}),!j&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>x(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-white"})," ",e.jsxs("small",{className:"text-white",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-white",children:[i.length," 🧑"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:S})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(N=>{var y;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(N.id),onChange:()=>v(N.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((y=N.base64)==null?void 0:y.trim())||"https://via.placeholder.com/40",alt:N.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize",children:N.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:N.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:_(N.prioridad)}),e.jsx("td",{children:e.jsx($r,{data1:N,data2:f})}),e.jsx("td",{})]},N.id)})})]})})]})})]})},Br=()=>{const[s,r]=a.useState("dashboard"),[t,o]=a.useState([]),[i,l]=a.useState(!1),n=localStorage.getItem("user");n&&JSON.parse(n);const c=async()=>{try{l(!0);const _=await K(H(P,"db_vehiculos")),N=[];_.forEach(y=>{N.push({id:y.id,...y.data()})}),o(N)}catch(_){console.error("Error al obtener los documentos: ",_)}finally{l(!1)}};a.useEffect(()=>{c()},[]);const p=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="auto"}).length,b=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="moto"}).length,u=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="cuatriciclo"}).length,g=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="camioneta"}).length,j=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="camion"}).length,x=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="colectivo"}).length,d=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="bicicleta"}).length,h=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="tractor"}).length,m=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="ambulancia"}).length,f=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="policial"}).length,C=t.filter(_=>{var N;return((N=_.tipo)==null?void 0:N.toLowerCase())==="bomberos"}).length,v=t.length,S=()=>{switch(s){case"dashboard":return e.jsx(Er,{title:"vehículos",ImagenDash:"/gif/dash6.gif"});case"reportes":return e.jsx(Fr,{loading:i});case"graficos":return e.jsx(_r,{totalAutos:p,totalMotos:b,totalCuatriciclos:u,totalCamionetas:g,totalCamiones:j,totalColectivos:x,totalBicicletas:d,totalTractores:h,totalAmbulancias:m,totalPoliciales:f,totalBomberos:C});case"Desactivados":return e.jsx(Tr,{});case"capturas":return e.jsx(Lr,{});default:return e.jsx("p",{children:"Selecciona una opción del menú."})}};return e.jsx("div",{className:"container-lg",children:e.jsxs("div",{className:"row ",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-3 ",children:[e.jsx("div",{className:"text-center mb-4 text-light",children:e.jsxs("span",{className:"bg-dark bg-opacity-25 p-2 px-5 fs-6 rounded-5 ",children:[" ",e.jsx("i",{className:"mx-2 bi bi-menu-button-fill"}),"Menú Panel"]})}),e.jsxs("div",{className:"list-group p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenido"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="reportes"?"active":""}`,onClick:()=>r("reportes"),children:"Exportación"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="graficos"?"active":""}`,onClick:()=>r("graficos"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Graficos",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-teal rounded-pill",children:"Nuevo"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="notificaciones"?"active":""}`,onClick:()=>r("notificaciones"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Notificaciones",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-primaryMuiBlue rounded-pill",children:"Administrar"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="capturas"?"active":""}`,onClick:()=>r("capturas"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Vehiculos",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",v]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="Desactivados"?"active":""}`,onClick:()=>r("Desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Desactivados",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-cyan rounded-pill",children:"Reactivar"})]})})]})]}),e.jsx("div",{className:"col-12 col-md-8 col-lg-9",children:S()})]})})},Or=()=>{const[s,r]=a.useState(!0),[t,o]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(ee,{leyendaSet:"Panel de Control"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(Ne,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(ye,{Promp:"Panel de Control ",Promp2:"bi bi-car-front-fill fs-4 "}),"   "]}),e.jsx(Br,{})]}),e.jsx(pe,{}),e.jsx(ve,{setThemeBackgroundColor:o})]})})},Ur=()=>e.jsx(e.Fragment,{children:e.jsx(Or,{})}),Vr=()=>e.jsx(ca,{children:e.jsx(ra,{children:e.jsx("main",{children:e.jsxs(la,{children:[e.jsx(ue,{path:"/",element:e.jsx(ba,{})}),e.jsx(ue,{path:"/about",element:e.jsx(pa,{})}),e.jsx(ue,{path:"/dashboard",element:e.jsx(je,{children:e.jsx(za,{})})}),e.jsx(ue,{path:"/galeriacx2",element:e.jsx(je,{children:e.jsx(qa,{})})}),e.jsx(ue,{path:"/validaringreso10Bis",element:e.jsx(je,{children:e.jsx(Za,{})})}),e.jsx(ue,{path:"/validarsalida10Bis",element:e.jsx(je,{children:e.jsx(st,{})})}),e.jsx(ue,{path:"/notificaciones",element:e.jsx(je,{children:e.jsx(it,{})})}),e.jsx(ue,{path:"/FormularioPageDev2",element:e.jsx(je,{children:e.jsx(ot,{})})}),e.jsx(ue,{path:"/FormularioVehiculo",element:e.jsx(je,{children:e.jsx(cr,{})})}),e.jsx(ue,{path:"/Formulariobuscados",element:e.jsx(je,{children:e.jsx(gr,{})})}),e.jsx(ue,{path:"/GaleriaBuscados",element:e.jsx(je,{children:e.jsx(Sr,{})})}),e.jsx(ue,{path:"/GaleriaVehiculos",element:e.jsx(je,{children:e.jsx(ur,{})})}),e.jsx(ue,{path:"/panelcontrol10dev2",element:e.jsx(je,{children:e.jsx(yi,{})})}),e.jsx(ue,{path:"/panelcontroldev2",element:e.jsx(je,{children:e.jsx(Ot,{})})}),e.jsx(ue,{path:"/panelcontrolvehiculos",element:e.jsx(je,{children:e.jsx(Ur,{})})}),e.jsx(ue,{path:"/informes",element:e.jsx(je,{children:e.jsx($i,{})})}),e.jsx(ue,{path:"/informespost",element:e.jsx(je,{children:e.jsx(Yi,{})})}),e.jsx(ue,{path:"/denuncia",element:e.jsx(je,{children:e.jsx(_i,{})})}),e.jsx(ue,{path:"/denunciasimple",element:e.jsx(je,{children:e.jsx(lr,{})})}),e.jsx(ue,{path:"*",element:e.jsx(ga,{})})]})})})});na(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(Vr,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(s=>console.log("SW registrado:",s)).catch(s=>console.error("Error SW:",s))});
